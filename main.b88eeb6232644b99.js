(self.webpackChunkwheel_game=self.webpackChunkwheel_game||[]).push([[179],{804:(Ye,yt,_e)=>{"use strict";function q(d){return"function"==typeof d}function Ce(d){const c=d(f=>{Error.call(f),f.stack=(new Error).stack});return c.prototype=Object.create(Error.prototype),c.prototype.constructor=c,c}const Me=Ce(d=>function(c){d(this),this.message=c?`${c.length} errors occurred during unsubscription:\n${c.map((f,p)=>`${p+1}) ${f.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=c});function Oe(d,u){if(d){const c=d.indexOf(u);0<=c&&d.splice(c,1)}}class Se{constructor(u){this.initialTeardown=u,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let u;if(!this.closed){this.closed=!0;const{_parentage:c}=this;if(c)if(this._parentage=null,Array.isArray(c))for(const g of c)g.remove(this);else c.remove(this);const{initialTeardown:f}=this;if(q(f))try{f()}catch(g){u=g instanceof Me?g.errors:[g]}const{_finalizers:p}=this;if(p){this._finalizers=null;for(const g of p)try{ue(g)}catch(_){u=u??[],_ instanceof Me?u=[...u,..._.errors]:u.push(_)}}if(u)throw new Me(u)}}add(u){var c;if(u&&u!==this)if(this.closed)ue(u);else{if(u instanceof Se){if(u.closed||u._hasParent(this))return;u._addParent(this)}(this._finalizers=null!==(c=this._finalizers)&&void 0!==c?c:[]).push(u)}}_hasParent(u){const{_parentage:c}=this;return c===u||Array.isArray(c)&&c.includes(u)}_addParent(u){const{_parentage:c}=this;this._parentage=Array.isArray(c)?(c.push(u),c):c?[c,u]:u}_removeParent(u){const{_parentage:c}=this;c===u?this._parentage=null:Array.isArray(c)&&Oe(c,u)}remove(u){const{_finalizers:c}=this;c&&Oe(c,u),u instanceof Se&&u._removeParent(this)}}Se.EMPTY=(()=>{const d=new Se;return d.closed=!0,d})();const De=Se.EMPTY;function Ee(d){return d instanceof Se||d&&"closed"in d&&q(d.remove)&&q(d.add)&&q(d.unsubscribe)}function ue(d){q(d)?d():d.unsubscribe()}const de={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Ue={setTimeout(d,u,...c){const{delegate:f}=Ue;return f?.setTimeout?f.setTimeout(d,u,...c):setTimeout(d,u,...c)},clearTimeout(d){const{delegate:u}=Ue;return(u?.clearTimeout||clearTimeout)(d)},delegate:void 0};function ve(d){Ue.setTimeout(()=>{const{onUnhandledError:u}=de;if(!u)throw d;u(d)})}function ze(){}const Ve=Te("C",void 0,void 0);function Te(d,u,c){return{kind:d,value:u,error:c}}let B=null;function J(d){if(de.useDeprecatedSynchronousErrorHandling){const u=!B;if(u&&(B={errorThrown:!1,error:null}),d(),u){const{errorThrown:c,error:f}=B;if(B=null,c)throw f}}else d()}class pe extends Se{constructor(u){super(),this.isStopped=!1,u?(this.destination=u,Ee(u)&&u.add(this)):this.destination=It}static create(u,c,f){return new Ae(u,c,f)}next(u){this.isStopped?rt(function ke(d){return Te("N",d,void 0)}(u),this):this._next(u)}error(u){this.isStopped?rt(function se(d){return Te("E",void 0,d)}(u),this):(this.isStopped=!0,this._error(u))}complete(){this.isStopped?rt(Ve,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(u){this.destination.next(u)}_error(u){try{this.destination.error(u)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const xe=Function.prototype.bind;function ye(d,u){return xe.call(d,u)}class ${constructor(u){this.partialObserver=u}next(u){const{partialObserver:c}=this;if(c.next)try{c.next(u)}catch(f){U(f)}}error(u){const{partialObserver:c}=this;if(c.error)try{c.error(u)}catch(f){U(f)}else U(u)}complete(){const{partialObserver:u}=this;if(u.complete)try{u.complete()}catch(c){U(c)}}}class Ae extends pe{constructor(u,c,f){let p;if(super(),q(u)||!u)p={next:u??void 0,error:c??void 0,complete:f??void 0};else{let g;this&&de.useDeprecatedNextContext?(g=Object.create(u),g.unsubscribe=()=>this.unsubscribe(),p={next:u.next&&ye(u.next,g),error:u.error&&ye(u.error,g),complete:u.complete&&ye(u.complete,g)}):p=u}this.destination=new $(p)}}function U(d){de.useDeprecatedSynchronousErrorHandling?function ee(d){de.useDeprecatedSynchronousErrorHandling&&B&&(B.errorThrown=!0,B.error=d)}(d):ve(d)}function rt(d,u){const{onStoppedNotification:c}=de;c&&Ue.setTimeout(()=>c(d,u))}const It={closed:!0,next:ze,error:function pt(d){throw d},complete:ze},ut="function"==typeof Symbol&&Symbol.observable||"@@observable";function he(d){return d}function k(d){return 0===d.length?he:1===d.length?d[0]:function(c){return d.reduce((f,p)=>p(f),c)}}let O=(()=>{class d{constructor(c){c&&(this._subscribe=c)}lift(c){const f=new d;return f.source=this,f.operator=c,f}subscribe(c,f,p){const g=function V(d){return d&&d instanceof pe||function Y(d){return d&&q(d.next)&&q(d.error)&&q(d.complete)}(d)&&Ee(d)}(c)?c:new Ae(c,f,p);return J(()=>{const{operator:_,source:y}=this;g.add(_?_.call(g,y):y?this._subscribe(g):this._trySubscribe(g))}),g}_trySubscribe(c){try{return this._subscribe(c)}catch(f){c.error(f)}}forEach(c,f){return new(f=Z(f))((p,g)=>{const _=new Ae({next:y=>{try{c(y)}catch(v){g(v),_.unsubscribe()}},error:g,complete:p});this.subscribe(_)})}_subscribe(c){var f;return null===(f=this.source)||void 0===f?void 0:f.subscribe(c)}[ut](){return this}pipe(...c){return k(c)(this)}toPromise(c){return new(c=Z(c))((f,p)=>{let g;this.subscribe(_=>g=_,_=>p(_),()=>f(g))})}}return d.create=u=>new d(u),d})();function Z(d){var u;return null!==(u=d??de.Promise)&&void 0!==u?u:Promise}const W=Ce(d=>function(){d(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let ne=(()=>{class d extends O{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(c){const f=new fe(this,this);return f.operator=c,f}_throwIfClosed(){if(this.closed)throw new W}next(c){J(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const f of this.currentObservers)f.next(c)}})}error(c){J(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=c;const{observers:f}=this;for(;f.length;)f.shift().error(c)}})}complete(){J(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:c}=this;for(;c.length;)c.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var c;return(null===(c=this.observers)||void 0===c?void 0:c.length)>0}_trySubscribe(c){return this._throwIfClosed(),super._trySubscribe(c)}_subscribe(c){return this._throwIfClosed(),this._checkFinalizedStatuses(c),this._innerSubscribe(c)}_innerSubscribe(c){const{hasError:f,isStopped:p,observers:g}=this;return f||p?De:(this.currentObservers=null,g.push(c),new Se(()=>{this.currentObservers=null,Oe(g,c)}))}_checkFinalizedStatuses(c){const{hasError:f,thrownError:p,isStopped:g}=this;f?c.error(p):g&&c.complete()}asObservable(){const c=new O;return c.source=this,c}}return d.create=(u,c)=>new fe(u,c),d})();class fe extends ne{constructor(u,c){super(),this.destination=u,this.source=c}next(u){var c,f;null===(f=null===(c=this.destination)||void 0===c?void 0:c.next)||void 0===f||f.call(c,u)}error(u){var c,f;null===(f=null===(c=this.destination)||void 0===c?void 0:c.error)||void 0===f||f.call(c,u)}complete(){var u,c;null===(c=null===(u=this.destination)||void 0===u?void 0:u.complete)||void 0===c||c.call(u)}_subscribe(u){var c,f;return null!==(f=null===(c=this.source)||void 0===c?void 0:c.subscribe(u))&&void 0!==f?f:De}}function me(d){return q(d?.lift)}function oe(d){return u=>{if(me(u))return u.lift(function(c){try{return d(c,this)}catch(f){this.error(f)}});throw new TypeError("Unable to lift unknown Observable type")}}function ge(d,u,c,f,p){return new He(d,u,c,f,p)}class He extends pe{constructor(u,c,f,p,g,_){super(u),this.onFinalize=g,this.shouldUnsubscribe=_,this._next=c?function(y){try{c(y)}catch(v){u.error(v)}}:super._next,this._error=p?function(y){try{p(y)}catch(v){u.error(v)}finally{this.unsubscribe()}}:super._error,this._complete=f?function(){try{f()}catch(y){u.error(y)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var u;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:c}=this;super.unsubscribe(),!c&&(null===(u=this.onFinalize)||void 0===u||u.call(this))}}}function we(d,u){return oe((c,f)=>{let p=0;c.subscribe(ge(f,g=>{f.next(d.call(u,g,p++))}))})}function ci(d){return this instanceof ci?(this.v=d,this):new ci(d)}function ah(d,u,c){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var p,f=c.apply(d,u||[]),g=[];return p={},_("next"),_("throw"),_("return"),p[Symbol.asyncIterator]=function(){return this},p;function _(E){f[E]&&(p[E]=function(T){return new Promise(function(D,S){g.push([E,T,D,S])>1||y(E,T)})})}function y(E,T){try{!function v(E){E.value instanceof ci?Promise.resolve(E.value.v).then(x,w):C(g[0][2],E)}(f[E](T))}catch(D){C(g[0][3],D)}}function x(E){y("next",E)}function w(E){y("throw",E)}function C(E,T){E(T),g.shift(),g.length&&y(g[0][0],g[0][1])}}function Ia(d){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var c,u=d[Symbol.asyncIterator];return u?u.call(d):(d=function lu(d){var u="function"==typeof Symbol&&Symbol.iterator,c=u&&d[u],f=0;if(c)return c.call(d);if(d&&"number"==typeof d.length)return{next:function(){return d&&f>=d.length&&(d=void 0),{value:d&&d[f++],done:!d}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")}(d),c={},f("next"),f("throw"),f("return"),c[Symbol.asyncIterator]=function(){return this},c);function f(g){c[g]=d[g]&&function(_){return new Promise(function(y,v){!function p(g,_,y,v){Promise.resolve(v).then(function(x){g({value:x,done:y})},_)}(y,v,(_=d[g](_)).done,_.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const Pa=d=>d&&"number"==typeof d.length&&"function"!=typeof d;function as(d){return q(d?.then)}function cn(d){return q(d[ut])}function hu(d){return Symbol.asyncIterator&&q(d?.[Symbol.asyncIterator])}function du(d){return new TypeError(`You provided ${null!==d&&"object"==typeof d?"an invalid object":`'${d}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Us=function lh(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Ra(d){return q(d?.[Us])}function Do(d){return ah(this,arguments,function*(){const c=d.getReader();try{for(;;){const{value:f,done:p}=yield ci(c.read());if(p)return yield ci(void 0);yield yield ci(f)}}finally{c.releaseLock()}})}function Fa(d){return q(d?.getReader)}function hn(d){if(d instanceof O)return d;if(null!=d){if(cn(d))return function uh(d){return new O(u=>{const c=d[ut]();if(q(c.subscribe))return c.subscribe(u);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(d);if(Pa(d))return function ch(d){return new O(u=>{for(let c=0;c<d.length&&!u.closed;c++)u.next(d[c]);u.complete()})}(d);if(as(d))return function fu(d){return new O(u=>{d.then(c=>{u.closed||(u.next(c),u.complete())},c=>u.error(c)).then(null,ve)})}(d);if(hu(d))return Oa(d);if(Ra(d))return function hh(d){return new O(u=>{for(const c of d)if(u.next(c),u.closed)return;u.complete()})}(d);if(Fa(d))return function dh(d){return Oa(Do(d))}(d)}throw du(d)}function Oa(d){return new O(u=>{(function Zp(d,u){var c,f,p,g;return function Aa(d,u,c,f){return new(c||(c=Promise))(function(g,_){function y(w){try{x(f.next(w))}catch(C){_(C)}}function v(w){try{x(f.throw(w))}catch(C){_(C)}}function x(w){w.done?g(w.value):function p(g){return g instanceof c?g:new c(function(_){_(g)})}(w.value).then(y,v)}x((f=f.apply(d,u||[])).next())})}(this,void 0,void 0,function*(){try{for(c=Ia(d);!(f=yield c.next()).done;)if(u.next(f.value),u.closed)return}catch(_){p={error:_}}finally{try{f&&!f.done&&(g=c.return)&&(yield g.call(c))}finally{if(p)throw p.error}}u.complete()})})(d,u).catch(c=>u.error(c))})}function Dn(d,u,c,f=0,p=!1){const g=u.schedule(function(){c(),p?d.add(this.schedule(null,f)):this.unsubscribe()},f);if(d.add(g),!p)return g}function ur(d,u,c=1/0){return q(u)?ur((f,p)=>we((g,_)=>u(f,g,p,_))(hn(d(f,p))),c):("number"==typeof u&&(c=u),oe((f,p)=>function Vs(d,u,c,f,p,g,_,y){const v=[];let x=0,w=0,C=!1;const E=()=>{C&&!v.length&&!x&&u.complete()},T=S=>x<f?D(S):v.push(S),D=S=>{g&&u.next(S),x++;let A=!1;hn(c(S,w++)).subscribe(ge(u,I=>{p?.(I),g?T(I):u.next(I)},()=>{A=!0},void 0,()=>{if(A)try{for(x--;v.length&&x<f;){const I=v.shift();_?Dn(u,_,()=>D(I)):D(I)}E()}catch(I){u.error(I)}}))};return d.subscribe(ge(u,T,()=>{C=!0,E()})),()=>{y?.()}}(f,p,d,c)))}function Hs(d=1/0){return ur(he,d)}const $n=new O(d=>d.complete());function Qp(d){return d[d.length-1]}function pu(d){return function zP(d){return d&&q(d.schedule)}(Qp(d))?d.pop():void 0}function fx(d,u=0){return oe((c,f)=>{c.subscribe(ge(f,p=>Dn(f,d,()=>f.next(p),u),()=>Dn(f,d,()=>f.complete(),u),p=>Dn(f,d,()=>f.error(p),u)))})}function px(d,u=0){return oe((c,f)=>{f.add(d.schedule(()=>c.subscribe(f),u))})}function gx(d,u){if(!d)throw new Error("Iterable cannot be null");return new O(c=>{Dn(c,u,()=>{const f=d[Symbol.asyncIterator]();Dn(c,u,()=>{f.next().then(p=>{p.done?c.complete():c.next(p.value)})},0,!0)})})}function Ar(d,u){return u?function QP(d,u){if(null!=d){if(cn(d))return function XP(d,u){return hn(d).pipe(px(u),fx(u))}(d,u);if(Pa(d))return function YP(d,u){return new O(c=>{let f=0;return u.schedule(function(){f===d.length?c.complete():(c.next(d[f++]),c.closed||this.schedule())})})}(d,u);if(as(d))return function qP(d,u){return hn(d).pipe(px(u),fx(u))}(d,u);if(hu(d))return gx(d,u);if(Ra(d))return function KP(d,u){return new O(c=>{let f;return Dn(c,u,()=>{f=d[Us](),Dn(c,u,()=>{let p,g;try{({value:p,done:g}=f.next())}catch(_){return void c.error(_)}g?c.complete():c.next(p)},0,!0)}),()=>q(f?.return)&&f.return()})}(d,u);if(Fa(d))return function ZP(d,u){return gx(Do(d),u)}(d,u)}throw du(d)}(d,u):hn(d)}function Jp(d,u,...c){if(!0===u)return void d();if(!1===u)return;const f=new Ae({next:()=>{f.unsubscribe(),d()}});return u(...c).subscribe(f)}function zt(d){for(let u in d)if(d[u]===zt)return u;throw Error("Could not find renamed property on target object.")}function eg(d,u){for(const c in u)u.hasOwnProperty(c)&&!d.hasOwnProperty(c)&&(d[c]=u[c])}function $t(d){if("string"==typeof d)return d;if(Array.isArray(d))return"["+d.map($t).join(", ")+"]";if(null==d)return""+d;if(d.overriddenName)return`${d.overriddenName}`;if(d.name)return`${d.name}`;const u=d.toString();if(null==u)return""+u;const c=u.indexOf("\n");return-1===c?u:u.substring(0,c)}function tg(d,u){return null==d||""===d?null===u?"":u:null==u||""===u?d:d+" "+u}const tR=zt({__forward_ref__:zt});function rg(d){return d.__forward_ref__=rg,d.toString=function(){return $t(this())},d}function ht(d){return ng(d)?d():d}function ng(d){return"function"==typeof d&&d.hasOwnProperty(tR)&&d.__forward_ref__===rg}class je extends Error{constructor(u,c){super(function fh(d,u){return`NG0${Math.abs(d)}${u?": "+u.trim():""}`}(u,c)),this.code=u}}function mt(d){return"string"==typeof d?d:null==d?"":String(d)}function ph(d,u){throw new je(-201,!1)}function In(d,u){null==d&&function Ht(d,u,c,f){throw new Error(`ASSERTION ERROR: ${d}`+(null==f?"":` [Expected=> ${c} ${f} ${u} <=Actual]`))}(u,d,null,"!=")}function Dt(d){return{token:d.token,providedIn:d.providedIn||null,factory:d.factory,value:void 0}}function js(d){return{providers:d.providers||[],imports:d.imports||[]}}function gh(d){return mx(d,mh)||mx(d,yx)}function mx(d,u){return d.hasOwnProperty(u)?d[u]:null}function _x(d){return d&&(d.hasOwnProperty(ig)||d.hasOwnProperty(cR))?d[ig]:null}const mh=zt({\u0275prov:zt}),ig=zt({\u0275inj:zt}),yx=zt({ngInjectableDef:zt}),cR=zt({ngInjectorDef:zt});var ot=(()=>((ot=ot||{})[ot.Default=0]="Default",ot[ot.Host=1]="Host",ot[ot.Self=2]="Self",ot[ot.SkipSelf=4]="SkipSelf",ot[ot.Optional=8]="Optional",ot))();let sg;function Wn(d){const u=sg;return sg=d,u}function vx(d,u,c){const f=gh(d);return f&&"root"==f.providedIn?void 0===f.value?f.value=f.factory():f.value:c&ot.Optional?null:void 0!==u?u:void ph($t(d))}function Gs(d){return{toString:d}.toString()}var hi=(()=>((hi=hi||{})[hi.OnPush=0]="OnPush",hi[hi.Default=1]="Default",hi))(),Ni=(()=>{return(d=Ni||(Ni={}))[d.Emulated=0]="Emulated",d[d.None=2]="None",d[d.ShadowDom=3]="ShadowDom",Ni;var d})();const qt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Na={},Bt=[],_h=zt({\u0275cmp:zt}),og=zt({\u0275dir:zt}),ag=zt({\u0275pipe:zt}),xx=zt({\u0275mod:zt}),us=zt({\u0275fac:zt}),gu=zt({__NG_ELEMENT_ID__:zt});let dR=0;function mu(d){return Gs(()=>{const c=!0===d.standalone,f={},p={type:d.type,providersResolver:null,decls:d.decls,vars:d.vars,factory:null,template:d.template||null,consts:d.consts||null,ngContentSelectors:d.ngContentSelectors,hostBindings:d.hostBindings||null,hostVars:d.hostVars||0,hostAttrs:d.hostAttrs||null,contentQueries:d.contentQueries||null,declaredInputs:f,inputs:null,outputs:null,exportAs:d.exportAs||null,onPush:d.changeDetection===hi.OnPush,directiveDefs:null,pipeDefs:null,standalone:c,dependencies:c&&d.dependencies||null,getStandaloneInjector:null,selectors:d.selectors||Bt,viewQuery:d.viewQuery||null,features:d.features||null,data:d.data||{},encapsulation:d.encapsulation||Ni.Emulated,id:"c"+dR++,styles:d.styles||Bt,_:null,setInput:null,schemas:d.schemas||null,tView:null},g=d.dependencies,_=d.features;return p.inputs=Cx(d.inputs,f),p.outputs=Cx(d.outputs),_&&_.forEach(y=>y(p)),p.directiveDefs=g?()=>("function"==typeof g?g():g).map(bx).filter(wx):null,p.pipeDefs=g?()=>("function"==typeof g?g():g).map(tn).filter(wx):null,p})}function bx(d){return Gt(d)||en(d)}function wx(d){return null!==d}function Ao(d){return Gs(()=>({type:d.type,bootstrap:d.bootstrap||Bt,declarations:d.declarations||Bt,imports:d.imports||Bt,exports:d.exports||Bt,transitiveCompileScopes:null,schemas:d.schemas||null,id:d.id||null}))}function Cx(d,u){if(null==d)return Na;const c={};for(const f in d)if(d.hasOwnProperty(f)){let p=d[f],g=p;Array.isArray(p)&&(g=p[1],p=p[0]),c[p]=f,u&&(u[p]=g)}return c}const zr=mu;function Gt(d){return d[_h]||null}function en(d){return d[og]||null}function tn(d){return d[ag]||null}function Mn(d,u){const c=d[xx]||null;if(!c&&!0===u)throw new Error(`Type ${$t(d)} does not have '\u0275mod' property.`);return c}function fn(d){return Array.isArray(d)&&"object"==typeof d[1]}function fi(d){return Array.isArray(d)&&!0===d[1]}function cg(d){return 0!=(8&d.flags)}function bh(d){return 2==(2&d.flags)}function wh(d){return 1==(1&d.flags)}function pi(d){return null!==d.template}function yR(d){return 0!=(256&d[2])}function Fo(d,u){return d.hasOwnProperty(us)?d[us]:null}class bR{constructor(u,c,f){this.previousValue=u,this.currentValue=c,this.firstChange=f}isFirstChange(){return this.firstChange}}function Sx(d){return d.type.prototype.ngOnChanges&&(d.setInput=CR),wR}function wR(){const d=Ax(this),u=d?.current;if(u){const c=d.previous;if(c===Na)d.previous=u;else for(let f in u)c[f]=u[f];d.current=null,this.ngOnChanges(u)}}function CR(d,u,c,f){const p=Ax(d)||function ER(d,u){return d[Dx]=u}(d,{previous:Na,current:null}),g=p.current||(p.current={}),_=p.previous,y=this.declaredInputs[c],v=_[y];g[y]=new bR(v&&v.currentValue,u,_===Na),d[f]=u}const Dx="__ngSimpleChanges__";function Ax(d){return d[Dx]||null}function xr(d){for(;Array.isArray(d);)d=d[0];return d}function Rn(d,u){return xr(u[d.index])}function gg(d,u){return d.data[u]}function Fn(d,u){const c=u[d];return fn(c)?c:c[0]}function Eh(d){return 64==(64&d[2])}function zs(d,u){return null==u?null:d[u]}function Ix(d){d[18]=0}function mg(d,u){d[5]+=u;let c=d,f=d[3];for(;null!==f&&(1===u&&1===c[5]||-1===u&&0===c[5]);)f[5]+=u,c=f,f=f[3]}const gt={lFrame:Hx(null),bindingsEnabled:!0};function Px(){return gt.bindingsEnabled}function ae(){return gt.lFrame.lView}function Nt(){return gt.lFrame.tView}function Ir(){let d=Ox();for(;null!==d&&64===d.type;)d=d.parent;return d}function Ox(){return gt.lFrame.currentTNode}function Li(d,u){const c=gt.lFrame;c.currentTNode=d,c.isParent=u}function _g(){return gt.lFrame.isParent}function Ha(){return gt.lFrame.bindingIndex++}function UR(d,u){const c=gt.lFrame;c.bindingIndex=c.bindingRootIndex=d,vg(u)}function vg(d){gt.lFrame.currentDirectiveIndex=d}function Bx(){return gt.lFrame.currentQueryIndex}function bg(d){gt.lFrame.currentQueryIndex=d}function HR(d){const u=d[1];return 2===u.type?u.declTNode:1===u.type?d[6]:null}function Ux(d,u,c){if(c&ot.SkipSelf){let p=u,g=d;for(;!(p=p.parent,null!==p||c&ot.Host||(p=HR(g),null===p||(g=g[15],10&p.type))););if(null===p)return!1;u=p,d=g}const f=gt.lFrame=Vx();return f.currentTNode=u,f.lView=d,!0}function wg(d){const u=Vx(),c=d[1];gt.lFrame=u,u.currentTNode=c.firstChild,u.lView=d,u.tView=c,u.contextLView=d,u.bindingIndex=c.bindingStartIndex,u.inI18n=!1}function Vx(){const d=gt.lFrame,u=null===d?null:d.child;return null===u?Hx(d):u}function Hx(d){const u={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:d,child:null,inI18n:!1};return null!==d&&(d.child=u),u}function jx(){const d=gt.lFrame;return gt.lFrame=d.parent,d.currentTNode=null,d.lView=null,d}const Gx=jx;function Cg(){const d=jx();d.isParent=!0,d.tView=null,d.selectedIndex=-1,d.contextLView=null,d.elementDepthCount=0,d.currentDirectiveIndex=-1,d.currentNamespace=null,d.bindingRootIndex=-1,d.bindingIndex=-1,d.currentQueryIndex=0}function nn(){return gt.lFrame.selectedIndex}function $s(d){gt.lFrame.selectedIndex=d}function Th(d,u){for(let c=u.directiveStart,f=u.directiveEnd;c<f;c++){const g=d.data[c].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:y,ngAfterViewInit:v,ngAfterViewChecked:x,ngOnDestroy:w}=g;_&&(d.contentHooks||(d.contentHooks=[])).push(-c,_),y&&((d.contentHooks||(d.contentHooks=[])).push(c,y),(d.contentCheckHooks||(d.contentCheckHooks=[])).push(c,y)),v&&(d.viewHooks||(d.viewHooks=[])).push(-c,v),x&&((d.viewHooks||(d.viewHooks=[])).push(c,x),(d.viewCheckHooks||(d.viewCheckHooks=[])).push(c,x)),null!=w&&(d.destroyHooks||(d.destroyHooks=[])).push(c,w)}}function Sh(d,u,c){zx(d,u,3,c)}function Dh(d,u,c,f){(3&d[2])===c&&zx(d,u,c,f)}function Eg(d,u){let c=d[2];(3&c)===u&&(c&=2047,c+=1,d[2]=c)}function zx(d,u,c,f){const g=f??-1,_=u.length-1;let y=0;for(let v=void 0!==f?65535&d[18]:0;v<_;v++)if("number"==typeof u[v+1]){if(y=u[v],null!=f&&y>=f)break}else u[v]<0&&(d[18]+=65536),(y<g||-1==g)&&(KR(d,c,u,v),d[18]=(4294901760&d[18])+v+2),v++}function KR(d,u,c,f){const p=c[f]<0,g=c[f+1],y=d[p?-c[f]:c[f]];if(p){if(d[2]>>11<d[18]>>16&&(3&d[2])===u){d[2]+=2048;try{g.call(y)}finally{}}}else try{g.call(y)}finally{}}class wu{constructor(u,c,f){this.factory=u,this.resolving=!1,this.canSeeViewProviders=c,this.injectImpl=f}}function Ah(d,u,c){let f=0;for(;f<c.length;){const p=c[f];if("number"==typeof p){if(0!==p)break;f++;const g=c[f++],_=c[f++],y=c[f++];d.setAttribute(u,_,y,g)}else{const g=p,_=c[++f];Wx(g)?d.setProperty(u,g,_):d.setAttribute(u,g,_),f++}}return f}function $x(d){return 3===d||4===d||6===d}function Wx(d){return 64===d.charCodeAt(0)}function Ih(d,u){if(null!==u&&0!==u.length)if(null===d||0===d.length)d=u.slice();else{let c=-1;for(let f=0;f<u.length;f++){const p=u[f];"number"==typeof p?c=p:0===c||Xx(d,c,p,null,-1===c||2===c?u[++f]:null)}}return d}function Xx(d,u,c,f,p){let g=0,_=d.length;if(-1===u)_=-1;else for(;g<d.length;){const y=d[g++];if("number"==typeof y){if(y===u){_=-1;break}if(y>u){_=g-1;break}}}for(;g<d.length;){const y=d[g];if("number"==typeof y)break;if(y===c){if(null===f)return void(null!==p&&(d[g+1]=p));if(f===d[g+1])return void(d[g+2]=p)}g++,null!==f&&g++,null!==p&&g++}-1!==_&&(d.splice(_,0,u),g=_+1),d.splice(g++,0,c),null!==f&&d.splice(g++,0,f),null!==p&&d.splice(g++,0,p)}function qx(d){return-1!==d}function ja(d){return 32767&d}function Ga(d,u){let c=function t2(d){return d>>16}(d),f=u;for(;c>0;)f=f[15],c--;return f}let Sg=!0;function Mh(d){const u=Sg;return Sg=d,u}let r2=0;const ki={};function Eu(d,u){const c=Ag(d,u);if(-1!==c)return c;const f=u[1];f.firstCreatePass&&(d.injectorIndex=u.length,Dg(f.data,d),Dg(u,null),Dg(f.blueprint,null));const p=Ph(d,u),g=d.injectorIndex;if(qx(p)){const _=ja(p),y=Ga(p,u),v=y[1].data;for(let x=0;x<8;x++)u[g+x]=y[_+x]|v[_+x]}return u[g+8]=p,g}function Dg(d,u){d.push(0,0,0,0,0,0,0,0,u)}function Ag(d,u){return-1===d.injectorIndex||d.parent&&d.parent.injectorIndex===d.injectorIndex||null===u[d.injectorIndex+8]?-1:d.injectorIndex}function Ph(d,u){if(d.parent&&-1!==d.parent.injectorIndex)return d.parent.injectorIndex;let c=0,f=null,p=u;for(;null!==p;){if(f=ib(p),null===f)return-1;if(c++,p=p[15],-1!==f.injectorIndex)return f.injectorIndex|c<<16}return-1}function Rh(d,u,c){!function n2(d,u,c){let f;"string"==typeof c?f=c.charCodeAt(0)||0:c.hasOwnProperty(gu)&&(f=c[gu]),null==f&&(f=c[gu]=r2++);const p=255&f;u.data[d+(p>>5)]|=1<<p}(d,u,c)}function Zx(d,u,c){if(c&ot.Optional||void 0!==d)return d;ph()}function Qx(d,u,c,f){if(c&ot.Optional&&void 0===f&&(f=null),0==(c&(ot.Self|ot.Host))){const p=d[9],g=Wn(void 0);try{return p?p.get(u,f,c&ot.Optional):vx(u,f,c&ot.Optional)}finally{Wn(g)}}return Zx(f,0,c)}function Jx(d,u,c,f=ot.Default,p){if(null!==d){if(1024&u[2]){const _=function l2(d,u,c,f,p){let g=d,_=u;for(;null!==g&&null!==_&&1024&_[2]&&!(256&_[2]);){const y=eb(g,_,c,f|ot.Self,ki);if(y!==ki)return y;let v=g.parent;if(!v){const x=_[21];if(x){const w=x.get(c,ki,f);if(w!==ki)return w}v=ib(_),_=_[15]}g=v}return p}(d,u,c,f,ki);if(_!==ki)return _}const g=eb(d,u,c,f,ki);if(g!==ki)return g}return Qx(u,c,f,p)}function eb(d,u,c,f,p){const g=function o2(d){if("string"==typeof d)return d.charCodeAt(0)||0;const u=d.hasOwnProperty(gu)?d[gu]:void 0;return"number"==typeof u?u>=0?255&u:a2:u}(c);if("function"==typeof g){if(!Ux(u,d,f))return f&ot.Host?Zx(p,0,f):Qx(u,c,f,p);try{const _=g(f);if(null!=_||f&ot.Optional)return _;ph()}finally{Gx()}}else if("number"==typeof g){let _=null,y=Ag(d,u),v=-1,x=f&ot.Host?u[16][6]:null;for((-1===y||f&ot.SkipSelf)&&(v=-1===y?Ph(d,u):u[y+8],-1!==v&&rb(f,!1)?(_=u[1],y=ja(v),u=Ga(v,u)):y=-1);-1!==y;){const w=u[1];if(tb(g,y,w.data)){const C=s2(y,u,c,_,f,x);if(C!==ki)return C}v=u[y+8],-1!==v&&rb(f,u[1].data[y+8]===x)&&tb(g,y,u)?(_=w,y=ja(v),u=Ga(v,u)):y=-1}}return p}function s2(d,u,c,f,p,g){const _=u[1],y=_.data[d+8],w=Fh(y,_,c,null==f?bh(y)&&Sg:f!=_&&0!=(3&y.type),p&ot.Host&&g===y);return null!==w?Tu(u,_,w,y):ki}function Fh(d,u,c,f,p){const g=d.providerIndexes,_=u.data,y=1048575&g,v=d.directiveStart,w=g>>20,E=p?y+w:d.directiveEnd;for(let T=f?y:y+w;T<E;T++){const D=_[T];if(T<v&&c===D||T>=v&&D.type===c)return T}if(p){const T=_[v];if(T&&pi(T)&&T.type===c)return v}return null}function Tu(d,u,c,f){let p=d[c];const g=u.data;if(function ZR(d){return d instanceof wu}(p)){const _=p;_.resolving&&function rR(d,u){const c=u?`. Dependency path: ${u.join(" > ")} > ${d}`:"";throw new je(-200,`Circular dependency in DI detected for ${d}${c}`)}(function kt(d){return"function"==typeof d?d.name||d.toString():"object"==typeof d&&null!=d&&"function"==typeof d.type?d.type.name||d.type.toString():mt(d)}(g[c]));const y=Mh(_.canSeeViewProviders);_.resolving=!0;const v=_.injectImpl?Wn(_.injectImpl):null;Ux(d,f,ot.Default);try{p=d[c]=_.factory(void 0,g,d,f),u.firstCreatePass&&c>=f.directiveStart&&function YR(d,u,c){const{ngOnChanges:f,ngOnInit:p,ngDoCheck:g}=u.type.prototype;if(f){const _=Sx(u);(c.preOrderHooks||(c.preOrderHooks=[])).push(d,_),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(d,_)}p&&(c.preOrderHooks||(c.preOrderHooks=[])).push(0-d,p),g&&((c.preOrderHooks||(c.preOrderHooks=[])).push(d,g),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(d,g))}(c,g[c],u)}finally{null!==v&&Wn(v),Mh(y),_.resolving=!1,Gx()}}return p}function tb(d,u,c){return!!(c[u+(d>>5)]&1<<d)}function rb(d,u){return!(d&ot.Self||d&ot.Host&&u)}class za{constructor(u,c){this._tNode=u,this._lView=c}get(u,c,f){return Jx(this._tNode,this._lView,u,f,c)}}function a2(){return new za(Ir(),ae())}function Ig(d){return ng(d)?()=>{const u=Ig(ht(d));return u&&u()}:Fo(d)}function ib(d){const u=d[1],c=u.type;return 2===c?u.declTNode:1===c?d[6]:null}const Wa="__parameters__";function qa(d,u,c){return Gs(()=>{const f=function Mg(d){return function(...c){if(d){const f=d(...c);for(const p in f)this[p]=f[p]}}}(u);function p(...g){if(this instanceof p)return f.apply(this,g),this;const _=new p(...g);return y.annotation=_,y;function y(v,x,w){const C=v.hasOwnProperty(Wa)?v[Wa]:Object.defineProperty(v,Wa,{value:[]})[Wa];for(;C.length<=w;)C.push(null);return(C[w]=C[w]||[]).push(_),v}}return c&&(p.prototype=Object.create(c.prototype)),p.prototype.ngMetadataName=d,p.annotationCls=p,p})}class ft{constructor(u,c){this._desc=u,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof c?this.__NG_ELEMENT_ID__=c:void 0!==c&&(this.\u0275prov=Dt({token:this,providedIn:c.providedIn||"root",factory:c.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function On(d,u){void 0===u&&(u=d);for(let c=0;c<d.length;c++){let f=d[c];Array.isArray(f)?(u===d&&(u=d.slice(0,c)),On(f,u)):u!==d&&u.push(f)}return u}function ds(d,u){d.forEach(c=>Array.isArray(c)?ds(c,u):u(c))}function ob(d,u,c){u>=d.length?d.push(c):d.splice(u,0,c)}function Oh(d,u){return u>=d.length-1?d.pop():d.splice(u,1)[0]}const Mu={},Og="__NG_DI_FLAG__",Lh="ngTempTokenPath",x2=/\n/gm,cb="__source";let Pu;function Ka(d){const u=Pu;return Pu=d,u}function w2(d,u=ot.Default){if(void 0===Pu)throw new je(-203,!1);return null===Pu?vx(d,void 0,u):Pu.get(d,u&ot.Optional?null:void 0,u)}function nt(d,u=ot.Default){return(function hR(){return sg}()||w2)(ht(d),u)}function pr(d,u=ot.Default){return"number"!=typeof u&&(u=0|(u.optional&&8)|(u.host&&1)|(u.self&&2)|(u.skipSelf&&4)),nt(d,u)}function Ng(d){const u=[];for(let c=0;c<d.length;c++){const f=ht(d[c]);if(Array.isArray(f)){if(0===f.length)throw new je(900,!1);let p,g=ot.Default;for(let _=0;_<f.length;_++){const y=f[_],v=C2(y);"number"==typeof v?-1===v?p=y.token:g|=v:p=y}u.push(nt(p,g))}else u.push(nt(f))}return u}function Ru(d,u){return d[Og]=u,d.prototype[Og]=u,d}function C2(d){return d[Og]}const Fu=Ru(qa("Optional"),8),Ou=Ru(qa("SkipSelf"),4);var pn=(()=>((pn=pn||{})[pn.Important=1]="Important",pn[pn.DashCase=2]="DashCase",pn))();const Vg=new Map;let H2=0;const jg="__ngContext__";function Xr(d,u){fn(u)?(d[jg]=u[20],function G2(d){Vg.set(d[20],d)}(u)):d[jg]=u}function zg(d,u){return undefined(d,u)}function Bu(d){const u=d[3];return fi(u)?u[3]:u}function $g(d){return Pb(d[13])}function Wg(d){return Pb(d[4])}function Pb(d){for(;null!==d&&!fi(d);)d=d[4];return d}function Qa(d,u,c,f,p){if(null!=f){let g,_=!1;fi(f)?g=f:fn(f)&&(_=!0,f=f[0]);const y=xr(f);0===d&&null!==c?null==p?kb(u,c,y):No(u,c,y,p||null,!0):1===d&&null!==c?No(u,c,y,p||null,!0):2===d?function Jg(d,u,c){const f=Uh(d,u);f&&function hF(d,u,c,f){d.removeChild(u,c,f)}(d,f,u,c)}(u,y,_):3===d&&u.destroyNode(y),null!=g&&function pF(d,u,c,f,p){const g=c[7];g!==xr(c)&&Qa(u,d,f,g,p);for(let y=10;y<c.length;y++){const v=c[y];Uu(v[1],v,d,u,f,g)}}(u,d,g,c,p)}}function qg(d,u,c){return d.createElement(u,c)}function Fb(d,u){const c=d[9],f=c.indexOf(u),p=u[3];512&u[2]&&(u[2]&=-513,mg(p,-1)),c.splice(f,1)}function Yg(d,u){if(d.length<=10)return;const c=10+u,f=d[c];if(f){const p=f[17];null!==p&&p!==d&&Fb(p,f),u>0&&(d[c-1][4]=f[4]);const g=Oh(d,10+u);!function nF(d,u){Uu(d,u,u[11],2,null,null),u[0]=null,u[6]=null}(f[1],f);const _=g[19];null!==_&&_.detachView(g[1]),f[3]=null,f[4]=null,f[2]&=-65}return f}function Ob(d,u){if(!(128&u[2])){const c=u[11];c.destroyNode&&Uu(d,u,c,3,null,null),function oF(d){let u=d[13];if(!u)return Kg(d[1],d);for(;u;){let c=null;if(fn(u))c=u[13];else{const f=u[10];f&&(c=f)}if(!c){for(;u&&!u[4]&&u!==d;)fn(u)&&Kg(u[1],u),u=u[3];null===u&&(u=d),fn(u)&&Kg(u[1],u),c=u&&u[4]}u=c}}(u)}}function Kg(d,u){if(!(128&u[2])){u[2]&=-65,u[2]|=128,function cF(d,u){let c;if(null!=d&&null!=(c=d.destroyHooks))for(let f=0;f<c.length;f+=2){const p=u[c[f]];if(!(p instanceof wu)){const g=c[f+1];if(Array.isArray(g))for(let _=0;_<g.length;_+=2){const y=p[g[_]],v=g[_+1];try{v.call(y)}finally{}}else try{g.call(p)}finally{}}}}(d,u),function uF(d,u){const c=d.cleanup,f=u[7];let p=-1;if(null!==c)for(let g=0;g<c.length-1;g+=2)if("string"==typeof c[g]){const _=c[g+1],y="function"==typeof _?_(u):xr(u[_]),v=f[p=c[g+2]],x=c[g+3];"boolean"==typeof x?y.removeEventListener(c[g],v,x):x>=0?f[p=x]():f[p=-x].unsubscribe(),g+=2}else{const _=f[p=c[g+1]];c[g].call(_)}if(null!==f){for(let g=p+1;g<f.length;g++)(0,f[g])();u[7]=null}}(d,u),1===u[1].type&&u[11].destroy();const c=u[17];if(null!==c&&fi(u[3])){c!==u[3]&&Fb(c,u);const f=u[19];null!==f&&f.detachView(d)}!function z2(d){Vg.delete(d[20])}(u)}}function Nb(d,u,c){return function Lb(d,u,c){let f=u;for(;null!==f&&40&f.type;)f=(u=f).parent;if(null===f)return c[0];if(2&f.flags){const p=d.data[f.directiveStart].encapsulation;if(p===Ni.None||p===Ni.Emulated)return null}return Rn(f,c)}(d,u.parent,c)}function No(d,u,c,f,p){d.insertBefore(u,c,f,p)}function kb(d,u,c){d.appendChild(u,c)}function Bb(d,u,c,f,p){null!==f?No(d,u,c,f,p):kb(d,u,c)}function Uh(d,u){return d.parentNode(u)}let nm,Hb=function Vb(d,u,c){return 40&d.type?Rn(d,c):null};function Vh(d,u,c,f){const p=Nb(d,f,u),g=u[11],y=function Ub(d,u,c){return Hb(d,u,c)}(f.parent||u[6],f,u);if(null!=p)if(Array.isArray(c))for(let v=0;v<c.length;v++)Bb(g,p,c[v],y,!1);else Bb(g,p,c,y,!1)}function Hh(d,u){if(null!==u){const c=u.type;if(3&c)return Rn(u,d);if(4&c)return Qg(-1,d[u.index]);if(8&c){const f=u.child;if(null!==f)return Hh(d,f);{const p=d[u.index];return fi(p)?Qg(-1,p):xr(p)}}if(32&c)return zg(u,d)()||xr(d[u.index]);{const f=Gb(d,u);return null!==f?Array.isArray(f)?f[0]:Hh(Bu(d[16]),f):Hh(d,u.next)}}return null}function Gb(d,u){return null!==u?d[16][6].projection[u.projection]:null}function Qg(d,u){const c=10+d+1;if(c<u.length){const f=u[c],p=f[1].firstChild;if(null!==p)return Hh(f,p)}return u[7]}function em(d,u,c,f,p,g,_){for(;null!=c;){const y=f[c.index],v=c.type;if(_&&0===u&&(y&&Xr(xr(y),f),c.flags|=4),64!=(64&c.flags))if(8&v)em(d,u,c.child,f,p,g,!1),Qa(u,d,p,y,g);else if(32&v){const x=zg(c,f);let w;for(;w=x();)Qa(u,d,p,w,g);Qa(u,d,p,y,g)}else 16&v?zb(d,u,f,c,p,g):Qa(u,d,p,y,g);c=_?c.projectionNext:c.next}}function Uu(d,u,c,f,p,g){em(c,f,d.firstChild,u,p,g,!1)}function zb(d,u,c,f,p,g){const _=c[16],v=_[6].projection[f.projection];if(Array.isArray(v))for(let x=0;x<v.length;x++)Qa(u,d,p,v[x],g);else em(d,u,v,_[3],p,g,!0)}function $b(d,u,c){d.setAttribute(u,"style",c)}function tm(d,u,c){""===c?d.removeAttribute(u,"class"):d.setAttribute(u,"class",c)}const cm=new ft("ENVIRONMENT_INITIALIZER"),i1=new ft("INJECTOR",-1),s1=new ft("INJECTOR_DEF_TYPES");class o1{get(u,c=Mu){if(c===Mu){const f=new Error(`NullInjectorError: No provider for ${$t(u)}!`);throw f.name="NullInjectorError",f}return c}}function GF(...d){return{\u0275providers:a1(0,d)}}function a1(d,...u){const c=[],f=new Set;let p;return ds(u,g=>{const _=g;hm(_,c,[],f)&&(p||(p=[]),p.push(_))}),void 0!==p&&l1(p,c),c}function l1(d,u){for(let c=0;c<d.length;c++){const{providers:p}=d[c];ds(p,g=>{u.push(g)})}}function hm(d,u,c,f){if(!(d=ht(d)))return!1;let p=null,g=_x(d);const _=!g&&Gt(d);if(g||_){if(_&&!_.standalone)return!1;p=d}else{const v=d.ngModule;if(g=_x(v),!g)return!1;p=v}const y=f.has(p);if(_){if(y)return!1;if(f.add(p),_.dependencies){const v="function"==typeof _.dependencies?_.dependencies():_.dependencies;for(const x of v)hm(x,u,c,f)}}else{if(!g)return!1;{if(null!=g.imports&&!y){let x;f.add(p);try{ds(g.imports,w=>{hm(w,u,c,f)&&(x||(x=[]),x.push(w))})}finally{}void 0!==x&&l1(x,u)}if(!y){const x=Fo(p)||(()=>new p);u.push({provide:p,useFactory:x,deps:Bt},{provide:s1,useValue:p,multi:!0},{provide:cm,useValue:()=>nt(p),multi:!0})}const v=g.providers;null==v||y||ds(v,w=>{u.push(w)})}}return p!==d&&void 0!==d.providers}const zF=zt({provide:String,useValue:zt});function dm(d){return null!==d&&"object"==typeof d&&zF in d}function ko(d){return"function"==typeof d}const fm=new ft("Set Injector scope."),$h={},WF={};let pm;function Wh(){return void 0===pm&&(pm=new o1),pm}class qs{}class h1 extends qs{constructor(u,c,f,p){super(),this.parent=c,this.source=f,this.scopes=p,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,mm(u,_=>this.processProvider(_)),this.records.set(i1,Ja(void 0,this)),p.has("environment")&&this.records.set(qs,Ja(void 0,this));const g=this.records.get(fm);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(s1.multi,Bt,ot.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const u of this._ngOnDestroyHooks)u.ngOnDestroy();for(const u of this._onDestroyHooks)u()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(u){this._onDestroyHooks.push(u)}runInContext(u){this.assertNotDestroyed();const c=Ka(this),f=Wn(void 0);try{return u()}finally{Ka(c),Wn(f)}}get(u,c=Mu,f=ot.Default){this.assertNotDestroyed();const p=Ka(this),g=Wn(void 0);try{if(!(f&ot.SkipSelf)){let y=this.records.get(u);if(void 0===y){const v=function ZF(d){return"function"==typeof d||"object"==typeof d&&d instanceof ft}(u)&&gh(u);y=v&&this.injectableDefInScope(v)?Ja(gm(u),$h):null,this.records.set(u,y)}if(null!=y)return this.hydrate(u,y)}return(f&ot.Self?Wh():this.parent).get(u,c=f&ot.Optional&&c===Mu?null:c)}catch(_){if("NullInjectorError"===_.name){if((_[Lh]=_[Lh]||[]).unshift($t(u)),p)throw _;return function E2(d,u,c,f){const p=d[Lh];throw u[cb]&&p.unshift(u[cb]),d.message=function T2(d,u,c,f=null){d=d&&"\n"===d.charAt(0)&&"\u0275"==d.charAt(1)?d.slice(2):d;let p=$t(u);if(Array.isArray(u))p=u.map($t).join(" -> ");else if("object"==typeof u){let g=[];for(let _ in u)if(u.hasOwnProperty(_)){let y=u[_];g.push(_+":"+("string"==typeof y?JSON.stringify(y):$t(y)))}p=`{${g.join(", ")}}`}return`${c}${f?"("+f+")":""}[${p}]: ${d.replace(x2,"\n  ")}`}("\n"+d.message,p,c,f),d.ngTokenPath=p,d[Lh]=null,d}(_,u,"R3InjectorError",this.source)}throw _}finally{Wn(g),Ka(p)}}resolveInjectorInitializers(){const u=Ka(this),c=Wn(void 0);try{const f=this.get(cm.multi,Bt,ot.Self);for(const p of f)p()}finally{Ka(u),Wn(c)}}toString(){const u=[],c=this.records;for(const f of c.keys())u.push($t(f));return`R3Injector[${u.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new je(205,!1)}processProvider(u){let c=ko(u=ht(u))?u:ht(u&&u.provide);const f=function qF(d){return dm(d)?Ja(void 0,d.useValue):Ja(function d1(d,u,c){let f;if(ko(d)){const p=ht(d);return Fo(p)||gm(p)}if(dm(d))f=()=>ht(d.useValue);else if(function c1(d){return!(!d||!d.useFactory)}(d))f=()=>d.useFactory(...Ng(d.deps||[]));else if(function u1(d){return!(!d||!d.useExisting)}(d))f=()=>nt(ht(d.useExisting));else{const p=ht(d&&(d.useClass||d.provide));if(!function YF(d){return!!d.deps}(d))return Fo(p)||gm(p);f=()=>new p(...Ng(d.deps))}return f}(d),$h)}(u);if(ko(u)||!0!==u.multi)this.records.get(c);else{let p=this.records.get(c);p||(p=Ja(void 0,$h,!0),p.factory=()=>Ng(p.multi),this.records.set(c,p)),c=u,p.multi.push(u)}this.records.set(c,f)}hydrate(u,c){return c.value===$h&&(c.value=WF,c.value=c.factory()),"object"==typeof c.value&&c.value&&function KF(d){return null!==d&&"object"==typeof d&&"function"==typeof d.ngOnDestroy}(c.value)&&this._ngOnDestroyHooks.add(c.value),c.value}injectableDefInScope(u){if(!u.providedIn)return!1;const c=ht(u.providedIn);return"string"==typeof c?"any"===c||this.scopes.has(c):this.injectorDefTypes.has(c)}}function gm(d){const u=gh(d),c=null!==u?u.factory:Fo(d);if(null!==c)return c;if(d instanceof ft)throw new je(204,!1);if(d instanceof Function)return function XF(d){const u=d.length;if(u>0)throw function Iu(d,u){const c=[];for(let f=0;f<d;f++)c.push(u);return c}(u,"?"),new je(204,!1);const c=function lR(d){const u=d&&(d[mh]||d[yx]);if(u){const c=function uR(d){if(d.hasOwnProperty("name"))return d.name;const u=(""+d).match(/^function\s*([^\s(]+)/);return null===u?"":u[1]}(d);return console.warn(`DEPRECATED: DI is instantiating a token "${c}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${c}" class.`),u}return null}(d);return null!==c?()=>c.factory(d):()=>new d}(d);throw new je(204,!1)}function Ja(d,u,c=!1){return{factory:d,value:u,multi:c?[]:void 0}}function QF(d){return!!d.\u0275providers}function mm(d,u){for(const c of d)Array.isArray(c)?mm(c,u):QF(c)?mm(c.\u0275providers,u):u(c)}class f1{}class tO{resolveComponentFactory(u){throw function eO(d){const u=Error(`No component factory found for ${$t(d)}. Did you add it to @NgModule.entryComponents?`);return u.ngComponent=d,u}(u)}}let Gu=(()=>{class d{}return d.NULL=new tO,d})();function rO(){return el(Ir(),ae())}function el(d,u){return new Ys(Rn(d,u))}let Ys=(()=>{class d{constructor(c){this.nativeElement=c}}return d.__NG_ELEMENT_ID__=rO,d})();function nO(d){return d instanceof Ys?d.nativeElement:d}class g1{}let Xh=(()=>{class d{}return d.__NG_ELEMENT_ID__=()=>function iO(){const d=ae(),c=Fn(Ir().index,d);return(fn(c)?c:d)[11]}(),d})(),sO=(()=>{class d{}return d.\u0275prov=Dt({token:d,providedIn:"root",factory:()=>null}),d})();class qh{constructor(u){this.full=u,this.major=u.split(".")[0],this.minor=u.split(".")[1],this.patch=u.split(".").slice(2).join(".")}}const oO=new qh("14.3.0"),_m={};function vm(d){return d.ngOriginalError}class tl{constructor(){this._console=console}handleError(u){const c=this._findOriginalError(u);this._console.error("ERROR",u),c&&this._console.error("ORIGINAL ERROR",c)}_findOriginalError(u){let c=u&&vm(u);for(;c&&vm(c);)c=vm(c);return c||null}}function ps(d){return d instanceof Function?d():d}function _1(d,u,c){let f=d.length;for(;;){const p=d.indexOf(u,c);if(-1===p)return p;if(0===p||d.charCodeAt(p-1)<=32){const g=u.length;if(p+g===f||d.charCodeAt(p+g)<=32)return p}c=p+1}}const y1="ng-template";function _O(d,u,c){let f=0;for(;f<d.length;){let p=d[f++];if(c&&"class"===p){if(p=d[f],-1!==_1(p.toLowerCase(),u,0))return!0}else if(1===p){for(;f<d.length&&"string"==typeof(p=d[f++]);)if(p.toLowerCase()===u)return!0;return!1}}return!1}function v1(d){return 4===d.type&&d.value!==y1}function yO(d,u,c){return u===(4!==d.type||c?d.value:y1)}function vO(d,u,c){let f=4;const p=d.attrs||[],g=function wO(d){for(let u=0;u<d.length;u++)if($x(d[u]))return u;return d.length}(p);let _=!1;for(let y=0;y<u.length;y++){const v=u[y];if("number"!=typeof v){if(!_)if(4&f){if(f=2|1&f,""!==v&&!yO(d,v,c)||""===v&&1===u.length){if(gi(f))return!1;_=!0}}else{const x=8&f?v:u[++y];if(8&f&&null!==d.attrs){if(!_O(d.attrs,x,c)){if(gi(f))return!1;_=!0}continue}const C=xO(8&f?"class":v,p,v1(d),c);if(-1===C){if(gi(f))return!1;_=!0;continue}if(""!==x){let E;E=C>g?"":p[C+1].toLowerCase();const T=8&f?E:null;if(T&&-1!==_1(T,x,0)||2&f&&x!==E){if(gi(f))return!1;_=!0}}}}else{if(!_&&!gi(f)&&!gi(v))return!1;if(_&&gi(v))continue;_=!1,f=v|1&f}}return gi(f)||_}function gi(d){return 0==(1&d)}function xO(d,u,c,f){if(null===u)return-1;let p=0;if(f||!c){let g=!1;for(;p<u.length;){const _=u[p];if(_===d)return p;if(3===_||6===_)g=!0;else{if(1===_||2===_){let y=u[++p];for(;"string"==typeof y;)y=u[++p];continue}if(4===_)break;if(0===_){p+=4;continue}}p+=g?1:2}return-1}return function CO(d,u){let c=d.indexOf(4);if(c>-1)for(c++;c<d.length;){const f=d[c];if("number"==typeof f)return-1;if(f===u)return c;c++}return-1}(u,d)}function x1(d,u,c=!1){for(let f=0;f<u.length;f++)if(vO(d,u[f],c))return!0;return!1}function b1(d,u){return d?":not("+u.trim()+")":u}function TO(d){let u=d[0],c=1,f=2,p="",g=!1;for(;c<d.length;){let _=d[c];if("string"==typeof _)if(2&f){const y=d[++c];p+="["+_+(y.length>0?'="'+y+'"':"")+"]"}else 8&f?p+="."+_:4&f&&(p+=" "+_);else""!==p&&!gi(_)&&(u+=b1(g,p),p=""),f=_,g=g||!gi(f);c++}return""!==p&&(u+=b1(g,p)),u}const _t={};function Bo(d){w1(Nt(),ae(),nn()+d,!1)}function w1(d,u,c,f){if(!f)if(3==(3&u[2])){const g=d.preOrderCheckHooks;null!==g&&Sh(u,g,c)}else{const g=d.preOrderHooks;null!==g&&Dh(u,g,0,c)}$s(c)}function S1(d,u=null,c=null,f){const p=D1(d,u,c,f);return p.resolveInjectorInitializers(),p}function D1(d,u=null,c=null,f,p=new Set){const g=[c||Bt,GF(d)];return f=f||("object"==typeof d?void 0:$t(d)),new h1(g,u||Wh(),f||null,p)}let mi=(()=>{class d{static create(c,f){if(Array.isArray(c))return S1({name:""},f,c,"");{const p=c.name??"";return S1({name:p},c.parent,c.providers,p)}}}return d.THROW_IF_NOT_FOUND=Mu,d.NULL=new o1,d.\u0275prov=Dt({token:d,providedIn:"any",factory:()=>nt(i1)}),d.__NG_ELEMENT_ID__=-1,d})();function Qe(d,u=ot.Default){const c=ae();return null===c?nt(d,u):Jx(Ir(),c,ht(d),u)}function Em(){throw new Error("invalid")}function z1(d,u){const c=d.contentQueries;if(null!==c)for(let f=0;f<c.length;f+=2){const p=c[f],g=c[f+1];if(-1!==g){const _=d.data[g];bg(p),_.contentQueries(2,u[g],g)}}}function Jh(d,u,c,f,p,g,_,y,v,x,w){const C=u.blueprint.slice();return C[0]=p,C[2]=76|f,(null!==w||d&&1024&d[2])&&(C[2]|=1024),Ix(C),C[3]=C[15]=d,C[8]=c,C[10]=_||d&&d[10],C[11]=y||d&&d[11],C[12]=v||d&&d[12]||null,C[9]=x||d&&d[9]||null,C[6]=g,C[20]=function j2(){return H2++}(),C[21]=w,C[16]=2==u.type?d[16]:C,C}function il(d,u,c,f,p){let g=d.data[u];if(null===g)g=function Nm(d,u,c,f,p){const g=Ox(),_=_g(),v=d.data[u]=function aN(d,u,c,f,p,g){return{type:c,index:f,insertBeforeIndex:null,injectorIndex:u?u.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:p,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:u,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?g:g&&g.parent,c,u,f,p);return null===d.firstChild&&(d.firstChild=v),null!==g&&(_?null==g.child&&null!==v.parent&&(g.child=v):null===g.next&&(g.next=v)),v}(d,u,c,f,p),function BR(){return gt.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=c,g.value=f,g.attrs=p;const _=function bu(){const d=gt.lFrame,u=d.currentTNode;return d.isParent?u:u.parent}();g.injectorIndex=null===_?-1:_.injectorIndex}return Li(g,!0),g}function sl(d,u,c,f){if(0===c)return-1;const p=u.length;for(let g=0;g<c;g++)u.push(f),d.blueprint.push(f),d.data.push(null);return p}function Lm(d,u,c){wg(u);try{const f=d.viewQuery;null!==f&&zm(1,f,c);const p=d.template;null!==p&&$1(d,u,p,1,c),d.firstCreatePass&&(d.firstCreatePass=!1),d.staticContentQueries&&z1(d,u),d.staticViewQueries&&zm(2,d.viewQuery,c);const g=d.components;null!==g&&function iN(d,u){for(let c=0;c<u.length;c++)CN(d,u[c])}(u,g)}catch(f){throw d.firstCreatePass&&(d.incompleteFirstPass=!0,d.firstCreatePass=!1),f}finally{u[2]&=-5,Cg()}}function ed(d,u,c,f){const p=u[2];if(128!=(128&p)){wg(u);try{Ix(u),function Lx(d){return gt.lFrame.bindingIndex=d}(d.bindingStartIndex),null!==c&&$1(d,u,c,2,f);const _=3==(3&p);if(_){const x=d.preOrderCheckHooks;null!==x&&Sh(u,x,null)}else{const x=d.preOrderHooks;null!==x&&Dh(u,x,0,null),Eg(u,0)}if(function bN(d){for(let u=$g(d);null!==u;u=Wg(u)){if(!u[2])continue;const c=u[9];for(let f=0;f<c.length;f++){const p=c[f],g=p[3];0==(512&p[2])&&mg(g,1),p[2]|=512}}}(u),function xN(d){for(let u=$g(d);null!==u;u=Wg(u))for(let c=10;c<u.length;c++){const f=u[c],p=f[1];Eh(f)&&ed(p,f,p.template,f[8])}}(u),null!==d.contentQueries&&z1(d,u),_){const x=d.contentCheckHooks;null!==x&&Sh(u,x)}else{const x=d.contentHooks;null!==x&&Dh(u,x,1),Eg(u,1)}!function rN(d,u){const c=d.hostBindingOpCodes;if(null!==c)try{for(let f=0;f<c.length;f++){const p=c[f];if(p<0)$s(~p);else{const g=p,_=c[++f],y=c[++f];UR(_,g),y(2,u[g])}}}finally{$s(-1)}}(d,u);const y=d.components;null!==y&&function nN(d,u){for(let c=0;c<u.length;c++)wN(d,u[c])}(u,y);const v=d.viewQuery;if(null!==v&&zm(2,v,f),_){const x=d.viewCheckHooks;null!==x&&Sh(u,x)}else{const x=d.viewHooks;null!==x&&Dh(u,x,2),Eg(u,2)}!0===d.firstUpdatePass&&(d.firstUpdatePass=!1),u[2]&=-41,512&u[2]&&(u[2]&=-513,mg(u[3],-1))}finally{Cg()}}}function $1(d,u,c,f,p){const g=nn(),_=2&f;try{$s(-1),_&&u.length>22&&w1(d,u,22,!1),c(f,p)}finally{$s(g)}}function km(d,u,c){!Px()||(function dN(d,u,c,f){const p=c.directiveStart,g=c.directiveEnd;d.firstCreatePass||Eu(c,u),Xr(f,u);const _=c.initialInputs;for(let y=p;y<g;y++){const v=d.data[y],x=pi(v);x&&_N(u,c,v);const w=Tu(u,d,y,c);Xr(w,u),null!==_&&yN(0,y-p,w,v,0,_),x&&(Fn(c.index,u)[8]=w)}}(d,u,c,Rn(c,u)),128==(128&c.flags)&&function fN(d,u,c){const f=c.directiveStart,p=c.directiveEnd,g=c.index,_=function VR(){return gt.lFrame.currentDirectiveIndex}();try{$s(g);for(let y=f;y<p;y++){const v=d.data[y],x=u[y];vg(y),(null!==v.hostBindings||0!==v.hostVars||null!==v.hostAttrs)&&J1(v,x)}}finally{$s(-1),vg(_)}}(d,u,c))}function Bm(d,u,c=Rn){const f=u.localNames;if(null!==f){let p=u.index+1;for(let g=0;g<f.length;g+=2){const _=f[g+1],y=-1===_?c(u,d):d[_];d[p++]=y}}}function X1(d){const u=d.tView;return null===u||u.incompleteFirstPass?d.tView=Um(1,null,d.template,d.decls,d.vars,d.directiveDefs,d.pipeDefs,d.viewQuery,d.schemas,d.consts):u}function Um(d,u,c,f,p,g,_,y,v,x){const w=22+f,C=w+p,E=function sN(d,u){const c=[];for(let f=0;f<u;f++)c.push(f<d?null:_t);return c}(w,C),T="function"==typeof x?x():x;return E[1]={type:d,blueprint:E,template:c,queries:null,viewQuery:y,declTNode:u,data:E.slice().fill(null,w),bindingStartIndex:w,expandoStartIndex:C,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:v,consts:T,incompleteFirstPass:!1}}function q1(d,u,c,f){const p=iw(u);null===c?p.push(f):(p.push(c),d.firstCreatePass&&sw(d).push(f,p.length-1))}function Y1(d,u,c){for(let f in d)if(d.hasOwnProperty(f)){const p=d[f];(c=null===c?{}:c).hasOwnProperty(f)?c[f].push(u,p):c[f]=[u,p]}return c}function K1(d,u){const f=u.directiveEnd,p=d.data,g=u.attrs,_=[];let y=null,v=null;for(let x=u.directiveStart;x<f;x++){const w=p[x],C=w.inputs,E=null===g||v1(u)?null:vN(C,g);_.push(E),y=Y1(C,x,y),v=Y1(w.outputs,x,v)}null!==y&&(y.hasOwnProperty("class")&&(u.flags|=16),y.hasOwnProperty("style")&&(u.flags|=32)),u.initialInputs=_,u.inputs=y,u.outputs=v}function Z1(d,u){const c=Fn(u,d);16&c[2]||(c[2]|=32)}function Vm(d,u,c,f){let p=!1;if(Px()){const g=function pN(d,u,c){const f=d.directiveRegistry;let p=null;if(f)for(let g=0;g<f.length;g++){const _=f[g];x1(c,_.selectors,!1)&&(p||(p=[]),Rh(Eu(c,u),d,_.type),pi(_)?(ew(d,c),p.unshift(_)):p.push(_))}return p}(d,u,c),_=null===f?null:{"":-1};if(null!==g){p=!0,tw(c,d.data.length,g.length);for(let w=0;w<g.length;w++){const C=g[w];C.providersResolver&&C.providersResolver(C)}let y=!1,v=!1,x=sl(d,u,g.length,null);for(let w=0;w<g.length;w++){const C=g[w];c.mergedAttrs=Ih(c.mergedAttrs,C.hostAttrs),rw(d,c,u,x,C),mN(x,C,_),null!==C.contentQueries&&(c.flags|=8),(null!==C.hostBindings||null!==C.hostAttrs||0!==C.hostVars)&&(c.flags|=128);const E=C.type.prototype;!y&&(E.ngOnChanges||E.ngOnInit||E.ngDoCheck)&&((d.preOrderHooks||(d.preOrderHooks=[])).push(c.index),y=!0),!v&&(E.ngOnChanges||E.ngDoCheck)&&((d.preOrderCheckHooks||(d.preOrderCheckHooks=[])).push(c.index),v=!0),x++}K1(d,c)}_&&function gN(d,u,c){if(u){const f=d.localNames=[];for(let p=0;p<u.length;p+=2){const g=c[u[p+1]];if(null==g)throw new je(-301,!1);f.push(u[p],g)}}}(c,f,_)}return c.mergedAttrs=Ih(c.mergedAttrs,c.attrs),p}function Q1(d,u,c,f,p,g){const _=g.hostBindings;if(_){let y=d.hostBindingOpCodes;null===y&&(y=d.hostBindingOpCodes=[]);const v=~u.index;(function hN(d){let u=d.length;for(;u>0;){const c=d[--u];if("number"==typeof c&&c<0)return c}return 0})(y)!=v&&y.push(v),y.push(f,p,_)}}function J1(d,u){null!==d.hostBindings&&d.hostBindings(1,u)}function ew(d,u){u.flags|=2,(d.components||(d.components=[])).push(u.index)}function mN(d,u,c){if(c){if(u.exportAs)for(let f=0;f<u.exportAs.length;f++)c[u.exportAs[f]]=d;pi(u)&&(c[""]=d)}}function tw(d,u,c){d.flags|=1,d.directiveStart=u,d.directiveEnd=u+c,d.providerIndexes=u}function rw(d,u,c,f,p){d.data[f]=p;const g=p.factory||(p.factory=Fo(p.type)),_=new wu(g,pi(p),Qe);d.blueprint[f]=_,c[f]=_,Q1(d,u,0,f,sl(d,c,p.hostVars,_t),p)}function _N(d,u,c){const f=Rn(u,d),p=X1(c),g=d[10],_=td(d,Jh(d,p,null,c.onPush?32:16,f,u,g,g.createRenderer(f,c),null,null,null));d[u.index]=_}function yN(d,u,c,f,p,g){const _=g[u];if(null!==_){const y=f.setInput;for(let v=0;v<_.length;){const x=_[v++],w=_[v++],C=_[v++];null!==y?f.setInput(c,C,x,w):c[w]=C}}}function vN(d,u){let c=null,f=0;for(;f<u.length;){const p=u[f];if(0!==p)if(5!==p){if("number"==typeof p)break;d.hasOwnProperty(p)&&(null===c&&(c=[]),c.push(p,d[p],u[f+1])),f+=2}else f+=2;else f+=4}return c}function nw(d,u,c,f){return new Array(d,!0,!1,u,null,0,f,c,null,null)}function wN(d,u){const c=Fn(u,d);if(Eh(c)){const f=c[1];48&c[2]?ed(f,c,f.template,c[8]):c[5]>0&&jm(c)}}function jm(d){for(let f=$g(d);null!==f;f=Wg(f))for(let p=10;p<f.length;p++){const g=f[p];if(Eh(g))if(512&g[2]){const _=g[1];ed(_,g,_.template,g[8])}else g[5]>0&&jm(g)}const c=d[1].components;if(null!==c)for(let f=0;f<c.length;f++){const p=Fn(c[f],d);Eh(p)&&p[5]>0&&jm(p)}}function CN(d,u){const c=Fn(u,d),f=c[1];(function EN(d,u){for(let c=u.length;c<d.blueprint.length;c++)u.push(d.blueprint[c])})(f,c),Lm(f,c,c[8])}function td(d,u){return d[13]?d[14][4]=u:d[13]=u,d[14]=u,u}function Gm(d){for(;d;){d[2]|=32;const u=Bu(d);if(yR(d)&&!u)return d;d=u}return null}function rd(d,u,c,f=!0){const p=u[10];p.begin&&p.begin();try{ed(d,u,d.template,c)}catch(_){throw f&&aw(u,_),_}finally{p.end&&p.end()}}function zm(d,u,c){bg(0),u(d,c)}function iw(d){return d[7]||(d[7]=[])}function sw(d){return d.cleanup||(d.cleanup=[])}function aw(d,u){const c=d[9],f=c?c.get(tl,null):null;f&&f.handleError(u)}function $m(d,u,c,f,p){for(let g=0;g<c.length;){const _=c[g++],y=c[g++],v=u[_],x=d.data[_];null!==x.setInput?x.setInput(v,p,f,y):v[y]=p}}function ms(d,u,c){const f=function Ch(d,u){return xr(u[d])}(u,d);!function Rb(d,u,c){d.setValue(u,c)}(d[11],f,c)}function nd(d,u,c){let f=c?d.styles:null,p=c?d.classes:null,g=0;if(null!==u)for(let _=0;_<u.length;_++){const y=u[_];"number"==typeof y?g=y:1==g?p=tg(p,y):2==g&&(f=tg(f,y+": "+u[++_]+";"))}c?d.styles=f:d.stylesWithoutHost=f,c?d.classes=p:d.classesWithoutHost=p}function id(d,u,c,f,p=!1){for(;null!==c;){const g=u[c.index];if(null!==g&&f.push(xr(g)),fi(g))for(let y=10;y<g.length;y++){const v=g[y],x=v[1].firstChild;null!==x&&id(v[1],v,x,f)}const _=c.type;if(8&_)id(d,u,c.child,f);else if(32&_){const y=zg(c,u);let v;for(;v=y();)f.push(v)}else if(16&_){const y=Gb(u,c);if(Array.isArray(y))f.push(...y);else{const v=Bu(u[16]);id(v[1],v,y,f,!0)}}c=p?c.projectionNext:c.next}return f}class zu{constructor(u,c){this._lView=u,this._cdRefInjectingView=c,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const u=this._lView,c=u[1];return id(c,u,c.firstChild,[])}get context(){return this._lView[8]}set context(u){this._lView[8]=u}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const u=this._lView[3];if(fi(u)){const c=u[8],f=c?c.indexOf(this):-1;f>-1&&(Yg(u,f),Oh(c,f))}this._attachedToViewContainer=!1}Ob(this._lView[1],this._lView)}onDestroy(u){q1(this._lView[1],this._lView,null,u)}markForCheck(){Gm(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){rd(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new je(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function sF(d,u){Uu(d,u,u[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(u){if(this._attachedToViewContainer)throw new je(902,!1);this._appRef=u}}class TN extends zu{constructor(u){super(u),this._view=u}detectChanges(){const u=this._view;rd(u[1],u,u[8],!1)}checkNoChanges(){}get context(){return null}}class Wm extends Gu{constructor(u){super(),this.ngModule=u}resolveComponentFactory(u){const c=Gt(u);return new $u(c,this.ngModule)}}function lw(d){const u=[];for(let c in d)d.hasOwnProperty(c)&&u.push({propName:d[c],templateName:c});return u}class DN{constructor(u,c){this.injector=u,this.parentInjector=c}get(u,c,f){const p=this.injector.get(u,_m,f);return p!==_m||c===_m?p:this.parentInjector.get(u,c,f)}}class $u extends f1{constructor(u,c){super(),this.componentDef=u,this.ngModule=c,this.componentType=u.type,this.selector=function SO(d){return d.map(TO).join(",")}(u.selectors),this.ngContentSelectors=u.ngContentSelectors?u.ngContentSelectors:[],this.isBoundToModule=!!c}get inputs(){return lw(this.componentDef.inputs)}get outputs(){return lw(this.componentDef.outputs)}create(u,c,f,p){let g=(p=p||this.ngModule)instanceof qs?p:p?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const _=g?new DN(u,g):u,y=_.get(g1,null);if(null===y)throw new je(407,!1);const v=_.get(sO,null),x=y.createRenderer(null,this.componentDef),w=this.componentDef.selectors[0][0]||"div",C=f?function oN(d,u,c){return d.selectRootElement(u,c===Ni.ShadowDom)}(x,f,this.componentDef.encapsulation):qg(x,w,function SN(d){const u=d.toLowerCase();return"svg"===u?"svg":"math"===u?"math":null}(w)),E=this.componentDef.onPush?288:272,T=Um(0,null,null,1,0,null,null,null,null,null),D=Jh(null,T,null,E,null,null,y,x,v,_,null);let S,A;wg(D);try{const I=function MN(d,u,c,f,p,g){const _=c[1];c[22]=d;const v=il(_,22,2,"#host",null),x=v.mergedAttrs=u.hostAttrs;null!==x&&(nd(v,x,!0),null!==d&&(Ah(p,d,x),null!==v.classes&&tm(p,d,v.classes),null!==v.styles&&$b(p,d,v.styles)));const w=f.createRenderer(d,u),C=Jh(c,X1(u),null,u.onPush?32:16,c[22],v,f,w,g||null,null,null);return _.firstCreatePass&&(Rh(Eu(v,c),_,u.type),ew(_,v),tw(v,c.length,1)),td(c,C),c[22]=C}(C,this.componentDef,D,y,x);if(C)if(f)Ah(x,C,["ng-version",oO.full]);else{const{attrs:P,classes:M}=function DO(d){const u=[],c=[];let f=1,p=2;for(;f<d.length;){let g=d[f];if("string"==typeof g)2===p?""!==g&&u.push(g,d[++f]):8===p&&c.push(g);else{if(!gi(p))break;p=g}f++}return{attrs:u,classes:c}}(this.componentDef.selectors[0]);P&&Ah(x,C,P),M&&M.length>0&&tm(x,C,M.join(" "))}if(A=gg(T,22),void 0!==c){const P=A.projection=[];for(let M=0;M<this.ngContentSelectors.length;M++){const R=c[M];P.push(null!=R?Array.from(R):null)}}S=function PN(d,u,c,f){const p=c[1],g=function cN(d,u,c){const f=Ir();d.firstCreatePass&&(c.providersResolver&&c.providersResolver(c),rw(d,f,u,sl(d,u,1,null),c),K1(d,f));const p=Tu(u,d,f.directiveStart,f);Xr(p,u);const g=Rn(f,u);return g&&Xr(g,u),p}(p,c,u);if(d[8]=c[8]=g,null!==f)for(const y of f)y(g,u);if(u.contentQueries){const y=Ir();u.contentQueries(1,g,y.directiveStart)}const _=Ir();return!p.firstCreatePass||null===u.hostBindings&&null===u.hostAttrs||($s(_.index),Q1(c[1],_,0,_.directiveStart,_.directiveEnd,u),J1(u,g)),g}(I,this.componentDef,D,[RN]),Lm(T,D,null)}finally{Cg()}return new IN(this.componentType,S,el(A,D),D,A)}}class IN extends class JF{}{constructor(u,c,f,p,g){super(),this.location=f,this._rootLView=p,this._tNode=g,this.instance=c,this.hostView=this.changeDetectorRef=new TN(p),this.componentType=u}setInput(u,c){const f=this._tNode.inputs;let p;if(null!==f&&(p=f[u])){const g=this._rootLView;$m(g[1],g,p,u,c),Z1(g,this._tNode.index)}}get injector(){return new za(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(u){this.hostView.onDestroy(u)}}function RN(){const d=Ir();Th(ae()[1],d)}function Xm(d){let u=function uw(d){return Object.getPrototypeOf(d.prototype).constructor}(d.type),c=!0;const f=[d];for(;u;){let p;if(pi(d))p=u.\u0275cmp||u.\u0275dir;else{if(u.\u0275cmp)throw new je(903,!1);p=u.\u0275dir}if(p){if(c){f.push(p);const _=d;_.inputs=qm(d.inputs),_.declaredInputs=qm(d.declaredInputs),_.outputs=qm(d.outputs);const y=p.hostBindings;y&&LN(d,y);const v=p.viewQuery,x=p.contentQueries;if(v&&ON(d,v),x&&NN(d,x),eg(d.inputs,p.inputs),eg(d.declaredInputs,p.declaredInputs),eg(d.outputs,p.outputs),pi(p)&&p.data.animation){const w=d.data;w.animation=(w.animation||[]).concat(p.data.animation)}}const g=p.features;if(g)for(let _=0;_<g.length;_++){const y=g[_];y&&y.ngInherit&&y(d),y===Xm&&(c=!1)}}u=Object.getPrototypeOf(u)}!function FN(d){let u=0,c=null;for(let f=d.length-1;f>=0;f--){const p=d[f];p.hostVars=u+=p.hostVars,p.hostAttrs=Ih(p.hostAttrs,c=Ih(c,p.hostAttrs))}}(f)}function qm(d){return d===Na?{}:d===Bt?[]:d}function ON(d,u){const c=d.viewQuery;d.viewQuery=c?(f,p)=>{u(f,p),c(f,p)}:u}function NN(d,u){const c=d.contentQueries;d.contentQueries=c?(f,p,g)=>{u(f,p,g),c(f,p,g)}:u}function LN(d,u){const c=d.hostBindings;d.hostBindings=c?(f,p)=>{u(f,p),c(f,p)}:u}let sd=null;function Uo(){if(!sd){const d=qt.Symbol;if(d&&d.iterator)sd=d.iterator;else{const u=Object.getOwnPropertyNames(Map.prototype);for(let c=0;c<u.length;++c){const f=u[c];"entries"!==f&&"size"!==f&&Map.prototype[f]===Map.prototype.entries&&(sd=f)}}}return sd}function Wu(d){return!!Ym(d)&&(Array.isArray(d)||!(d instanceof Map)&&Uo()in d)}function Ym(d){return null!==d&&("function"==typeof d||"object"==typeof d)}function qr(d,u,c){return!Object.is(d[u],c)&&(d[u]=c,!0)}function Zm(d,u,c,f,p,g,_,y){const v=ae(),x=Nt(),w=d+22,C=x.firstCreatePass?function zN(d,u,c,f,p,g,_,y,v){const x=u.consts,w=il(u,d,4,_||null,zs(x,y));Vm(u,c,w,zs(x,v)),Th(u,w);const C=w.tViews=Um(2,w,f,p,g,u.directiveRegistry,u.pipeRegistry,null,u.schemas,x);return null!==u.queries&&(u.queries.template(u,w),C.queries=u.queries.embeddedTView(w)),w}(w,x,v,u,c,f,p,g,_):x.data[w];Li(C,!1);const E=v[11].createComment("");Vh(x,v,E,C),Xr(E,v),td(v,v[w]=nw(E,v,E,C)),wh(C)&&km(x,v,C),null!=_&&Bm(v,C,y)}function gl(d,u,c){const f=ae();return qr(f,Ha(),u)&&function Ln(d,u,c,f,p,g,_,y){const v=Rn(u,c);let w,x=u.inputs;!y&&null!=x&&(w=x[f])?($m(d,c,w,f,p),bh(u)&&Z1(c,u.index)):3&u.type&&(f=function lN(d){return"class"===d?"className":"for"===d?"htmlFor":"formaction"===d?"formAction":"innerHtml"===d?"innerHTML":"readonly"===d?"readOnly":"tabindex"===d?"tabIndex":d}(f),p=null!=_?_(p,u.value||"",f):p,g.setProperty(v,f,p))}(Nt(),function nr(){const d=gt.lFrame;return gg(d.tView,d.selectedIndex)}(),f,d,u,f[11],c,!1),gl}function Qm(d,u,c,f,p){const _=p?"class":"style";$m(d,c,u.inputs[_],_,f)}function Kn(d,u,c,f){const p=ae(),g=Nt(),_=22+d,y=p[11],v=p[_]=qg(y,u,function qR(){return gt.lFrame.currentNamespace}()),x=g.firstCreatePass?function XN(d,u,c,f,p,g,_){const y=u.consts,x=il(u,d,2,p,zs(y,g));return Vm(u,c,x,zs(y,_)),null!==x.attrs&&nd(x,x.attrs,!1),null!==x.mergedAttrs&&nd(x,x.mergedAttrs,!0),null!==u.queries&&u.queries.elementStart(u,x),x}(_,g,p,0,u,c,f):g.data[_];Li(x,!0);const w=x.mergedAttrs;null!==w&&Ah(y,v,w);const C=x.classes;null!==C&&tm(y,v,C);const E=x.styles;return null!==E&&$b(y,v,E),64!=(64&x.flags)&&Vh(g,p,v,x),0===function RR(){return gt.lFrame.elementDepthCount}()&&Xr(v,p),function FR(){gt.lFrame.elementDepthCount++}(),wh(x)&&(km(g,p,x),function W1(d,u,c){if(cg(u)){const p=u.directiveEnd;for(let g=u.directiveStart;g<p;g++){const _=d.data[g];_.contentQueries&&_.contentQueries(1,c[g],g)}}}(g,x,p)),null!==f&&Bm(p,x),Kn}function _s(){let d=Ir();_g()?function yg(){gt.lFrame.isParent=!1}():(d=d.parent,Li(d,!1));const u=d;!function OR(){gt.lFrame.elementDepthCount--}();const c=Nt();return c.firstCreatePass&&(Th(c,d),cg(d)&&c.queries.elementEnd(d)),null!=u.classesWithoutHost&&function JR(d){return 0!=(16&d.flags)}(u)&&Qm(c,u,ae(),u.classesWithoutHost,!0),null!=u.stylesWithoutHost&&function e2(d){return 0!=(32&d.flags)}(u)&&Qm(c,u,ae(),u.stylesWithoutHost,!1),_s}function qu(d,u,c,f){return Kn(d,u,c,f),_s(),qu}function ad(d){return!!d&&"function"==typeof d.then}const ww=function bw(d){return!!d&&"function"==typeof d.subscribe};function ml(d,u,c,f){const p=ae(),g=Nt(),_=Ir();return function Ew(d,u,c,f,p,g,_,y){const v=wh(f),w=d.firstCreatePass&&sw(d),C=u[8],E=iw(u);let T=!0;if(3&f.type||y){const A=Rn(f,u),I=y?y(A):A,P=E.length,M=y?L=>y(xr(L[f.index])):f.index;let R=null;if(!y&&v&&(R=function YN(d,u,c,f){const p=d.cleanup;if(null!=p)for(let g=0;g<p.length-1;g+=2){const _=p[g];if(_===c&&p[g+1]===f){const y=u[7],v=p[g+2];return y.length>v?y[v]:null}"string"==typeof _&&(g+=2)}return null}(d,u,p,f.index)),null!==R)(R.__ngLastListenerFn__||R).__ngNextListenerFn__=g,R.__ngLastListenerFn__=g,T=!1;else{g=Sw(f,u,C,g,!1);const L=c.listen(I,p,g);E.push(g,L),w&&w.push(p,M,P,P+1)}}else g=Sw(f,u,C,g,!1);const D=f.outputs;let S;if(T&&null!==D&&(S=D[p])){const A=S.length;if(A)for(let I=0;I<A;I+=2){const j=u[S[I]][S[I+1]].subscribe(g),H=E.length;E.push(g,j),w&&w.push(p,f.index,H,-(H+1))}}}(g,p,p[11],_,d,u,0,f),ml}function Tw(d,u,c,f){try{return!1!==c(f)}catch(p){return aw(d,p),!1}}function Sw(d,u,c,f,p){return function g(_){if(_===Function)return f;Gm(2&d.flags?Fn(d.index,u):u);let v=Tw(u,0,f,_),x=g.__ngNextListenerFn__;for(;x;)v=Tw(u,0,x,_)&&v,x=x.__ngNextListenerFn__;return p&&!1===v&&(_.preventDefault(),_.returnValue=!1),v}}function t_(d=1){return function jR(d){return(gt.lFrame.contextLView=function GR(d,u){for(;d>0;)u=u[15],d--;return u}(d,gt.lFrame.contextLView))[8]}(d)}function yl(d,u=""){const c=ae(),f=Nt(),p=d+22,g=f.firstCreatePass?il(f,p,1,u,null):f.data[p],_=c[p]=function Xg(d,u){return d.createText(u)}(c[11],u);Vh(f,c,_,g),Li(g,!1)}function ud(d){return i_("",d,""),ud}function i_(d,u,c){const f=ae(),p=function al(d,u,c,f){return qr(d,Ha(),c)?u+mt(c)+f:_t}(f,d,u,c);return p!==_t&&ms(f,nn(),p),i_}const xl="en-US";let yC=xl;class jo{}class zC{}class $C extends jo{constructor(u,c){super(),this._parent=c,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Wm(this);const f=Mn(u);this._bootstrapComponents=ps(f.bootstrap),this._r3Injector=D1(u,c,[{provide:jo,useValue:this},{provide:Gu,useValue:this.componentFactoryResolver}],$t(u),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(u)}get injector(){return this._r3Injector}destroy(){const u=this._r3Injector;!u.destroyed&&u.destroy(),this.destroyCbs.forEach(c=>c()),this.destroyCbs=null}onDestroy(u){this.destroyCbs.push(u)}}class h_ extends zC{constructor(u){super(),this.moduleType=u}create(u){return new $C(this.moduleType,u)}}class kk extends jo{constructor(u,c,f){super(),this.componentFactoryResolver=new Wm(this),this.instance=null;const p=new h1([...u,{provide:jo,useValue:this},{provide:Gu,useValue:this.componentFactoryResolver}],c||Wh(),f,new Set(["environment"]));this.injector=p,p.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(u){this.injector.onDestroy(u)}}function pd(d,u,c=null){return new kk(d,u,c).injector}let Bk=(()=>{class d{constructor(c){this._injector=c,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(c){if(!c.standalone)return null;if(!this.cachedInjectors.has(c.id)){const f=a1(0,c.type),p=f.length>0?pd([f],this._injector,`Standalone[${c.type.name}]`):null;this.cachedInjectors.set(c.id,p)}return this.cachedInjectors.get(c.id)}ngOnDestroy(){try{for(const c of this.cachedInjectors.values())null!==c&&c.destroy()}finally{this.cachedInjectors.clear()}}}return d.\u0275prov=Dt({token:d,providedIn:"environment",factory:()=>new d(nt(qs))}),d})();function WC(d){d.getStandaloneInjector=u=>u.get(Bk).getOrCreateStandaloneInjector(d)}function gd(d,u,c,f){return function JC(d,u,c,f,p,g){const _=u+c;return qr(d,_,p)?function Ui(d,u,c){return d[u]=c}(d,_+1,g?f.call(g,p):f(p)):function tc(d,u){const c=d[u];return c===_t?void 0:c}(d,_+1)}(ae(),function rn(){const d=gt.lFrame;let u=d.bindingRootIndex;return-1===u&&(u=d.bindingRootIndex=d.tView.bindingStartIndex),u}(),d,u,c,f)}function f_(d){return u=>{setTimeout(d,void 0,u)}}const an=class uB extends ne{constructor(u=!1){super(),this.__isAsync=u}emit(u){super.next(u)}subscribe(u,c,f){let p=u,g=c||(()=>null),_=f;if(u&&"object"==typeof u){const v=u;p=v.next?.bind(v),g=v.error?.bind(v),_=v.complete?.bind(v)}this.__isAsync&&(g=f_(g),p&&(p=f_(p)),_&&(_=f_(_)));const y=super.subscribe({next:p,error:g,complete:_});return u instanceof Se&&u.add(y),y}};function cB(){return this._results[Uo()]()}class p_{constructor(u=!1){this._emitDistinctChangesOnly=u,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const c=Uo(),f=p_.prototype;f[c]||(f[c]=cB)}get changes(){return this._changes||(this._changes=new an)}get(u){return this._results[u]}map(u){return this._results.map(u)}filter(u){return this._results.filter(u)}find(u){return this._results.find(u)}reduce(u,c){return this._results.reduce(u,c)}forEach(u){this._results.forEach(u)}some(u){return this._results.some(u)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(u,c){const f=this;f.dirty=!1;const p=On(u);(this._changesDetected=!function c2(d,u,c){if(d.length!==u.length)return!1;for(let f=0;f<d.length;f++){let p=d[f],g=u[f];if(c&&(p=c(p),g=c(g)),g!==p)return!1}return!0}(f._results,p,c))&&(f._results=p,f.length=p.length,f.last=p[this.length-1],f.first=p[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let ys=(()=>{class d{}return d.__NG_ELEMENT_ID__=fB,d})();const hB=ys,dB=class extends hB{constructor(u,c,f){super(),this._declarationLView=u,this._declarationTContainer=c,this.elementRef=f}createEmbeddedView(u,c){const f=this._declarationTContainer.tViews,p=Jh(this._declarationLView,f,u,16,null,f.declTNode,null,null,null,null,c||null);p[17]=this._declarationLView[this._declarationTContainer.index];const _=this._declarationLView[19];return null!==_&&(p[19]=_.createEmbeddedView(f)),Lm(f,p,u),new zu(p)}};function fB(){return md(Ir(),ae())}function md(d,u){return 4&d.type?new dB(u,d,el(d,u)):null}let xi=(()=>{class d{}return d.__NG_ELEMENT_ID__=pB,d})();function pB(){return oE(Ir(),ae())}const gB=xi,iE=class extends gB{constructor(u,c,f){super(),this._lContainer=u,this._hostTNode=c,this._hostLView=f}get element(){return el(this._hostTNode,this._hostLView)}get injector(){return new za(this._hostTNode,this._hostLView)}get parentInjector(){const u=Ph(this._hostTNode,this._hostLView);if(qx(u)){const c=Ga(u,this._hostLView),f=ja(u);return new za(c[1].data[f+8],c)}return new za(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(u){const c=sE(this._lContainer);return null!==c&&c[u]||null}get length(){return this._lContainer.length-10}createEmbeddedView(u,c,f){let p,g;"number"==typeof f?p=f:null!=f&&(p=f.index,g=f.injector);const _=u.createEmbeddedView(c||{},g);return this.insert(_,p),_}createComponent(u,c,f,p,g){const _=u&&!function Au(d){return"function"==typeof d}(u);let y;if(_)y=c;else{const C=c||{};y=C.index,f=C.injector,p=C.projectableNodes,g=C.environmentInjector||C.ngModuleRef}const v=_?u:new $u(Gt(u)),x=f||this.parentInjector;if(!g&&null==v.ngModule){const E=(_?x:this.parentInjector).get(qs,null);E&&(g=E)}const w=v.create(x,p,void 0,g);return this.insert(w.hostView,y),w}insert(u,c){const f=u._lView,p=f[1];if(function PR(d){return fi(d[3])}(f)){const w=this.indexOf(u);if(-1!==w)this.detach(w);else{const C=f[3],E=new iE(C,C[6],C[3]);E.detach(E.indexOf(u))}}const g=this._adjustIndex(c),_=this._lContainer;!function aF(d,u,c,f){const p=10+f,g=c.length;f>0&&(c[p-1][4]=u),f<g-10?(u[4]=c[p],ob(c,10+f,u)):(c.push(u),u[4]=null),u[3]=c;const _=u[17];null!==_&&c!==_&&function lF(d,u){const c=d[9];u[16]!==u[3][3][16]&&(d[2]=!0),null===c?d[9]=[u]:c.push(u)}(_,u);const y=u[19];null!==y&&y.insertView(d),u[2]|=64}(p,f,_,g);const y=Qg(g,_),v=f[11],x=Uh(v,_[7]);return null!==x&&function iF(d,u,c,f,p,g){f[0]=p,f[6]=u,Uu(d,f,c,1,p,g)}(p,_[6],v,f,x,y),u.attachToViewContainerRef(),ob(g_(_),g,u),u}move(u,c){return this.insert(u,c)}indexOf(u){const c=sE(this._lContainer);return null!==c?c.indexOf(u):-1}remove(u){const c=this._adjustIndex(u,-1),f=Yg(this._lContainer,c);f&&(Oh(g_(this._lContainer),c),Ob(f[1],f))}detach(u){const c=this._adjustIndex(u,-1),f=Yg(this._lContainer,c);return f&&null!=Oh(g_(this._lContainer),c)?new zu(f):null}_adjustIndex(u,c=0){return u??this.length+c}};function sE(d){return d[8]}function g_(d){return d[8]||(d[8]=[])}function oE(d,u){let c;const f=u[d.index];if(fi(f))c=f;else{let p;if(8&d.type)p=xr(f);else{const g=u[11];p=g.createComment("");const _=Rn(d,u);No(g,Uh(g,_),p,function dF(d,u){return d.nextSibling(u)}(g,_),!1)}u[d.index]=c=nw(f,u,p,d),td(u,c)}return new iE(c,d,u)}class m_{constructor(u){this.queryList=u,this.matches=null}clone(){return new m_(this.queryList)}setDirty(){this.queryList.setDirty()}}class __{constructor(u=[]){this.queries=u}createEmbeddedView(u){const c=u.queries;if(null!==c){const f=null!==u.contentQueries?u.contentQueries[0]:c.length,p=[];for(let g=0;g<f;g++){const _=c.getByIndex(g);p.push(this.queries[_.indexInDeclarationView].clone())}return new __(p)}return null}insertView(u){this.dirtyQueriesWithMatches(u)}detachView(u){this.dirtyQueriesWithMatches(u)}dirtyQueriesWithMatches(u){for(let c=0;c<this.queries.length;c++)null!==dE(u,c).matches&&this.queries[c].setDirty()}}class aE{constructor(u,c,f=null){this.predicate=u,this.flags=c,this.read=f}}class y_{constructor(u=[]){this.queries=u}elementStart(u,c){for(let f=0;f<this.queries.length;f++)this.queries[f].elementStart(u,c)}elementEnd(u){for(let c=0;c<this.queries.length;c++)this.queries[c].elementEnd(u)}embeddedTView(u){let c=null;for(let f=0;f<this.length;f++){const p=null!==c?c.length:0,g=this.getByIndex(f).embeddedTView(u,p);g&&(g.indexInDeclarationView=f,null!==c?c.push(g):c=[g])}return null!==c?new y_(c):null}template(u,c){for(let f=0;f<this.queries.length;f++)this.queries[f].template(u,c)}getByIndex(u){return this.queries[u]}get length(){return this.queries.length}track(u){this.queries.push(u)}}class v_{constructor(u,c=-1){this.metadata=u,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=c}elementStart(u,c){this.isApplyingToNode(c)&&this.matchTNode(u,c)}elementEnd(u){this._declarationNodeIndex===u.index&&(this._appliesToNextNode=!1)}template(u,c){this.elementStart(u,c)}embeddedTView(u,c){return this.isApplyingToNode(u)?(this.crossesNgTemplate=!0,this.addMatch(-u.index,c),new v_(this.metadata)):null}isApplyingToNode(u){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const c=this._declarationNodeIndex;let f=u.parent;for(;null!==f&&8&f.type&&f.index!==c;)f=f.parent;return c===(null!==f?f.index:-1)}return this._appliesToNextNode}matchTNode(u,c){const f=this.metadata.predicate;if(Array.isArray(f))for(let p=0;p<f.length;p++){const g=f[p];this.matchTNodeWithReadOption(u,c,yB(c,g)),this.matchTNodeWithReadOption(u,c,Fh(c,u,g,!1,!1))}else f===ys?4&c.type&&this.matchTNodeWithReadOption(u,c,-1):this.matchTNodeWithReadOption(u,c,Fh(c,u,f,!1,!1))}matchTNodeWithReadOption(u,c,f){if(null!==f){const p=this.metadata.read;if(null!==p)if(p===Ys||p===xi||p===ys&&4&c.type)this.addMatch(c.index,-2);else{const g=Fh(c,u,p,!1,!1);null!==g&&this.addMatch(c.index,g)}else this.addMatch(c.index,f)}}addMatch(u,c){null===this.matches?this.matches=[u,c]:this.matches.push(u,c)}}function yB(d,u){const c=d.localNames;if(null!==c)for(let f=0;f<c.length;f+=2)if(c[f]===u)return c[f+1];return null}function xB(d,u,c,f){return-1===c?function vB(d,u){return 11&d.type?el(d,u):4&d.type?md(d,u):null}(u,d):-2===c?function bB(d,u,c){return c===Ys?el(u,d):c===ys?md(u,d):c===xi?oE(u,d):void 0}(d,u,f):Tu(d,d[1],c,u)}function lE(d,u,c,f){const p=u[19].queries[f];if(null===p.matches){const g=d.data,_=c.matches,y=[];for(let v=0;v<_.length;v+=2){const x=_[v];y.push(x<0?null:xB(u,g[x],_[v+1],c.metadata.read))}p.matches=y}return p.matches}function x_(d,u,c,f){const p=d.queries.getByIndex(c),g=p.matches;if(null!==g){const _=lE(d,u,p,c);for(let y=0;y<g.length;y+=2){const v=g[y];if(v>0)f.push(_[y/2]);else{const x=g[y+1],w=u[-v];for(let C=10;C<w.length;C++){const E=w[C];E[17]===E[3]&&x_(E[1],E,x,f)}if(null!==w[9]){const C=w[9];for(let E=0;E<C.length;E++){const T=C[E];x_(T[1],T,x,f)}}}}}return f}function _d(d){const u=ae(),c=Nt(),f=Bx();bg(f+1);const p=dE(c,f);if(d.dirty&&function MR(d){return 4==(4&d[2])}(u)===(2==(2&p.metadata.flags))){if(null===p.matches)d.reset([]);else{const g=p.crossesNgTemplate?x_(c,u,f,[]):lE(c,u,p,f);d.reset(g,nO),d.notifyOnChanges()}return!0}return!1}function uE(d,u,c){const f=Nt();f.firstCreatePass&&(function hE(d,u,c){null===d.queries&&(d.queries=new y_),d.queries.track(new v_(u,c))}(f,new aE(d,u,c),-1),2==(2&u)&&(f.staticViewQueries=!0)),function cE(d,u,c){const f=new p_(4==(4&c));q1(d,u,f,f.destroy),null===u[19]&&(u[19]=new __),u[19].queries.push(new m_(f))}(f,ae(),u)}function dE(d,u){return d.queries.getByIndex(u)}function xd(...d){}const bd=new ft("Application Initializer");let wd=(()=>{class d{constructor(c){this.appInits=c,this.resolve=xd,this.reject=xd,this.initialized=!1,this.done=!1,this.donePromise=new Promise((f,p)=>{this.resolve=f,this.reject=p})}runInitializers(){if(this.initialized)return;const c=[],f=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let p=0;p<this.appInits.length;p++){const g=this.appInits[p]();if(ad(g))c.push(g);else if(ww(g)){const _=new Promise((y,v)=>{g.subscribe({complete:y,error:v})});c.push(_)}}Promise.all(c).then(()=>{f()}).catch(p=>{this.reject(p)}),0===c.length&&f(),this.initialized=!0}}return d.\u0275fac=function(c){return new(c||d)(nt(bd,8))},d.\u0275prov=Dt({token:d,factory:d.\u0275fac,providedIn:"root"}),d})();const ic=new ft("AppId",{providedIn:"root",factory:function PE(){return`${S_()}${S_()}${S_()}`}});function S_(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const RE=new ft("Platform Initializer"),FE=new ft("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),OE=new ft("appBootstrapListener");let zB=(()=>{class d{log(c){console.log(c)}warn(c){console.warn(c)}}return d.\u0275fac=function(c){return new(c||d)},d.\u0275prov=Dt({token:d,factory:d.\u0275fac,providedIn:"platform"}),d})();const vs=new ft("LocaleId",{providedIn:"root",factory:()=>pr(vs,ot.Optional|ot.SkipSelf)||function $B(){return typeof $localize<"u"&&$localize.locale||xl}()});class XB{constructor(u,c){this.ngModuleFactory=u,this.componentFactories=c}}let D_=(()=>{class d{compileModuleSync(c){return new h_(c)}compileModuleAsync(c){return Promise.resolve(this.compileModuleSync(c))}compileModuleAndAllComponentsSync(c){const f=this.compileModuleSync(c),g=ps(Mn(c).declarations).reduce((_,y)=>{const v=Gt(y);return v&&_.push(new $u(v)),_},[]);return new XB(f,g)}compileModuleAndAllComponentsAsync(c){return Promise.resolve(this.compileModuleAndAllComponentsSync(c))}clearCache(){}clearCacheFor(c){}getModuleId(c){}}return d.\u0275fac=function(c){return new(c||d)},d.\u0275prov=Dt({token:d,factory:d.\u0275fac,providedIn:"root"}),d})();const KB=(()=>Promise.resolve(0))();function A_(d){typeof Zone>"u"?KB.then(()=>{d&&d.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",d)}class Rr{constructor({enableLongStackTrace:u=!1,shouldCoalesceEventChangeDetection:c=!1,shouldCoalesceRunChangeDetection:f=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new an(!1),this.onMicrotaskEmpty=new an(!1),this.onStable=new an(!1),this.onError=new an(!1),typeof Zone>"u")throw new je(908,!1);Zone.assertZonePatched();const p=this;if(p._nesting=0,p._outer=p._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const g=Zone.AsyncStackTaggingZoneSpec;p._inner=p._inner.fork(new g("Angular"))}Zone.TaskTrackingZoneSpec&&(p._inner=p._inner.fork(new Zone.TaskTrackingZoneSpec)),u&&Zone.longStackTraceZoneSpec&&(p._inner=p._inner.fork(Zone.longStackTraceZoneSpec)),p.shouldCoalesceEventChangeDetection=!f&&c,p.shouldCoalesceRunChangeDetection=f,p.lastRequestAnimationFrameId=-1,p.nativeRequestAnimationFrame=function ZB(){let d=qt.requestAnimationFrame,u=qt.cancelAnimationFrame;if(typeof Zone<"u"&&d&&u){const c=d[Zone.__symbol__("OriginalDelegate")];c&&(d=c);const f=u[Zone.__symbol__("OriginalDelegate")];f&&(u=f)}return{nativeRequestAnimationFrame:d,nativeCancelAnimationFrame:u}}().nativeRequestAnimationFrame,function e3(d){const u=()=>{!function JB(d){d.isCheckStableRunning||-1!==d.lastRequestAnimationFrameId||(d.lastRequestAnimationFrameId=d.nativeRequestAnimationFrame.call(qt,()=>{d.fakeTopEventTask||(d.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{d.lastRequestAnimationFrameId=-1,M_(d),d.isCheckStableRunning=!0,I_(d),d.isCheckStableRunning=!1},void 0,()=>{},()=>{})),d.fakeTopEventTask.invoke()}),M_(d))}(d)};d._inner=d._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(c,f,p,g,_,y)=>{try{return kE(d),c.invokeTask(p,g,_,y)}finally{(d.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||d.shouldCoalesceRunChangeDetection)&&u(),BE(d)}},onInvoke:(c,f,p,g,_,y,v)=>{try{return kE(d),c.invoke(p,g,_,y,v)}finally{d.shouldCoalesceRunChangeDetection&&u(),BE(d)}},onHasTask:(c,f,p,g)=>{c.hasTask(p,g),f===p&&("microTask"==g.change?(d._hasPendingMicrotasks=g.microTask,M_(d),I_(d)):"macroTask"==g.change&&(d.hasPendingMacrotasks=g.macroTask))},onHandleError:(c,f,p,g)=>(c.handleError(p,g),d.runOutsideAngular(()=>d.onError.emit(g)),!1)})}(p)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Rr.isInAngularZone())throw new je(909,!1)}static assertNotInAngularZone(){if(Rr.isInAngularZone())throw new je(909,!1)}run(u,c,f){return this._inner.run(u,c,f)}runTask(u,c,f,p){const g=this._inner,_=g.scheduleEventTask("NgZoneEvent: "+p,u,QB,xd,xd);try{return g.runTask(_,c,f)}finally{g.cancelTask(_)}}runGuarded(u,c,f){return this._inner.runGuarded(u,c,f)}runOutsideAngular(u){return this._outer.run(u)}}const QB={};function I_(d){if(0==d._nesting&&!d.hasPendingMicrotasks&&!d.isStable)try{d._nesting++,d.onMicrotaskEmpty.emit(null)}finally{if(d._nesting--,!d.hasPendingMicrotasks)try{d.runOutsideAngular(()=>d.onStable.emit(null))}finally{d.isStable=!0}}}function M_(d){d.hasPendingMicrotasks=!!(d._hasPendingMicrotasks||(d.shouldCoalesceEventChangeDetection||d.shouldCoalesceRunChangeDetection)&&-1!==d.lastRequestAnimationFrameId)}function kE(d){d._nesting++,d.isStable&&(d.isStable=!1,d.onUnstable.emit(null))}function BE(d){d._nesting--,I_(d)}class t3{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new an,this.onMicrotaskEmpty=new an,this.onStable=new an,this.onError=new an}run(u,c,f){return u.apply(c,f)}runGuarded(u,c,f){return u.apply(c,f)}runOutsideAngular(u){return u()}runTask(u,c,f,p){return u.apply(c,f)}}const UE=new ft(""),Cd=new ft("");let F_,P_=(()=>{class d{constructor(c,f,p){this._ngZone=c,this.registry=f,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,F_||(function r3(d){F_=d}(p),p.addToWindow(f)),this._watchAngularEvents(),c.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Rr.assertNotInAngularZone(),A_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())A_(()=>{for(;0!==this._callbacks.length;){let c=this._callbacks.pop();clearTimeout(c.timeoutId),c.doneCb(this._didWork)}this._didWork=!1});else{let c=this.getPendingTasks();this._callbacks=this._callbacks.filter(f=>!f.updateCb||!f.updateCb(c)||(clearTimeout(f.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(c=>({source:c.source,creationLocation:c.creationLocation,data:c.data})):[]}addCallback(c,f,p){let g=-1;f&&f>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==g),c(this._didWork,this.getPendingTasks())},f)),this._callbacks.push({doneCb:c,timeoutId:g,updateCb:p})}whenStable(c,f,p){if(p&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(c,f,p),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(c){this.registry.registerApplication(c,this)}unregisterApplication(c){this.registry.unregisterApplication(c)}findProviders(c,f,p){return[]}}return d.\u0275fac=function(c){return new(c||d)(nt(Rr),nt(R_),nt(Cd))},d.\u0275prov=Dt({token:d,factory:d.\u0275fac}),d})(),R_=(()=>{class d{constructor(){this._applications=new Map}registerApplication(c,f){this._applications.set(c,f)}unregisterApplication(c){this._applications.delete(c)}unregisterAllApplications(){this._applications.clear()}getTestability(c){return this._applications.get(c)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(c,f=!0){return F_?.findTestabilityInTree(this,c,f)??null}}return d.\u0275fac=function(c){return new(c||d)},d.\u0275prov=Dt({token:d,factory:d.\u0275fac,providedIn:"platform"}),d})(),Qs=null;const VE=new ft("AllowMultipleToken"),O_=new ft("PlatformDestroyListeners");class HE{constructor(u,c){this.name=u,this.token=c}}function GE(d,u,c=[]){const f=`Platform: ${u}`,p=new ft(f);return(g=[])=>{let _=N_();if(!_||_.injector.get(VE,!1)){const y=[...c,...g,{provide:p,useValue:!0}];d?d(y):function s3(d){if(Qs&&!Qs.get(VE,!1))throw new je(400,!1);Qs=d;const u=d.get($E);(function jE(d){const u=d.get(RE,null);u&&u.forEach(c=>c())})(d)}(function zE(d=[],u){return mi.create({name:u,providers:[{provide:fm,useValue:"platform"},{provide:O_,useValue:new Set([()=>Qs=null])},...d]})}(y,f))}return function a3(d){const u=N_();if(!u)throw new je(401,!1);return u}()}}function N_(){return Qs?.get($E)??null}let $E=(()=>{class d{constructor(c){this._injector=c,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(c,f){const p=function XE(d,u){let c;return c="noop"===d?new t3:("zone.js"===d?void 0:d)||new Rr(u),c}(f?.ngZone,function WE(d){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!d||!d.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!d||!d.ngZoneRunCoalescing)||!1}}(f)),g=[{provide:Rr,useValue:p}];return p.run(()=>{const _=mi.create({providers:g,parent:this.injector,name:c.moduleType.name}),y=c.create(_),v=y.injector.get(tl,null);if(!v)throw new je(402,!1);return p.runOutsideAngular(()=>{const x=p.onError.subscribe({next:w=>{v.handleError(w)}});y.onDestroy(()=>{Td(this._modules,y),x.unsubscribe()})}),function qE(d,u,c){try{const f=c();return ad(f)?f.catch(p=>{throw u.runOutsideAngular(()=>d.handleError(p)),p}):f}catch(f){throw u.runOutsideAngular(()=>d.handleError(f)),f}}(v,p,()=>{const x=y.injector.get(wd);return x.runInitializers(),x.donePromise.then(()=>(function vC(d){In(d,"Expected localeId to be defined"),"string"==typeof d&&(yC=d.toLowerCase().replace(/_/g,"-"))}(y.injector.get(vs,xl)||xl),this._moduleDoBootstrap(y),y))})})}bootstrapModule(c,f=[]){const p=YE({},f);return function n3(d,u,c){const f=new h_(c);return Promise.resolve(f)}(0,0,c).then(g=>this.bootstrapModuleFactory(g,p))}_moduleDoBootstrap(c){const f=c.injector.get(Ed);if(c._bootstrapComponents.length>0)c._bootstrapComponents.forEach(p=>f.bootstrap(p));else{if(!c.instance.ngDoBootstrap)throw new je(403,!1);c.instance.ngDoBootstrap(f)}this._modules.push(c)}onDestroy(c){this._destroyListeners.push(c)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new je(404,!1);this._modules.slice().forEach(f=>f.destroy()),this._destroyListeners.forEach(f=>f());const c=this._injector.get(O_,null);c&&(c.forEach(f=>f()),c.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return d.\u0275fac=function(c){return new(c||d)(nt(mi))},d.\u0275prov=Dt({token:d,factory:d.\u0275fac,providedIn:"platform"}),d})();function YE(d,u){return Array.isArray(u)?u.reduce(YE,d):{...d,...u}}let Ed=(()=>{class d{constructor(c,f,p){this._zone=c,this._injector=f,this._exceptionHandler=p,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const g=new O(y=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{y.next(this._stable),y.complete()})}),_=new O(y=>{let v;this._zone.runOutsideAngular(()=>{v=this._zone.onStable.subscribe(()=>{Rr.assertNotInAngularZone(),A_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,y.next(!0))})})});const x=this._zone.onUnstable.subscribe(()=>{Rr.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{y.next(!1)}))});return()=>{v.unsubscribe(),x.unsubscribe()}});this.isStable=function JP(...d){const u=pu(d),c=function WP(d,u){return"number"==typeof Qp(d)?d.pop():u}(d,1/0),f=d;return f.length?1===f.length?hn(f[0]):Hs(c)(Ar(f,u)):$n}(g,_.pipe(function eR(d={}){const{connector:u=(()=>new ne),resetOnError:c=!0,resetOnComplete:f=!0,resetOnRefCountZero:p=!0}=d;return g=>{let _,y,v,x=0,w=!1,C=!1;const E=()=>{y?.unsubscribe(),y=void 0},T=()=>{E(),_=v=void 0,w=C=!1},D=()=>{const S=_;T(),S?.unsubscribe()};return oe((S,A)=>{x++,!C&&!w&&E();const I=v=v??u();A.add(()=>{x--,0===x&&!C&&!w&&(y=Jp(D,p))}),I.subscribe(A),!_&&x>0&&(_=new Ae({next:P=>I.next(P),error:P=>{C=!0,E(),y=Jp(T,c,P),I.error(P)},complete:()=>{w=!0,E(),y=Jp(T,f),I.complete()}}),hn(S).subscribe(_))})(g)}}()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(c,f){const p=c instanceof f1;if(!this._injector.get(wd).done)throw!p&&function La(d){const u=Gt(d)||en(d)||tn(d);return null!==u&&u.standalone}(c),new je(405,false);let _;_=p?c:this._injector.get(Gu).resolveComponentFactory(c),this.componentTypes.push(_.componentType);const y=function i3(d){return d.isBoundToModule}(_)?void 0:this._injector.get(jo),x=_.create(mi.NULL,[],f||_.selector,y),w=x.location.nativeElement,C=x.injector.get(UE,null);return C?.registerApplication(w),x.onDestroy(()=>{this.detachView(x.hostView),Td(this.components,x),C?.unregisterApplication(w)}),this._loadComponent(x),x}tick(){if(this._runningTick)throw new je(101,!1);try{this._runningTick=!0;for(let c of this._views)c.detectChanges()}catch(c){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(c))}finally{this._runningTick=!1}}attachView(c){const f=c;this._views.push(f),f.attachToAppRef(this)}detachView(c){const f=c;Td(this._views,f),f.detachFromAppRef()}_loadComponent(c){this.attachView(c.hostView),this.tick(),this.components.push(c),this._injector.get(OE,[]).concat(this._bootstrapListeners).forEach(p=>p(c))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(c=>c()),this._views.slice().forEach(c=>c.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(c){return this._destroyListeners.push(c),()=>Td(this._destroyListeners,c)}destroy(){if(this._destroyed)throw new je(406,!1);const c=this._injector;c.destroy&&!c.destroyed&&c.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return d.\u0275fac=function(c){return new(c||d)(nt(Rr),nt(qs),nt(tl))},d.\u0275prov=Dt({token:d,factory:d.\u0275fac,providedIn:"root"}),d})();function Td(d,u){const c=d.indexOf(u);c>-1&&d.splice(c,1)}let ZE=!0,L_=(()=>{class d{}return d.__NG_ELEMENT_ID__=c3,d})();function c3(d){return function h3(d,u,c){if(bh(d)&&!c){const f=Fn(d.index,u);return new zu(f,f)}return 47&d.type?new zu(u[16],u):null}(Ir(),ae(),16==(16&d))}class rT{constructor(){}supports(u){return Wu(u)}create(u){return new _3(u)}}const m3=(d,u)=>u;class _3{constructor(u){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=u||m3}forEachItem(u){let c;for(c=this._itHead;null!==c;c=c._next)u(c)}forEachOperation(u){let c=this._itHead,f=this._removalsHead,p=0,g=null;for(;c||f;){const _=!f||c&&c.currentIndex<iT(f,p,g)?c:f,y=iT(_,p,g),v=_.currentIndex;if(_===f)p--,f=f._nextRemoved;else if(c=c._next,null==_.previousIndex)p++;else{g||(g=[]);const x=y-p,w=v-p;if(x!=w){for(let E=0;E<x;E++){const T=E<g.length?g[E]:g[E]=0,D=T+E;w<=D&&D<x&&(g[E]=T+1)}g[_.previousIndex]=w-x}}y!==v&&u(_,y,v)}}forEachPreviousItem(u){let c;for(c=this._previousItHead;null!==c;c=c._nextPrevious)u(c)}forEachAddedItem(u){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)u(c)}forEachMovedItem(u){let c;for(c=this._movesHead;null!==c;c=c._nextMoved)u(c)}forEachRemovedItem(u){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)u(c)}forEachIdentityChange(u){let c;for(c=this._identityChangesHead;null!==c;c=c._nextIdentityChange)u(c)}diff(u){if(null==u&&(u=[]),!Wu(u))throw new je(900,!1);return this.check(u)?this:null}onDestroy(){}check(u){this._reset();let p,g,_,c=this._itHead,f=!1;if(Array.isArray(u)){this.length=u.length;for(let y=0;y<this.length;y++)g=u[y],_=this._trackByFn(y,g),null!==c&&Object.is(c.trackById,_)?(f&&(c=this._verifyReinsertion(c,g,_,y)),Object.is(c.item,g)||this._addIdentityChange(c,g)):(c=this._mismatch(c,g,_,y),f=!0),c=c._next}else p=0,function HN(d,u){if(Array.isArray(d))for(let c=0;c<d.length;c++)u(d[c]);else{const c=d[Uo()]();let f;for(;!(f=c.next()).done;)u(f.value)}}(u,y=>{_=this._trackByFn(p,y),null!==c&&Object.is(c.trackById,_)?(f&&(c=this._verifyReinsertion(c,y,_,p)),Object.is(c.item,y)||this._addIdentityChange(c,y)):(c=this._mismatch(c,y,_,p),f=!0),c=c._next,p++}),this.length=p;return this._truncate(c),this.collection=u,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let u;for(u=this._previousItHead=this._itHead;null!==u;u=u._next)u._nextPrevious=u._next;for(u=this._additionsHead;null!==u;u=u._nextAdded)u.previousIndex=u.currentIndex;for(this._additionsHead=this._additionsTail=null,u=this._movesHead;null!==u;u=u._nextMoved)u.previousIndex=u.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(u,c,f,p){let g;return null===u?g=this._itTail:(g=u._prev,this._remove(u)),null!==(u=null===this._unlinkedRecords?null:this._unlinkedRecords.get(f,null))?(Object.is(u.item,c)||this._addIdentityChange(u,c),this._reinsertAfter(u,g,p)):null!==(u=null===this._linkedRecords?null:this._linkedRecords.get(f,p))?(Object.is(u.item,c)||this._addIdentityChange(u,c),this._moveAfter(u,g,p)):u=this._addAfter(new y3(c,f),g,p),u}_verifyReinsertion(u,c,f,p){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(f,null);return null!==g?u=this._reinsertAfter(g,u._prev,p):u.currentIndex!=p&&(u.currentIndex=p,this._addToMoves(u,p)),u}_truncate(u){for(;null!==u;){const c=u._next;this._addToRemovals(this._unlink(u)),u=c}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(u,c,f){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(u);const p=u._prevRemoved,g=u._nextRemoved;return null===p?this._removalsHead=g:p._nextRemoved=g,null===g?this._removalsTail=p:g._prevRemoved=p,this._insertAfter(u,c,f),this._addToMoves(u,f),u}_moveAfter(u,c,f){return this._unlink(u),this._insertAfter(u,c,f),this._addToMoves(u,f),u}_addAfter(u,c,f){return this._insertAfter(u,c,f),this._additionsTail=null===this._additionsTail?this._additionsHead=u:this._additionsTail._nextAdded=u,u}_insertAfter(u,c,f){const p=null===c?this._itHead:c._next;return u._next=p,u._prev=c,null===p?this._itTail=u:p._prev=u,null===c?this._itHead=u:c._next=u,null===this._linkedRecords&&(this._linkedRecords=new nT),this._linkedRecords.put(u),u.currentIndex=f,u}_remove(u){return this._addToRemovals(this._unlink(u))}_unlink(u){null!==this._linkedRecords&&this._linkedRecords.remove(u);const c=u._prev,f=u._next;return null===c?this._itHead=f:c._next=f,null===f?this._itTail=c:f._prev=c,u}_addToMoves(u,c){return u.previousIndex===c||(this._movesTail=null===this._movesTail?this._movesHead=u:this._movesTail._nextMoved=u),u}_addToRemovals(u){return null===this._unlinkedRecords&&(this._unlinkedRecords=new nT),this._unlinkedRecords.put(u),u.currentIndex=null,u._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=u,u._prevRemoved=null):(u._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=u),u}_addIdentityChange(u,c){return u.item=c,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=u:this._identityChangesTail._nextIdentityChange=u,u}}class y3{constructor(u,c){this.item=u,this.trackById=c,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class v3{constructor(){this._head=null,this._tail=null}add(u){null===this._head?(this._head=this._tail=u,u._nextDup=null,u._prevDup=null):(this._tail._nextDup=u,u._prevDup=this._tail,u._nextDup=null,this._tail=u)}get(u,c){let f;for(f=this._head;null!==f;f=f._nextDup)if((null===c||c<=f.currentIndex)&&Object.is(f.trackById,u))return f;return null}remove(u){const c=u._prevDup,f=u._nextDup;return null===c?this._head=f:c._nextDup=f,null===f?this._tail=c:f._prevDup=c,null===this._head}}class nT{constructor(){this.map=new Map}put(u){const c=u.trackById;let f=this.map.get(c);f||(f=new v3,this.map.set(c,f)),f.add(u)}get(u,c){const p=this.map.get(u);return p?p.get(u,c):null}remove(u){const c=u.trackById;return this.map.get(c).remove(u)&&this.map.delete(c),u}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function iT(d,u,c){const f=d.previousIndex;if(null===f)return f;let p=0;return c&&f<c.length&&(p=c[f]),f+u+p}class sT{constructor(){}supports(u){return u instanceof Map||Ym(u)}create(){return new x3}}class x3{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(u){let c;for(c=this._mapHead;null!==c;c=c._next)u(c)}forEachPreviousItem(u){let c;for(c=this._previousMapHead;null!==c;c=c._nextPrevious)u(c)}forEachChangedItem(u){let c;for(c=this._changesHead;null!==c;c=c._nextChanged)u(c)}forEachAddedItem(u){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)u(c)}forEachRemovedItem(u){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)u(c)}diff(u){if(u){if(!(u instanceof Map||Ym(u)))throw new je(900,!1)}else u=new Map;return this.check(u)?this:null}onDestroy(){}check(u){this._reset();let c=this._mapHead;if(this._appendAfter=null,this._forEach(u,(f,p)=>{if(c&&c.key===p)this._maybeAddToChanges(c,f),this._appendAfter=c,c=c._next;else{const g=this._getOrCreateRecordForKey(p,f);c=this._insertBeforeOrAppend(c,g)}}),c){c._prev&&(c._prev._next=null),this._removalsHead=c;for(let f=c;null!==f;f=f._nextRemoved)f===this._mapHead&&(this._mapHead=null),this._records.delete(f.key),f._nextRemoved=f._next,f.previousValue=f.currentValue,f.currentValue=null,f._prev=null,f._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(u,c){if(u){const f=u._prev;return c._next=u,c._prev=f,u._prev=c,f&&(f._next=c),u===this._mapHead&&(this._mapHead=c),this._appendAfter=u,u}return this._appendAfter?(this._appendAfter._next=c,c._prev=this._appendAfter):this._mapHead=c,this._appendAfter=c,null}_getOrCreateRecordForKey(u,c){if(this._records.has(u)){const p=this._records.get(u);this._maybeAddToChanges(p,c);const g=p._prev,_=p._next;return g&&(g._next=_),_&&(_._prev=g),p._next=null,p._prev=null,p}const f=new b3(u);return this._records.set(u,f),f.currentValue=c,this._addToAdditions(f),f}_reset(){if(this.isDirty){let u;for(this._previousMapHead=this._mapHead,u=this._previousMapHead;null!==u;u=u._next)u._nextPrevious=u._next;for(u=this._changesHead;null!==u;u=u._nextChanged)u.previousValue=u.currentValue;for(u=this._additionsHead;null!=u;u=u._nextAdded)u.previousValue=u.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(u,c){Object.is(c,u.currentValue)||(u.previousValue=u.currentValue,u.currentValue=c,this._addToChanges(u))}_addToAdditions(u){null===this._additionsHead?this._additionsHead=this._additionsTail=u:(this._additionsTail._nextAdded=u,this._additionsTail=u)}_addToChanges(u){null===this._changesHead?this._changesHead=this._changesTail=u:(this._changesTail._nextChanged=u,this._changesTail=u)}_forEach(u,c){u instanceof Map?u.forEach(c):Object.keys(u).forEach(f=>c(u[f],f))}}class b3{constructor(u){this.key=u,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function oT(){return new Ad([new rT])}let Ad=(()=>{class d{constructor(c){this.factories=c}static create(c,f){if(null!=f){const p=f.factories.slice();c=c.concat(p)}return new d(c)}static extend(c){return{provide:d,useFactory:f=>d.create(c,f||oT()),deps:[[d,new Ou,new Fu]]}}find(c){const f=this.factories.find(p=>p.supports(c));if(null!=f)return f;throw new je(901,!1)}}return d.\u0275prov=Dt({token:d,providedIn:"root",factory:oT}),d})();function aT(){return new sc([new sT])}let sc=(()=>{class d{constructor(c){this.factories=c}static create(c,f){if(f){const p=f.factories.slice();c=c.concat(p)}return new d(c)}static extend(c){return{provide:d,useFactory:f=>d.create(c,f||aT()),deps:[[d,new Ou,new Fu]]}}find(c){const f=this.factories.find(p=>p.supports(c));if(f)return f;throw new je(901,!1)}}return d.\u0275prov=Dt({token:d,providedIn:"root",factory:aT}),d})();const E3=GE(null,"core",[]);let T3=(()=>{class d{constructor(c){}}return d.\u0275fac=function(c){return new(c||d)(nt(Ed))},d.\u0275mod=Ao({type:d}),d.\u0275inj=js({}),d})(),Id=null;function Js(){return Id}const gn=new ft("DocumentToken");let H_=(()=>{class d{historyGo(c){throw new Error("Not implemented")}}return d.\u0275fac=function(c){return new(c||d)},d.\u0275prov=Dt({token:d,factory:function(){return function I3(){return nt(lT)}()},providedIn:"platform"}),d})();const M3=new ft("Location Initialized");let lT=(()=>{class d extends H_{constructor(c){super(),this._doc=c,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Js().getBaseHref(this._doc)}onPopState(c){const f=Js().getGlobalEventTarget(this._doc,"window");return f.addEventListener("popstate",c,!1),()=>f.removeEventListener("popstate",c)}onHashChange(c){const f=Js().getGlobalEventTarget(this._doc,"window");return f.addEventListener("hashchange",c,!1),()=>f.removeEventListener("hashchange",c)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(c){this.location.pathname=c}pushState(c,f,p){uT()?this._history.pushState(c,f,p):this.location.hash=p}replaceState(c,f,p){uT()?this._history.replaceState(c,f,p):this.location.hash=p}forward(){this._history.forward()}back(){this._history.back()}historyGo(c=0){this._history.go(c)}getState(){return this._history.state}}return d.\u0275fac=function(c){return new(c||d)(nt(gn))},d.\u0275prov=Dt({token:d,factory:function(){return function P3(){return new lT(nt(gn))}()},providedIn:"platform"}),d})();function uT(){return!!window.history.pushState}function j_(d,u){if(0==d.length)return u;if(0==u.length)return d;let c=0;return d.endsWith("/")&&c++,u.startsWith("/")&&c++,2==c?d+u.substring(1):1==c?d+u:d+"/"+u}function cT(d){const u=d.match(/#|\?|$/),c=u&&u.index||d.length;return d.slice(0,c-("/"===d[c-1]?1:0))+d.slice(c)}function bs(d){return d&&"?"!==d[0]?"?"+d:d}let zo=(()=>{class d{historyGo(c){throw new Error("Not implemented")}}return d.\u0275fac=function(c){return new(c||d)},d.\u0275prov=Dt({token:d,factory:function(){return pr(dT)},providedIn:"root"}),d})();const hT=new ft("appBaseHref");let dT=(()=>{class d extends zo{constructor(c,f){super(),this._platformLocation=c,this._removeListenerFns=[],this._baseHref=f??this._platformLocation.getBaseHrefFromDOM()??pr(gn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(c){this._removeListenerFns.push(this._platformLocation.onPopState(c),this._platformLocation.onHashChange(c))}getBaseHref(){return this._baseHref}prepareExternalUrl(c){return j_(this._baseHref,c)}path(c=!1){const f=this._platformLocation.pathname+bs(this._platformLocation.search),p=this._platformLocation.hash;return p&&c?`${f}${p}`:f}pushState(c,f,p,g){const _=this.prepareExternalUrl(p+bs(g));this._platformLocation.pushState(c,f,_)}replaceState(c,f,p,g){const _=this.prepareExternalUrl(p+bs(g));this._platformLocation.replaceState(c,f,_)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(c=0){this._platformLocation.historyGo?.(c)}}return d.\u0275fac=function(c){return new(c||d)(nt(H_),nt(hT,8))},d.\u0275prov=Dt({token:d,factory:d.\u0275fac,providedIn:"root"}),d})(),R3=(()=>{class d extends zo{constructor(c,f){super(),this._platformLocation=c,this._baseHref="",this._removeListenerFns=[],null!=f&&(this._baseHref=f)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(c){this._removeListenerFns.push(this._platformLocation.onPopState(c),this._platformLocation.onHashChange(c))}getBaseHref(){return this._baseHref}path(c=!1){let f=this._platformLocation.hash;return null==f&&(f="#"),f.length>0?f.substring(1):f}prepareExternalUrl(c){const f=j_(this._baseHref,c);return f.length>0?"#"+f:f}pushState(c,f,p,g){let _=this.prepareExternalUrl(p+bs(g));0==_.length&&(_=this._platformLocation.pathname),this._platformLocation.pushState(c,f,_)}replaceState(c,f,p,g){let _=this.prepareExternalUrl(p+bs(g));0==_.length&&(_=this._platformLocation.pathname),this._platformLocation.replaceState(c,f,_)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(c=0){this._platformLocation.historyGo?.(c)}}return d.\u0275fac=function(c){return new(c||d)(nt(H_),nt(hT,8))},d.\u0275prov=Dt({token:d,factory:d.\u0275fac}),d})(),G_=(()=>{class d{constructor(c){this._subject=new an,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=c;const f=this._locationStrategy.getBaseHref();this._baseHref=cT(fT(f)),this._locationStrategy.onPopState(p=>{this._subject.emit({url:this.path(!0),pop:!0,state:p.state,type:p.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(c=!1){return this.normalize(this._locationStrategy.path(c))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(c,f=""){return this.path()==this.normalize(c+bs(f))}normalize(c){return d.stripTrailingSlash(function O3(d,u){return d&&u.startsWith(d)?u.substring(d.length):u}(this._baseHref,fT(c)))}prepareExternalUrl(c){return c&&"/"!==c[0]&&(c="/"+c),this._locationStrategy.prepareExternalUrl(c)}go(c,f="",p=null){this._locationStrategy.pushState(p,"",c,f),this._notifyUrlChangeListeners(this.prepareExternalUrl(c+bs(f)),p)}replaceState(c,f="",p=null){this._locationStrategy.replaceState(p,"",c,f),this._notifyUrlChangeListeners(this.prepareExternalUrl(c+bs(f)),p)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(c=0){this._locationStrategy.historyGo?.(c)}onUrlChange(c){return this._urlChangeListeners.push(c),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(f=>{this._notifyUrlChangeListeners(f.url,f.state)})),()=>{const f=this._urlChangeListeners.indexOf(c);this._urlChangeListeners.splice(f,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(c="",f){this._urlChangeListeners.forEach(p=>p(c,f))}subscribe(c,f,p){return this._subject.subscribe({next:c,error:f,complete:p})}}return d.normalizeQueryParams=bs,d.joinWithSlash=j_,d.stripTrailingSlash=cT,d.\u0275fac=function(c){return new(c||d)(nt(zo))},d.\u0275prov=Dt({token:d,factory:function(){return function F3(){return new G_(nt(zo))}()},providedIn:"root"}),d})();function fT(d){return d.replace(/\/index.html$/,"")}let wT=(()=>{class d{constructor(c,f,p,g){this._iterableDiffers=c,this._keyValueDiffers=f,this._ngEl=p,this._renderer=g,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(c){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof c?c.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(c){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof c?c.split(/\s+/):c,this._rawClass&&(Wu(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const c=this._iterableDiffer.diff(this._rawClass);c&&this._applyIterableChanges(c)}else if(this._keyValueDiffer){const c=this._keyValueDiffer.diff(this._rawClass);c&&this._applyKeyValueChanges(c)}}_applyKeyValueChanges(c){c.forEachAddedItem(f=>this._toggleClass(f.key,f.currentValue)),c.forEachChangedItem(f=>this._toggleClass(f.key,f.currentValue)),c.forEachRemovedItem(f=>{f.previousValue&&this._toggleClass(f.key,!1)})}_applyIterableChanges(c){c.forEachAddedItem(f=>{if("string"!=typeof f.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${$t(f.item)}`);this._toggleClass(f.item,!0)}),c.forEachRemovedItem(f=>this._toggleClass(f.item,!1))}_applyClasses(c){c&&(Array.isArray(c)||c instanceof Set?c.forEach(f=>this._toggleClass(f,!0)):Object.keys(c).forEach(f=>this._toggleClass(f,!!c[f])))}_removeClasses(c){c&&(Array.isArray(c)||c instanceof Set?c.forEach(f=>this._toggleClass(f,!1)):Object.keys(c).forEach(f=>this._toggleClass(f,!1)))}_toggleClass(c,f){(c=c.trim())&&c.split(/\s+/g).forEach(p=>{f?this._renderer.addClass(this._ngEl.nativeElement,p):this._renderer.removeClass(this._ngEl.nativeElement,p)})}}return d.\u0275fac=function(c){return new(c||d)(Qe(Ad),Qe(sc),Qe(Ys),Qe(Xh))},d.\u0275dir=zr({type:d,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),d})();class vU{constructor(u,c,f,p){this.$implicit=u,this.ngForOf=c,this.index=f,this.count=p}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let TT=(()=>{class d{constructor(c,f,p){this._viewContainer=c,this._template=f,this._differs=p,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(c){this._ngForOf=c,this._ngForOfDirty=!0}set ngForTrackBy(c){this._trackByFn=c}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(c){c&&(this._template=c)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const c=this._ngForOf;!this._differ&&c&&(this._differ=this._differs.find(c).create(this.ngForTrackBy))}if(this._differ){const c=this._differ.diff(this._ngForOf);c&&this._applyChanges(c)}}_applyChanges(c){const f=this._viewContainer;c.forEachOperation((p,g,_)=>{if(null==p.previousIndex)f.createEmbeddedView(this._template,new vU(p.item,this._ngForOf,-1,-1),null===_?void 0:_);else if(null==_)f.remove(null===g?void 0:g);else if(null!==g){const y=f.get(g);f.move(y,_),ST(y,p)}});for(let p=0,g=f.length;p<g;p++){const y=f.get(p).context;y.index=p,y.count=g,y.ngForOf=this._ngForOf}c.forEachIdentityChange(p=>{ST(f.get(p.currentIndex),p)})}static ngTemplateContextGuard(c,f){return!0}}return d.\u0275fac=function(c){return new(c||d)(Qe(xi),Qe(ys),Qe(Ad))},d.\u0275dir=zr({type:d,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),d})();function ST(d,u){d.context.$implicit=u.item}let IT=(()=>{class d{constructor(c,f,p){this._ngEl=c,this._differs=f,this._renderer=p,this._ngStyle=null,this._differ=null}set ngStyle(c){this._ngStyle=c,!this._differ&&c&&(this._differ=this._differs.find(c).create())}ngDoCheck(){if(this._differ){const c=this._differ.diff(this._ngStyle);c&&this._applyChanges(c)}}_setStyle(c,f){const[p,g]=c.split("."),_=-1===p.indexOf("-")?void 0:pn.DashCase;null!=f?this._renderer.setStyle(this._ngEl.nativeElement,p,g?`${f}${g}`:f,_):this._renderer.removeStyle(this._ngEl.nativeElement,p,_)}_applyChanges(c){c.forEachRemovedItem(f=>this._setStyle(f.key,null)),c.forEachAddedItem(f=>this._setStyle(f.key,f.currentValue)),c.forEachChangedItem(f=>this._setStyle(f.key,f.currentValue))}}return d.\u0275fac=function(c){return new(c||d)(Qe(Ys),Qe(sc),Qe(Xh))},d.\u0275dir=zr({type:d,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),d})(),qU=(()=>{class d{}return d.\u0275fac=function(c){return new(c||d)},d.\u0275mod=Ao({type:d}),d.\u0275inj=js({}),d})();let QU=(()=>{class d{}return d.\u0275prov=Dt({token:d,providedIn:"root",factory:()=>new JU(nt(gn),window)}),d})();class JU{constructor(u,c){this.document=u,this.window=c,this.offset=()=>[0,0]}setOffset(u){this.offset=Array.isArray(u)?()=>u:u}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(u){this.supportsScrolling()&&this.window.scrollTo(u[0],u[1])}scrollToAnchor(u){if(!this.supportsScrolling())return;const c=function e4(d,u){const c=d.getElementById(u)||d.getElementsByName(u)[0];if(c)return c;if("function"==typeof d.createTreeWalker&&d.body&&(d.body.createShadowRoot||d.body.attachShadow)){const f=d.createTreeWalker(d.body,NodeFilter.SHOW_ELEMENT);let p=f.currentNode;for(;p;){const g=p.shadowRoot;if(g){const _=g.getElementById(u)||g.querySelector(`[name="${u}"]`);if(_)return _}p=f.nextNode()}}return null}(this.document,u);c&&(this.scrollToElement(c),c.focus())}setHistoryScrollRestoration(u){if(this.supportScrollRestoration()){const c=this.window.history;c&&c.scrollRestoration&&(c.scrollRestoration=u)}}scrollToElement(u){const c=u.getBoundingClientRect(),f=c.left+this.window.pageXOffset,p=c.top+this.window.pageYOffset,g=this.offset();this.window.scrollTo(f-g[0],p-g[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const u=RT(this.window.history)||RT(Object.getPrototypeOf(this.window.history));return!(!u||!u.writable&&!u.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function RT(d){return Object.getOwnPropertyDescriptor(d,"scrollRestoration")}class sy extends class A4 extends class A3{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function D3(d){Id||(Id=d)}(new sy)}onAndCancel(u,c,f){return u.addEventListener(c,f,!1),()=>{u.removeEventListener(c,f,!1)}}dispatchEvent(u,c){u.dispatchEvent(c)}remove(u){u.parentNode&&u.parentNode.removeChild(u)}createElement(u,c){return(c=c||this.getDefaultDocument()).createElement(u)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(u){return u.nodeType===Node.ELEMENT_NODE}isShadowRoot(u){return u instanceof DocumentFragment}getGlobalEventTarget(u,c){return"window"===c?window:"document"===c?u:"body"===c?u.body:null}getBaseHref(u){const c=function I4(){return uc=uc||document.querySelector("base"),uc?uc.getAttribute("href"):null}();return null==c?null:function M4(d){Hd=Hd||document.createElement("a"),Hd.setAttribute("href",d);const u=Hd.pathname;return"/"===u.charAt(0)?u:`/${u}`}(c)}resetBaseElement(){uc=null}getUserAgent(){return window.navigator.userAgent}getCookie(u){return function _U(d,u){u=encodeURIComponent(u);for(const c of d.split(";")){const f=c.indexOf("="),[p,g]=-1==f?[c,""]:[c.slice(0,f),c.slice(f+1)];if(p.trim()===u)return decodeURIComponent(g)}return null}(document.cookie,u)}}let Hd,uc=null;const kT=new ft("TRANSITION_ID"),R4=[{provide:bd,useFactory:function P4(d,u,c){return()=>{c.get(wd).donePromise.then(()=>{const f=Js(),p=u.querySelectorAll(`style[ng-transition="${d}"]`);for(let g=0;g<p.length;g++)f.remove(p[g])})}},deps:[kT,gn,mi],multi:!0}];let O4=(()=>{class d{build(){return new XMLHttpRequest}}return d.\u0275fac=function(c){return new(c||d)},d.\u0275prov=Dt({token:d,factory:d.\u0275fac}),d})();const jd=new ft("EventManagerPlugins");let Gd=(()=>{class d{constructor(c,f){this._zone=f,this._eventNameToPlugin=new Map,c.forEach(p=>p.manager=this),this._plugins=c.slice().reverse()}addEventListener(c,f,p){return this._findPluginFor(f).addEventListener(c,f,p)}addGlobalEventListener(c,f,p){return this._findPluginFor(f).addGlobalEventListener(c,f,p)}getZone(){return this._zone}_findPluginFor(c){const f=this._eventNameToPlugin.get(c);if(f)return f;const p=this._plugins;for(let g=0;g<p.length;g++){const _=p[g];if(_.supports(c))return this._eventNameToPlugin.set(c,_),_}throw new Error(`No event manager plugin found for event ${c}`)}}return d.\u0275fac=function(c){return new(c||d)(nt(jd),nt(Rr))},d.\u0275prov=Dt({token:d,factory:d.\u0275fac}),d})();class BT{constructor(u){this._doc=u}addGlobalEventListener(u,c,f){const p=Js().getGlobalEventTarget(this._doc,u);if(!p)throw new Error(`Unsupported event target ${p} for event ${c}`);return this.addEventListener(p,c,f)}}let UT=(()=>{class d{constructor(){this._stylesSet=new Set}addStyles(c){const f=new Set;c.forEach(p=>{this._stylesSet.has(p)||(this._stylesSet.add(p),f.add(p))}),this.onStylesAdded(f)}onStylesAdded(c){}getAllStyles(){return Array.from(this._stylesSet)}}return d.\u0275fac=function(c){return new(c||d)},d.\u0275prov=Dt({token:d,factory:d.\u0275fac}),d})(),cc=(()=>{class d extends UT{constructor(c){super(),this._doc=c,this._hostNodes=new Map,this._hostNodes.set(c.head,[])}_addStylesToHost(c,f,p){c.forEach(g=>{const _=this._doc.createElement("style");_.textContent=g,p.push(f.appendChild(_))})}addHost(c){const f=[];this._addStylesToHost(this._stylesSet,c,f),this._hostNodes.set(c,f)}removeHost(c){const f=this._hostNodes.get(c);f&&f.forEach(VT),this._hostNodes.delete(c)}onStylesAdded(c){this._hostNodes.forEach((f,p)=>{this._addStylesToHost(c,p,f)})}ngOnDestroy(){this._hostNodes.forEach(c=>c.forEach(VT))}}return d.\u0275fac=function(c){return new(c||d)(nt(gn))},d.\u0275prov=Dt({token:d,factory:d.\u0275fac}),d})();function VT(d){Js().remove(d)}const oy={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ay=/%COMP%/g;function zd(d,u,c){for(let f=0;f<u.length;f++){let p=u[f];Array.isArray(p)?zd(d,p,c):(p=p.replace(ay,d),c.push(p))}return c}function GT(d){return u=>{if("__ngUnwrap__"===u)return d;!1===d(u)&&(u.preventDefault(),u.returnValue=!1)}}let ly=(()=>{class d{constructor(c,f,p){this.eventManager=c,this.sharedStylesHost=f,this.appId=p,this.rendererByCompId=new Map,this.defaultRenderer=new uy(c)}createRenderer(c,f){if(!c||!f)return this.defaultRenderer;switch(f.encapsulation){case Ni.Emulated:{let p=this.rendererByCompId.get(f.id);return p||(p=new V4(this.eventManager,this.sharedStylesHost,f,this.appId),this.rendererByCompId.set(f.id,p)),p.applyToHost(c),p}case 1:case Ni.ShadowDom:return new H4(this.eventManager,this.sharedStylesHost,c,f);default:if(!this.rendererByCompId.has(f.id)){const p=zd(f.id,f.styles,[]);this.sharedStylesHost.addStyles(p),this.rendererByCompId.set(f.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return d.\u0275fac=function(c){return new(c||d)(nt(Gd),nt(cc),nt(ic))},d.\u0275prov=Dt({token:d,factory:d.\u0275fac}),d})();class uy{constructor(u){this.eventManager=u,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(u,c){return c?document.createElementNS(oy[c]||c,u):document.createElement(u)}createComment(u){return document.createComment(u)}createText(u){return document.createTextNode(u)}appendChild(u,c){($T(u)?u.content:u).appendChild(c)}insertBefore(u,c,f){u&&($T(u)?u.content:u).insertBefore(c,f)}removeChild(u,c){u&&u.removeChild(c)}selectRootElement(u,c){let f="string"==typeof u?document.querySelector(u):u;if(!f)throw new Error(`The selector "${u}" did not match any elements`);return c||(f.textContent=""),f}parentNode(u){return u.parentNode}nextSibling(u){return u.nextSibling}setAttribute(u,c,f,p){if(p){c=p+":"+c;const g=oy[p];g?u.setAttributeNS(g,c,f):u.setAttribute(c,f)}else u.setAttribute(c,f)}removeAttribute(u,c,f){if(f){const p=oy[f];p?u.removeAttributeNS(p,c):u.removeAttribute(`${f}:${c}`)}else u.removeAttribute(c)}addClass(u,c){u.classList.add(c)}removeClass(u,c){u.classList.remove(c)}setStyle(u,c,f,p){p&(pn.DashCase|pn.Important)?u.style.setProperty(c,f,p&pn.Important?"important":""):u.style[c]=f}removeStyle(u,c,f){f&pn.DashCase?u.style.removeProperty(c):u.style[c]=""}setProperty(u,c,f){u[c]=f}setValue(u,c){u.nodeValue=c}listen(u,c,f){return"string"==typeof u?this.eventManager.addGlobalEventListener(u,c,GT(f)):this.eventManager.addEventListener(u,c,GT(f))}}function $T(d){return"TEMPLATE"===d.tagName&&void 0!==d.content}class V4 extends uy{constructor(u,c,f,p){super(u),this.component=f;const g=zd(p+"-"+f.id,f.styles,[]);c.addStyles(g),this.contentAttr=function k4(d){return"_ngcontent-%COMP%".replace(ay,d)}(p+"-"+f.id),this.hostAttr=function B4(d){return"_nghost-%COMP%".replace(ay,d)}(p+"-"+f.id)}applyToHost(u){super.setAttribute(u,this.hostAttr,"")}createElement(u,c){const f=super.createElement(u,c);return super.setAttribute(f,this.contentAttr,""),f}}class H4 extends uy{constructor(u,c,f,p){super(u),this.sharedStylesHost=c,this.hostEl=f,this.shadowRoot=f.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const g=zd(p.id,p.styles,[]);for(let _=0;_<g.length;_++){const y=document.createElement("style");y.textContent=g[_],this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(u){return u===this.hostEl?this.shadowRoot:u}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(u,c){return super.appendChild(this.nodeOrShadowRoot(u),c)}insertBefore(u,c,f){return super.insertBefore(this.nodeOrShadowRoot(u),c,f)}removeChild(u,c){return super.removeChild(this.nodeOrShadowRoot(u),c)}parentNode(u){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(u)))}}let j4=(()=>{class d extends BT{constructor(c){super(c)}supports(c){return!0}addEventListener(c,f,p){return c.addEventListener(f,p,!1),()=>this.removeEventListener(c,f,p)}removeEventListener(c,f,p){return c.removeEventListener(f,p)}}return d.\u0275fac=function(c){return new(c||d)(nt(gn))},d.\u0275prov=Dt({token:d,factory:d.\u0275fac}),d})();const WT=["alt","control","meta","shift"],G4={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},z4={alt:d=>d.altKey,control:d=>d.ctrlKey,meta:d=>d.metaKey,shift:d=>d.shiftKey};let $4=(()=>{class d extends BT{constructor(c){super(c)}supports(c){return null!=d.parseEventName(c)}addEventListener(c,f,p){const g=d.parseEventName(f),_=d.eventCallback(g.fullKey,p,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Js().onAndCancel(c,g.domEventName,_))}static parseEventName(c){const f=c.toLowerCase().split("."),p=f.shift();if(0===f.length||"keydown"!==p&&"keyup"!==p)return null;const g=d._normalizeKey(f.pop());let _="",y=f.indexOf("code");if(y>-1&&(f.splice(y,1),_="code."),WT.forEach(x=>{const w=f.indexOf(x);w>-1&&(f.splice(w,1),_+=x+".")}),_+=g,0!=f.length||0===g.length)return null;const v={};return v.domEventName=p,v.fullKey=_,v}static matchEventFullKeyCode(c,f){let p=G4[c.key]||c.key,g="";return f.indexOf("code.")>-1&&(p=c.code,g="code."),!(null==p||!p)&&(p=p.toLowerCase()," "===p?p="space":"."===p&&(p="dot"),WT.forEach(_=>{_!==p&&(0,z4[_])(c)&&(g+=_+".")}),g+=p,g===f)}static eventCallback(c,f,p){return g=>{d.matchEventFullKeyCode(g,c)&&p.runGuarded(()=>f(g))}}static _normalizeKey(c){return"esc"===c?"escape":c}}return d.\u0275fac=function(c){return new(c||d)(nt(gn))},d.\u0275prov=Dt({token:d,factory:d.\u0275fac}),d})();const qT=[{provide:FE,useValue:"browser"},{provide:RE,useValue:function W4(){sy.makeCurrent()},multi:!0},{provide:gn,useFactory:function q4(){return function vF(d){nm=d}(document),document},deps:[]}],Y4=GE(E3,"browser",qT),YT=new ft(""),KT=[{provide:Cd,useClass:class F4{addToWindow(u){qt.getAngularTestability=(f,p=!0)=>{const g=u.findTestabilityInTree(f,p);if(null==g)throw new Error("Could not find testability for element.");return g},qt.getAllAngularTestabilities=()=>u.getAllTestabilities(),qt.getAllAngularRootElements=()=>u.getAllRootElements(),qt.frameworkStabilizers||(qt.frameworkStabilizers=[]),qt.frameworkStabilizers.push(f=>{const p=qt.getAllAngularTestabilities();let g=p.length,_=!1;const y=function(v){_=_||v,g--,0==g&&f(_)};p.forEach(function(v){v.whenStable(y)})})}findTestabilityInTree(u,c,f){return null==c?null:u.getTestability(c)??(f?Js().isShadowRoot(c)?this.findTestabilityInTree(u,c.host,!0):this.findTestabilityInTree(u,c.parentElement,!0):null)}},deps:[]},{provide:UE,useClass:P_,deps:[Rr,R_,Cd]},{provide:P_,useClass:P_,deps:[Rr,R_,Cd]}],ZT=[{provide:fm,useValue:"root"},{provide:tl,useFactory:function X4(){return new tl},deps:[]},{provide:jd,useClass:j4,multi:!0,deps:[gn,Rr,FE]},{provide:jd,useClass:$4,multi:!0,deps:[gn]},{provide:ly,useClass:ly,deps:[Gd,cc,ic]},{provide:g1,useExisting:ly},{provide:UT,useExisting:cc},{provide:cc,useClass:cc,deps:[gn]},{provide:Gd,useClass:Gd,deps:[jd,Rr]},{provide:class t4{},useClass:O4,deps:[]},[]];let K4=(()=>{class d{constructor(c){}static withServerTransition(c){return{ngModule:d,providers:[{provide:ic,useValue:c.appId},{provide:kT,useExisting:ic},R4]}}}return d.\u0275fac=function(c){return new(c||d)(nt(YT,12))},d.\u0275mod=Ao({type:d}),d.\u0275inj=js({providers:[...ZT,...KT],imports:[qU,T3]}),d})(),QT=(()=>{class d{constructor(c){this._doc=c}getTitle(){return this._doc.title}setTitle(c){this._doc.title=c||""}}return d.\u0275fac=function(c){return new(c||d)(nt(gn))},d.\u0275prov=Dt({token:d,factory:function(c){let f=null;return f=c?new c:function Q4(){return new QT(nt(gn))}(),f},providedIn:"root"}),d})();function et(...d){return Ar(d,pu(d))}typeof window<"u"&&window;class Ei extends ne{constructor(u){super(),this._value=u}get value(){return this.getValue()}_subscribe(u){const c=super._subscribe(u);return!c.closed&&u.next(this._value),c}getValue(){const{hasError:u,thrownError:c,_value:f}=this;if(u)throw c;return this._throwIfClosed(),f}next(u){super.next(this._value=u)}}const $d=Ce(d=>function(){d(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:o5}=Array,{getPrototypeOf:a5,prototype:l5,keys:u5}=Object;const{isArray:d5}=Array;function tS(...d){const u=pu(d),c=function $P(d){return q(Qp(d))?d.pop():void 0}(d),{args:f,keys:p}=function c5(d){if(1===d.length){const u=d[0];if(o5(u))return{args:u,keys:null};if(function h5(d){return d&&"object"==typeof d&&a5(d)===l5}(u)){const c=u5(u);return{args:c.map(f=>u[f]),keys:c}}}return{args:d,keys:null}}(d);if(0===f.length)return Ar([],u);const g=new O(function m5(d,u,c=he){return f=>{rS(u,()=>{const{length:p}=d,g=new Array(p);let _=p,y=p;for(let v=0;v<p;v++)rS(u,()=>{const x=Ar(d[v],u);let w=!1;x.subscribe(ge(f,C=>{g[v]=C,w||(w=!0,y--),y||f.next(c(g.slice()))},()=>{--_||f.complete()}))},f)},f)}}(f,u,p?_=>function g5(d,u){return d.reduce((c,f,p)=>(c[f]=u[p],c),{})}(p,_):he));return c?g.pipe(function p5(d){return we(u=>function f5(d,u){return d5(u)?d(...u):d(u)}(d,u))}(c)):g}function rS(d,u,c){d?Dn(c,d,u):u()}function dy(...d){return function _5(){return Hs(1)}()(Ar(d,pu(d)))}function nS(d){return new O(u=>{hn(d()).subscribe(u)})}function hc(d,u){const c=q(d)?d:()=>d,f=p=>p.error(c());return new O(u?p=>u.schedule(f,0,p):f)}function fy(){return oe((d,u)=>{let c=null;d._refCount++;const f=ge(u,void 0,void 0,void 0,()=>{if(!d||d._refCount<=0||0<--d._refCount)return void(c=null);const p=d._connection,g=c;c=null,p&&(!g||p===g)&&p.unsubscribe(),u.unsubscribe()});d.subscribe(f),f.closed||(c=d.connect())})}class iS extends O{constructor(u,c){super(),this.source=u,this.subjectFactory=c,this._subject=null,this._refCount=0,this._connection=null,me(u)&&(this.lift=u.lift)}_subscribe(u){return this.getSubject().subscribe(u)}getSubject(){const u=this._subject;return(!u||u.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:u}=this;this._subject=this._connection=null,u?.unsubscribe()}connect(){let u=this._connection;if(!u){u=this._connection=new Se;const c=this.getSubject();u.add(this.source.subscribe(ge(c,void 0,()=>{this._teardown(),c.complete()},f=>{this._teardown(),c.error(f)},()=>this._teardown()))),u.closed&&(this._connection=null,u=Se.EMPTY)}return u}refCount(){return fy()(this)}}function ji(d,u){return oe((c,f)=>{let p=null,g=0,_=!1;const y=()=>_&&!p&&f.complete();c.subscribe(ge(f,v=>{p?.unsubscribe();let x=0;const w=g++;hn(d(v,w)).subscribe(p=ge(f,C=>f.next(u?u(v,C,w,x++):C),()=>{p=null,y()}))},()=>{_=!0,y()}))})}function dc(d){return d<=0?()=>$n:oe((u,c)=>{let f=0;u.subscribe(ge(c,p=>{++f<=d&&(c.next(p),d<=f&&c.complete())}))})}function to(d,u){return oe((c,f)=>{let p=0;c.subscribe(ge(f,g=>d.call(u,g,p++)&&f.next(g)))})}function Wd(d){return oe((u,c)=>{let f=!1;u.subscribe(ge(c,p=>{f=!0,c.next(p)},()=>{f||c.next(d),c.complete()}))})}function sS(d=v5){return oe((u,c)=>{let f=!1;u.subscribe(ge(c,p=>{f=!0,c.next(p)},()=>f?c.complete():c.error(d())))})}function v5(){return new $d}function ro(d,u){const c=arguments.length>=2;return f=>f.pipe(d?to((p,g)=>d(p,g,f)):he,dc(1),c?Wd(u):sS(()=>new $d))}function $o(d,u){return q(u)?ur(d,u,1):ur(d,1)}function Yr(d,u,c){const f=q(d)||u||c?{next:d,error:u,complete:c}:d;return f?oe((p,g)=>{var _;null===(_=f.subscribe)||void 0===_||_.call(f);let y=!0;p.subscribe(ge(g,v=>{var x;null===(x=f.next)||void 0===x||x.call(f,v),g.next(v)},()=>{var v;y=!1,null===(v=f.complete)||void 0===v||v.call(f),g.complete()},v=>{var x;y=!1,null===(x=f.error)||void 0===x||x.call(f,v),g.error(v)},()=>{var v,x;y&&(null===(v=f.unsubscribe)||void 0===v||v.call(f)),null===(x=f.finalize)||void 0===x||x.call(f)}))}):he}function no(d){return oe((u,c)=>{let g,f=null,p=!1;f=u.subscribe(ge(c,void 0,void 0,_=>{g=hn(d(_,no(d)(u))),f?(f.unsubscribe(),f=null,g.subscribe(c)):p=!0})),p&&(f.unsubscribe(),f=null,g.subscribe(c))})}function x5(d,u,c,f,p){return(g,_)=>{let y=c,v=u,x=0;g.subscribe(ge(_,w=>{const C=x++;v=y?d(v,w,C):(y=!0,w),f&&_.next(v)},p&&(()=>{y&&_.next(v),_.complete()})))}}function oS(d,u){return oe(x5(d,u,arguments.length>=2,!0))}function py(d){return d<=0?()=>$n:oe((u,c)=>{let f=[];u.subscribe(ge(c,p=>{f.push(p),d<f.length&&f.shift()},()=>{for(const p of f)c.next(p);c.complete()},void 0,()=>{f=null}))})}function aS(d,u){const c=arguments.length>=2;return f=>f.pipe(d?to((p,g)=>d(p,g,f)):he,py(1),c?Wd(u):sS(()=>new $d))}function gy(d){return oe((u,c)=>{try{u.subscribe(c)}finally{c.add(d)}})}const At="primary",fc=Symbol("RouteTitle");class C5{constructor(u){this.params=u||{}}has(u){return Object.prototype.hasOwnProperty.call(this.params,u)}get(u){if(this.has(u)){const c=this.params[u];return Array.isArray(c)?c[0]:c}return null}getAll(u){if(this.has(u)){const c=this.params[u];return Array.isArray(c)?c:[c]}return[]}get keys(){return Object.keys(this.params)}}function El(d){return new C5(d)}function E5(d,u,c){const f=c.path.split("/");if(f.length>d.length||"full"===c.pathMatch&&(u.hasChildren()||f.length<d.length))return null;const p={};for(let g=0;g<f.length;g++){const _=f[g],y=d[g];if(_.startsWith(":"))p[_.substring(1)]=y;else if(_!==y.path)return null}return{consumed:d.slice(0,f.length),posParams:p}}function Gi(d,u){const c=d?Object.keys(d):void 0,f=u?Object.keys(u):void 0;if(!c||!f||c.length!=f.length)return!1;let p;for(let g=0;g<c.length;g++)if(p=c[g],!lS(d[p],u[p]))return!1;return!0}function lS(d,u){if(Array.isArray(d)&&Array.isArray(u)){if(d.length!==u.length)return!1;const c=[...d].sort(),f=[...u].sort();return c.every((p,g)=>f[g]===p)}return d===u}function uS(d){return Array.prototype.concat.apply([],d)}function cS(d){return d.length>0?d[d.length-1]:null}function Ur(d,u){for(const c in d)d.hasOwnProperty(c)&&u(d[c],c)}function io(d){return ww(d)?d:ad(d)?Ar(Promise.resolve(d)):et(d)}const D5={exact:function fS(d,u,c){if(!Xo(d.segments,u.segments)||!Xd(d.segments,u.segments,c)||d.numberOfChildren!==u.numberOfChildren)return!1;for(const f in u.children)if(!d.children[f]||!fS(d.children[f],u.children[f],c))return!1;return!0},subset:pS},hS={exact:function A5(d,u){return Gi(d,u)},subset:function I5(d,u){return Object.keys(u).length<=Object.keys(d).length&&Object.keys(u).every(c=>lS(d[c],u[c]))},ignored:()=>!0};function dS(d,u,c){return D5[c.paths](d.root,u.root,c.matrixParams)&&hS[c.queryParams](d.queryParams,u.queryParams)&&!("exact"===c.fragment&&d.fragment!==u.fragment)}function pS(d,u,c){return gS(d,u,u.segments,c)}function gS(d,u,c,f){if(d.segments.length>c.length){const p=d.segments.slice(0,c.length);return!(!Xo(p,c)||u.hasChildren()||!Xd(p,c,f))}if(d.segments.length===c.length){if(!Xo(d.segments,c)||!Xd(d.segments,c,f))return!1;for(const p in u.children)if(!d.children[p]||!pS(d.children[p],u.children[p],f))return!1;return!0}{const p=c.slice(0,d.segments.length),g=c.slice(d.segments.length);return!!(Xo(d.segments,p)&&Xd(d.segments,p,f)&&d.children[At])&&gS(d.children[At],u,g,f)}}function Xd(d,u,c){return u.every((f,p)=>hS[c](d[p].parameters,f.parameters))}class Wo{constructor(u,c,f){this.root=u,this.queryParams=c,this.fragment=f}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=El(this.queryParams)),this._queryParamMap}toString(){return R5.serialize(this)}}class Mt{constructor(u,c){this.segments=u,this.children=c,this.parent=null,Ur(c,(f,p)=>f.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return qd(this)}}class pc{constructor(u,c){this.path=u,this.parameters=c}get parameterMap(){return this._parameterMap||(this._parameterMap=El(this.parameters)),this._parameterMap}toString(){return vS(this)}}function Xo(d,u){return d.length===u.length&&d.every((c,f)=>c.path===u[f].path)}let mS=(()=>{class d{}return d.\u0275fac=function(c){return new(c||d)},d.\u0275prov=Dt({token:d,factory:function(){return new _y},providedIn:"root"}),d})();class _y{parse(u){const c=new H5(u);return new Wo(c.parseRootSegment(),c.parseQueryParams(),c.parseFragment())}serialize(u){const c=`/${gc(u.root,!0)}`,f=function N5(d){const u=Object.keys(d).map(c=>{const f=d[c];return Array.isArray(f)?f.map(p=>`${Yd(c)}=${Yd(p)}`).join("&"):`${Yd(c)}=${Yd(f)}`}).filter(c=>!!c);return u.length?`?${u.join("&")}`:""}(u.queryParams);return`${c}${f}${"string"==typeof u.fragment?`#${function F5(d){return encodeURI(d)}(u.fragment)}`:""}`}}const R5=new _y;function qd(d){return d.segments.map(u=>vS(u)).join("/")}function gc(d,u){if(!d.hasChildren())return qd(d);if(u){const c=d.children[At]?gc(d.children[At],!1):"",f=[];return Ur(d.children,(p,g)=>{g!==At&&f.push(`${g}:${gc(p,!1)}`)}),f.length>0?`${c}(${f.join("//")})`:c}{const c=function P5(d,u){let c=[];return Ur(d.children,(f,p)=>{p===At&&(c=c.concat(u(f,p)))}),Ur(d.children,(f,p)=>{p!==At&&(c=c.concat(u(f,p)))}),c}(d,(f,p)=>p===At?[gc(d.children[At],!1)]:[`${p}:${gc(f,!1)}`]);return 1===Object.keys(d.children).length&&null!=d.children[At]?`${qd(d)}/${c[0]}`:`${qd(d)}/(${c.join("//")})`}}function _S(d){return encodeURIComponent(d).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Yd(d){return _S(d).replace(/%3B/gi,";")}function yy(d){return _S(d).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Kd(d){return decodeURIComponent(d)}function yS(d){return Kd(d.replace(/\+/g,"%20"))}function vS(d){return`${yy(d.path)}${function O5(d){return Object.keys(d).map(u=>`;${yy(u)}=${yy(d[u])}`).join("")}(d.parameters)}`}const L5=/^[^\/()?;=#]+/;function Zd(d){const u=d.match(L5);return u?u[0]:""}const k5=/^[^=?&#]+/,U5=/^[^&#]+/;class H5{constructor(u){this.url=u,this.remaining=u}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Mt([],{}):new Mt([],this.parseChildren())}parseQueryParams(){const u={};if(this.consumeOptional("?"))do{this.parseQueryParam(u)}while(this.consumeOptional("&"));return u}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const u=[];for(this.peekStartsWith("(")||u.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),u.push(this.parseSegment());let c={};this.peekStartsWith("/(")&&(this.capture("/"),c=this.parseParens(!0));let f={};return this.peekStartsWith("(")&&(f=this.parseParens(!1)),(u.length>0||Object.keys(c).length>0)&&(f[At]=new Mt(u,c)),f}parseSegment(){const u=Zd(this.remaining);if(""===u&&this.peekStartsWith(";"))throw new je(4009,!1);return this.capture(u),new pc(Kd(u),this.parseMatrixParams())}parseMatrixParams(){const u={};for(;this.consumeOptional(";");)this.parseParam(u);return u}parseParam(u){const c=Zd(this.remaining);if(!c)return;this.capture(c);let f="";if(this.consumeOptional("=")){const p=Zd(this.remaining);p&&(f=p,this.capture(f))}u[Kd(c)]=Kd(f)}parseQueryParam(u){const c=function B5(d){const u=d.match(k5);return u?u[0]:""}(this.remaining);if(!c)return;this.capture(c);let f="";if(this.consumeOptional("=")){const _=function V5(d){const u=d.match(U5);return u?u[0]:""}(this.remaining);_&&(f=_,this.capture(f))}const p=yS(c),g=yS(f);if(u.hasOwnProperty(p)){let _=u[p];Array.isArray(_)||(_=[_],u[p]=_),_.push(g)}else u[p]=g}parseParens(u){const c={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const f=Zd(this.remaining),p=this.remaining[f.length];if("/"!==p&&")"!==p&&";"!==p)throw new je(4010,!1);let g;f.indexOf(":")>-1?(g=f.slice(0,f.indexOf(":")),this.capture(g),this.capture(":")):u&&(g=At);const _=this.parseChildren();c[g]=1===Object.keys(_).length?_[At]:new Mt([],_),this.consumeOptional("//")}return c}peekStartsWith(u){return this.remaining.startsWith(u)}consumeOptional(u){return!!this.peekStartsWith(u)&&(this.remaining=this.remaining.substring(u.length),!0)}capture(u){if(!this.consumeOptional(u))throw new je(4011,!1)}}function vy(d){return d.segments.length>0?new Mt([],{[At]:d}):d}function Qd(d){const u={};for(const f of Object.keys(d.children)){const g=Qd(d.children[f]);(g.segments.length>0||g.hasChildren())&&(u[f]=g)}return function j5(d){if(1===d.numberOfChildren&&d.children[At]){const u=d.children[At];return new Mt(d.segments.concat(u.segments),u.children)}return d}(new Mt(d.segments,u))}function qo(d){return d instanceof Wo}function $5(d,u,c,f,p){if(0===c.length)return Tl(u.root,u.root,u.root,f,p);const g=function wS(d){if("string"==typeof d[0]&&1===d.length&&"/"===d[0])return new bS(!0,0,d);let u=0,c=!1;const f=d.reduce((p,g,_)=>{if("object"==typeof g&&null!=g){if(g.outlets){const y={};return Ur(g.outlets,(v,x)=>{y[x]="string"==typeof v?v.split("/"):v}),[...p,{outlets:y}]}if(g.segmentPath)return[...p,g.segmentPath]}return"string"!=typeof g?[...p,g]:0===_?(g.split("/").forEach((y,v)=>{0==v&&"."===y||(0==v&&""===y?c=!0:".."===y?u++:""!=y&&p.push(y))}),p):[...p,g]},[]);return new bS(c,u,f)}(c);return g.toRoot()?Tl(u.root,u.root,new Mt([],{}),f,p):function _(v){const x=function X5(d,u,c,f){if(d.isAbsolute)return new Sl(u.root,!0,0);if(-1===f)return new Sl(c,c===u.root,0);return function CS(d,u,c){let f=d,p=u,g=c;for(;g>p;){if(g-=p,f=f.parent,!f)throw new je(4005,!1);p=f.segments.length}return new Sl(f,!1,p-g)}(c,f+(mc(d.commands[0])?0:1),d.numberOfDoubleDots)}(g,u,d.snapshot?._urlSegment,v),w=x.processChildren?yc(x.segmentGroup,x.index,g.commands):by(x.segmentGroup,x.index,g.commands);return Tl(u.root,x.segmentGroup,w,f,p)}(d.snapshot?._lastPathIndex)}function mc(d){return"object"==typeof d&&null!=d&&!d.outlets&&!d.segmentPath}function _c(d){return"object"==typeof d&&null!=d&&d.outlets}function Tl(d,u,c,f,p){let _,g={};f&&Ur(f,(v,x)=>{g[x]=Array.isArray(v)?v.map(w=>`${w}`):`${v}`}),_=d===u?c:xS(d,u,c);const y=vy(Qd(_));return new Wo(y,g,p)}function xS(d,u,c){const f={};return Ur(d.children,(p,g)=>{f[g]=p===u?c:xS(p,u,c)}),new Mt(d.segments,f)}class bS{constructor(u,c,f){if(this.isAbsolute=u,this.numberOfDoubleDots=c,this.commands=f,u&&f.length>0&&mc(f[0]))throw new je(4003,!1);const p=f.find(_c);if(p&&p!==cS(f))throw new je(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Sl{constructor(u,c,f){this.segmentGroup=u,this.processChildren=c,this.index=f}}function by(d,u,c){if(d||(d=new Mt([],{})),0===d.segments.length&&d.hasChildren())return yc(d,u,c);const f=function Y5(d,u,c){let f=0,p=u;const g={match:!1,pathIndex:0,commandIndex:0};for(;p<d.segments.length;){if(f>=c.length)return g;const _=d.segments[p],y=c[f];if(_c(y))break;const v=`${y}`,x=f<c.length-1?c[f+1]:null;if(p>0&&void 0===v)break;if(v&&x&&"object"==typeof x&&void 0===x.outlets){if(!TS(v,x,_))return g;f+=2}else{if(!TS(v,{},_))return g;f++}p++}return{match:!0,pathIndex:p,commandIndex:f}}(d,u,c),p=c.slice(f.commandIndex);if(f.match&&f.pathIndex<d.segments.length){const g=new Mt(d.segments.slice(0,f.pathIndex),{});return g.children[At]=new Mt(d.segments.slice(f.pathIndex),d.children),yc(g,0,p)}return f.match&&0===p.length?new Mt(d.segments,{}):f.match&&!d.hasChildren()?wy(d,u,c):f.match?yc(d,0,p):wy(d,u,c)}function yc(d,u,c){if(0===c.length)return new Mt(d.segments,{});{const f=function q5(d){return _c(d[0])?d[0].outlets:{[At]:d}}(c),p={};return Ur(f,(g,_)=>{"string"==typeof g&&(g=[g]),null!==g&&(p[_]=by(d.children[_],u,g))}),Ur(d.children,(g,_)=>{void 0===f[_]&&(p[_]=g)}),new Mt(d.segments,p)}}function wy(d,u,c){const f=d.segments.slice(0,u);let p=0;for(;p<c.length;){const g=c[p];if(_c(g)){const v=K5(g.outlets);return new Mt(f,v)}if(0===p&&mc(c[0])){f.push(new pc(d.segments[u].path,ES(c[0]))),p++;continue}const _=_c(g)?g.outlets[At]:`${g}`,y=p<c.length-1?c[p+1]:null;_&&y&&mc(y)?(f.push(new pc(_,ES(y))),p+=2):(f.push(new pc(_,{})),p++)}return new Mt(f,{})}function K5(d){const u={};return Ur(d,(c,f)=>{"string"==typeof c&&(c=[c]),null!==c&&(u[f]=wy(new Mt([],{}),0,c))}),u}function ES(d){const u={};return Ur(d,(c,f)=>u[f]=`${c}`),u}function TS(d,u,c){return d==c.path&&Gi(u,c.parameters)}class Cs{constructor(u,c){this.id=u,this.url=c}}class Cy extends Cs{constructor(u,c,f="imperative",p=null){super(u,c),this.type=0,this.navigationTrigger=f,this.restoredState=p}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Yo extends Cs{constructor(u,c,f){super(u,c),this.urlAfterRedirects=f,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Jd extends Cs{constructor(u,c,f,p){super(u,c),this.reason=f,this.code=p,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class SS extends Cs{constructor(u,c,f,p){super(u,c),this.error=f,this.target=p,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Z5 extends Cs{constructor(u,c,f,p){super(u,c),this.urlAfterRedirects=f,this.state=p,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Q5 extends Cs{constructor(u,c,f,p){super(u,c),this.urlAfterRedirects=f,this.state=p,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class J5 extends Cs{constructor(u,c,f,p,g){super(u,c),this.urlAfterRedirects=f,this.state=p,this.shouldActivate=g,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class eV extends Cs{constructor(u,c,f,p){super(u,c),this.urlAfterRedirects=f,this.state=p,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tV extends Cs{constructor(u,c,f,p){super(u,c),this.urlAfterRedirects=f,this.state=p,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class rV{constructor(u){this.route=u,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class nV{constructor(u){this.route=u,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class iV{constructor(u){this.snapshot=u,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class sV{constructor(u){this.snapshot=u,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class oV{constructor(u){this.snapshot=u,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class aV{constructor(u){this.snapshot=u,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class DS{constructor(u,c,f){this.routerEvent=u,this.position=c,this.anchor=f,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class AS{constructor(u){this._root=u}get root(){return this._root.value}parent(u){const c=this.pathFromRoot(u);return c.length>1?c[c.length-2]:null}children(u){const c=Ey(u,this._root);return c?c.children.map(f=>f.value):[]}firstChild(u){const c=Ey(u,this._root);return c&&c.children.length>0?c.children[0].value:null}siblings(u){const c=Ty(u,this._root);return c.length<2?[]:c[c.length-2].children.map(p=>p.value).filter(p=>p!==u)}pathFromRoot(u){return Ty(u,this._root).map(c=>c.value)}}function Ey(d,u){if(d===u.value)return u;for(const c of u.children){const f=Ey(d,c);if(f)return f}return null}function Ty(d,u){if(d===u.value)return[u];for(const c of u.children){const f=Ty(d,c);if(f.length)return f.unshift(u),f}return[]}class Es{constructor(u,c){this.value=u,this.children=c}toString(){return`TreeNode(${this.value})`}}function Dl(d){const u={};return d&&d.children.forEach(c=>u[c.value.outlet]=c),u}class IS extends AS{constructor(u,c){super(u),this.snapshot=c,Sy(this,u)}toString(){return this.snapshot.toString()}}function MS(d,u){const c=function uV(d,u){const _=new ef([],{},{},"",{},At,u,null,d.root,-1,{});return new RS("",new Es(_,[]))}(d,u),f=new Ei([new pc("",{})]),p=new Ei({}),g=new Ei({}),_=new Ei({}),y=new Ei(""),v=new Ko(f,p,_,y,g,At,u,c.root);return v.snapshot=c.root,new IS(new Es(v,[]),c)}class Ko{constructor(u,c,f,p,g,_,y,v){this.url=u,this.params=c,this.queryParams=f,this.fragment=p,this.data=g,this.outlet=_,this.component=y,this.title=this.data?.pipe(we(x=>x[fc]))??et(void 0),this._futureSnapshot=v}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(we(u=>El(u)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(we(u=>El(u)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function PS(d,u="emptyOnly"){const c=d.pathFromRoot;let f=0;if("always"!==u)for(f=c.length-1;f>=1;){const p=c[f],g=c[f-1];if(p.routeConfig&&""===p.routeConfig.path)f--;else{if(g.component)break;f--}}return function cV(d){return d.reduce((u,c)=>({params:{...u.params,...c.params},data:{...u.data,...c.data},resolve:{...c.data,...u.resolve,...c.routeConfig?.data,...c._resolvedData}}),{params:{},data:{},resolve:{}})}(c.slice(f))}class ef{constructor(u,c,f,p,g,_,y,v,x,w,C,E){this.url=u,this.params=c,this.queryParams=f,this.fragment=p,this.data=g,this.outlet=_,this.component=y,this.title=this.data?.[fc],this.routeConfig=v,this._urlSegment=x,this._lastPathIndex=w,this._correctedLastPathIndex=E??w,this._resolve=C}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=El(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=El(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(f=>f.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class RS extends AS{constructor(u,c){super(c),this.url=u,Sy(this,c)}toString(){return FS(this._root)}}function Sy(d,u){u.value._routerState=d,u.children.forEach(c=>Sy(d,c))}function FS(d){const u=d.children.length>0?` { ${d.children.map(FS).join(", ")} } `:"";return`${d.value}${u}`}function Dy(d){if(d.snapshot){const u=d.snapshot,c=d._futureSnapshot;d.snapshot=c,Gi(u.queryParams,c.queryParams)||d.queryParams.next(c.queryParams),u.fragment!==c.fragment&&d.fragment.next(c.fragment),Gi(u.params,c.params)||d.params.next(c.params),function T5(d,u){if(d.length!==u.length)return!1;for(let c=0;c<d.length;++c)if(!Gi(d[c],u[c]))return!1;return!0}(u.url,c.url)||d.url.next(c.url),Gi(u.data,c.data)||d.data.next(c.data)}else d.snapshot=d._futureSnapshot,d.data.next(d._futureSnapshot.data)}function Ay(d,u){const c=Gi(d.params,u.params)&&function M5(d,u){return Xo(d,u)&&d.every((c,f)=>Gi(c.parameters,u[f].parameters))}(d.url,u.url);return c&&!(!d.parent!=!u.parent)&&(!d.parent||Ay(d.parent,u.parent))}function vc(d,u,c){if(c&&d.shouldReuseRoute(u.value,c.value.snapshot)){const f=c.value;f._futureSnapshot=u.value;const p=function dV(d,u,c){return u.children.map(f=>{for(const p of c.children)if(d.shouldReuseRoute(f.value,p.value.snapshot))return vc(d,f,p);return vc(d,f)})}(d,u,c);return new Es(f,p)}{if(d.shouldAttach(u.value)){const g=d.retrieve(u.value);if(null!==g){const _=g.route;return _.value._futureSnapshot=u.value,_.children=u.children.map(y=>vc(d,y)),_}}const f=function fV(d){return new Ko(new Ei(d.url),new Ei(d.params),new Ei(d.queryParams),new Ei(d.fragment),new Ei(d.data),d.outlet,d.component,d)}(u.value),p=u.children.map(g=>vc(d,g));return new Es(f,p)}}const Iy="ngNavigationCancelingError";function OS(d,u){const{redirectTo:c,navigationBehaviorOptions:f}=qo(u)?{redirectTo:u,navigationBehaviorOptions:void 0}:u,p=NS(!1,0,u);return p.url=c,p.navigationBehaviorOptions=f,p}function NS(d,u,c){const f=new Error("NavigationCancelingError: "+(d||""));return f[Iy]=!0,f.cancellationCode=u,c&&(f.url=c),f}function LS(d){return kS(d)&&qo(d.url)}function kS(d){return d&&d[Iy]}class pV{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new xc,this.attachRef=null}}let xc=(()=>{class d{constructor(){this.contexts=new Map}onChildOutletCreated(c,f){const p=this.getOrCreateContext(c);p.outlet=f,this.contexts.set(c,p)}onChildOutletDestroyed(c){const f=this.getContext(c);f&&(f.outlet=null,f.attachRef=null)}onOutletDeactivated(){const c=this.contexts;return this.contexts=new Map,c}onOutletReAttached(c){this.contexts=c}getOrCreateContext(c){let f=this.getContext(c);return f||(f=new pV,this.contexts.set(c,f)),f}getContext(c){return this.contexts.get(c)||null}}return d.\u0275fac=function(c){return new(c||d)},d.\u0275prov=Dt({token:d,factory:d.\u0275fac,providedIn:"root"}),d})();const tf=!1;let BS=(()=>{class d{constructor(c,f,p,g,_){this.parentContexts=c,this.location=f,this.changeDetector=g,this.environmentInjector=_,this.activated=null,this._activatedRoute=null,this.activateEvents=new an,this.deactivateEvents=new an,this.attachEvents=new an,this.detachEvents=new an,this.name=p||At,c.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const c=this.parentContexts.getContext(this.name);c&&c.route&&(c.attachRef?this.attach(c.attachRef,c.route):this.activateWith(c.route,c.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new je(4012,tf);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new je(4012,tf);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new je(4012,tf);this.location.detach();const c=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(c.instance),c}attach(c,f){this.activated=c,this._activatedRoute=f,this.location.insert(c.hostView),this.attachEvents.emit(c.instance)}deactivate(){if(this.activated){const c=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(c)}}activateWith(c,f){if(this.isActivated)throw new je(4013,tf);this._activatedRoute=c;const p=this.location,_=c._futureSnapshot.component,y=this.parentContexts.getOrCreateContext(this.name).children,v=new gV(c,y,p.injector);if(f&&function mV(d){return!!d.resolveComponentFactory}(f)){const x=f.resolveComponentFactory(_);this.activated=p.createComponent(x,p.length,v)}else this.activated=p.createComponent(_,{index:p.length,injector:v,environmentInjector:f??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return d.\u0275fac=function(c){return new(c||d)(Qe(xc),Qe(xi),function Su(d){return function i2(d,u){if("class"===u)return d.classes;if("style"===u)return d.styles;const c=d.attrs;if(c){const f=c.length;let p=0;for(;p<f;){const g=c[p];if($x(g))break;if(0===g)p+=2;else if("number"==typeof g)for(p++;p<f&&"string"==typeof c[p];)p++;else{if(g===u)return c[p+1];p+=2}}}return null}(Ir(),d)}("name"),Qe(L_),Qe(qs))},d.\u0275dir=zr({type:d,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),d})();class gV{constructor(u,c,f){this.route=u,this.childContexts=c,this.parent=f}get(u,c){return u===Ko?this.route:u===xc?this.childContexts:this.parent.get(u,c)}}let My=(()=>{class d{}return d.\u0275fac=function(c){return new(c||d)},d.\u0275cmp=mu({type:d,selectors:[["ng-component"]],standalone:!0,features:[WC],decls:1,vars:0,template:function(c,f){1&c&&qu(0,"router-outlet")},dependencies:[BS],encapsulation:2}),d})();function US(d,u){return d.providers&&!d._injector&&(d._injector=pd(d.providers,u,`Route: ${d.path}`)),d._injector??u}function Ry(d){const u=d.children&&d.children.map(Ry),c=u?{...d,children:u}:{...d};return!c.component&&!c.loadComponent&&(u||c.loadChildren)&&c.outlet&&c.outlet!==At&&(c.component=My),c}function Jn(d){return d.outlet||At}function VS(d,u){const c=d.filter(f=>Jn(f)===u);return c.push(...d.filter(f=>Jn(f)!==u)),c}function bc(d){if(!d)return null;if(d.routeConfig?._injector)return d.routeConfig._injector;for(let u=d.parent;u;u=u.parent){const c=u.routeConfig;if(c?._loadedInjector)return c._loadedInjector;if(c?._injector)return c._injector}return null}class bV{constructor(u,c,f,p){this.routeReuseStrategy=u,this.futureState=c,this.currState=f,this.forwardEvent=p}activate(u){const c=this.futureState._root,f=this.currState?this.currState._root:null;this.deactivateChildRoutes(c,f,u),Dy(this.futureState.root),this.activateChildRoutes(c,f,u)}deactivateChildRoutes(u,c,f){const p=Dl(c);u.children.forEach(g=>{const _=g.value.outlet;this.deactivateRoutes(g,p[_],f),delete p[_]}),Ur(p,(g,_)=>{this.deactivateRouteAndItsChildren(g,f)})}deactivateRoutes(u,c,f){const p=u.value,g=c?c.value:null;if(p===g)if(p.component){const _=f.getContext(p.outlet);_&&this.deactivateChildRoutes(u,c,_.children)}else this.deactivateChildRoutes(u,c,f);else g&&this.deactivateRouteAndItsChildren(c,f)}deactivateRouteAndItsChildren(u,c){u.value.component&&this.routeReuseStrategy.shouldDetach(u.value.snapshot)?this.detachAndStoreRouteSubtree(u,c):this.deactivateRouteAndOutlet(u,c)}detachAndStoreRouteSubtree(u,c){const f=c.getContext(u.value.outlet),p=f&&u.value.component?f.children:c,g=Dl(u);for(const _ of Object.keys(g))this.deactivateRouteAndItsChildren(g[_],p);if(f&&f.outlet){const _=f.outlet.detach(),y=f.children.onOutletDeactivated();this.routeReuseStrategy.store(u.value.snapshot,{componentRef:_,route:u,contexts:y})}}deactivateRouteAndOutlet(u,c){const f=c.getContext(u.value.outlet),p=f&&u.value.component?f.children:c,g=Dl(u);for(const _ of Object.keys(g))this.deactivateRouteAndItsChildren(g[_],p);f&&f.outlet&&(f.outlet.deactivate(),f.children.onOutletDeactivated(),f.attachRef=null,f.resolver=null,f.route=null)}activateChildRoutes(u,c,f){const p=Dl(c);u.children.forEach(g=>{this.activateRoutes(g,p[g.value.outlet],f),this.forwardEvent(new aV(g.value.snapshot))}),u.children.length&&this.forwardEvent(new sV(u.value.snapshot))}activateRoutes(u,c,f){const p=u.value,g=c?c.value:null;if(Dy(p),p===g)if(p.component){const _=f.getOrCreateContext(p.outlet);this.activateChildRoutes(u,c,_.children)}else this.activateChildRoutes(u,c,f);else if(p.component){const _=f.getOrCreateContext(p.outlet);if(this.routeReuseStrategy.shouldAttach(p.snapshot)){const y=this.routeReuseStrategy.retrieve(p.snapshot);this.routeReuseStrategy.store(p.snapshot,null),_.children.onOutletReAttached(y.contexts),_.attachRef=y.componentRef,_.route=y.route.value,_.outlet&&_.outlet.attach(y.componentRef,y.route.value),Dy(y.route.value),this.activateChildRoutes(u,null,_.children)}else{const y=bc(p.snapshot),v=y?.get(Gu)??null;_.attachRef=null,_.route=p,_.resolver=v,_.injector=y,_.outlet&&_.outlet.activateWith(p,_.injector),this.activateChildRoutes(u,null,_.children)}}else this.activateChildRoutes(u,null,f)}}class HS{constructor(u){this.path=u,this.route=this.path[this.path.length-1]}}class rf{constructor(u,c){this.component=u,this.route=c}}function wV(d,u,c){const f=d._root;return wc(f,u?u._root:null,c,[f.value])}function Al(d,u){const c=Symbol(),f=u.get(d,c);return f===c?"function"!=typeof d||function aR(d){return null!==gh(d)}(d)?u.get(d):d:f}function wc(d,u,c,f,p={canDeactivateChecks:[],canActivateChecks:[]}){const g=Dl(u);return d.children.forEach(_=>{(function EV(d,u,c,f,p={canDeactivateChecks:[],canActivateChecks:[]}){const g=d.value,_=u?u.value:null,y=c?c.getContext(d.value.outlet):null;if(_&&g.routeConfig===_.routeConfig){const v=function TV(d,u,c){if("function"==typeof c)return c(d,u);switch(c){case"pathParamsChange":return!Xo(d.url,u.url);case"pathParamsOrQueryParamsChange":return!Xo(d.url,u.url)||!Gi(d.queryParams,u.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ay(d,u)||!Gi(d.queryParams,u.queryParams);default:return!Ay(d,u)}}(_,g,g.routeConfig.runGuardsAndResolvers);v?p.canActivateChecks.push(new HS(f)):(g.data=_.data,g._resolvedData=_._resolvedData),wc(d,u,g.component?y?y.children:null:c,f,p),v&&y&&y.outlet&&y.outlet.isActivated&&p.canDeactivateChecks.push(new rf(y.outlet.component,_))}else _&&Cc(u,y,p),p.canActivateChecks.push(new HS(f)),wc(d,null,g.component?y?y.children:null:c,f,p)})(_,g[_.value.outlet],c,f.concat([_.value]),p),delete g[_.value.outlet]}),Ur(g,(_,y)=>Cc(_,c.getContext(y),p)),p}function Cc(d,u,c){const f=Dl(d),p=d.value;Ur(f,(g,_)=>{Cc(g,p.component?u?u.children.getContext(_):null:u,c)}),c.canDeactivateChecks.push(new rf(p.component&&u&&u.outlet&&u.outlet.isActivated?u.outlet.component:null,p))}function Ec(d){return"function"==typeof d}function Fy(d){return d instanceof $d||"EmptyError"===d?.name}const nf=Symbol("INITIAL_VALUE");function Il(){return ji(d=>tS(d.map(u=>u.pipe(dc(1),function y5(...d){const u=pu(d);return oe((c,f)=>{(u?dy(d,c,u):dy(d,c)).subscribe(f)})}(nf)))).pipe(we(u=>{for(const c of u)if(!0!==c){if(c===nf)return nf;if(!1===c||c instanceof Wo)return c}return!0}),to(u=>u!==nf),dc(1)))}function jS(d){return function N(...d){return k(d)}(Yr(u=>{if(qo(u))throw OS(0,u)}),we(u=>!0===u))}const Oy={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function GS(d,u,c,f,p){const g=Ny(d,u,c);return g.matched?function jV(d,u,c,f){const p=u.canMatch;return p&&0!==p.length?et(p.map(_=>{const y=Al(_,d);return io(function PV(d){return d&&Ec(d.canMatch)}(y)?y.canMatch(u,c):d.runInContext(()=>y(u,c)))})).pipe(Il(),jS()):et(!0)}(f=US(u,f),u,c).pipe(we(_=>!0===_?g:{...Oy})):et(g)}function Ny(d,u,c){if(""===u.path)return"full"===u.pathMatch&&(d.hasChildren()||c.length>0)?{...Oy}:{matched:!0,consumedSegments:[],remainingSegments:c,parameters:{},positionalParamSegments:{}};const p=(u.matcher||E5)(c,d,u);if(!p)return{...Oy};const g={};Ur(p.posParams,(y,v)=>{g[v]=y.path});const _=p.consumed.length>0?{...g,...p.consumed[p.consumed.length-1].parameters}:g;return{matched:!0,consumedSegments:p.consumed,remainingSegments:c.slice(p.consumed.length),parameters:_,positionalParamSegments:p.posParams??{}}}function sf(d,u,c,f,p="corrected"){if(c.length>0&&function $V(d,u,c){return c.some(f=>af(d,u,f)&&Jn(f)!==At)}(d,c,f)){const _=new Mt(u,function zV(d,u,c,f){const p={};p[At]=f,f._sourceSegment=d,f._segmentIndexShift=u.length;for(const g of c)if(""===g.path&&Jn(g)!==At){const _=new Mt([],{});_._sourceSegment=d,_._segmentIndexShift=u.length,p[Jn(g)]=_}return p}(d,u,f,new Mt(c,d.children)));return _._sourceSegment=d,_._segmentIndexShift=u.length,{segmentGroup:_,slicedSegments:[]}}if(0===c.length&&function WV(d,u,c){return c.some(f=>af(d,u,f))}(d,c,f)){const _=new Mt(d.segments,function GV(d,u,c,f,p,g){const _={};for(const y of f)if(af(d,c,y)&&!p[Jn(y)]){const v=new Mt([],{});v._sourceSegment=d,v._segmentIndexShift="legacy"===g?d.segments.length:u.length,_[Jn(y)]=v}return{...p,..._}}(d,u,c,f,d.children,p));return _._sourceSegment=d,_._segmentIndexShift=u.length,{segmentGroup:_,slicedSegments:c}}const g=new Mt(d.segments,d.children);return g._sourceSegment=d,g._segmentIndexShift=u.length,{segmentGroup:g,slicedSegments:c}}function af(d,u,c){return(!(d.hasChildren()||u.length>0)||"full"!==c.pathMatch)&&""===c.path}function zS(d,u,c,f){return!!(Jn(d)===f||f!==At&&af(u,c,d))&&("**"===d.path||Ny(u,d,c).matched)}function $S(d,u,c){return 0===u.length&&!d.children[c]}const lf=!1;class uf{constructor(u){this.segmentGroup=u||null}}class WS{constructor(u){this.urlTree=u}}function Tc(d){return hc(new uf(d))}function XS(d){return hc(new WS(d))}class KV{constructor(u,c,f,p,g){this.injector=u,this.configLoader=c,this.urlSerializer=f,this.urlTree=p,this.config=g,this.allowRedirects=!0}apply(){const u=sf(this.urlTree.root,[],[],this.config).segmentGroup,c=new Mt(u.segments,u.children);return this.expandSegmentGroup(this.injector,this.config,c,At).pipe(we(g=>this.createUrlTree(Qd(g),this.urlTree.queryParams,this.urlTree.fragment))).pipe(no(g=>{if(g instanceof WS)return this.allowRedirects=!1,this.match(g.urlTree);throw g instanceof uf?this.noMatchError(g):g}))}match(u){return this.expandSegmentGroup(this.injector,this.config,u.root,At).pipe(we(p=>this.createUrlTree(Qd(p),u.queryParams,u.fragment))).pipe(no(p=>{throw p instanceof uf?this.noMatchError(p):p}))}noMatchError(u){return new je(4002,lf)}createUrlTree(u,c,f){const p=vy(u);return new Wo(p,c,f)}expandSegmentGroup(u,c,f,p){return 0===f.segments.length&&f.hasChildren()?this.expandChildren(u,c,f).pipe(we(g=>new Mt([],g))):this.expandSegment(u,f,c,f.segments,p,!0)}expandChildren(u,c,f){const p=[];for(const g of Object.keys(f.children))"primary"===g?p.unshift(g):p.push(g);return Ar(p).pipe($o(g=>{const _=f.children[g],y=VS(c,g);return this.expandSegmentGroup(u,y,_,g).pipe(we(v=>({segment:v,outlet:g})))}),oS((g,_)=>(g[_.outlet]=_.segment,g),{}),aS())}expandSegment(u,c,f,p,g,_){return Ar(f).pipe($o(y=>this.expandSegmentAgainstRoute(u,c,f,y,p,g,_).pipe(no(x=>{if(x instanceof uf)return et(null);throw x}))),ro(y=>!!y),no((y,v)=>{if(Fy(y))return $S(c,p,g)?et(new Mt([],{})):Tc(c);throw y}))}expandSegmentAgainstRoute(u,c,f,p,g,_,y){return zS(p,c,g,_)?void 0===p.redirectTo?this.matchSegmentAgainstRoute(u,c,p,g,_):y&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(u,c,f,p,g,_):Tc(c):Tc(c)}expandSegmentAgainstRouteUsingRedirect(u,c,f,p,g,_){return"**"===p.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(u,f,p,_):this.expandRegularSegmentAgainstRouteUsingRedirect(u,c,f,p,g,_)}expandWildCardWithParamsAgainstRouteUsingRedirect(u,c,f,p){const g=this.applyRedirectCommands([],f.redirectTo,{});return f.redirectTo.startsWith("/")?XS(g):this.lineralizeSegments(f,g).pipe(ur(_=>{const y=new Mt(_,{});return this.expandSegment(u,y,c,_,p,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(u,c,f,p,g,_){const{matched:y,consumedSegments:v,remainingSegments:x,positionalParamSegments:w}=Ny(c,p,g);if(!y)return Tc(c);const C=this.applyRedirectCommands(v,p.redirectTo,w);return p.redirectTo.startsWith("/")?XS(C):this.lineralizeSegments(p,C).pipe(ur(E=>this.expandSegment(u,c,f,E.concat(x),_,!1)))}matchSegmentAgainstRoute(u,c,f,p,g){return"**"===f.path?(u=US(f,u),f.loadChildren?(f._loadedRoutes?et({routes:f._loadedRoutes,injector:f._loadedInjector}):this.configLoader.loadChildren(u,f)).pipe(we(y=>(f._loadedRoutes=y.routes,f._loadedInjector=y.injector,new Mt(p,{})))):et(new Mt(p,{}))):GS(c,f,p,u).pipe(ji(({matched:_,consumedSegments:y,remainingSegments:v})=>_?this.getChildConfig(u=f._injector??u,f,p).pipe(ur(w=>{const C=w.injector??u,E=w.routes,{segmentGroup:T,slicedSegments:D}=sf(c,y,v,E),S=new Mt(T.segments,T.children);if(0===D.length&&S.hasChildren())return this.expandChildren(C,E,S).pipe(we(M=>new Mt(y,M)));if(0===E.length&&0===D.length)return et(new Mt(y,{}));const A=Jn(f)===g;return this.expandSegment(C,S,E,D,A?At:g,!0).pipe(we(P=>new Mt(y.concat(P.segments),P.children)))})):Tc(c)))}getChildConfig(u,c,f){return c.children?et({routes:c.children,injector:u}):c.loadChildren?void 0!==c._loadedRoutes?et({routes:c._loadedRoutes,injector:c._loadedInjector}):function HV(d,u,c,f){const p=u.canLoad;return void 0===p||0===p.length?et(!0):et(p.map(_=>{const y=Al(_,d);return io(function DV(d){return d&&Ec(d.canLoad)}(y)?y.canLoad(u,c):d.runInContext(()=>y(u,c)))})).pipe(Il(),jS())}(u,c,f).pipe(ur(p=>p?this.configLoader.loadChildren(u,c).pipe(Yr(g=>{c._loadedRoutes=g.routes,c._loadedInjector=g.injector})):function qV(d){return hc(NS(lf,3))}())):et({routes:[],injector:u})}lineralizeSegments(u,c){let f=[],p=c.root;for(;;){if(f=f.concat(p.segments),0===p.numberOfChildren)return et(f);if(p.numberOfChildren>1||!p.children[At])return hc(new je(4e3,lf));p=p.children[At]}}applyRedirectCommands(u,c,f){return this.applyRedirectCreateUrlTree(c,this.urlSerializer.parse(c),u,f)}applyRedirectCreateUrlTree(u,c,f,p){const g=this.createSegmentGroup(u,c.root,f,p);return new Wo(g,this.createQueryParams(c.queryParams,this.urlTree.queryParams),c.fragment)}createQueryParams(u,c){const f={};return Ur(u,(p,g)=>{if("string"==typeof p&&p.startsWith(":")){const y=p.substring(1);f[g]=c[y]}else f[g]=p}),f}createSegmentGroup(u,c,f,p){const g=this.createSegments(u,c.segments,f,p);let _={};return Ur(c.children,(y,v)=>{_[v]=this.createSegmentGroup(u,y,f,p)}),new Mt(g,_)}createSegments(u,c,f,p){return c.map(g=>g.path.startsWith(":")?this.findPosParam(u,g,p):this.findOrReturn(g,f))}findPosParam(u,c,f){const p=f[c.path.substring(1)];if(!p)throw new je(4001,lf);return p}findOrReturn(u,c){let f=0;for(const p of c){if(p.path===u.path)return c.splice(f),p;f++}return u}}class QV{}class tH{constructor(u,c,f,p,g,_,y,v){this.injector=u,this.rootComponentType=c,this.config=f,this.urlTree=p,this.url=g,this.paramsInheritanceStrategy=_,this.relativeLinkResolution=y,this.urlSerializer=v}recognize(){const u=sf(this.urlTree.root,[],[],this.config.filter(c=>void 0===c.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,u,At).pipe(we(c=>{if(null===c)return null;const f=new ef([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},At,this.rootComponentType,null,this.urlTree.root,-1,{}),p=new Es(f,c),g=new RS(this.url,p);return this.inheritParamsAndData(g._root),g}))}inheritParamsAndData(u){const c=u.value,f=PS(c,this.paramsInheritanceStrategy);c.params=Object.freeze(f.params),c.data=Object.freeze(f.data),u.children.forEach(p=>this.inheritParamsAndData(p))}processSegmentGroup(u,c,f,p){return 0===f.segments.length&&f.hasChildren()?this.processChildren(u,c,f):this.processSegment(u,c,f,f.segments,p)}processChildren(u,c,f){return Ar(Object.keys(f.children)).pipe($o(p=>{const g=f.children[p],_=VS(c,p);return this.processSegmentGroup(u,_,g,p)}),oS((p,g)=>p&&g?(p.push(...g),p):null),function b5(d,u=!1){return oe((c,f)=>{let p=0;c.subscribe(ge(f,g=>{const _=d(g,p++);(_||u)&&f.next(g),!_&&f.complete()}))})}(p=>null!==p),Wd(null),aS(),we(p=>{if(null===p)return null;const g=qS(p);return function rH(d){d.sort((u,c)=>u.value.outlet===At?-1:c.value.outlet===At?1:u.value.outlet.localeCompare(c.value.outlet))}(g),g}))}processSegment(u,c,f,p,g){return Ar(c).pipe($o(_=>this.processSegmentAgainstRoute(_._injector??u,_,f,p,g)),ro(_=>!!_),no(_=>{if(Fy(_))return $S(f,p,g)?et([]):et(null);throw _}))}processSegmentAgainstRoute(u,c,f,p,g){if(c.redirectTo||!zS(c,f,p,g))return et(null);let _;if("**"===c.path){const y=p.length>0?cS(p).parameters:{},v=KS(f)+p.length;_=et({snapshot:new ef(p,y,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,QS(c),Jn(c),c.component??c._loadedComponent??null,c,YS(f),v,JS(c),v),consumedSegments:[],remainingSegments:[]})}else _=GS(f,c,p,u).pipe(we(({matched:y,consumedSegments:v,remainingSegments:x,parameters:w})=>{if(!y)return null;const C=KS(f)+v.length;return{snapshot:new ef(v,w,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,QS(c),Jn(c),c.component??c._loadedComponent??null,c,YS(f),C,JS(c),C),consumedSegments:v,remainingSegments:x}}));return _.pipe(ji(y=>{if(null===y)return et(null);const{snapshot:v,consumedSegments:x,remainingSegments:w}=y;u=c._injector??u;const C=c._loadedInjector??u,E=function nH(d){return d.children?d.children:d.loadChildren?d._loadedRoutes:[]}(c),{segmentGroup:T,slicedSegments:D}=sf(f,x,w,E.filter(A=>void 0===A.redirectTo),this.relativeLinkResolution);if(0===D.length&&T.hasChildren())return this.processChildren(C,E,T).pipe(we(A=>null===A?null:[new Es(v,A)]));if(0===E.length&&0===D.length)return et([new Es(v,[])]);const S=Jn(c)===g;return this.processSegment(C,E,T,D,S?At:g).pipe(we(A=>null===A?null:[new Es(v,A)]))}))}}function iH(d){const u=d.value.routeConfig;return u&&""===u.path&&void 0===u.redirectTo}function qS(d){const u=[],c=new Set;for(const f of d){if(!iH(f)){u.push(f);continue}const p=u.find(g=>f.value.routeConfig===g.value.routeConfig);void 0!==p?(p.children.push(...f.children),c.add(p)):u.push(f)}for(const f of c){const p=qS(f.children);u.push(new Es(f.value,p))}return u.filter(f=>!c.has(f))}function YS(d){let u=d;for(;u._sourceSegment;)u=u._sourceSegment;return u}function KS(d){let u=d,c=u._segmentIndexShift??0;for(;u._sourceSegment;)u=u._sourceSegment,c+=u._segmentIndexShift??0;return c-1}function QS(d){return d.data||{}}function JS(d){return d.resolve||{}}function eD(d){return"string"==typeof d.title||null===d.title}function Ly(d){return ji(u=>{const c=d(u);return c?Ar(c).pipe(we(()=>u)):et(u)})}let tD=(()=>{class d{buildTitle(c){let f,p=c.root;for(;void 0!==p;)f=this.getResolvedTitleForRoute(p)??f,p=p.children.find(g=>g.outlet===At);return f}getResolvedTitleForRoute(c){return c.data[fc]}}return d.\u0275fac=function(c){return new(c||d)},d.\u0275prov=Dt({token:d,factory:function(){return pr(rD)},providedIn:"root"}),d})(),rD=(()=>{class d extends tD{constructor(c){super(),this.title=c}updateTitle(c){const f=this.buildTitle(c);void 0!==f&&this.title.setTitle(f)}}return d.\u0275fac=function(c){return new(c||d)(nt(QT))},d.\u0275prov=Dt({token:d,factory:d.\u0275fac,providedIn:"root"}),d})();class dH{}class pH extends class fH{shouldDetach(u){return!1}store(u,c){}shouldAttach(u){return!1}retrieve(u){return null}shouldReuseRoute(u,c){return u.routeConfig===c.routeConfig}}{}const hf=new ft("",{providedIn:"root",factory:()=>({})}),ky=new ft("ROUTES");let By=(()=>{class d{constructor(c,f){this.injector=c,this.compiler=f,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(c){if(this.componentLoaders.get(c))return this.componentLoaders.get(c);if(c._loadedComponent)return et(c._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(c);const f=io(c.loadComponent()).pipe(Yr(g=>{this.onLoadEndListener&&this.onLoadEndListener(c),c._loadedComponent=g}),gy(()=>{this.componentLoaders.delete(c)})),p=new iS(f,()=>new ne).pipe(fy());return this.componentLoaders.set(c,p),p}loadChildren(c,f){if(this.childrenLoaders.get(f))return this.childrenLoaders.get(f);if(f._loadedRoutes)return et({routes:f._loadedRoutes,injector:f._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(f);const g=this.loadModuleFactoryOrRoutes(f.loadChildren).pipe(we(y=>{this.onLoadEndListener&&this.onLoadEndListener(f);let v,x,w=!1;Array.isArray(y)?x=y:(v=y.create(c).injector,x=uS(v.get(ky,[],ot.Self|ot.Optional)));return{routes:x.map(Ry),injector:v}}),gy(()=>{this.childrenLoaders.delete(f)})),_=new iS(g,()=>new ne).pipe(fy());return this.childrenLoaders.set(f,_),_}loadModuleFactoryOrRoutes(c){return io(c()).pipe(ur(f=>f instanceof zC||Array.isArray(f)?et(f):Ar(this.compiler.compileModuleAsync(f))))}}return d.\u0275fac=function(c){return new(c||d)(nt(mi),nt(D_))},d.\u0275prov=Dt({token:d,factory:d.\u0275fac,providedIn:"root"}),d})();class mH{}class _H{shouldProcessUrl(u){return!0}extract(u){return u}merge(u,c){return u}}function yH(d){throw d}function vH(d,u,c){return u.parse("/")}const xH={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},bH={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function iD(){const d=pr(mS),u=pr(xc),c=pr(G_),f=pr(mi),p=pr(D_),g=pr(ky,{optional:!0})??[],_=pr(hf,{optional:!0})??{},y=pr(rD),v=pr(tD,{optional:!0}),x=pr(mH,{optional:!0}),w=pr(dH,{optional:!0}),C=new Vr(null,d,u,c,f,p,uS(g));return x&&(C.urlHandlingStrategy=x),w&&(C.routeReuseStrategy=w),C.titleStrategy=v??y,function wH(d,u){d.errorHandler&&(u.errorHandler=d.errorHandler),d.malformedUriErrorHandler&&(u.malformedUriErrorHandler=d.malformedUriErrorHandler),d.onSameUrlNavigation&&(u.onSameUrlNavigation=d.onSameUrlNavigation),d.paramsInheritanceStrategy&&(u.paramsInheritanceStrategy=d.paramsInheritanceStrategy),d.relativeLinkResolution&&(u.relativeLinkResolution=d.relativeLinkResolution),d.urlUpdateStrategy&&(u.urlUpdateStrategy=d.urlUpdateStrategy),d.canceledNavigationResolution&&(u.canceledNavigationResolution=d.canceledNavigationResolution)}(_,C),C}let Vr=(()=>{class d{constructor(c,f,p,g,_,y,v){this.rootComponentType=c,this.urlSerializer=f,this.rootContexts=p,this.location=g,this.config=v,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ne,this.errorHandler=yH,this.malformedUriErrorHandler=vH,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>et(void 0),this.urlHandlingStrategy=new _H,this.routeReuseStrategy=new pH,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=_.get(By),this.configLoader.onLoadEndListener=E=>this.triggerEvent(new nV(E)),this.configLoader.onLoadStartListener=E=>this.triggerEvent(new rV(E)),this.ngModule=_.get(jo),this.console=_.get(zB);const C=_.get(Rr);this.isNgZoneEnabled=C instanceof Rr&&Rr.isInAngularZone(),this.resetConfig(v),this.currentUrlTree=function S5(){return new Wo(new Mt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=MS(this.currentUrlTree,this.rootComponentType),this.transitions=new Ei({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(c){const f=this.events;return c.pipe(to(p=>0!==p.id),we(p=>({...p,extractedUrl:this.urlHandlingStrategy.extract(p.rawUrl)})),ji(p=>{let g=!1,_=!1;return et(p).pipe(Yr(y=>{this.currentNavigation={id:y.id,initialUrl:y.rawUrl,extractedUrl:y.extractedUrl,trigger:y.source,extras:y.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),ji(y=>{const v=this.browserUrlTree.toString(),x=!this.navigated||y.extractedUrl.toString()!==v||v!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||x)&&this.urlHandlingStrategy.shouldProcessUrl(y.rawUrl))return sD(y.source)&&(this.browserUrlTree=y.extractedUrl),et(y).pipe(ji(C=>{const E=this.transitions.getValue();return f.next(new Cy(C.id,this.serializeUrl(C.extractedUrl),C.source,C.restoredState)),E!==this.transitions.getValue()?$n:Promise.resolve(C)}),function ZV(d,u,c,f){return ji(p=>function YV(d,u,c,f,p){return new KV(d,u,c,f,p).apply()}(d,u,c,p.extractedUrl,f).pipe(we(g=>({...p,urlAfterRedirects:g}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Yr(C=>{this.currentNavigation={...this.currentNavigation,finalUrl:C.urlAfterRedirects},p.urlAfterRedirects=C.urlAfterRedirects}),function oH(d,u,c,f,p,g){return ur(_=>function eH(d,u,c,f,p,g,_="emptyOnly",y="legacy"){return new tH(d,u,c,f,p,_,y,g).recognize().pipe(ji(v=>null===v?function JV(d){return new O(u=>u.error(d))}(new QV):et(v)))}(d,u,c,_.urlAfterRedirects,f.serialize(_.urlAfterRedirects),f,p,g).pipe(we(y=>({..._,targetSnapshot:y}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),Yr(C=>{if(p.targetSnapshot=C.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!C.extras.skipLocationChange){const T=this.urlHandlingStrategy.merge(C.urlAfterRedirects,C.rawUrl);this.setBrowserUrl(T,C)}this.browserUrlTree=C.urlAfterRedirects}const E=new Z5(C.id,this.serializeUrl(C.extractedUrl),this.serializeUrl(C.urlAfterRedirects),C.targetSnapshot);f.next(E)}));if(x&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:E,extractedUrl:T,source:D,restoredState:S,extras:A}=y,I=new Cy(E,this.serializeUrl(T),D,S);f.next(I);const P=MS(T,this.rootComponentType).snapshot;return et(p={...y,targetSnapshot:P,urlAfterRedirects:T,extras:{...A,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=y.rawUrl,y.resolve(null),$n}),Yr(y=>{const v=new Q5(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(v)}),we(y=>p={...y,guards:wV(y.targetSnapshot,y.currentSnapshot,this.rootContexts)}),function FV(d,u){return ur(c=>{const{targetSnapshot:f,currentSnapshot:p,guards:{canActivateChecks:g,canDeactivateChecks:_}}=c;return 0===_.length&&0===g.length?et({...c,guardsResult:!0}):function OV(d,u,c,f){return Ar(d).pipe(ur(p=>function VV(d,u,c,f,p){const g=u&&u.routeConfig?u.routeConfig.canDeactivate:null;return g&&0!==g.length?et(g.map(y=>{const v=bc(u)??p,x=Al(y,v);return io(function MV(d){return d&&Ec(d.canDeactivate)}(x)?x.canDeactivate(d,u,c,f):v.runInContext(()=>x(d,u,c,f))).pipe(ro())})).pipe(Il()):et(!0)}(p.component,p.route,c,u,f)),ro(p=>!0!==p,!0))}(_,f,p,d).pipe(ur(y=>y&&function SV(d){return"boolean"==typeof d}(y)?function NV(d,u,c,f){return Ar(u).pipe($o(p=>dy(function kV(d,u){return null!==d&&u&&u(new iV(d)),et(!0)}(p.route.parent,f),function LV(d,u){return null!==d&&u&&u(new oV(d)),et(!0)}(p.route,f),function UV(d,u,c){const f=u[u.length-1],g=u.slice(0,u.length-1).reverse().map(_=>function CV(d){const u=d.routeConfig?d.routeConfig.canActivateChild:null;return u&&0!==u.length?{node:d,guards:u}:null}(_)).filter(_=>null!==_).map(_=>nS(()=>et(_.guards.map(v=>{const x=bc(_.node)??c,w=Al(v,x);return io(function IV(d){return d&&Ec(d.canActivateChild)}(w)?w.canActivateChild(f,d):x.runInContext(()=>w(f,d))).pipe(ro())})).pipe(Il())));return et(g).pipe(Il())}(d,p.path,c),function BV(d,u,c){const f=u.routeConfig?u.routeConfig.canActivate:null;if(!f||0===f.length)return et(!0);const p=f.map(g=>nS(()=>{const _=bc(u)??c,y=Al(g,_);return io(function AV(d){return d&&Ec(d.canActivate)}(y)?y.canActivate(u,d):_.runInContext(()=>y(u,d))).pipe(ro())}));return et(p).pipe(Il())}(d,p.route,c))),ro(p=>!0!==p,!0))}(f,g,d,u):et(y)),we(y=>({...c,guardsResult:y})))})}(this.ngModule.injector,y=>this.triggerEvent(y)),Yr(y=>{if(p.guardsResult=y.guardsResult,qo(y.guardsResult))throw OS(0,y.guardsResult);const v=new J5(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot,!!y.guardsResult);this.triggerEvent(v)}),to(y=>!!y.guardsResult||(this.restoreHistory(y),this.cancelNavigationTransition(y,"",3),!1)),Ly(y=>{if(y.guards.canActivateChecks.length)return et(y).pipe(Yr(v=>{const x=new eV(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);this.triggerEvent(x)}),ji(v=>{let x=!1;return et(v).pipe(function aH(d,u){return ur(c=>{const{targetSnapshot:f,guards:{canActivateChecks:p}}=c;if(!p.length)return et(c);let g=0;return Ar(p).pipe($o(_=>function lH(d,u,c,f){const p=d.routeConfig,g=d._resolve;return void 0!==p?.title&&!eD(p)&&(g[fc]=p.title),function uH(d,u,c,f){const p=function cH(d){return[...Object.keys(d),...Object.getOwnPropertySymbols(d)]}(d);if(0===p.length)return et({});const g={};return Ar(p).pipe(ur(_=>function hH(d,u,c,f){const p=bc(u)??f,g=Al(d,p);return io(g.resolve?g.resolve(u,c):p.runInContext(()=>g(u,c)))}(d[_],u,c,f).pipe(ro(),Yr(y=>{g[_]=y}))),py(1),function w5(d){return we(()=>d)}(g),no(_=>Fy(_)?$n:hc(_)))}(g,d,u,f).pipe(we(_=>(d._resolvedData=_,d.data=PS(d,c).resolve,p&&eD(p)&&(d.data[fc]=p.title),null)))}(_.route,f,d,u)),Yr(()=>g++),py(1),ur(_=>g===p.length?et(c):$n))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Yr({next:()=>x=!0,complete:()=>{x||(this.restoreHistory(v),this.cancelNavigationTransition(v,"",2))}}))}),Yr(v=>{const x=new tV(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);this.triggerEvent(x)}))}),Ly(y=>{const v=x=>{const w=[];x.routeConfig?.loadComponent&&!x.routeConfig._loadedComponent&&w.push(this.configLoader.loadComponent(x.routeConfig).pipe(Yr(C=>{x.component=C}),we(()=>{})));for(const C of x.children)w.push(...v(C));return w};return tS(v(y.targetSnapshot.root)).pipe(Wd(),dc(1))}),Ly(()=>this.afterPreactivation()),we(y=>{const v=function hV(d,u,c){const f=vc(d,u._root,c?c._root:void 0);return new IS(f,u)}(this.routeReuseStrategy,y.targetSnapshot,y.currentRouterState);return p={...y,targetRouterState:v}}),Yr(y=>{this.currentUrlTree=y.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(y.urlAfterRedirects,y.rawUrl),this.routerState=y.targetRouterState,"deferred"===this.urlUpdateStrategy&&(y.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,y),this.browserUrlTree=y.urlAfterRedirects)}),((d,u,c)=>we(f=>(new bV(u,f.targetRouterState,f.currentRouterState,c).activate(d),f)))(this.rootContexts,this.routeReuseStrategy,y=>this.triggerEvent(y)),Yr({next(){g=!0},complete(){g=!0}}),gy(()=>{g||_||this.cancelNavigationTransition(p,"",1),this.currentNavigation?.id===p.id&&(this.currentNavigation=null)}),no(y=>{if(_=!0,kS(y)){LS(y)||(this.navigated=!0,this.restoreHistory(p,!0));const v=new Jd(p.id,this.serializeUrl(p.extractedUrl),y.message,y.cancellationCode);if(f.next(v),LS(y)){const x=this.urlHandlingStrategy.merge(y.url,this.rawUrlTree),w={skipLocationChange:p.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||sD(p.source)};this.scheduleNavigation(x,"imperative",null,w,{resolve:p.resolve,reject:p.reject,promise:p.promise})}else p.resolve(!1)}else{this.restoreHistory(p,!0);const v=new SS(p.id,this.serializeUrl(p.extractedUrl),y,p.targetSnapshot??void 0);f.next(v);try{p.resolve(this.errorHandler(y))}catch(x){p.reject(x)}}return $n}))}))}resetRootComponentType(c){this.rootComponentType=c,this.routerState.root.component=this.rootComponentType}setTransition(c){this.transitions.next({...this.transitions.value,...c})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(c=>{const f="popstate"===c.type?"popstate":"hashchange";"popstate"===f&&setTimeout(()=>{const p={replaceUrl:!0},g=c.state?.navigationId?c.state:null;if(g){const y={...g};delete y.navigationId,delete y.\u0275routerPageId,0!==Object.keys(y).length&&(p.state=y)}const _=this.parseUrl(c.url);this.scheduleNavigation(_,f,g,p)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(c){this.events.next(c)}resetConfig(c){this.config=c.map(Ry),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(c,f={}){const{relativeTo:p,queryParams:g,fragment:_,queryParamsHandling:y,preserveFragment:v}=f,x=p||this.routerState.root,w=v?this.currentUrlTree.fragment:_;let C=null;switch(y){case"merge":C={...this.currentUrlTree.queryParams,...g};break;case"preserve":C=this.currentUrlTree.queryParams;break;default:C=g||null}return null!==C&&(C=this.removeEmptyProps(C)),$5(x,this.currentUrlTree,c,C,w??null)}navigateByUrl(c,f={skipLocationChange:!1}){const p=qo(c)?c:this.parseUrl(c),g=this.urlHandlingStrategy.merge(p,this.rawUrlTree);return this.scheduleNavigation(g,"imperative",null,f)}navigate(c,f={skipLocationChange:!1}){return function CH(d){for(let u=0;u<d.length;u++){if(null==d[u])throw new je(4008,false)}}(c),this.navigateByUrl(this.createUrlTree(c,f),f)}serializeUrl(c){return this.urlSerializer.serialize(c)}parseUrl(c){let f;try{f=this.urlSerializer.parse(c)}catch(p){f=this.malformedUriErrorHandler(p,this.urlSerializer,c)}return f}isActive(c,f){let p;if(p=!0===f?{...xH}:!1===f?{...bH}:f,qo(c))return dS(this.currentUrlTree,c,p);const g=this.parseUrl(c);return dS(this.currentUrlTree,g,p)}removeEmptyProps(c){return Object.keys(c).reduce((f,p)=>{const g=c[p];return null!=g&&(f[p]=g),f},{})}processNavigations(){this.navigations.subscribe(c=>{this.navigated=!0,this.lastSuccessfulId=c.id,this.currentPageId=c.targetPageId,this.events.next(new Yo(c.id,this.serializeUrl(c.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),c.resolve(!0)},c=>{this.console.warn(`Unhandled Navigation Error: ${c}`)})}scheduleNavigation(c,f,p,g,_){if(this.disposed)return Promise.resolve(!1);let y,v,x;_?(y=_.resolve,v=_.reject,x=_.promise):x=new Promise((E,T)=>{y=E,v=T});const w=++this.navigationId;let C;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(p=this.location.getState()),C=p&&p.\u0275routerPageId?p.\u0275routerPageId:g.replaceUrl||g.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):C=0,this.setTransition({id:w,targetPageId:C,source:f,restoredState:p,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:c,extras:g,resolve:y,reject:v,promise:x,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),x.catch(E=>Promise.reject(E))}setBrowserUrl(c,f){const p=this.urlSerializer.serialize(c),g={...f.extras.state,...this.generateNgRouterState(f.id,f.targetPageId)};this.location.isCurrentPathEqualTo(p)||f.extras.replaceUrl?this.location.replaceState(p,"",g):this.location.go(p,"",g)}restoreHistory(c,f=!1){if("computed"===this.canceledNavigationResolution){const p=this.currentPageId-c.targetPageId;"popstate"!==c.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===p?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===p&&(this.resetState(c),this.browserUrlTree=c.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(p)}else"replace"===this.canceledNavigationResolution&&(f&&this.resetState(c),this.resetUrlToCurrentUrlTree())}resetState(c){this.routerState=c.currentRouterState,this.currentUrlTree=c.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,c.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(c,f,p){const g=new Jd(c.id,this.serializeUrl(c.extractedUrl),f,p);this.triggerEvent(g),c.resolve(!1)}generateNgRouterState(c,f){return"computed"===this.canceledNavigationResolution?{navigationId:c,\u0275routerPageId:f}:{navigationId:c}}}return d.\u0275fac=function(c){Em()},d.\u0275prov=Dt({token:d,factory:function(){return iD()},providedIn:"root"}),d})();function sD(d){return"imperative"!==d}class oD{}let SH=(()=>{class d{constructor(c,f,p,g,_){this.router=c,this.injector=p,this.preloadingStrategy=g,this.loader=_}setUpPreloading(){this.subscription=this.router.events.pipe(to(c=>c instanceof Yo),$o(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(c,f){const p=[];for(const g of f){g.providers&&!g._injector&&(g._injector=pd(g.providers,c,`Route: ${g.path}`));const _=g._injector??c,y=g._loadedInjector??_;g.loadChildren&&!g._loadedRoutes&&void 0===g.canLoad||g.loadComponent&&!g._loadedComponent?p.push(this.preloadConfig(_,g)):(g.children||g._loadedRoutes)&&p.push(this.processRoutes(y,g.children??g._loadedRoutes))}return Ar(p).pipe(Hs())}preloadConfig(c,f){return this.preloadingStrategy.preload(f,()=>{let p;p=f.loadChildren&&void 0===f.canLoad?this.loader.loadChildren(c,f):et(null);const g=p.pipe(ur(_=>null===_?et(void 0):(f._loadedRoutes=_.routes,f._loadedInjector=_.injector,this.processRoutes(_.injector??c,_.routes))));return f.loadComponent&&!f._loadedComponent?Ar([g,this.loader.loadComponent(f)]).pipe(Hs()):g})}}return d.\u0275fac=function(c){return new(c||d)(nt(Vr),nt(D_),nt(qs),nt(oD),nt(By))},d.\u0275prov=Dt({token:d,factory:d.\u0275fac,providedIn:"root"}),d})();const Hy=new ft("");let aD=(()=>{class d{constructor(c,f,p={}){this.router=c,this.viewportScroller=f,this.options=p,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},p.scrollPositionRestoration=p.scrollPositionRestoration||"disabled",p.anchorScrolling=p.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(c=>{c instanceof Cy?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=c.navigationTrigger,this.restoredId=c.restoredState?c.restoredState.navigationId:0):c instanceof Yo&&(this.lastId=c.id,this.scheduleScrollEvent(c,this.router.parseUrl(c.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(c=>{c instanceof DS&&(c.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(c.position):c.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(c.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(c,f){this.router.triggerEvent(new DS(c,"popstate"===this.lastSource?this.store[this.restoredId]:null,f))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return d.\u0275fac=function(c){Em()},d.\u0275prov=Dt({token:d,factory:d.\u0275fac}),d})();function Ml(d,u){return{\u0275kind:d,\u0275providers:u}}function jy(d){return[{provide:ky,multi:!0,useValue:d}]}function uD(){const d=pr(mi);return u=>{const c=d.get(Ed);if(u!==c.components[0])return;const f=d.get(Vr),p=d.get(cD);1===d.get(Gy)&&f.initialNavigation(),d.get(hD,null,ot.Optional)?.setUpPreloading(),d.get(Hy,null,ot.Optional)?.init(),f.resetRootComponentType(c.componentTypes[0]),p.closed||(p.next(),p.unsubscribe())}}const cD=new ft("",{factory:()=>new ne}),Gy=new ft("",{providedIn:"root",factory:()=>1});const hD=new ft("");function MH(d){return Ml(0,[{provide:hD,useExisting:SH},{provide:oD,useExisting:d}])}const dD=new ft("ROUTER_FORROOT_GUARD"),PH=[G_,{provide:mS,useClass:_y},{provide:Vr,useFactory:iD},xc,{provide:Ko,useFactory:function lD(d){return d.routerState.root},deps:[Vr]},By];function RH(){return new HE("Router",Vr)}let fD=(()=>{class d{constructor(c){}static forRoot(c,f){return{ngModule:d,providers:[PH,[],jy(c),{provide:dD,useFactory:LH,deps:[[Vr,new Fu,new Ou]]},{provide:hf,useValue:f||{}},f?.useHash?{provide:zo,useClass:R3}:{provide:zo,useClass:dT},{provide:Hy,useFactory:()=>{const d=pr(Vr),u=pr(QU),c=pr(hf);return c.scrollOffset&&u.setOffset(c.scrollOffset),new aD(d,u,c)}},f?.preloadingStrategy?MH(f.preloadingStrategy).\u0275providers:[],{provide:HE,multi:!0,useFactory:RH},f?.initialNavigation?kH(f):[],[{provide:pD,useFactory:uD},{provide:OE,multi:!0,useExisting:pD}]]}}static forChild(c){return{ngModule:d,providers:[jy(c)]}}}return d.\u0275fac=function(c){return new(c||d)(nt(dD,8))},d.\u0275mod=Ao({type:d}),d.\u0275inj=js({imports:[My]}),d})();function LH(d){return"guarded"}function kH(d){return["disabled"===d.initialNavigation?Ml(3,[{provide:bd,multi:!0,useFactory:()=>{const u=pr(Vr);return()=>{u.setUpLocationChangeListener()}}},{provide:Gy,useValue:2}]).\u0275providers:[],"enabledBlocking"===d.initialNavigation?Ml(2,[{provide:Gy,useValue:0},{provide:bd,multi:!0,deps:[mi],useFactory:u=>{const c=u.get(M3,Promise.resolve());let f=!1;return()=>c.then(()=>new Promise(g=>{const _=u.get(Vr),y=u.get(cD);(function p(g){u.get(Vr).events.pipe(to(y=>y instanceof Yo||y instanceof Jd||y instanceof SS),we(y=>y instanceof Yo||y instanceof Jd&&(0===y.code||1===y.code)&&null),to(y=>null!==y),dc(1)).subscribe(()=>{g()})})(()=>{g(!0),f=!0}),_.afterPreactivation=()=>(g(!0),f||y.closed?et(void 0):y),_.initialNavigation()}))}}]).\u0275providers:[]]}const pD=new ft(""),UH=[];let VH=(()=>{class d{}return d.\u0275fac=function(c){return new(c||d)},d.\u0275mod=Ao({type:d}),d.\u0275inj=js({imports:[fD.forRoot(UH),fD]}),d})();function gD(d,u,c,f,p,g,_){try{var y=d[g](_),v=y.value}catch(x){return void c(x)}y.done?u(v):Promise.resolve(v).then(f,p)}function Ge(d){return function(){var u=this,c=arguments;return new Promise(function(f,p){var g=d.apply(u,c);function _(v){gD(g,f,p,_,y,"next",v)}function y(v){gD(g,f,p,_,y,"throw",v)}_(void 0)})}}var Zo=(d=>(d[d.WEBGL_LEGACY=0]="WEBGL_LEGACY",d[d.WEBGL=1]="WEBGL",d[d.WEBGL2=2]="WEBGL2",d))(Zo||{}),mD=(d=>(d[d.UNKNOWN=0]="UNKNOWN",d[d.WEBGL=1]="WEBGL",d[d.CANVAS=2]="CANVAS",d))(mD||{}),zy=(d=>(d[d.COLOR=16384]="COLOR",d[d.DEPTH=256]="DEPTH",d[d.STENCIL=1024]="STENCIL",d))(zy||{}),at=(d=>(d[d.NORMAL=0]="NORMAL",d[d.ADD=1]="ADD",d[d.MULTIPLY=2]="MULTIPLY",d[d.SCREEN=3]="SCREEN",d[d.OVERLAY=4]="OVERLAY",d[d.DARKEN=5]="DARKEN",d[d.LIGHTEN=6]="LIGHTEN",d[d.COLOR_DODGE=7]="COLOR_DODGE",d[d.COLOR_BURN=8]="COLOR_BURN",d[d.HARD_LIGHT=9]="HARD_LIGHT",d[d.SOFT_LIGHT=10]="SOFT_LIGHT",d[d.DIFFERENCE=11]="DIFFERENCE",d[d.EXCLUSION=12]="EXCLUSION",d[d.HUE=13]="HUE",d[d.SATURATION=14]="SATURATION",d[d.COLOR=15]="COLOR",d[d.LUMINOSITY=16]="LUMINOSITY",d[d.NORMAL_NPM=17]="NORMAL_NPM",d[d.ADD_NPM=18]="ADD_NPM",d[d.SCREEN_NPM=19]="SCREEN_NPM",d[d.NONE=20]="NONE",d[d.SRC_OVER=0]="SRC_OVER",d[d.SRC_IN=21]="SRC_IN",d[d.SRC_OUT=22]="SRC_OUT",d[d.SRC_ATOP=23]="SRC_ATOP",d[d.DST_OVER=24]="DST_OVER",d[d.DST_IN=25]="DST_IN",d[d.DST_OUT=26]="DST_OUT",d[d.DST_ATOP=27]="DST_ATOP",d[d.ERASE=26]="ERASE",d[d.SUBTRACT=28]="SUBTRACT",d[d.XOR=29]="XOR",d))(at||{}),zi=(d=>(d[d.POINTS=0]="POINTS",d[d.LINES=1]="LINES",d[d.LINE_LOOP=2]="LINE_LOOP",d[d.LINE_STRIP=3]="LINE_STRIP",d[d.TRIANGLES=4]="TRIANGLES",d[d.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",d[d.TRIANGLE_FAN=6]="TRIANGLE_FAN",d))(zi||{}),be=(d=>(d[d.RGBA=6408]="RGBA",d[d.RGB=6407]="RGB",d[d.RG=33319]="RG",d[d.RED=6403]="RED",d[d.RGBA_INTEGER=36249]="RGBA_INTEGER",d[d.RGB_INTEGER=36248]="RGB_INTEGER",d[d.RG_INTEGER=33320]="RG_INTEGER",d[d.RED_INTEGER=36244]="RED_INTEGER",d[d.ALPHA=6406]="ALPHA",d[d.LUMINANCE=6409]="LUMINANCE",d[d.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",d[d.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",d[d.DEPTH_STENCIL=34041]="DEPTH_STENCIL",d))(be||{}),Pl=(d=>(d[d.TEXTURE_2D=3553]="TEXTURE_2D",d[d.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",d[d.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",d[d.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",d[d.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",d[d.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",d[d.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",d[d.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",d[d.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",d))(Pl||{}),Ze=(d=>(d[d.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",d[d.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",d[d.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",d[d.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",d[d.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",d[d.UNSIGNED_INT=5125]="UNSIGNED_INT",d[d.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",d[d.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",d[d.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",d[d.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",d[d.BYTE=5120]="BYTE",d[d.SHORT=5122]="SHORT",d[d.INT=5124]="INT",d[d.FLOAT=5126]="FLOAT",d[d.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",d[d.HALF_FLOAT=36193]="HALF_FLOAT",d))(Ze||{}),Be=(d=>(d[d.FLOAT=0]="FLOAT",d[d.INT=1]="INT",d[d.UINT=2]="UINT",d))(Be||{}),$i=(d=>(d[d.NEAREST=0]="NEAREST",d[d.LINEAR=1]="LINEAR",d))($i||{}),so=(d=>(d[d.CLAMP=33071]="CLAMP",d[d.REPEAT=10497]="REPEAT",d[d.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",d))(so||{}),Wi=(d=>(d[d.OFF=0]="OFF",d[d.POW2=1]="POW2",d[d.ON=2]="ON",d[d.ON_MANUAL=3]="ON_MANUAL",d))(Wi||{}),_n=(d=>(d[d.NPM=0]="NPM",d[d.UNPACK=1]="UNPACK",d[d.PMA=2]="PMA",d[d.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",d[d.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",d[d.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",d))(_n||{}),Xi=(d=>(d[d.NO=0]="NO",d[d.YES=1]="YES",d[d.AUTO=2]="AUTO",d[d.BLEND=0]="BLEND",d[d.CLEAR=1]="CLEAR",d[d.BLIT=2]="BLIT",d))(Xi||{}),$y=(d=>(d[d.AUTO=0]="AUTO",d[d.MANUAL=1]="MANUAL",d))($y||{}),ei=(d=>(d.LOW="lowp",d.MEDIUM="mediump",d.HIGH="highp",d))(ei||{}),Or=(d=>(d[d.NONE=0]="NONE",d[d.SCISSOR=1]="SCISSOR",d[d.STENCIL=2]="STENCIL",d[d.SPRITE=3]="SPRITE",d[d.COLOR=4]="COLOR",d))(Or||{}),Er=(d=>(d[d.NONE=0]="NONE",d[d.LOW=2]="LOW",d[d.MEDIUM=4]="MEDIUM",d[d.HIGH=8]="HIGH",d))(Er||{}),qi=(d=>(d[d.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",d[d.ARRAY_BUFFER=34962]="ARRAY_BUFFER",d[d.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",d))(qi||{});const Re={ADAPTER:{createCanvas:(d,u)=>{const c=document.createElement("canvas");return c.width=d,c.height=u,c},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(d,u)=>fetch(d,u),parseXML:d=>(new DOMParser).parseFromString(d,"text/xml")},RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var Wy=/iPhone/i,_D=/iPod/i,yD=/iPad/i,vD=/\biOS-universal(?:.+)Mac\b/i,Xy=/\bAndroid(?:.+)Mobile\b/i,xD=/Android/i,Rl=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,gf=/Silk/i,Ts=/Windows Phone/i,bD=/\bWindows(?:.+)ARM\b/i,wD=/BlackBerry/i,CD=/BB10/i,ED=/Opera Mini/i,TD=/\b(CriOS|Chrome)(?:.+)Mobile/i,SD=/Mobile(?:.+)Firefox\b/i,DD=function(d){return typeof d<"u"&&"MacIntel"===d.platform&&"number"==typeof d.maxTouchPoints&&d.maxTouchPoints>1&&typeof MSStream>"u"};function AD(d){var u={userAgent:"",platform:"",maxTouchPoints:0};!d&&typeof navigator<"u"?u={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:"string"==typeof d?u.userAgent=d:d&&d.userAgent&&(u={userAgent:d.userAgent,platform:d.platform,maxTouchPoints:d.maxTouchPoints||0});var c=u.userAgent,f=c.split("[FBAN");typeof f[1]<"u"&&(c=f[0]),typeof(f=c.split("Twitter"))[1]<"u"&&(c=f[0]);var p=function jH(d){return function(u){return u.test(d)}}(c),g={apple:{phone:p(Wy)&&!p(Ts),ipod:p(_D),tablet:!p(Wy)&&(p(yD)||DD(u))&&!p(Ts),universal:p(vD),device:(p(Wy)||p(_D)||p(yD)||p(vD)||DD(u))&&!p(Ts)},amazon:{phone:p(Rl),tablet:!p(Rl)&&p(gf),device:p(Rl)||p(gf)},android:{phone:!p(Ts)&&p(Rl)||!p(Ts)&&p(Xy),tablet:!p(Ts)&&!p(Rl)&&!p(Xy)&&(p(gf)||p(xD)),device:!p(Ts)&&(p(Rl)||p(gf)||p(Xy)||p(xD))||p(/\bokhttp\b/i)},windows:{phone:p(Ts),tablet:p(bD),device:p(Ts)||p(bD)},other:{blackberry:p(wD),blackberry10:p(CD),opera:p(ED),firefox:p(SD),chrome:p(TD),device:p(wD)||p(CD)||p(ED)||p(SD)||p(TD)},any:!1,phone:!1,tablet:!1};return g.any=g.apple.device||g.android.device||g.windows.device||g.other.device,g.phone=g.apple.phone||g.android.phone||g.windows.phone,g.tablet=g.apple.tablet||g.android.tablet||g.windows.tablet,g}const Ss=(AD.default??AD)(globalThis.navigator);Re.RETINA_PREFIX=/@([0-9\.]+)x/,Re.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var Sc=_e(5),zH=_e(469);_e(762);const ID={};function lt(d,u,c=3){if(ID[u])return;let f=(new Error).stack;typeof f>"u"?console.warn("PixiJS Deprecation Warning: ",`${u}\nDeprecated since v${d}`):(f=f.split("\n").splice(c).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${u}\nDeprecated since v${d}`),console.warn(f),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${u}\nDeprecated since v${d}`),console.warn(f))),ID[u]=!0}function Ti(d){if("string"!=typeof d)throw new TypeError(`Path must be a string. Received ${JSON.stringify(d)}`)}function Dc(d){return d.split("?")[0].split("#")[0]}const Nr={toPosix:d=>function WH(d,u,c){return d.replace(new RegExp(function $H(d){return d.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}(u),"g"),c)}(d,"\\","/"),isUrl(d){return/^https?:/.test(this.toPosix(d))},isDataUrl:d=>/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(d),isBlobUrl:d=>d.startsWith("blob:"),hasProtocol(d){return/^[^/:]+:/.test(this.toPosix(d))},getProtocol(d){Ti(d),d=this.toPosix(d);const u=/^file:\/\/\//.exec(d);if(u)return u[0];const c=/^[^/:]+:\/{0,2}/.exec(d);return c?c[0]:""},toAbsolute(d,u,c){if(Ti(d),this.isDataUrl(d)||this.isBlobUrl(d))return d;const f=Dc(this.toPosix(u??Re.ADAPTER.getBaseUrl())),p=Dc(this.toPosix(c??this.rootname(f)));return(d=this.toPosix(d)).startsWith("/")?Nr.join(p,d.slice(1)):this.isAbsolute(d)?d:this.join(f,d)},normalize(d){if(Ti(d),0===d.length)return".";if(this.isDataUrl(d)||this.isBlobUrl(d))return d;let u="";const c=(d=this.toPosix(d)).startsWith("/");this.hasProtocol(d)&&(u=this.rootname(d),d=d.slice(u.length));const f=d.endsWith("/");return d=function XH(d,u){let c="",f=0,p=-1,g=0,_=-1;for(let y=0;y<=d.length;++y){if(y<d.length)_=d.charCodeAt(y);else{if(47===_)break;_=47}if(47===_){if(p!==y-1&&1!==g)if(p!==y-1&&2===g){if(c.length<2||2!==f||46!==c.charCodeAt(c.length-1)||46!==c.charCodeAt(c.length-2))if(c.length>2){const v=c.lastIndexOf("/");if(v!==c.length-1){-1===v?(c="",f=0):(c=c.slice(0,v),f=c.length-1-c.lastIndexOf("/")),p=y,g=0;continue}}else if(2===c.length||1===c.length){c="",f=0,p=y,g=0;continue}u&&(c.length>0?c+="/..":c="..",f=2)}else c.length>0?c+=`/${d.slice(p+1,y)}`:c=d.slice(p+1,y),f=y-p-1;p=y,g=0}else 46===_&&-1!==g?++g:g=-1}return c}(d,!1),d.length>0&&f&&(d+="/"),c?`/${d}`:u+d},isAbsolute(d){return Ti(d),d=this.toPosix(d),!!this.hasProtocol(d)||d.startsWith("/")},join(...d){if(0===d.length)return".";let u;for(let c=0;c<d.length;++c){const f=d[c];Ti(f),f.length>0&&(void 0===u?u=f:this.extname(d[c-1]??"")?u+=`/../${f}`:u+=`/${f}`)}return void 0===u?".":this.normalize(u)},dirname(d){if(Ti(d),0===d.length)return".";let u=(d=this.toPosix(d)).charCodeAt(0);const c=47===u;let f=-1,p=!0;const g=this.getProtocol(d),_=d;for(let y=(d=d.slice(g.length)).length-1;y>=1;--y)if(u=d.charCodeAt(y),47===u){if(!p){f=y;break}}else p=!1;return-1===f?c?"/":this.isUrl(_)?g+d:g:c&&1===f?"//":g+d.slice(0,f)},rootname(d){Ti(d);let u="";if(u=(d=this.toPosix(d)).startsWith("/")?"/":this.getProtocol(d),this.isUrl(d)){const c=d.indexOf("/",u.length);u=-1!==c?d.slice(0,c):d,u.endsWith("/")||(u+="/")}return u},basename(d,u){Ti(d),u&&Ti(u),d=Dc(this.toPosix(d));let g,c=0,f=-1,p=!0;if(void 0!==u&&u.length>0&&u.length<=d.length){if(u.length===d.length&&u===d)return"";let _=u.length-1,y=-1;for(g=d.length-1;g>=0;--g){const v=d.charCodeAt(g);if(47===v){if(!p){c=g+1;break}}else-1===y&&(p=!1,y=g+1),_>=0&&(v===u.charCodeAt(_)?-1==--_&&(f=g):(_=-1,f=y))}return c===f?f=y:-1===f&&(f=d.length),d.slice(c,f)}for(g=d.length-1;g>=0;--g)if(47===d.charCodeAt(g)){if(!p){c=g+1;break}}else-1===f&&(p=!1,f=g+1);return-1===f?"":d.slice(c,f)},extname(d){Ti(d);let u=-1,c=0,f=-1,p=!0,g=0;for(let _=(d=Dc(this.toPosix(d))).length-1;_>=0;--_){const y=d.charCodeAt(_);if(47!==y)-1===f&&(p=!1,f=_+1),46===y?-1===u?u=_:1!==g&&(g=1):-1!==u&&(g=-1);else if(!p){c=_+1;break}}return-1===u||-1===f||0===g||1===g&&u===f-1&&u===c+1?"":d.slice(u,f)},parse(d){Ti(d);const u={root:"",dir:"",base:"",ext:"",name:""};if(0===d.length)return u;let c=(d=Dc(this.toPosix(d))).charCodeAt(0);const f=this.isAbsolute(d);let p;u.root=this.rootname(d),p=f||this.hasProtocol(d)?1:0;let _=-1,y=0,v=-1,x=!0,w=d.length-1,C=0;for(;w>=p;--w)if(c=d.charCodeAt(w),47!==c)-1===v&&(x=!1,v=w+1),46===c?-1===_?_=w:1!==C&&(C=1):-1!==_&&(C=-1);else if(!x){y=w+1;break}return-1===_||-1===v||0===C||1===C&&_===v-1&&_===y+1?-1!==v&&(u.base=u.name=d.slice(0===y&&f?1:y,v)):(0===y&&f?(u.name=d.slice(1,_),u.base=d.slice(1,v)):(u.name=d.slice(y,_),u.base=d.slice(y,v)),u.ext=d.slice(_,v)),u.dir=this.dirname(d),u},sep:"/",delimiter:":"};let Yy,Zy;function qH(){return Ky.apply(this,arguments)}function Ky(){return(Ky=Ge(function*(){return Yy??(Yy=Ge(function*(){const d=document.createElement("canvas").getContext("webgl");if(!d)return _n.UNPACK;const u=yield new Promise(g=>{const _=document.createElement("video");_.onloadeddata=()=>g(_),_.onerror=()=>g(null),_.autoplay=!1,_.crossOrigin="anonymous",_.preload="auto",_.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",_.load()});if(!u)return _n.UNPACK;const c=d.createTexture();d.bindTexture(d.TEXTURE_2D,c);const f=d.createFramebuffer();d.bindFramebuffer(d.FRAMEBUFFER,f),d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,c,0),d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),d.pixelStorei(d.UNPACK_COLORSPACE_CONVERSION_WEBGL,d.NONE),d.texImage2D(d.TEXTURE_2D,0,d.RGBA,d.RGBA,d.UNSIGNED_BYTE,u);const p=new Uint8Array(4);return d.readPixels(0,0,1,1,d.RGBA,d.UNSIGNED_BYTE,p),d.deleteFramebuffer(f),d.deleteTexture(c),d.getExtension("WEBGL_lose_context")?.loseContext(),p[0]<=p[3]?_n.PMA:_n.UNPACK})()),Yy})).apply(this,arguments)}var KH={grad:.9,turn:360,rad:360/(2*Math.PI)},Ds=function(d){return"string"==typeof d?d.length>0:"number"==typeof d},kr=function(d,u,c){return void 0===u&&(u=0),void 0===c&&(c=Math.pow(10,u)),Math.round(c*d)/c+0},ti=function(d,u,c){return void 0===u&&(u=0),void 0===c&&(c=1),d>c?c:d>u?d:u},MD=function(d){return(d=isFinite(d)?d%360:0)>0?d:d+360},PD=function(d){return{r:ti(d.r,0,255),g:ti(d.g,0,255),b:ti(d.b,0,255),a:ti(d.a)}},Qy=function(d){return{r:kr(d.r),g:kr(d.g),b:kr(d.b),a:kr(d.a,3)}},ZH=/^#([0-9a-f]{3,8})$/i,mf=function(d){var u=d.toString(16);return u.length<2?"0"+u:u},RD=function(d){var u=d.r,c=d.g,f=d.b,p=d.a,g=Math.max(u,c,f),_=g-Math.min(u,c,f),y=_?g===u?(c-f)/_:g===c?2+(f-u)/_:4+(u-c)/_:0;return{h:60*(y<0?y+6:y),s:g?_/g*100:0,v:g/255*100,a:p}},FD=function(d){var u=d.h,c=d.s,f=d.v,p=d.a;u=u/360*6,c/=100,f/=100;var g=Math.floor(u),_=f*(1-c),y=f*(1-(u-g)*c),v=f*(1-(1-u+g)*c),x=g%6;return{r:255*[f,y,_,_,v,f][x],g:255*[v,f,f,y,_,_][x],b:255*[_,_,v,f,f,y][x],a:p}},OD=function(d){return{h:MD(d.h),s:ti(d.s,0,100),l:ti(d.l,0,100),a:ti(d.a)}},ND=function(d){return{h:kr(d.h),s:kr(d.s),l:kr(d.l),a:kr(d.a,3)}},LD=function(d){return FD((c=(u=d).s,{h:u.h,s:(c*=((f=u.l)<50?f:100-f)/100)>0?2*c/(f+c)*100:0,v:f+c,a:u.a}));var u,c,f},Ac=function(d){return{h:(u=RD(d)).h,s:(p=(200-(c=u.s))*(f=u.v)/100)>0&&p<200?c*f/100/(p<=100?p:200-p)*100:0,l:p/2,a:u.a};var u,c,f,p},QH=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,JH=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,ej=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,tj=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Jy={string:[[function(d){var u=ZH.exec(d);return u?(d=u[1]).length<=4?{r:parseInt(d[0]+d[0],16),g:parseInt(d[1]+d[1],16),b:parseInt(d[2]+d[2],16),a:4===d.length?kr(parseInt(d[3]+d[3],16)/255,2):1}:6===d.length||8===d.length?{r:parseInt(d.substr(0,2),16),g:parseInt(d.substr(2,2),16),b:parseInt(d.substr(4,2),16),a:8===d.length?kr(parseInt(d.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(d){var u=ej.exec(d)||tj.exec(d);return u?u[2]!==u[4]||u[4]!==u[6]?null:PD({r:Number(u[1])/(u[2]?100/255:1),g:Number(u[3])/(u[4]?100/255:1),b:Number(u[5])/(u[6]?100/255:1),a:void 0===u[7]?1:Number(u[7])/(u[8]?100:1)}):null},"rgb"],[function(d){var u=QH.exec(d)||JH.exec(d);if(!u)return null;var c,f,p=OD({h:(c=u[1],f=u[2],void 0===f&&(f="deg"),Number(c)*(KH[f]||1)),s:Number(u[3]),l:Number(u[4]),a:void 0===u[5]?1:Number(u[5])/(u[6]?100:1)});return LD(p)},"hsl"]],object:[[function(d){var u=d.r,c=d.g,f=d.b,p=d.a,g=void 0===p?1:p;return Ds(u)&&Ds(c)&&Ds(f)?PD({r:Number(u),g:Number(c),b:Number(f),a:Number(g)}):null},"rgb"],[function(d){var u=d.h,c=d.s,f=d.l,p=d.a,g=void 0===p?1:p;if(!Ds(u)||!Ds(c)||!Ds(f))return null;var _=OD({h:Number(u),s:Number(c),l:Number(f),a:Number(g)});return LD(_)},"hsl"],[function(d){var u=d.h,c=d.s,f=d.v,p=d.a,g=void 0===p?1:p;if(!Ds(u)||!Ds(c)||!Ds(f))return null;var y,_=(y={h:Number(u),s:Number(c),v:Number(f),a:Number(g)},{h:MD(y.h),s:ti(y.s,0,100),v:ti(y.v,0,100),a:ti(y.a)});return FD(_)},"hsv"]]},kD=function(d,u){for(var c=0;c<u.length;c++){var f=u[c][0](d);if(f)return[f,u[c][1]]}return[null,void 0]},ev=function(d,u){var c=Ac(d);return{h:c.h,s:ti(c.s+100*u,0,100),l:c.l,a:c.a}},tv=function(d){return(299*d.r+587*d.g+114*d.b)/1e3/255},UD=function(d,u){var c=Ac(d);return{h:c.h,s:c.s,l:ti(c.l+100*u,0,100),a:c.a}},_f=function(){function d(u){this.parsed=function(d){return"string"==typeof d?kD(d.trim(),Jy.string):"object"==typeof d&&null!==d?kD(d,Jy.object):[null,void 0]}(u)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return d.prototype.isValid=function(){return null!==this.parsed},d.prototype.brightness=function(){return kr(tv(this.rgba),2)},d.prototype.isDark=function(){return tv(this.rgba)<.5},d.prototype.isLight=function(){return tv(this.rgba)>=.5},d.prototype.toHex=function(){return c=(u=Qy(this.rgba)).r,f=u.g,p=u.b,_=(g=u.a)<1?mf(kr(255*g)):"","#"+mf(c)+mf(f)+mf(p)+_;var u,c,f,p,g,_},d.prototype.toRgb=function(){return Qy(this.rgba)},d.prototype.toRgbString=function(){return c=(u=Qy(this.rgba)).r,f=u.g,p=u.b,(g=u.a)<1?"rgba("+c+", "+f+", "+p+", "+g+")":"rgb("+c+", "+f+", "+p+")";var u,c,f,p,g},d.prototype.toHsl=function(){return ND(Ac(this.rgba))},d.prototype.toHslString=function(){return c=(u=ND(Ac(this.rgba))).h,f=u.s,p=u.l,(g=u.a)<1?"hsla("+c+", "+f+"%, "+p+"%, "+g+")":"hsl("+c+", "+f+"%, "+p+"%)";var u,c,f,p,g},d.prototype.toHsv=function(){return u=RD(this.rgba),{h:kr(u.h),s:kr(u.s),v:kr(u.v),a:kr(u.a,3)};var u},d.prototype.invert=function(){return Yi({r:255-(u=this.rgba).r,g:255-u.g,b:255-u.b,a:u.a});var u},d.prototype.saturate=function(u){return void 0===u&&(u=.1),Yi(ev(this.rgba,u))},d.prototype.desaturate=function(u){return void 0===u&&(u=.1),Yi(ev(this.rgba,-u))},d.prototype.grayscale=function(){return Yi(ev(this.rgba,-1))},d.prototype.lighten=function(u){return void 0===u&&(u=.1),Yi(UD(this.rgba,u))},d.prototype.darken=function(u){return void 0===u&&(u=.1),Yi(UD(this.rgba,-u))},d.prototype.rotate=function(u){return void 0===u&&(u=15),this.hue(this.hue()+u)},d.prototype.alpha=function(u){return"number"==typeof u?Yi({r:(c=this.rgba).r,g:c.g,b:c.b,a:u}):kr(this.rgba.a,3);var c},d.prototype.hue=function(u){var c=Ac(this.rgba);return"number"==typeof u?Yi({h:u,s:c.s,l:c.l,a:c.a}):kr(c.h)},d.prototype.isEqual=function(u){return this.toHex()===Yi(u).toHex()},d}(),Yi=function(d){return d instanceof _f?d:new _f(d)},VD=[];[function nj(d,u){var c={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},f={};for(var p in c)f[c[p]]=p;var g={};d.prototype.toName=function(_){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var y,v,x=f[this.toHex()];if(x)return x;if(_?.closest){var w=this.toRgb(),C=1/0,E="black";if(!g.length)for(var T in c)g[T]=new d(c[T]).toRgb();for(var D in c){var S=(y=w,v=g[D],Math.pow(y.r-v.r,2)+Math.pow(y.g-v.g,2)+Math.pow(y.b-v.b,2));S<C&&(C=S,E=D)}return E}},u.string.push([function(_){var y=_.toLowerCase(),v="transparent"===y?"#0000":c[y];return v?new d(v).toRgb():null},"name"])}].forEach(function(u){VD.indexOf(u)<0&&(u(_f,Jy),VD.push(u))});const Fl=class jp{constructor(u=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=u}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(u){return this.value=u,this}set value(u){if(u instanceof jp)this._value=this.cloneSource(u._value),this._int=u._int,this._components.set(u._components);else{if(null===u)throw new Error("Cannot set PIXI.Color#value to null");(null===this._value||!this.isSourceEqual(this._value,u))&&(this.normalize(u),this._value=this.cloneSource(u))}}get value(){return this._value}cloneSource(u){return"string"==typeof u||"number"==typeof u||u instanceof Number||null===u?u:Array.isArray(u)||ArrayBuffer.isView(u)?u.slice(0):"object"==typeof u&&null!==u?{...u}:u}isSourceEqual(u,c){const f=typeof u;if(f!==typeof c)return!1;if("number"===f||"string"===f||u instanceof Number)return u===c;if(Array.isArray(u)&&Array.isArray(c)||ArrayBuffer.isView(u)&&ArrayBuffer.isView(c))return u.length===c.length&&u.every((p,g)=>p===c[g]);if(null!==u&&null!==c){const p=Object.keys(u),g=Object.keys(c);return p.length===g.length&&p.every(_=>u[_]===c[_])}return u===c}toRgba(){const[u,c,f,p]=this._components;return{r:u,g:c,b:f,a:p}}toRgb(){const[u,c,f]=this._components;return{r:u,g:c,b:f}}toRgbaString(){const[u,c,f]=this.toUint8RgbArray();return`rgba(${u},${c},${f},${this.alpha})`}toUint8RgbArray(u){const[c,f,p]=this._components;return(u=u??[])[0]=Math.round(255*c),u[1]=Math.round(255*f),u[2]=Math.round(255*p),u}toRgbArray(u){u=u??[];const[c,f,p]=this._components;return u[0]=c,u[1]=f,u[2]=p,u}toNumber(){return this._int}toLittleEndianNumber(){const u=this._int;return(u>>16)+(65280&u)+((255&u)<<16)}multiply(u){const[c,f,p,g]=jp.temp.setValue(u)._components;return this._components[0]*=c,this._components[1]*=f,this._components[2]*=p,this._components[3]*=g,this.refreshInt(),this._value=null,this}premultiply(u,c=!0){return c&&(this._components[0]*=u,this._components[1]*=u,this._components[2]*=u),this._components[3]=u,this.refreshInt(),this._value=null,this}toPremultiplied(u,c=!0){if(1===u)return(255<<24)+this._int;if(0===u)return c?0:this._int;let f=this._int>>16&255,p=this._int>>8&255,g=255&this._int;return c&&(f=f*u+.5|0,p=p*u+.5|0,g=g*u+.5|0),(255*u<<24)+(f<<16)+(p<<8)+g}toHex(){const u=this._int.toString(16);return`#${"000000".substring(0,6-u.length)+u}`}toHexa(){const u=Math.round(255*this._components[3]).toString(16);return this.toHex()+"00".substring(0,2-u.length)+u}setAlpha(u){return this._components[3]=this._clamp(u),this}round(u){const[c,f,p]=this._components;return this._components[0]=Math.round(c*u)/u,this._components[1]=Math.round(f*u)/u,this._components[2]=Math.round(p*u)/u,this.refreshInt(),this._value=null,this}toArray(u){u=u??[];const[c,f,p,g]=this._components;return u[0]=c,u[1]=f,u[2]=p,u[3]=g,u}normalize(u){let c,f,p,g;if(("number"==typeof u||u instanceof Number)&&u>=0&&u<=16777215)c=(u>>16&255)/255,f=(u>>8&255)/255,p=(255&u)/255,g=1;else if((Array.isArray(u)||u instanceof Float32Array)&&u.length>=3&&u.length<=4)u=this._clamp(u),[c,f,p,g=1]=u;else if((u instanceof Uint8Array||u instanceof Uint8ClampedArray)&&u.length>=3&&u.length<=4)u=this._clamp(u,0,255),[c,f,p,g=255]=u,c/=255,f/=255,p/=255,g/=255;else if("string"==typeof u||"object"==typeof u){if("string"==typeof u){const y=jp.HEX_PATTERN.exec(u);y&&(u=`#${y[2]}`)}const _=Yi(u);_.isValid()&&(({r:c,g:f,b:p,a:g}=_.rgba),c/=255,f/=255,p/=255)}if(void 0===c)throw new Error(`Unable to convert color ${u}`);this._components[0]=c,this._components[1]=f,this._components[2]=p,this._components[3]=g,this.refreshInt()}refreshInt(){this._clamp(this._components);const[u,c,f]=this._components;this._int=(255*u<<16)+(255*c<<8)+(255*f|0)}_clamp(u,c=0,f=1){return"number"==typeof u?Math.min(Math.max(u,c),f):(u.forEach((p,g)=>{u[g]=Math.min(Math.max(p,c),f)}),u)}};Fl.shared=new Fl,Fl.temp=new Fl,Fl.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let Ut=Fl;function yf(d,u=[]){return lt("7.2.0","utils.hex2rgb is deprecated, use Color#toRgbArray instead"),Ut.shared.setValue(d).toRgbArray(u)}function vf(d){return lt("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),Ut.shared.setValue(d).toNumber()}const HD=function sj(){const d=[],u=[];for(let f=0;f<32;f++)d[f]=f,u[f]=f;d[at.NORMAL_NPM]=at.NORMAL,d[at.ADD_NPM]=at.ADD,d[at.SCREEN_NPM]=at.SCREEN,u[at.NORMAL]=at.NORMAL_NPM,u[at.ADD]=at.ADD_NPM,u[at.SCREEN]=at.SCREEN_NPM;const c=[];return c.push(u),c.push(d),c}();function jD(d,u){return HD[u?1:0][d]}function rv(d){if(4===d.BYTES_PER_ELEMENT)return d instanceof Float32Array?"Float32Array":d instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===d.BYTES_PER_ELEMENT){if(d instanceof Uint16Array)return"Uint16Array"}else if(1===d.BYTES_PER_ELEMENT&&d instanceof Uint8Array)return"Uint8Array";return null}function xf(d){return d+=0===d?1:0,--d,d|=d>>>1,d|=d>>>2,d|=d>>>4,d|=d>>>8,1+(d|=d>>>16)}function GD(d){return!(d&d-1||!d)}function zD(d){let u=(d>65535?1:0)<<4,c=((d>>>=u)>255?1:0)<<3;return u|=c,c=((d>>>=c)>15?1:0)<<2,u|=c,c=((d>>>=c)>3?1:0)<<1,u|=c,u|(d>>>=c)>>1}function Ol(d,u,c){const f=d.length;let p;if(u>=f||0===c)return;const g=f-(c=u+c>f?f-u:c);for(p=u;p<g;++p)d[p]=d[p+c];d.length=g}function oo(d){return 0===d?0:d<0?-1:1}Float32Array,Uint32Array,Int32Array,Uint8Array;let uj=0;function Qo(){return++uj}const nv=class{constructor(d,u,c,f){this.left=d,this.top=u,this.right=c,this.bottom=f}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};nv.EMPTY=new nv(0,0,0,0);let $D=nv;const WD={},yn=Object.create(null),ri=Object.create(null);class cj{constructor(u,c,f){this._canvas=Re.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=f||Re.RESOLUTION,this.resize(u,c)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(u,c){this._checkDestroyed(),this._canvas.width=Math.round(u*this.resolution),this._canvas.height=Math.round(c*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(u){this._checkDestroyed(),this._canvas.width=Math.round(u)}get height(){return this._checkDestroyed(),this._canvas.height}set height(u){this._checkDestroyed(),this._canvas.height=Math.round(u)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(null===this._canvas)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function XD(d,u,c){for(let f=0,p=4*c*u;f<u;++f,p+=4)if(0!==d[p+3])return!1;return!0}function qD(d,u,c,f,p){const g=4*u;for(let _=f,y=f*g+4*c;_<=p;++_,y+=g)if(0!==d[y+3])return!1;return!0}function As(d,u=1){const c=Re.RETINA_PREFIX?.exec(d);return c?parseFloat(c[1]):u}var Pe=(d=>(d.Renderer="renderer",d.Application="application",d.RendererSystem="renderer-webgl-system",d.RendererPlugin="renderer-webgl-plugin",d.CanvasRendererSystem="renderer-canvas-system",d.CanvasRendererPlugin="renderer-canvas-plugin",d.Asset="asset",d.LoadParser="load-parser",d.ResolveParser="resolve-parser",d.CacheParser="cache-parser",d.DetectionParser="detection-parser",d))(Pe||{});const iv=d=>{if("function"==typeof d||"object"==typeof d&&d.extension){if(!d.extension)throw new Error("Extension class must have an extension object");d={..."object"!=typeof d.extension?{type:d.extension}:d.extension,ref:d}}if("object"!=typeof d)throw new Error("Invalid extension type");return"string"==typeof(d={...d}).type&&(d.type=[d.type]),d},YD=(d,u)=>iv(d).priority??u,We={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...d){return d.map(iv).forEach(u=>{u.type.forEach(c=>this._removeHandlers[c]?.(u))}),this},add(...d){return d.map(iv).forEach(u=>{u.type.forEach(c=>{const f=this._addHandlers,p=this._queue;f[c]?f[c](u):(p[c]=p[c]||[],p[c].push(u))})}),this},handle(d,u,c){const f=this._addHandlers,p=this._removeHandlers;if(f[d]||p[d])throw new Error(`Extension type ${d} already has a handler`);f[d]=u,p[d]=c;const g=this._queue;return g[d]&&(g[d].forEach(_=>u(_)),delete g[d]),this},handleByMap(d,u){return this.handle(d,c=>{u[c.name]=c.ref},c=>{delete u[c.name]})},handleByList(d,u,c=-1){return this.handle(d,f=>{u.includes(f.ref)||(u.push(f.ref),u.sort((p,g)=>YD(g,c)-YD(p,c)))},f=>{const p=u.indexOf(f.ref);-1!==p&&u.splice(p,1)})}};class sv{constructor(u){this.rawBinaryData="number"==typeof u?new ArrayBuffer(u):u instanceof Uint8Array?u.buffer:u,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(u){return this[`${u}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(u){switch(u){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${u} isn't a valid view type`)}}}const pj=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function gj(d){let u="";for(let c=0;c<d;++c)c>0&&(u+="\nelse "),c<d-1&&(u+=`if(test == ${c}.0){}`);return u}class Ki{constructor(){this.data=0,this.blendMode=at.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(1&this.data)}set blend(u){!!(1&this.data)!==u&&(this.data^=1)}get offsets(){return!!(2&this.data)}set offsets(u){!!(2&this.data)!==u&&(this.data^=2)}get culling(){return!!(4&this.data)}set culling(u){!!(4&this.data)!==u&&(this.data^=4)}get depthTest(){return!!(8&this.data)}set depthTest(u){!!(8&this.data)!==u&&(this.data^=8)}get depthMask(){return!!(32&this.data)}set depthMask(u){!!(32&this.data)!==u&&(this.data^=32)}get clockwiseFrontFace(){return!!(16&this.data)}set clockwiseFrontFace(u){!!(16&this.data)!==u&&(this.data^=16)}get blendMode(){return this._blendMode}set blendMode(u){this.blend=u!==at.NONE,this._blendMode=u}get polygonOffset(){return this._polygonOffset}set polygonOffset(u){this.offsets=!!u,this._polygonOffset=u}static for2d(){const u=new Ki;return u.depthTest=!1,u.blend=!0,u}}Ki.prototype.toString=function(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`};const dv=[];function KD(d,u){if(!d)return null;let c="";if("string"==typeof d){const f=/\.(\w{3,4})(?:$|\?|#)/i.exec(d);f&&(c=f[1].toLowerCase())}for(let f=dv.length-1;f>=0;--f){const p=dv[f];if(p.test&&p.test(d,c))return new p(d,u)}throw new Error("Unrecognized source type to auto-detect Resource")}class Si{constructor(u){this.items=[],this._name=u,this._aliasCount=0}emit(u,c,f,p,g,_,y,v){if(arguments.length>8)throw new Error("max arguments reached");const{name:x,items:w}=this;this._aliasCount++;for(let C=0,E=w.length;C<E;C++)w[C][x](u,c,f,p,g,_,y,v);return w===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(u){return u[this._name]&&(this.ensureNonAliasedItems(),this.remove(u),this.items.push(u)),this}remove(u){const c=this.items.indexOf(u);return-1!==c&&(this.ensureNonAliasedItems(),this.items.splice(c,1)),this}contains(u){return this.items.includes(u)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return 0===this.items.length}get name(){return this._name}}Object.defineProperties(Si.prototype,{dispatch:{value:Si.prototype.emit},run:{value:Si.prototype.emit}});class Ic{constructor(u=0,c=0){this._width=u,this._height=c,this.destroyed=!1,this.internal=!1,this.onResize=new Si("setRealSize"),this.onUpdate=new Si("update"),this.onError=new Si("onError")}bind(u){this.onResize.add(u),this.onUpdate.add(u),this.onError.add(u),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(u){this.onResize.remove(u),this.onUpdate.remove(u),this.onError.remove(u)}resize(u,c){(u!==this._width||c!==this._height)&&(this._width=u,this._height=c,this.onResize.emit(u,c))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(u,c,f){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(u,c){return!1}}class bf extends Ic{constructor(u,c){const{width:f,height:p}=c||{};if(!f||!p)throw new Error("BufferResource width or height invalid");super(f,p),this.data=u,this.unpackAlignment=c.unpackAlignment??4}upload(u,c,f){const p=u.gl;p.pixelStorei(p.UNPACK_ALIGNMENT,this.unpackAlignment),p.pixelStorei(p.UNPACK_PREMULTIPLY_ALPHA_WEBGL,c.alphaMode===_n.UNPACK);const g=c.realWidth,_=c.realHeight;return f.width===g&&f.height===_?p.texSubImage2D(c.target,0,0,0,g,_,c.format,f.type,this.data):(f.width=g,f.height=_,p.texImage2D(c.target,0,f.internalFormat,g,_,0,c.format,f.type,this.data)),!0}dispose(){this.data=null}static test(u){return null===u||u instanceof Int8Array||u instanceof Uint8Array||u instanceof Uint8ClampedArray||u instanceof Int16Array||u instanceof Uint16Array||u instanceof Int32Array||u instanceof Uint32Array||u instanceof Float32Array}}const _j={scaleMode:$i.NEAREST,alphaMode:_n.NPM},fv=class nu extends Sc{constructor(u=null,c=null){super(),c=Object.assign({},nu.defaultOptions,c);const{alphaMode:f,mipmap:p,anisotropicLevel:g,scaleMode:_,width:y,height:v,wrapMode:x,format:w,type:C,target:E,resolution:T,resourceOptions:D}=c;u&&!(u instanceof Ic)&&((u=KD(u,D)).internal=!0),this.resolution=T||Re.RESOLUTION,this.width=Math.round((y||0)*this.resolution)/this.resolution,this.height=Math.round((v||0)*this.resolution)/this.resolution,this._mipmap=p,this.anisotropicLevel=g,this._wrapMode=x,this._scaleMode=_,this.format=w,this.type=C,this.target=E,this.alphaMode=f,this.uid=Qo(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=y>0&&v>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(u)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(u){this._mipmap!==u&&(this._mipmap=u,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(u){this._scaleMode!==u&&(this._scaleMode=u,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(u){this._wrapMode!==u&&(this._wrapMode=u,this.dirtyStyleId++)}setStyle(u,c){let f;return void 0!==u&&u!==this.scaleMode&&(this.scaleMode=u,f=!0),void 0!==c&&c!==this.mipmap&&(this.mipmap=c,f=!0),f&&this.dirtyStyleId++,this}setSize(u,c,f){return this.setRealSize(u*(f=f||this.resolution),c*f,f)}setRealSize(u,c,f){return this.resolution=f||this.resolution,this.width=Math.round(u)/this.resolution,this.height=Math.round(c)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=GD(this.realWidth)&&GD(this.realHeight)}setResolution(u){const c=this.resolution;return c===u||(this.resolution=u,this.valid&&(this.width=Math.round(this.width*c)/u,this.height=Math.round(this.height*c)/u,this.emit("update",this)),this._refreshPOT()),this}setResource(u){if(this.resource===u)return this;if(this.resource)throw new Error("Resource can be set only once");return u.bind(this),this.resource=u,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(u){this.emit("error",this,u)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete ri[this.cacheId],delete yn[this.cacheId],this.cacheId=null),this.valid=!1,this.dispose(),nu.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(u,c,f=Re.STRICT_TEXTURE_CACHE){const p="string"==typeof u;let g=null;p?g=u:(u._pixiId||(u._pixiId=`${c?.pixiIdPrefix||"pixiid"}_${Qo()}`),g=u._pixiId);let _=ri[g];if(p&&f&&!_)throw new Error(`The cacheId "${g}" does not exist in BaseTextureCache.`);return _||(_=new nu(u,c),_.cacheId=g,nu.addToCache(_,g)),_}static fromBuffer(u,c,f,p){u=u||new Float32Array(c*f*4);const g=new bf(u,{width:c,height:f,...p?.resourceOptions});let _,y;return u instanceof Float32Array?(_=be.RGBA,y=Ze.FLOAT):u instanceof Int32Array?(_=be.RGBA_INTEGER,y=Ze.INT):u instanceof Uint32Array?(_=be.RGBA_INTEGER,y=Ze.UNSIGNED_INT):u instanceof Int16Array?(_=be.RGBA_INTEGER,y=Ze.SHORT):u instanceof Uint16Array?(_=be.RGBA_INTEGER,y=Ze.UNSIGNED_SHORT):u instanceof Int8Array?(_=be.RGBA,y=Ze.BYTE):(_=be.RGBA,y=Ze.UNSIGNED_BYTE),g.internal=!0,new nu(g,Object.assign({},_j,{type:y,format:_},p))}static addToCache(u,c){c&&(u.textureCacheIds.includes(c)||u.textureCacheIds.push(c),ri[c]&&ri[c]!==u&&console.warn(`BaseTexture added to the cache with an id [${c}] that already had an entry`),ri[c]=u)}static removeFromCache(u){if("string"==typeof u){const c=ri[u];if(c){const f=c.textureCacheIds.indexOf(u);return f>-1&&c.textureCacheIds.splice(f,1),delete ri[u],c}}else if(u?.textureCacheIds){for(let c=0;c<u.textureCacheIds.length;++c)delete ri[u.textureCacheIds[c]];return u.textureCacheIds.length=0,u}return null}};fv.defaultOptions={mipmap:Wi.POW2,anisotropicLevel:0,scaleMode:$i.LINEAR,wrapMode:so.CLAMP,alphaMode:_n.UNPACK,target:Pl.TEXTURE_2D,format:be.RGBA,type:Ze.UNSIGNED_BYTE},fv._globalBatch=0;let vt=fv;class pv{constructor(){this.texArray=null,this.blend=0,this.type=zi.TRIANGLES,this.start=0,this.size=0,this.data=null}}let yj=0;class _r{constructor(u,c=!0,f=!1){this.data=u||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=f,this.static=c,this.id=yj++,this.disposeRunner=new Si("disposeBuffer")}update(u){u instanceof Array&&(u=new Float32Array(u)),this.data=u||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(u){this.type=u?qi.ELEMENT_ARRAY_BUFFER:qi.ARRAY_BUFFER}get index(){return this.type===qi.ELEMENT_ARRAY_BUFFER}static from(u){return u instanceof Array&&(u=new Float32Array(u)),new _r(u)}}class wf{constructor(u,c=0,f=!1,p=Ze.FLOAT,g,_,y,v=1){this.buffer=u,this.size=c,this.normalized=f,this.type=p,this.stride=g,this.start=_,this.instance=y,this.divisor=v}destroy(){this.buffer=null}static from(u,c,f,p,g){return new wf(u,c,f,p,g)}}const vj={Float32Array,Uint32Array,Int32Array,Uint8Array},ZD={5126:4,5123:2,5121:1};let bj=0;const wj={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class ao{constructor(u=[],c={}){this.buffers=u,this.indexBuffer=null,this.attributes=c,this.glVertexArrayObjects={},this.id=bj++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Si("disposeGeometry"),this.refCount=0}addAttribute(u,c,f=0,p=!1,g,_,y,v=!1){if(!c)throw new Error("You must pass a buffer when creating an attribute");c instanceof _r||(c instanceof Array&&(c=new Float32Array(c)),c=new _r(c));const x=u.split("|");if(x.length>1){for(let C=0;C<x.length;C++)this.addAttribute(x[C],c,f,p,g);return this}let w=this.buffers.indexOf(c);return-1===w&&(this.buffers.push(c),w=this.buffers.length-1),this.attributes[u]=new wf(w,f,p,g,_,y,v),this.instanced=this.instanced||v,this}getAttribute(u){return this.attributes[u]}getBuffer(u){return this.buffers[this.getAttribute(u).buffer]}addIndex(u){return u instanceof _r||(u instanceof Array&&(u=new Uint16Array(u)),u=new _r(u)),u.type=qi.ELEMENT_ARRAY_BUFFER,this.indexBuffer=u,this.buffers.includes(u)||this.buffers.push(u),this}getIndex(){return this.indexBuffer}interleave(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;const u=[],c=[],f=new _r;let p;for(p in this.attributes){const g=this.attributes[p];u.push(this.buffers[g.buffer].data),c.push(g.size*ZD[g.type]/4),g.buffer=0}for(f.data=function xj(d,u){let c=0,f=0;const p={};for(let v=0;v<d.length;v++)f+=u[v],c+=d[v].length;const g=new ArrayBuffer(4*c);let _=null,y=0;for(let v=0;v<d.length;v++){const x=u[v],w=d[v],C=rv(w);p[C]||(p[C]=new vj[C](g)),_=p[C];for(let E=0;E<w.length;E++)_[(E/x|0)*f+y+E%x]=w[E];y+=x}return new Float32Array(g)}(u,c),p=0;p<this.buffers.length;p++)this.buffers[p]!==this.indexBuffer&&this.buffers[p].destroy();return this.buffers=[f],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const u in this.attributes){const c=this.attributes[u];return this.buffers[c.buffer].data.length/(c.stride/4||c.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const u=new ao;for(let c=0;c<this.buffers.length;c++)u.buffers[c]=new _r(this.buffers[c].data.slice(0));for(const c in this.attributes){const f=this.attributes[c];u.attributes[c]=new wf(f.buffer,f.size,f.normalized,f.type,f.stride,f.start,f.instance)}return this.indexBuffer&&(u.indexBuffer=u.buffers[this.buffers.indexOf(this.indexBuffer)],u.indexBuffer.type=qi.ELEMENT_ARRAY_BUFFER),u}static merge(u){const c=new ao,f=[],p=[],g=[];let _;for(let y=0;y<u.length;y++){_=u[y];for(let v=0;v<_.buffers.length;v++)p[v]=p[v]||0,p[v]+=_.buffers[v].data.length,g[v]=0}for(let y=0;y<_.buffers.length;y++)f[y]=new(wj[rv(_.buffers[y].data)])(p[y]),c.buffers[y]=new _r(f[y]);for(let y=0;y<u.length;y++){_=u[y];for(let v=0;v<_.buffers.length;v++)f[v].set(_.buffers[v].data,g[v]),g[v]+=_.buffers[v].data.length}if(c.attributes=_.attributes,_.indexBuffer){c.indexBuffer=c.buffers[_.buffers.indexOf(_.indexBuffer)],c.indexBuffer.type=qi.ELEMENT_ARRAY_BUFFER;let y=0,v=0,x=0,w=0;for(let C=0;C<_.buffers.length;C++)if(_.buffers[C]!==_.indexBuffer){w=C;break}for(const C in _.attributes){const E=_.attributes[C];(0|E.buffer)===w&&(v+=E.size*ZD[E.type]/4)}for(let C=0;C<u.length;C++){const E=u[C].indexBuffer.data;for(let T=0;T<E.length;T++)c.indexBuffer.data[T+x]+=y;y+=u[C].buffers[w].data.length/v,x+=E.length}}return c}}class QD extends ao{constructor(u=!1){super(),this._buffer=new _r(null,u,!1),this._indexBuffer=new _r(null,u,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,Ze.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,Ze.FLOAT).addAttribute("aColor",this._buffer,4,!0,Ze.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,Ze.FLOAT).addIndex(this._indexBuffer)}}const Cf=2*Math.PI,Cj=180/Math.PI,Mc=Math.PI/180;var Hr=(d=>(d[d.POLY=0]="POLY",d[d.RECT=1]="RECT",d[d.CIRC=2]="CIRC",d[d.ELIP=3]="ELIP",d[d.RREC=4]="RREC",d))(Hr||{});class xt{constructor(u=0,c=0){this.x=0,this.y=0,this.x=u,this.y=c}clone(){return new xt(this.x,this.y)}copyFrom(u){return this.set(u.x,u.y),this}copyTo(u){return u.set(this.x,this.y),u}equals(u){return u.x===this.x&&u.y===this.y}set(u=0,c=u){return this.x=u,this.y=c,this}}xt.prototype.toString=function(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`};const Ef=[new xt,new xt,new xt,new xt];class wt{constructor(u=0,c=0,f=0,p=0){this.x=Number(u),this.y=Number(c),this.width=Number(f),this.height=Number(p),this.type=Hr.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new wt(0,0,0,0)}clone(){return new wt(this.x,this.y,this.width,this.height)}copyFrom(u){return this.x=u.x,this.y=u.y,this.width=u.width,this.height=u.height,this}copyTo(u){return u.x=this.x,u.y=this.y,u.width=this.width,u.height=this.height,u}contains(u,c){return!(this.width<=0||this.height<=0)&&u>=this.x&&u<this.x+this.width&&c>=this.y&&c<this.y+this.height}intersects(u,c){if(!c)return!((this.right>u.right?u.right:this.right)<=(this.x<u.x?u.x:this.x))&&(this.bottom>u.bottom?u.bottom:this.bottom)>(this.y<u.y?u.y:this.y);const f=this.left,p=this.right,g=this.top,_=this.bottom;if(p<=f||_<=g)return!1;const y=Ef[0].set(u.left,u.top),v=Ef[1].set(u.left,u.bottom),x=Ef[2].set(u.right,u.top),w=Ef[3].set(u.right,u.bottom);if(x.x<=y.x||v.y<=y.y)return!1;const C=Math.sign(c.a*c.d-c.b*c.c);if(0===C||(c.apply(y,y),c.apply(v,v),c.apply(x,x),c.apply(w,w),Math.max(y.x,v.x,x.x,w.x)<=f||Math.min(y.x,v.x,x.x,w.x)>=p||Math.max(y.y,v.y,x.y,w.y)<=g||Math.min(y.y,v.y,x.y,w.y)>=_))return!1;const E=C*(v.y-y.y),T=C*(y.x-v.x),D=E*f+T*g,S=E*p+T*g,A=E*f+T*_,I=E*p+T*_;if(Math.max(D,S,A,I)<=E*y.x+T*y.y||Math.min(D,S,A,I)>=E*w.x+T*w.y)return!1;const P=C*(y.y-x.y),M=C*(x.x-y.x),R=P*f+M*g,L=P*p+M*g,j=P*f+M*_,H=P*p+M*_;return!(Math.max(R,L,j,H)<=P*y.x+M*y.y||Math.min(R,L,j,H)>=P*w.x+M*w.y)}pad(u=0,c=u){return this.x-=u,this.y-=c,this.width+=2*u,this.height+=2*c,this}fit(u){const c=Math.max(this.x,u.x),f=Math.min(this.x+this.width,u.x+u.width),p=Math.max(this.y,u.y),g=Math.min(this.y+this.height,u.y+u.height);return this.x=c,this.width=Math.max(f-c,0),this.y=p,this.height=Math.max(g-p,0),this}ceil(u=1,c=.001){const f=Math.ceil((this.x+this.width-c)*u)/u,p=Math.ceil((this.y+this.height-c)*u)/u;return this.x=Math.floor((this.x+c)*u)/u,this.y=Math.floor((this.y+c)*u)/u,this.width=f-this.x,this.height=p-this.y,this}enlarge(u){const c=Math.min(this.x,u.x),f=Math.max(this.x+this.width,u.x+u.width),p=Math.min(this.y,u.y),g=Math.max(this.y+this.height,u.y+u.height);return this.x=c,this.width=f-c,this.y=p,this.height=g-p,this}}wt.prototype.toString=function(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class Tf{constructor(u=0,c=0,f=0){this.x=u,this.y=c,this.radius=f,this.type=Hr.CIRC}clone(){return new Tf(this.x,this.y,this.radius)}contains(u,c){if(this.radius<=0)return!1;let p=this.x-u,g=this.y-c;return p*=p,g*=g,p+g<=this.radius*this.radius}getBounds(){return new wt(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)}}Tf.prototype.toString=function(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`};class Sf{constructor(u=0,c=0,f=0,p=0){this.x=u,this.y=c,this.width=f,this.height=p,this.type=Hr.ELIP}clone(){return new Sf(this.x,this.y,this.width,this.height)}contains(u,c){if(this.width<=0||this.height<=0)return!1;let f=(u-this.x)/this.width,p=(c-this.y)/this.height;return f*=f,p*=p,f+p<=1}getBounds(){return new wt(this.x-this.width,this.y-this.height,this.width,this.height)}}Sf.prototype.toString=function(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class Jo{constructor(...u){let c=Array.isArray(u[0])?u[0]:u;if("number"!=typeof c[0]){const f=[];for(let p=0,g=c.length;p<g;p++)f.push(c[p].x,c[p].y);c=f}this.points=c,this.type=Hr.POLY,this.closeStroke=!0}clone(){const u=this.points.slice(),c=new Jo(u);return c.closeStroke=this.closeStroke,c}contains(u,c){let f=!1;const p=this.points.length/2;for(let g=0,_=p-1;g<p;_=g++){const y=this.points[2*g],v=this.points[2*g+1],x=this.points[2*_],w=this.points[2*_+1];v>c!=w>c&&u<(c-v)/(w-v)*(x-y)+y&&(f=!f)}return f}}Jo.prototype.toString=function(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((d,u)=>`${d}, ${u}`,"")}]`};class Df{constructor(u=0,c=0,f=0,p=0,g=20){this.x=u,this.y=c,this.width=f,this.height=p,this.radius=g,this.type=Hr.RREC}clone(){return new Df(this.x,this.y,this.width,this.height,this.radius)}contains(u,c){if(this.width<=0||this.height<=0)return!1;if(u>=this.x&&u<=this.x+this.width&&c>=this.y&&c<=this.y+this.height){const f=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(c>=this.y+f&&c<=this.y+this.height-f||u>=this.x+f&&u<=this.x+this.width-f)return!0;let p=u-(this.x+f),g=c-(this.y+f);const _=f*f;if(p*p+g*g<=_||(p=u-(this.x+this.width-f),p*p+g*g<=_)||(g=c-(this.y+this.height-f),p*p+g*g<=_)||(p=u-(this.x+f),p*p+g*g<=_))return!0}return!1}}Df.prototype.toString=function(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`};class Jt{constructor(u=1,c=0,f=0,p=1,g=0,_=0){this.array=null,this.a=u,this.b=c,this.c=f,this.d=p,this.tx=g,this.ty=_}fromArray(u){this.a=u[0],this.b=u[1],this.c=u[3],this.d=u[4],this.tx=u[2],this.ty=u[5]}set(u,c,f,p,g,_){return this.a=u,this.b=c,this.c=f,this.d=p,this.tx=g,this.ty=_,this}toArray(u,c){this.array||(this.array=new Float32Array(9));const f=c||this.array;return u?(f[0]=this.a,f[1]=this.b,f[2]=0,f[3]=this.c,f[4]=this.d,f[5]=0,f[6]=this.tx,f[7]=this.ty,f[8]=1):(f[0]=this.a,f[1]=this.c,f[2]=this.tx,f[3]=this.b,f[4]=this.d,f[5]=this.ty,f[6]=0,f[7]=0,f[8]=1),f}apply(u,c){c=c||new xt;const f=u.x,p=u.y;return c.x=this.a*f+this.c*p+this.tx,c.y=this.b*f+this.d*p+this.ty,c}applyInverse(u,c){c=c||new xt;const f=1/(this.a*this.d+this.c*-this.b),p=u.x,g=u.y;return c.x=this.d*f*p+-this.c*f*g+(this.ty*this.c-this.tx*this.d)*f,c.y=this.a*f*g+-this.b*f*p+(-this.ty*this.a+this.tx*this.b)*f,c}translate(u,c){return this.tx+=u,this.ty+=c,this}scale(u,c){return this.a*=u,this.d*=c,this.c*=u,this.b*=c,this.tx*=u,this.ty*=c,this}rotate(u){const c=Math.cos(u),f=Math.sin(u),p=this.a,g=this.c,_=this.tx;return this.a=p*c-this.b*f,this.b=p*f+this.b*c,this.c=g*c-this.d*f,this.d=g*f+this.d*c,this.tx=_*c-this.ty*f,this.ty=_*f+this.ty*c,this}append(u){const c=this.a,f=this.b,p=this.c,g=this.d;return this.a=u.a*c+u.b*p,this.b=u.a*f+u.b*g,this.c=u.c*c+u.d*p,this.d=u.c*f+u.d*g,this.tx=u.tx*c+u.ty*p+this.tx,this.ty=u.tx*f+u.ty*g+this.ty,this}setTransform(u,c,f,p,g,_,y,v,x){return this.a=Math.cos(y+x)*g,this.b=Math.sin(y+x)*g,this.c=-Math.sin(y-v)*_,this.d=Math.cos(y-v)*_,this.tx=u-(f*this.a+p*this.c),this.ty=c-(f*this.b+p*this.d),this}prepend(u){const c=this.tx;if(1!==u.a||0!==u.b||0!==u.c||1!==u.d){const f=this.a,p=this.c;this.a=f*u.a+this.b*u.c,this.b=f*u.b+this.b*u.d,this.c=p*u.a+this.d*u.c,this.d=p*u.b+this.d*u.d}return this.tx=c*u.a+this.ty*u.c+u.tx,this.ty=c*u.b+this.ty*u.d+u.ty,this}decompose(u){const c=this.a,f=this.b,p=this.c,g=this.d,_=u.pivot,y=-Math.atan2(-p,g),v=Math.atan2(f,c),x=Math.abs(y+v);return x<1e-5||Math.abs(Cf-x)<1e-5?(u.rotation=v,u.skew.x=u.skew.y=0):(u.rotation=0,u.skew.x=y,u.skew.y=v),u.scale.x=Math.sqrt(c*c+f*f),u.scale.y=Math.sqrt(p*p+g*g),u.position.x=this.tx+(_.x*c+_.y*p),u.position.y=this.ty+(_.x*f+_.y*g),u}invert(){const u=this.a,c=this.b,f=this.c,p=this.d,g=this.tx,_=u*p-c*f;return this.a=p/_,this.b=-c/_,this.c=-f/_,this.d=u/_,this.tx=(f*this.ty-p*g)/_,this.ty=-(u*this.ty-c*g)/_,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const u=new Jt;return u.a=this.a,u.b=this.b,u.c=this.c,u.d=this.d,u.tx=this.tx,u.ty=this.ty,u}copyTo(u){return u.a=this.a,u.b=this.b,u.c=this.c,u.d=this.d,u.tx=this.tx,u.ty=this.ty,u}copyFrom(u){return this.a=u.a,this.b=u.b,this.c=u.c,this.d=u.d,this.tx=u.tx,this.ty=u.ty,this}static get IDENTITY(){return new Jt}static get TEMP_MATRIX(){return new Jt}}Jt.prototype.toString=function(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`};const ea=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],ta=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],ra=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],na=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],gv=[],JD=[],Af=Math.sign;!function Ej(){for(let d=0;d<16;d++){const u=[];gv.push(u);for(let c=0;c<16;c++){const f=Af(ea[d]*ea[c]+ra[d]*ta[c]),p=Af(ta[d]*ea[c]+na[d]*ta[c]),g=Af(ea[d]*ra[c]+ra[d]*na[c]),_=Af(ta[d]*ra[c]+na[d]*na[c]);for(let y=0;y<16;y++)if(ea[y]===f&&ta[y]===p&&ra[y]===g&&na[y]===_){u.push(y);break}}}for(let d=0;d<16;d++){const u=new Jt;u.set(ea[d],ta[d],ra[d],na[d],0,0),JD.push(u)}}();const sr={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:d=>ea[d],uY:d=>ta[d],vX:d=>ra[d],vY:d=>na[d],inv:d=>8&d?15&d:7&-d,add:(d,u)=>gv[d][u],sub:(d,u)=>gv[d][sr.inv(u)],rotate180:d=>4^d,isVertical:d=>2==(3&d),byDirection:(d,u)=>2*Math.abs(d)<=Math.abs(u)?u>=0?sr.S:sr.N:2*Math.abs(u)<=Math.abs(d)?d>0?sr.E:sr.W:u>0?d>0?sr.SE:sr.SW:d>0?sr.NE:sr.NW,matrixAppendRotationInv:(d,u,c=0,f=0)=>{const p=JD[sr.inv(u)];p.tx=c,p.ty=f,d.append(p)}};class Zi{constructor(u,c,f=0,p=0){this._x=f,this._y=p,this.cb=u,this.scope=c}clone(u=this.cb,c=this.scope){return new Zi(u,c,this._x,this._y)}set(u=0,c=u){return(this._x!==u||this._y!==c)&&(this._x=u,this._y=c,this.cb.call(this.scope)),this}copyFrom(u){return(this._x!==u.x||this._y!==u.y)&&(this._x=u.x,this._y=u.y,this.cb.call(this.scope)),this}copyTo(u){return u.set(this._x,this._y),u}equals(u){return u.x===this._x&&u.y===this._y}get x(){return this._x}set x(u){this._x!==u&&(this._x=u,this.cb.call(this.scope))}get y(){return this._y}set y(u){this._y!==u&&(this._y=u,this.cb.call(this.scope))}}Zi.prototype.toString=function(){return`[@pixi/math:ObservablePoint x=${this.x} y=${this.y} scope=${this.scope}]`};const mv=class{constructor(){this.worldTransform=new Jt,this.localTransform=new Jt,this.position=new Zi(this.onChange,this,0,0),this.scale=new Zi(this.onChange,this,1,1),this.pivot=new Zi(this.onChange,this,0,0),this.skew=new Zi(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}updateLocalTransform(){const d=this.localTransform;this._localID!==this._currentLocalID&&(d.a=this._cx*this.scale.x,d.b=this._sx*this.scale.x,d.c=this._cy*this.scale.y,d.d=this._sy*this.scale.y,d.tx=this.position.x-(this.pivot.x*d.a+this.pivot.y*d.c),d.ty=this.position.y-(this.pivot.x*d.b+this.pivot.y*d.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(d){const u=this.localTransform;if(this._localID!==this._currentLocalID&&(u.a=this._cx*this.scale.x,u.b=this._sx*this.scale.x,u.c=this._cy*this.scale.y,u.d=this._sy*this.scale.y,u.tx=this.position.x-(this.pivot.x*u.a+this.pivot.y*u.c),u.ty=this.position.y-(this.pivot.x*u.b+this.pivot.y*u.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==d._worldID){const c=d.worldTransform,f=this.worldTransform;f.a=u.a*c.a+u.b*c.c,f.b=u.a*c.b+u.b*c.d,f.c=u.c*c.a+u.d*c.c,f.d=u.c*c.b+u.d*c.d,f.tx=u.tx*c.a+u.ty*c.c+c.tx,f.ty=u.tx*c.b+u.ty*c.d+c.ty,this._parentID=d._worldID,this._worldID++}}setFromMatrix(d){d.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(d){this._rotation!==d&&(this._rotation=d,this.updateSkew())}};mv.IDENTITY=new mv;let _v=mv;_v.prototype.toString=function(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`};const Nl=[{test:d=>"float"===d.type&&1===d.size&&!d.isArray,code:d=>`\n            if(uv["${d}"] !== ud["${d}"].value)\n            {\n                ud["${d}"].value = uv["${d}"]\n                gl.uniform1f(ud["${d}"].location, uv["${d}"])\n            }\n            `},{test:(d,u)=>!("sampler2D"!==d.type&&"samplerCube"!==d.type&&"sampler2DArray"!==d.type||1!==d.size||d.isArray||null!=u&&void 0===u.castToBaseTexture),code:d=>`t = syncData.textureCount++;\n\n            renderer.texture.bind(uv["${d}"], t);\n\n            if(ud["${d}"].value !== t)\n            {\n                ud["${d}"].value = t;\n                gl.uniform1i(ud["${d}"].location, t);\n; // eslint-disable-line max-len\n            }`},{test:(d,u)=>"mat3"===d.type&&1===d.size&&!d.isArray&&void 0!==u.a,code:d=>`\n            gl.uniformMatrix3fv(ud["${d}"].location, false, uv["${d}"].toArray(true));\n            `,codeUbo:d=>`\n                var ${d}_matrix = uv.${d}.toArray(true);\n\n                data[offset] = ${d}_matrix[0];\n                data[offset+1] = ${d}_matrix[1];\n                data[offset+2] = ${d}_matrix[2];\n        \n                data[offset + 4] = ${d}_matrix[3];\n                data[offset + 5] = ${d}_matrix[4];\n                data[offset + 6] = ${d}_matrix[5];\n        \n                data[offset + 8] = ${d}_matrix[6];\n                data[offset + 9] = ${d}_matrix[7];\n                data[offset + 10] = ${d}_matrix[8];\n            `},{test:(d,u)=>"vec2"===d.type&&1===d.size&&!d.isArray&&void 0!==u.x,code:d=>`\n                cv = ud["${d}"].value;\n                v = uv["${d}"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["${d}"].location, v.x, v.y);\n                }`,codeUbo:d=>`\n                v = uv.${d};\n\n                data[offset] = v.x;\n                data[offset+1] = v.y;\n            `},{test:d=>"vec2"===d.type&&1===d.size&&!d.isArray,code:d=>`\n                cv = ud["${d}"].value;\n                v = uv["${d}"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["${d}"].location, v[0], v[1]);\n                }\n            `},{test:(d,u)=>"vec4"===d.type&&1===d.size&&!d.isArray&&void 0!==u.width,code:d=>`\n                cv = ud["${d}"].value;\n                v = uv["${d}"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["${d}"].location, v.x, v.y, v.width, v.height)\n                }`,codeUbo:d=>`\n                    v = uv.${d};\n\n                    data[offset] = v.x;\n                    data[offset+1] = v.y;\n                    data[offset+2] = v.width;\n                    data[offset+3] = v.height;\n                `},{test:(d,u)=>"vec4"===d.type&&1===d.size&&!d.isArray&&void 0!==u.red,code:d=>`\n                cv = ud["${d}"].value;\n                v = uv["${d}"];\n\n                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)\n                {\n                    cv[0] = v.red;\n                    cv[1] = v.green;\n                    cv[2] = v.blue;\n                    cv[3] = v.alpha;\n                    gl.uniform4f(ud["${d}"].location, v.red, v.green, v.blue, v.alpha)\n                }`,codeUbo:d=>`\n                    v = uv.${d};\n\n                    data[offset] = v.red;\n                    data[offset+1] = v.green;\n                    data[offset+2] = v.blue;\n                    data[offset+3] = v.alpha;\n                `},{test:(d,u)=>"vec3"===d.type&&1===d.size&&!d.isArray&&void 0!==u.red,code:d=>`\n                cv = ud["${d}"].value;\n                v = uv["${d}"];\n\n                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)\n                {\n                    cv[0] = v.red;\n                    cv[1] = v.green;\n                    cv[2] = v.blue;\n    \n                    gl.uniform3f(ud["${d}"].location, v.red, v.green, v.blue)\n                }`,codeUbo:d=>`\n                    v = uv.${d};\n\n                    data[offset] = v.red;\n                    data[offset+1] = v.green;\n                    data[offset+2] = v.blue;\n                `},{test:d=>"vec4"===d.type&&1===d.size&&!d.isArray,code:d=>`\n                cv = ud["${d}"].value;\n                v = uv["${d}"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["${d}"].location, v[0], v[1], v[2], v[3])\n                }`}],Dj={float:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1f(location, v);\n    }",vec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4f(location, v[0], v[1], v[2], v[3]);\n    }",int:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",ivec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",ivec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",ivec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",uint:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1ui(location, v);\n    }",uvec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2ui(location, v[0], v[1]);\n    }",uvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3ui(location, v[0], v[1], v[2]);\n    }",uvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);\n    }",bool:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1i(location, v);\n    }",bvec2:"\n    if (cv[0] != v[0] || cv[1] != v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",bvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",bvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",samplerCube:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",sampler2DArray:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }"},Aj={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"},eA={};let Mf,If=eA;const Rj={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function tA(d){return Rj[d]}let Pf=null;const rA={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function nA(d,u){if(!Pf){const c=Object.keys(rA);Pf={};for(let f=0;f<c.length;++f){const p=c[f];Pf[d[p]]=rA[p]}}return Pf[u]}function iA(d,u,c){if("precision"!==d.substring(0,9)){let f=u;return u===ei.HIGH&&c!==ei.HIGH&&(f=ei.MEDIUM),`precision ${f} float;\n${d}`}return c!==ei.HIGH&&"precision highp"===d.substring(0,15)?d.replace("precision highp","precision mediump"):d}let Fj=0;const Rf={},yv=class iu{constructor(u,c,f="pixi-shader",p={}){this.extra={},this.id=Fj++,this.vertexSrc=u||iu.defaultVertexSrc,this.fragmentSrc=c||iu.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=p,"#version"!==this.vertexSrc.substring(0,8)&&(f=f.replace(/\s+/g,"-"),Rf[f]?(Rf[f]++,f+=`-${Rf[f]}`):Rf[f]=1,this.vertexSrc=`#define SHADER_NAME ${f}\n${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${f}\n${this.fragmentSrc}`,this.vertexSrc=iA(this.vertexSrc,iu.defaultVertexPrecision,ei.HIGH),this.fragmentSrc=iA(this.fragmentSrc,iu.defaultFragmentPrecision,function Pj(){if(!Mf){Mf=ei.MEDIUM;const d=function Mj(){if(If===eA||If?.isContextLost()){const d=Re.ADAPTER.createCanvas();let u;Re.PREFER_ENV>=Zo.WEBGL2&&(u=d.getContext("webgl2",{})),u||(u=d.getContext("webgl",{})||d.getContext("experimental-webgl",{}),u?u.getExtension("WEBGL_draw_buffers"):u=null),If=u}return If}();if(d&&d.getShaderPrecisionFormat){const u=d.getShaderPrecisionFormat(d.FRAGMENT_SHADER,d.HIGH_FLOAT);u&&(Mf=u.precision?ei.HIGH:ei.MEDIUM)}}return Mf}())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"}static get defaultFragmentSrc(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"}static from(u,c,f){const p=u+c;let g=WD[p];return g||(WD[p]=g=new iu(u,c,f)),g}};yv.defaultVertexPrecision=ei.HIGH,yv.defaultFragmentPrecision=Ss.apple.device?ei.HIGH:ei.MEDIUM;let Is=yv,Oj=0;class Di{constructor(u,c,f){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=Oj++,this.static=!!c,this.ubo=!!f,u instanceof _r?(this.buffer=u,this.buffer.type=qi.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=u,this.ubo&&(this.buffer=new _r(new Float32Array(1)),this.buffer.type=qi.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(u,c,f){if(this.ubo)throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them");this.uniforms[u]=new Di(c,f)}static from(u,c,f){return new Di(u,c,f)}static uboFrom(u,c){return new Di(u,c??!0,!0)}}class Qi{constructor(u,c){this.uniformBindCount=0,this.program=u,this.uniformGroup=c?c instanceof Di?c:new Di(c):new Di({}),this.disposeRunner=new Si("disposeShader")}checkUniformExists(u,c){if(c.uniforms[u])return!0;for(const f in c.uniforms){const p=c.uniforms[f];if(!0===p.group&&this.checkUniformExists(u,p))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(u,c,f){const p=Is.from(u,c);return new Qi(p,f)}}class Nj{constructor(u,c){if(this.vertexSrc=u,this.fragTemplate=c,this.programCache={},this.defaultGroupCache={},!c.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!c.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(u){if(!this.programCache[u]){const f=new Int32Array(u);for(let g=0;g<u;g++)f[g]=g;this.defaultGroupCache[u]=Di.from({uSamplers:f},!0);let p=this.fragTemplate;p=p.replace(/%count%/gi,`${u}`),p=p.replace(/%forloop%/gi,this.generateSampleSrc(u)),this.programCache[u]=new Is(this.vertexSrc,p)}const c={tint:new Float32Array([1,1,1,1]),translationMatrix:new Jt,default:this.defaultGroupCache[u]};return new Qi(this.programCache[u],c)}generateSampleSrc(u){let c="";c+="\n",c+="\n";for(let f=0;f<u;f++)f>0&&(c+="\nelse "),f<u-1&&(c+=`if(vTextureId < ${f}.5)`),c+="\n{",c+=`\n\tcolor = texture2D(uSamplers[${f}], vTextureCoord);`,c+="\n}";return c+="\n",c+="\n",c}}class vv{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let u=0;u<this.count;u++)this.elements[u]=null;this.count=0}}class Ff{constructor(u){this.renderer=u}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(u){}}const Pc=class Fi extends Ff{constructor(u){super(u),this.setShaderGenerator(),this.geometryClass=QD,this.vertexSize=6,this.state=Ki.for2d(),this.size=4*Fi.defaultBatchSize,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),u.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??function kj(d){let u=!0;const c=Re.ADAPTER.getNavigator();if(Ss.tablet||Ss.phone){if(Ss.apple.device){const f=c.userAgent.match(/OS (\d+)_(\d+)?/);f&&parseInt(f[1],10)<11&&(u=!1)}if(Ss.android.device){const f=c.userAgent.match(/Android\s([0-9.]*)/);f&&parseInt(f[1],10)<7&&(u=!1)}}return u?d:4}(32),this._defaultMaxTextures}static set defaultMaxTextures(u){this._defaultMaxTextures=u}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??function Lj(){return!Ss.apple.device}(),this._canUploadSameBuffer}static set canUploadSameBuffer(u){this._canUploadSameBuffer=u}get MAX_TEXTURES(){return lt("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return"precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n"}static get defaultFragmentTemplate(){return"varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n"}setShaderGenerator({vertex:u=Fi.defaultVertexSrc,fragment:c=Fi.defaultFragmentTemplate}={}){this.shaderGenerator=new Nj(u,c)}contextChange(){const u=this.renderer.gl;Re.PREFER_ENV===Zo.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(u.getParameter(u.MAX_TEXTURE_IMAGE_UNITS),Fi.defaultMaxTextures),this.maxTextures=function mj(d,u){if(0===d)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const c=u.createShader(u.FRAGMENT_SHADER);for(;;){const f=pj.replace(/%forloop%/gi,gj(d));if(u.shaderSource(c,f),u.compileShader(c),u.getShaderParameter(c,u.COMPILE_STATUS))break;d=d/2|0}return d}(this.maxTextures,u)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let c=0;c<this._packedGeometryPoolSize;c++)this._packedGeometries[c]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:u,_textureArrayPool:c}=Fi,f=this.size/4,p=Math.floor(f/this.maxTextures)+1;for(;u.length<f;)u.push(new pv);for(;c.length<p;)c.push(new vv);for(let g=0;g<this.maxTextures;g++)this._tempBoundTextures[g]=null}onPrerender(){this._flushId=0}render(u){u._texture.valid&&(this._vertexCount+u.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=u.vertexData.length/2,this._indexCount+=u.indices.length,this._bufferedTextures[this._bufferSize]=u._texture.baseTexture,this._bufferedElements[this._bufferSize++]=u)}buildTexturesAndDrawCalls(){const{_bufferedTextures:u,maxTextures:c}=this,f=Fi._textureArrayPool,p=this.renderer.batch,g=this._tempBoundTextures,_=this.renderer.textureGC.count;let y=++vt._globalBatch,v=0,x=f[0],w=0;p.copyBoundTextures(g,c);for(let C=0;C<this._bufferSize;++C){const E=u[C];u[C]=null,E._batchEnabled!==y&&(x.count>=c&&(p.boundArray(x,g,y,c),this.buildDrawCalls(x,w,C),w=C,x=f[++v],++y),E._batchEnabled=y,E.touched=_,x.elements[x.count++]=E)}x.count>0&&(p.boundArray(x,g,y,c),this.buildDrawCalls(x,w,this._bufferSize),++v,++y);for(let C=0;C<g.length;C++)g[C]=null;vt._globalBatch=y}buildDrawCalls(u,c,f){const{_bufferedElements:p,_attributeBuffer:g,_indexBuffer:_,vertexSize:y}=this,v=Fi._drawCallPool;let x=this._dcIndex,w=this._aIndex,C=this._iIndex,E=v[x];E.start=this._iIndex,E.texArray=u;for(let T=c;T<f;++T){const D=p[T],A=HD[D._texture.baseTexture.alphaMode?1:0][D.blendMode];p[T]=null,c<T&&E.blend!==A&&(E.size=C-E.start,c=T,E=v[++x],E.texArray=u,E.start=C),this.packInterleavedGeometry(D,g,_,w,C),w+=D.vertexData.length/2*y,C+=D.indices.length,E.blend=A}c<f&&(E.size=C-E.start,++x),this._dcIndex=x,this._aIndex=w,this._iIndex=C}bindAndClearTexArray(u){const c=this.renderer.texture;for(let f=0;f<u.count;f++)c.bind(u.elements[f],u.ids[f]),u.elements[f]=null;u.count=0}updateGeometry(){const{_packedGeometries:u,_attributeBuffer:c,_indexBuffer:f}=this;Fi.canUploadSameBuffer?(u[this._flushId]._buffer.update(c.rawBinaryData),u[this._flushId]._indexBuffer.update(f),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,u[this._flushId]=new this.geometryClass),u[this._flushId]._buffer.update(c.rawBinaryData),u[this._flushId]._indexBuffer.update(f),this.renderer.geometry.bind(u[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const u=this._dcIndex,{gl:c,state:f}=this.renderer,p=Fi._drawCallPool;let g=null;for(let _=0;_<u;_++){const{texArray:y,type:v,size:x,start:w,blend:C}=p[_];g!==y&&(g=y,this.bindAndClearTexArray(y)),this.state.blendMode=C,f.set(this.state),c.drawElements(v,x,c.UNSIGNED_SHORT,2*w)}}flush(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),Fi.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let u=0;u<this._packedGeometryPoolSize;u++)this._packedGeometries[u]&&this._packedGeometries[u].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(u){const c=xf(Math.ceil(u/8)),f=zD(c),p=8*c;this._aBuffers.length<=f&&(this._iBuffers.length=f+1);let g=this._aBuffers[p];return g||(this._aBuffers[p]=g=new sv(p*this.vertexSize*4)),g}getIndexBuffer(u){const c=xf(Math.ceil(u/12)),f=zD(c),p=12*c;this._iBuffers.length<=f&&(this._iBuffers.length=f+1);let g=this._iBuffers[f];return g||(this._iBuffers[f]=g=new Uint16Array(p)),g}packInterleavedGeometry(u,c,f,p,g){const{uint32View:_,float32View:y}=c,v=p/this.vertexSize,x=u.uvs,w=u.indices,C=u.vertexData,E=u._texture.baseTexture._batchLocation,T=Math.min(u.worldAlpha,1),D=Ut.shared.setValue(u._tintRGB).toPremultiplied(T,u._texture.baseTexture.alphaMode>0);for(let S=0;S<C.length;S+=2)y[p++]=C[S],y[p++]=C[S+1],y[p++]=x[S],y[p++]=x[S+1],_[p++]=D,y[p++]=E;for(let S=0;S<w.length;S++)f[g++]=v+w[S]}};Pc.defaultBatchSize=4096,Pc.extension={name:"batch",type:Pe.RendererPlugin},Pc._drawCallPool=[],Pc._textureArrayPool=[];let ia=Pc;We.add(ia);const xv=class rh extends Qi{constructor(u,c,f){super(Is.from(u||rh.defaultVertexSrc,c||rh.defaultFragmentSrc),f),this.padding=0,this.resolution=rh.defaultResolution,this.multisample=rh.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new Ki}apply(u,c,f,p,g){u.applyFilter(this,c,f,p)}get blendMode(){return this.state.blendMode}set blendMode(u){this.state.blendMode=u}get resolution(){return this._resolution}set resolution(u){this._resolution=u}static get defaultVertexSrc(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"}static get defaultFragmentSrc(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"}};xv.defaultResolution=1,xv.defaultMultisample=Er.NONE;let Ft=xv;class Of{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new Ut(0),this.alpha=1}init(u){this.clearBeforeRender=u.clearBeforeRender;const{backgroundColor:c,background:f,backgroundAlpha:p}=u,g=f??c;void 0!==g&&(this.color=g),this.alpha=p}get color(){return this._backgroundColor.value}set color(u){this._backgroundColor.setValue(u)}get alpha(){return this._backgroundColor.alpha}set alpha(u){this._backgroundColor.setAlpha(u)}get backgroundColor(){return this._backgroundColor}destroy(){}}Of.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},Of.extension={type:[Pe.RendererSystem,Pe.CanvasRendererSystem],name:"background"},We.add(Of);class sA{constructor(u){this.renderer=u,this.emptyRenderer=new Ff(u),this.currentRenderer=this.emptyRenderer}setObjectRenderer(u){this.currentRenderer!==u&&(this.currentRenderer.stop(),this.currentRenderer=u,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(u,c){const{boundTextures:f}=this.renderer.texture;for(let p=c-1;p>=0;--p)u[p]=f[p]||null,u[p]&&(u[p]._batchLocation=p)}boundArray(u,c,f,p){const{elements:g,ids:_,count:y}=u;let v=0;for(let x=0;x<y;x++){const w=g[x],C=w._batchLocation;if(C>=0&&C<p&&c[C]===w)_[x]=C;else for(;v<p;){const E=c[v];if(!E||E._batchEnabled!==f||E._batchLocation!==v){_[x]=v,w._batchLocation=v,c[v]=w;break}v++}}}destroy(){this.renderer=null}}sA.extension={type:Pe.RendererSystem,name:"batch"},We.add(sA);let oA=0;class Nf{constructor(u){this.renderer=u,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(u){this.gl=u,this.renderer.gl=u,this.renderer.CONTEXT_UID=oA++}init(u){if(u.context)this.initFromContext(u.context);else{const c=this.renderer.background.alpha<1,f=u.premultipliedAlpha;this.preserveDrawingBuffer=u.preserveDrawingBuffer,this.useContextAlpha=u.useContextAlpha,this.powerPreference=u.powerPreference,this.initFromOptions({alpha:c,premultipliedAlpha:f,antialias:u.antialias,stencil:!0,preserveDrawingBuffer:u.preserveDrawingBuffer,powerPreference:u.powerPreference})}}initFromContext(u){this.gl=u,this.validateContext(u),this.renderer.gl=u,this.renderer.CONTEXT_UID=oA++,this.renderer.runners.contextChange.emit(u);const c=this.renderer.view;void 0!==c.addEventListener&&(c.addEventListener("webglcontextlost",this.handleContextLost,!1),c.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(u){const c=this.createContext(this.renderer.view,u);this.initFromContext(c)}createContext(u,c){let f;if(Re.PREFER_ENV>=Zo.WEBGL2&&(f=u.getContext("webgl2",c)),f)this.webGLVersion=2;else if(this.webGLVersion=1,f=u.getContext("webgl",c)||u.getContext("experimental-webgl",c),!f)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=f,this.getExtensions(),this.gl}getExtensions(){const{gl:u}=this,c={loseContext:u.getExtension("WEBGL_lose_context"),anisotropicFiltering:u.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:u.getExtension("OES_texture_float_linear"),s3tc:u.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:u.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:u.getExtension("WEBGL_compressed_texture_etc"),etc1:u.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:u.getExtension("WEBGL_compressed_texture_pvrtc")||u.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:u.getExtension("WEBGL_compressed_texture_atc"),astc:u.getExtension("WEBGL_compressed_texture_astc")};1===this.webGLVersion?Object.assign(this.extensions,c,{drawBuffers:u.getExtension("WEBGL_draw_buffers"),depthTexture:u.getExtension("WEBGL_depth_texture"),vertexArrayObject:u.getExtension("OES_vertex_array_object")||u.getExtension("MOZ_OES_vertex_array_object")||u.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:u.getExtension("OES_element_index_uint"),floatTexture:u.getExtension("OES_texture_float"),floatTextureLinear:u.getExtension("OES_texture_float_linear"),textureHalfFloat:u.getExtension("OES_texture_half_float"),textureHalfFloatLinear:u.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,c,{colorBufferFloat:u.getExtension("EXT_color_buffer_float")})}handleContextLost(u){u.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const u=this.renderer.view;this.renderer=null,void 0!==u.removeEventListener&&(u.removeEventListener("webglcontextlost",this.handleContextLost),u.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(u){const c=u.getContextAttributes(),f="WebGL2RenderingContext"in globalThis&&u instanceof globalThis.WebGL2RenderingContext;f&&(this.webGLVersion=2),c&&!c.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const p=f||!!u.getExtension("OES_element_index_uint");this.supports.uint32Indices=p,p||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}Nf.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},Nf.extension={type:Pe.RendererSystem,name:"context"},We.add(Nf);class bv{constructor(u,c){if(this.width=Math.round(u),this.height=Math.round(c),!this.width||!this.height)throw new Error("Framebuffer width or height is zero");this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Si("disposeFramebuffer"),this.multisample=Er.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(u=0,c){return this.colorTextures[u]=c||new vt(null,{scaleMode:$i.NEAREST,resolution:1,mipmap:Wi.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(u){return this.depthTexture=u||new vt(null,{scaleMode:$i.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:Wi.OFF,format:be.DEPTH_COMPONENT,type:Ze.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(u,c){if(u=Math.round(u),c=Math.round(c),!u||!c)throw new Error("Framebuffer width and height must not be zero");if(u!==this.width||c!==this.height){this.width=u,this.height=c,this.dirtyId++,this.dirtySize++;for(let f=0;f<this.colorTextures.length;f++){const p=this.colorTextures[f],g=p.resolution;p.setSize(u/g,c/g)}if(this.depthTexture){const f=this.depthTexture.resolution;this.depthTexture.setSize(u/f,c/f)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class aA extends vt{constructor(u={}){"number"==typeof u&&(u={width:arguments[0],height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}),u.width=u.width??100,u.height=u.height??100,u.multisample??(u.multisample=Er.NONE),super(null,u),this.mipmap=Wi.OFF,this.valid=!0,this._clear=new Ut([0,0,0,0]),this.framebuffer=new bv(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=u.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(u){this._clear.setValue(u)}get clearColor(){return this._clear.value}get clear(){return this._clear}get multisample(){return this.framebuffer.multisample}set multisample(u){this.framebuffer.multisample=u}resize(u,c){this.framebuffer.resize(u*this.resolution,c*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class lo extends Ic{constructor(u){super(u.naturalWidth||u.videoWidth||u.width,u.naturalHeight||u.videoHeight||u.height),this.source=u,this.noSubImage=!1}static crossOrigin(u,c,f){void 0!==f||c.startsWith("data:")?!1!==f&&(u.crossOrigin="string"==typeof f?f:"anonymous"):u.crossOrigin=function fj(d,u=globalThis.location){if(d.startsWith("data:"))return"";u=u||globalThis.location;const c=new URL(d,document.baseURI);return c.hostname!==u.hostname||c.port!==u.port||c.protocol!==u.protocol?"anonymous":""}(c)}upload(u,c,f,p){const g=u.gl,_=c.realWidth,y=c.realHeight;if(p=p||this.source,typeof HTMLImageElement<"u"&&p instanceof HTMLImageElement){if(!p.complete||0===p.naturalWidth)return!1}else if(typeof HTMLVideoElement<"u"&&p instanceof HTMLVideoElement&&p.readyState<=1)return!1;return g.pixelStorei(g.UNPACK_PREMULTIPLY_ALPHA_WEBGL,c.alphaMode===_n.UNPACK),this.noSubImage||c.target!==g.TEXTURE_2D||f.width!==_||f.height!==y?(f.width=_,f.height=y,g.texImage2D(c.target,0,f.internalFormat,c.format,f.type,p)):g.texSubImage2D(g.TEXTURE_2D,0,0,0,c.format,f.type,p),!0}update(){if(this.destroyed)return;const u=this.source;this.resize(u.naturalWidth||u.videoWidth||u.width,u.naturalHeight||u.videoHeight||u.height),super.update()}dispose(){this.source=null}}class lA extends lo{constructor(u,c){if(c=c||{},"string"==typeof u){const f=new Image;lo.crossOrigin(f,u,c.crossorigin),f.src=u,u=f}super(u),!u.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=u.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(c.createBitmap??Re.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode="number"==typeof c.alphaMode?c.alphaMode:null,this.bitmap=null,this._load=null,!1!==c.autoLoad&&this.load()}load(u){return this._load||(void 0!==u&&(this.createBitmap=u),this._load=new Promise((c,f)=>{const p=this.source;this.url=p.src;const g=()=>{this.destroyed||(p.onload=null,p.onerror=null,this.update(),this._load=null,c(this.createBitmap?this.process():this))};p.complete&&p.src?g():(p.onload=g,p.onerror=_=>{f(_),this.onError.emit(_)})})),this._load}process(){const u=this.source;if(null!==this._process)return this._process;if(null!==this.bitmap||!globalThis.createImageBitmap)return Promise.resolve(this);const c=globalThis.createImageBitmap;return this._process=fetch(u.src,{mode:u.crossOrigin&&"anonymous"!==u.crossOrigin?"no-cors":"cors"}).then(p=>p.blob()).then(p=>c(p,0,0,u.width,u.height,{premultiplyAlpha:null===this.alphaMode||this.alphaMode===_n.UNPACK?"premultiply":"none"})).then(p=>this.destroyed?Promise.reject():(this.bitmap=p,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(u,c,f){if("number"==typeof this.alphaMode&&(c.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(u,c,f);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(u,c,f,this.bitmap),!this.preserveBitmap){let p=!0;const g=c._glTextures;for(const _ in g){const y=g[_];if(y!==f&&y.dirtyId!==c.dirtyId){p=!1;break}}p&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(u){return typeof HTMLImageElement<"u"&&("string"==typeof u||u instanceof HTMLImageElement)}}class wv{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(u,c,f){const p=c.width,g=c.height;if(f){const _=u.width/2/p,y=u.height/2/g,v=u.x/p+_,x=u.y/g+y;f=sr.add(f,sr.NW),this.x0=v+_*sr.uX(f),this.y0=x+y*sr.uY(f),f=sr.add(f,2),this.x1=v+_*sr.uX(f),this.y1=x+y*sr.uY(f),f=sr.add(f,2),this.x2=v+_*sr.uX(f),this.y2=x+y*sr.uY(f),f=sr.add(f,2),this.x3=v+_*sr.uX(f),this.y3=x+y*sr.uY(f)}else this.x0=u.x/p,this.y0=u.y/g,this.x1=(u.x+u.width)/p,this.y1=u.y/g,this.x2=(u.x+u.width)/p,this.y2=(u.y+u.height)/g,this.x3=u.x/p,this.y3=(u.y+u.height)/g;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}}wv.prototype.toString=function(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`};const uA=new wv;function Lf(d){d.destroy=function(){},d.on=function(){},d.once=function(){},d.emit=function(){}}class Xe extends Sc{constructor(u,c,f,p,g,_,y){if(super(),this.noFrame=!1,c||(this.noFrame=!0,c=new wt(0,0,1,1)),u instanceof Xe&&(u=u.baseTexture),this.baseTexture=u,this._frame=c,this.trim=p,this.valid=!1,this.destroyed=!1,this._uvs=uA,this.uvMatrix=null,this.orig=f||c,this._rotate=Number(g||0),!0===g)this._rotate=2;else if(this._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=_?new xt(_.x,_.y):new xt(0,0),this.defaultBorders=y,this._updateID=0,this.textureCacheIds=[],u.valid?this.noFrame?u.valid&&this.onBaseTextureUpdated(u):this.frame=c:u.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&u.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(u){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=u.width,this._frame.height=u.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(u){if(this.baseTexture){if(u){const{resource:c}=this.baseTexture;c?.url&&yn[c.url]&&Xe.removeFromCache(c.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,Xe.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}clone(){const u=this._frame.clone(),c=this._frame===this.orig?u:this.orig.clone(),f=new Xe(this.baseTexture,!this.noFrame&&u,c,this.trim?.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(f._frame=u),f}updateUvs(){this._uvs===uA&&(this._uvs=new wv),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(u,c={},f=Re.STRICT_TEXTURE_CACHE){const p="string"==typeof u;let g=null;p?g=u:u instanceof vt?(u.cacheId||(u.cacheId=`${c?.pixiIdPrefix||"pixiid"}-${Qo()}`,vt.addToCache(u,u.cacheId)),g=u.cacheId):(u._pixiId||(u._pixiId=`${c?.pixiIdPrefix||"pixiid"}_${Qo()}`),g=u._pixiId);let _=yn[g];if(p&&f&&!_)throw new Error(`The cacheId "${g}" does not exist in TextureCache.`);return _||u instanceof vt?!_&&u instanceof vt&&(_=new Xe(u),Xe.addToCache(_,g)):(c.resolution||(c.resolution=As(u)),_=new Xe(new vt(u,c)),_.baseTexture.cacheId=g,vt.addToCache(_.baseTexture,g),Xe.addToCache(_,g)),_}static fromURL(u,c){const f=Object.assign({autoLoad:!1},c?.resourceOptions),p=Xe.from(u,Object.assign({resourceOptions:f},c),!1),g=p.baseTexture.resource;return p.baseTexture.valid?Promise.resolve(p):g.load().then(()=>Promise.resolve(p))}static fromBuffer(u,c,f,p){return new Xe(vt.fromBuffer(u,c,f,p))}static fromLoader(u,c,f,p){const g=new vt(u,Object.assign({scaleMode:vt.defaultOptions.scaleMode,resolution:As(c)},p)),{resource:_}=g;_ instanceof lA&&(_.url=c);const y=new Xe(g);return f||(f=c),vt.addToCache(y.baseTexture,f),Xe.addToCache(y,f),f!==c&&(vt.addToCache(y.baseTexture,c),Xe.addToCache(y,c)),y.baseTexture.valid?Promise.resolve(y):new Promise(v=>{y.baseTexture.once("loaded",()=>v(y))})}static addToCache(u,c){c&&(u.textureCacheIds.includes(c)||u.textureCacheIds.push(c),yn[c]&&yn[c]!==u&&console.warn(`Texture added to the cache with an id [${c}] that already had an entry`),yn[c]=u)}static removeFromCache(u){if("string"==typeof u){const c=yn[u];if(c){const f=c.textureCacheIds.indexOf(u);return f>-1&&c.textureCacheIds.splice(f,1),delete yn[u],c}}else if(u?.textureCacheIds){for(let c=0;c<u.textureCacheIds.length;++c)yn[u.textureCacheIds[c]]===u&&delete yn[u.textureCacheIds[c]];return u.textureCacheIds.length=0,u}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(u){this._frame=u,this.noFrame=!1;const{x:c,y:f,width:p,height:g}=u,_=c+p>this.baseTexture.width,y=f+g>this.baseTexture.height;if(_||y)throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: X: ${c} + ${p} = ${c+p} > ${this.baseTexture.width} ${_&&y?"and":"or"} Y: ${f} + ${g} = ${f+g} > ${this.baseTexture.height}`);this.valid=p&&g&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=u),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(u){this._rotate=u,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return Xe._EMPTY||(Xe._EMPTY=new Xe(new vt),Lf(Xe._EMPTY),Lf(Xe._EMPTY.baseTexture)),Xe._EMPTY}static get WHITE(){if(!Xe._WHITE){const u=Re.ADAPTER.createCanvas(16,16),c=u.getContext("2d");u.width=16,u.height=16,c.fillStyle="white",c.fillRect(0,0,16,16),Xe._WHITE=new Xe(vt.from(u)),Lf(Xe._WHITE),Lf(Xe._WHITE.baseTexture)}return Xe._WHITE}}class sa extends Xe{constructor(u,c){super(u,c),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(u){this.framebuffer.multisample=u}resize(u,c,f=!0){const p=this.baseTexture.resolution,g=Math.round(u*p)/p,_=Math.round(c*p)/p;this.valid=g>0&&_>0,this._frame.width=this.orig.width=g,this._frame.height=this.orig.height=_,f&&this.baseTexture.resize(g,_),this.updateUvs()}setResolution(u){const{baseTexture:c}=this;c.resolution!==u&&(c.setResolution(u),this.resize(c.width,c.height,!1))}static create(u){return new sa(new aA(u))}}let jj=(()=>{class d{constructor(c){this.texturePool={},this.textureOptions=c||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(c,f,p=Er.NONE){const g=new aA(Object.assign({width:c,height:f,resolution:1,multisample:p},this.textureOptions));return new sa(g)}getOptimalTexture(c,f,p=1,g=Er.NONE){let _;c=Math.max(Math.ceil(c*p-1e-6),1),f=Math.max(Math.ceil(f*p-1e-6),1),this.enableFullScreen&&c===this._pixelsWidth&&f===this._pixelsHeight?_=g>1?-g:-1:(_=((65535&(c=xf(c)))<<16|65535&(f=xf(f)))>>>0,g>1&&(_+=4294967296*g)),this.texturePool[_]||(this.texturePool[_]=[]);let y=this.texturePool[_].pop();return y||(y=this.createTexture(c,f,g)),y.filterPoolKey=_,y.setResolution(p),y}getFilterTexture(c,f,p){const g=this.getOptimalTexture(c.width,c.height,f||c.resolution,p||Er.NONE);return g.filterFrame=c.filterFrame,g}returnTexture(c){const f=c.filterPoolKey;c.filterFrame=null,this.texturePool[f].push(c)}returnFilterTexture(c){this.returnTexture(c)}clear(c){if(c=!1!==c)for(const f in this.texturePool){const p=this.texturePool[f];if(p)for(let g=0;g<p.length;g++)p[g].destroy(!0)}this.texturePool={}}setScreenSize(c){if(c.width!==this._pixelsWidth||c.height!==this._pixelsHeight){this.enableFullScreen=c.width>0&&c.height>0;for(const f in this.texturePool){if(!(Number(f)<0))continue;const p=this.texturePool[f];if(p)for(let g=0;g<p.length;g++)p[g].destroy(!0);this.texturePool[f]=[]}this._pixelsWidth=c.width,this._pixelsHeight=c.height}}}return d.SCREEN_KEY=-1,d})();class Gj extends ao{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class cA extends ao{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new _r(this.vertices),this.uvBuffer=new _r(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(u,c){let f=0,p=0;return this.uvs[0]=f,this.uvs[1]=p,this.uvs[2]=f+c.width/u.width,this.uvs[3]=p,this.uvs[4]=f+c.width/u.width,this.uvs[5]=p+c.height/u.height,this.uvs[6]=f,this.uvs[7]=p+c.height/u.height,f=c.x,p=c.y,this.vertices[0]=f,this.vertices[1]=p,this.vertices[2]=f+c.width,this.vertices[3]=p,this.vertices[4]=f+c.width,this.vertices[5]=p+c.height,this.vertices[6]=f,this.vertices[7]=p+c.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class zj{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=Er.NONE,this.sourceFrame=new wt,this.destinationFrame=new wt,this.bindingSourceFrame=new wt,this.bindingDestinationFrame=new wt,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const kf=[new xt,new xt,new xt,new xt],Cv=new Jt;class hA{constructor(u){this.renderer=u,this.defaultFilterStack=[{}],this.texturePool=new jj,this.statePool=[],this.quad=new Gj,this.quadUv=new cA,this.tempRect=new wt,this.activeState={},this.globalUniforms=new Di({outputFrame:new wt,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(u,c){const f=this.renderer,p=this.defaultFilterStack,g=this.statePool.pop()||new zj,_=f.renderTexture;let y,v;if(_.current){const A=_.current;y=A.resolution,v=A.multisample}else y=f.resolution,v=f.multisample;let x=c[0].resolution||y,w=c[0].multisample??v,C=c[0].padding,E=c[0].autoFit,T=c[0].legacy??!0;for(let A=1;A<c.length;A++){const I=c[A];x=Math.min(x,I.resolution||y),w=Math.min(w,I.multisample??v),C=this.useMaxPadding?Math.max(C,I.padding):C+I.padding,E=E&&I.autoFit,T=T||(I.legacy??!0)}1===p.length&&(this.defaultFilterStack[0].renderTexture=_.current),p.push(g),g.resolution=x,g.multisample=w,g.legacy=T,g.target=u,g.sourceFrame.copyFrom(u.filterArea||u.getBounds(!0)),g.sourceFrame.pad(C);const D=this.tempRect.copyFrom(_.sourceFrame);f.projection.transform&&this.transformAABB(Cv.copyFrom(f.projection.transform).invert(),D),E?(g.sourceFrame.fit(D),(g.sourceFrame.width<=0||g.sourceFrame.height<=0)&&(g.sourceFrame.width=0,g.sourceFrame.height=0)):g.sourceFrame.intersects(D)||(g.sourceFrame.width=0,g.sourceFrame.height=0),this.roundFrame(g.sourceFrame,_.current?_.current.resolution:f.resolution,_.sourceFrame,_.destinationFrame,f.projection.transform),g.renderTexture=this.getOptimalFilterTexture(g.sourceFrame.width,g.sourceFrame.height,x,w),g.filters=c,g.destinationFrame.width=g.renderTexture.width,g.destinationFrame.height=g.renderTexture.height;const S=this.tempRect;S.x=0,S.y=0,S.width=g.sourceFrame.width,S.height=g.sourceFrame.height,g.renderTexture.filterFrame=g.sourceFrame,g.bindingSourceFrame.copyFrom(_.sourceFrame),g.bindingDestinationFrame.copyFrom(_.destinationFrame),g.transform=f.projection.transform,f.projection.transform=null,_.bind(g.renderTexture,g.sourceFrame,S),f.framebuffer.clear(0,0,0,0)}pop(){const u=this.defaultFilterStack,c=u.pop(),f=c.filters;this.activeState=c;const p=this.globalUniforms.uniforms;p.outputFrame=c.sourceFrame,p.resolution=c.resolution;const g=p.inputSize,_=p.inputPixel,y=p.inputClamp;if(g[0]=c.destinationFrame.width,g[1]=c.destinationFrame.height,g[2]=1/g[0],g[3]=1/g[1],_[0]=Math.round(g[0]*c.resolution),_[1]=Math.round(g[1]*c.resolution),_[2]=1/_[0],_[3]=1/_[1],y[0]=.5*_[2],y[1]=.5*_[3],y[2]=c.sourceFrame.width*g[2]-.5*_[2],y[3]=c.sourceFrame.height*g[3]-.5*_[3],c.legacy){const x=p.filterArea;x[0]=c.destinationFrame.width,x[1]=c.destinationFrame.height,x[2]=c.sourceFrame.x,x[3]=c.sourceFrame.y,p.filterClamp=p.inputClamp}this.globalUniforms.update();const v=u[u.length-1];if(this.renderer.framebuffer.blit(),1===f.length)f[0].apply(this,c.renderTexture,v.renderTexture,Xi.BLEND,c),this.returnFilterTexture(c.renderTexture);else{let x=c.renderTexture,w=this.getOptimalFilterTexture(x.width,x.height,c.resolution);w.filterFrame=x.filterFrame;let C=0;for(C=0;C<f.length-1;++C){1===C&&c.multisample>1&&(w=this.getOptimalFilterTexture(x.width,x.height,c.resolution),w.filterFrame=x.filterFrame),f[C].apply(this,x,w,Xi.CLEAR,c);const E=x;x=w,w=E}f[C].apply(this,x,v.renderTexture,Xi.BLEND,c),C>1&&c.multisample>1&&this.returnFilterTexture(c.renderTexture),this.returnFilterTexture(x),this.returnFilterTexture(w)}c.clear(),this.statePool.push(c)}bindAndClear(u,c=Xi.CLEAR){const{renderTexture:f,state:p}=this.renderer;if(this.renderer.projection.transform=u===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.activeState.transform:null,u?.filterFrame){const _=this.tempRect;_.x=0,_.y=0,_.width=u.filterFrame.width,_.height=u.filterFrame.height,f.bind(u,u.filterFrame,_)}else u!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?f.bind(u):this.renderer.renderTexture.bind(u,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);(c===Xi.CLEAR||c===Xi.BLIT&&(1&p.stateId||this.forceClear))&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(u,c,f,p){const g=this.renderer;g.state.set(u.state),this.bindAndClear(f,p),u.uniforms.uSampler=c,u.uniforms.filterGlobals=this.globalUniforms,g.shader.bind(u),u.legacy=!!u.program.attributeData.aTextureCoord,u.legacy?(this.quadUv.map(c._frame,c.filterFrame),g.geometry.bind(this.quadUv),g.geometry.draw(zi.TRIANGLES)):(g.geometry.bind(this.quad),g.geometry.draw(zi.TRIANGLE_STRIP))}calculateSpriteMatrix(u,c){const{sourceFrame:f,destinationFrame:p}=this.activeState,{orig:g}=c._texture,_=u.set(p.width,0,0,p.height,f.x,f.y),y=c.worldTransform.copyTo(Jt.TEMP_MATRIX);return y.invert(),_.prepend(y),_.scale(1/g.width,1/g.height),_.translate(c.anchor.x,c.anchor.y),_}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(u,c,f=1,p=Er.NONE){return this.texturePool.getOptimalTexture(u,c,f,p)}getFilterTexture(u,c,f){if("number"==typeof u){const g=u;u=c,c=g}const p=this.texturePool.getOptimalTexture((u=u||this.activeState.renderTexture).width,u.height,c||u.resolution,f||Er.NONE);return p.filterFrame=u.filterFrame,p}returnFilterTexture(u){this.texturePool.returnTexture(u)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(u,c){const f=kf[0],p=kf[1],g=kf[2],_=kf[3];f.set(c.left,c.top),p.set(c.left,c.bottom),g.set(c.right,c.top),_.set(c.right,c.bottom),u.apply(f,f),u.apply(p,p),u.apply(g,g),u.apply(_,_);const y=Math.min(f.x,p.x,g.x,_.x),v=Math.min(f.y,p.y,g.y,_.y),x=Math.max(f.x,p.x,g.x,_.x),w=Math.max(f.y,p.y,g.y,_.y);c.x=y,c.y=v,c.width=x-y,c.height=w-v}roundFrame(u,c,f,p,g){if(!(u.width<=0||u.height<=0||f.width<=0||f.height<=0)){if(g){const{a:_,b:y,c:v,d:x}=g;if((Math.abs(y)>1e-4||Math.abs(v)>1e-4)&&(Math.abs(_)>1e-4||Math.abs(x)>1e-4))return}(g=g?Cv.copyFrom(g):Cv.identity()).translate(-f.x,-f.y).scale(p.width/f.width,p.height/f.height).translate(p.x,p.y),this.transformAABB(g,u),u.ceil(c),this.transformAABB(g.invert(),u)}}}hA.extension={type:Pe.RendererSystem,name:"filter"},We.add(hA);class $j{constructor(u){this.framebuffer=u,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=Er.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const Wj=new wt;class dA{constructor(u){this.renderer=u,this.managedFramebuffers=[],this.unknownFramebuffer=new bv(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const u=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new wt,this.hasMRT=!0,this.writeDepthTexture=!0,1===this.renderer.context.webGLVersion){let c=this.renderer.context.extensions.drawBuffers,f=this.renderer.context.extensions.depthTexture;Re.PREFER_ENV===Zo.WEBGL_LEGACY&&(c=null,f=null),c?u.drawBuffers=p=>c.drawBuffersWEBGL(p):(this.hasMRT=!1,u.drawBuffers=()=>{}),f||(this.writeDepthTexture=!1)}else this.msaaSamples=u.getInternalformatParameter(u.RENDERBUFFER,u.RGBA8,u.SAMPLES)}bind(u,c,f=0){const{gl:p}=this;if(u){const g=u.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(u);this.current!==u&&(this.current=u,p.bindFramebuffer(p.FRAMEBUFFER,g.framebuffer)),g.mipLevel!==f&&(u.dirtyId++,u.dirtyFormat++,g.mipLevel=f),g.dirtyId!==u.dirtyId&&(g.dirtyId=u.dirtyId,g.dirtyFormat!==u.dirtyFormat?(g.dirtyFormat=u.dirtyFormat,g.dirtySize=u.dirtySize,this.updateFramebuffer(u,f)):g.dirtySize!==u.dirtySize&&(g.dirtySize=u.dirtySize,this.resizeFramebuffer(u)));for(let _=0;_<u.colorTextures.length;_++){const y=u.colorTextures[_];this.renderer.texture.unbind(y.parentTextureArray||y)}if(u.depthTexture&&this.renderer.texture.unbind(u.depthTexture),c){const _=c.width>>f,v=_/c.width;this.setViewport(c.x*v,c.y*v,_,c.height>>f)}else this.setViewport(0,0,u.width>>f,u.height>>f)}else this.current&&(this.current=null,p.bindFramebuffer(p.FRAMEBUFFER,null)),c?this.setViewport(c.x,c.y,c.width,c.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(u,c,f,p){const g=this.viewport;u=Math.round(u),c=Math.round(c),f=Math.round(f),p=Math.round(p),(g.width!==f||g.height!==p||g.x!==u||g.y!==c)&&(g.x=u,g.y=c,g.width=f,g.height=p,this.gl.viewport(u,c,f,p))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(u,c,f,p,g=zy.COLOR|zy.DEPTH){const{gl:_}=this;_.clearColor(u,c,f,p),_.clear(g)}initFramebuffer(u){const{gl:c}=this,f=new $j(c.createFramebuffer());return f.multisample=this.detectSamples(u.multisample),u.glFramebuffers[this.CONTEXT_UID]=f,this.managedFramebuffers.push(u),u.disposeRunner.add(this),f}resizeFramebuffer(u){const{gl:c}=this,f=u.glFramebuffers[this.CONTEXT_UID];if(f.stencil){let _;c.bindRenderbuffer(c.RENDERBUFFER,f.stencil),_=1===this.renderer.context.webGLVersion?c.DEPTH_STENCIL:u.depth&&u.stencil?c.DEPTH24_STENCIL8:u.depth?c.DEPTH_COMPONENT24:c.STENCIL_INDEX8,f.msaaBuffer?c.renderbufferStorageMultisample(c.RENDERBUFFER,f.multisample,_,u.width,u.height):c.renderbufferStorage(c.RENDERBUFFER,_,u.width,u.height)}const p=u.colorTextures;let g=p.length;c.drawBuffers||(g=Math.min(g,1));for(let _=0;_<g;_++){const y=p[_],v=y.parentTextureArray||y;this.renderer.texture.bind(v,0),0===_&&f.msaaBuffer&&(c.bindRenderbuffer(c.RENDERBUFFER,f.msaaBuffer),c.renderbufferStorageMultisample(c.RENDERBUFFER,f.multisample,v._glTextures[this.CONTEXT_UID].internalFormat,u.width,u.height))}u.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(u.depthTexture,0)}updateFramebuffer(u,c){const{gl:f}=this,p=u.glFramebuffers[this.CONTEXT_UID],g=u.colorTextures;let _=g.length;f.drawBuffers||(_=Math.min(_,1)),p.multisample>1&&this.canMultisampleFramebuffer(u)?p.msaaBuffer=p.msaaBuffer||f.createRenderbuffer():p.msaaBuffer&&(f.deleteRenderbuffer(p.msaaBuffer),p.msaaBuffer=null,p.blitFramebuffer&&(p.blitFramebuffer.dispose(),p.blitFramebuffer=null));const y=[];for(let v=0;v<_;v++){const x=g[v],w=x.parentTextureArray||x;this.renderer.texture.bind(w,0),0===v&&p.msaaBuffer?(f.bindRenderbuffer(f.RENDERBUFFER,p.msaaBuffer),f.renderbufferStorageMultisample(f.RENDERBUFFER,p.multisample,w._glTextures[this.CONTEXT_UID].internalFormat,u.width,u.height),f.framebufferRenderbuffer(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.RENDERBUFFER,p.msaaBuffer)):(f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0+v,x.target,w._glTextures[this.CONTEXT_UID].texture,c),y.push(f.COLOR_ATTACHMENT0+v))}if(y.length>1&&f.drawBuffers(y),u.depthTexture&&this.writeDepthTexture){const v=u.depthTexture;this.renderer.texture.bind(v,0),f.framebufferTexture2D(f.FRAMEBUFFER,f.DEPTH_ATTACHMENT,f.TEXTURE_2D,v._glTextures[this.CONTEXT_UID].texture,c)}if(!u.stencil&&!u.depth||u.depthTexture&&this.writeDepthTexture)p.stencil&&(f.deleteRenderbuffer(p.stencil),p.stencil=null);else{let v,x;p.stencil=p.stencil||f.createRenderbuffer(),1===this.renderer.context.webGLVersion?(v=f.DEPTH_STENCIL_ATTACHMENT,x=f.DEPTH_STENCIL):u.depth&&u.stencil?(v=f.DEPTH_STENCIL_ATTACHMENT,x=f.DEPTH24_STENCIL8):u.depth?(v=f.DEPTH_ATTACHMENT,x=f.DEPTH_COMPONENT24):(v=f.STENCIL_ATTACHMENT,x=f.STENCIL_INDEX8),f.bindRenderbuffer(f.RENDERBUFFER,p.stencil),p.msaaBuffer?f.renderbufferStorageMultisample(f.RENDERBUFFER,p.multisample,x,u.width,u.height):f.renderbufferStorage(f.RENDERBUFFER,x,u.width,u.height),f.framebufferRenderbuffer(f.FRAMEBUFFER,v,f.RENDERBUFFER,p.stencil)}}canMultisampleFramebuffer(u){return 1!==this.renderer.context.webGLVersion&&u.colorTextures.length<=1&&!u.depthTexture}detectSamples(u){const{msaaSamples:c}=this;let f=Er.NONE;if(u<=1||null===c)return f;for(let p=0;p<c.length;p++)if(c[p]<=u){f=c[p];break}return 1===f&&(f=Er.NONE),f}blit(u,c,f){const{current:p,renderer:g,gl:_,CONTEXT_UID:y}=this;if(2!==g.context.webGLVersion||!p)return;const v=p.glFramebuffers[y];if(!v)return;if(!u){if(!v.msaaBuffer)return;const w=p.colorTextures[0];if(!w)return;v.blitFramebuffer||(v.blitFramebuffer=new bv(p.width,p.height),v.blitFramebuffer.addColorTexture(0,w)),(u=v.blitFramebuffer).colorTextures[0]!==w&&(u.colorTextures[0]=w,u.dirtyId++,u.dirtyFormat++),(u.width!==p.width||u.height!==p.height)&&(u.width=p.width,u.height=p.height,u.dirtyId++,u.dirtySize++)}c||((c=Wj).width=p.width,c.height=p.height),f||(f=c);const x=c.width===f.width&&c.height===f.height;this.bind(u),_.bindFramebuffer(_.READ_FRAMEBUFFER,v.framebuffer),_.blitFramebuffer(c.left,c.top,c.right,c.bottom,f.left,f.top,f.right,f.bottom,_.COLOR_BUFFER_BIT,x?_.NEAREST:_.LINEAR),_.bindFramebuffer(_.READ_FRAMEBUFFER,u.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(u,c){const f=u.glFramebuffers[this.CONTEXT_UID],p=this.gl;if(!f)return;delete u.glFramebuffers[this.CONTEXT_UID];const g=this.managedFramebuffers.indexOf(u);g>=0&&this.managedFramebuffers.splice(g,1),u.disposeRunner.remove(this),c||(p.deleteFramebuffer(f.framebuffer),f.msaaBuffer&&p.deleteRenderbuffer(f.msaaBuffer),f.stencil&&p.deleteRenderbuffer(f.stencil)),f.blitFramebuffer&&this.disposeFramebuffer(f.blitFramebuffer,c)}disposeAll(u){const c=this.managedFramebuffers;this.managedFramebuffers=[];for(let f=0;f<c.length;f++)this.disposeFramebuffer(c[f],u)}forceStencil(){const u=this.current;if(!u)return;const c=u.glFramebuffers[this.CONTEXT_UID];if(!c||c.stencil&&u.stencil)return;u.stencil=!0;const f=u.width,p=u.height,g=this.gl,_=c.stencil=g.createRenderbuffer();let y,v;g.bindRenderbuffer(g.RENDERBUFFER,_),1===this.renderer.context.webGLVersion?(y=g.DEPTH_STENCIL_ATTACHMENT,v=g.DEPTH_STENCIL):u.depth?(y=g.DEPTH_STENCIL_ATTACHMENT,v=g.DEPTH24_STENCIL8):(y=g.STENCIL_ATTACHMENT,v=g.STENCIL_INDEX8),c.msaaBuffer?g.renderbufferStorageMultisample(g.RENDERBUFFER,c.multisample,v,f,p):g.renderbufferStorage(g.RENDERBUFFER,v,f,p),g.framebufferRenderbuffer(g.FRAMEBUFFER,y,g.RENDERBUFFER,_)}reset(){this.current=this.unknownFramebuffer,this.viewport=new wt}destroy(){this.renderer=null}}dA.extension={type:Pe.RendererSystem,name:"framebuffer"},We.add(dA);const Ev={5126:4,5123:2,5121:1};class fA{constructor(u){this.renderer=u,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const u=this.gl=this.renderer.gl,c=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==c.webGLVersion){let f=this.renderer.context.extensions.vertexArrayObject;Re.PREFER_ENV===Zo.WEBGL_LEGACY&&(f=null),f?(u.createVertexArray=()=>f.createVertexArrayOES(),u.bindVertexArray=p=>f.bindVertexArrayOES(p),u.deleteVertexArray=p=>f.deleteVertexArrayOES(p)):(this.hasVao=!1,u.createVertexArray=()=>null,u.bindVertexArray=()=>null,u.deleteVertexArray=()=>null)}if(2!==c.webGLVersion){const f=u.getExtension("ANGLE_instanced_arrays");f?(u.vertexAttribDivisor=(p,g)=>f.vertexAttribDivisorANGLE(p,g),u.drawElementsInstanced=(p,g,_,y,v)=>f.drawElementsInstancedANGLE(p,g,_,y,v),u.drawArraysInstanced=(p,g,_,y)=>f.drawArraysInstancedANGLE(p,g,_,y)):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===c.webGLVersion||!!c.extensions.uint32ElementIndex}bind(u,c){c=c||this.renderer.shader.shader;const{gl:f}=this;let p=u.glVertexArrayObjects[this.CONTEXT_UID],g=!1;p||(this.managedGeometries[u.id]=u,u.disposeRunner.add(this),u.glVertexArrayObjects[this.CONTEXT_UID]=p={},g=!0);const _=p[c.program.id]||this.initGeometryVao(u,c,g);this._activeGeometry=u,this._activeVao!==_&&(this._activeVao=_,this.hasVao?f.bindVertexArray(_):this.activateVao(u,c.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const u=this._activeGeometry,c=this.renderer.buffer;for(let f=0;f<u.buffers.length;f++)c.update(u.buffers[f])}checkCompatibility(u,c){const f=u.attributes,p=c.attributeData;for(const g in p)if(!f[g])throw new Error(`shader and geometry incompatible, geometry missing the "${g}" attribute`)}getSignature(u,c){const f=u.attributes,p=c.attributeData,g=["g",u.id];for(const _ in f)p[_]&&g.push(_,p[_].location);return g.join("-")}initGeometryVao(u,c,f=!0){const p=this.gl,g=this.CONTEXT_UID,_=this.renderer.buffer,y=c.program;y.glPrograms[g]||this.renderer.shader.generateProgram(c),this.checkCompatibility(u,y);const v=this.getSignature(u,y),x=u.glVertexArrayObjects[this.CONTEXT_UID];let w=x[v];if(w)return x[y.id]=w,w;const C=u.buffers,E=u.attributes,T={},D={};for(const S in C)T[S]=0,D[S]=0;for(const S in E)!E[S].size&&y.attributeData[S]?E[S].size=y.attributeData[S].size:E[S].size||console.warn(`PIXI Geometry attribute '${S}' size cannot be determined (likely the bound shader does not have the attribute)`),T[E[S].buffer]+=E[S].size*Ev[E[S].type];for(const S in E){const A=E[S],I=A.size;void 0===A.stride&&(A.stride=T[A.buffer]===I*Ev[A.type]?0:T[A.buffer]),void 0===A.start&&(A.start=D[A.buffer],D[A.buffer]+=I*Ev[A.type])}w=p.createVertexArray(),p.bindVertexArray(w);for(let S=0;S<C.length;S++){const A=C[S];_.bind(A),f&&A._glBuffers[g].refCount++}return this.activateVao(u,y),x[y.id]=w,x[v]=w,p.bindVertexArray(null),_.unbind(qi.ARRAY_BUFFER),w}disposeGeometry(u,c){if(!this.managedGeometries[u.id])return;delete this.managedGeometries[u.id];const f=u.glVertexArrayObjects[this.CONTEXT_UID],p=this.gl,g=u.buffers,_=this.renderer?.buffer;if(u.disposeRunner.remove(this),f){if(_)for(let y=0;y<g.length;y++){const v=g[y]._glBuffers[this.CONTEXT_UID];v&&(v.refCount--,0===v.refCount&&!c&&_.dispose(g[y],c))}if(!c)for(const y in f)if("g"===y[0]){const v=f[y];this._activeVao===v&&this.unbind(),p.deleteVertexArray(v)}delete u.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(u){const c=Object.keys(this.managedGeometries);for(let f=0;f<c.length;f++)this.disposeGeometry(this.managedGeometries[c[f]],u)}activateVao(u,c){const f=this.gl,p=this.CONTEXT_UID,g=this.renderer.buffer,_=u.buffers,y=u.attributes;u.indexBuffer&&g.bind(u.indexBuffer);let v=null;for(const x in y){const w=y[x],C=_[w.buffer],E=C._glBuffers[p];if(c.attributeData[x]){v!==E&&(g.bind(C),v=E);const T=c.attributeData[x].location;if(f.enableVertexAttribArray(T),f.vertexAttribPointer(T,w.size,w.type||f.FLOAT,w.normalized,w.stride,w.start),w.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");f.vertexAttribDivisor(T,w.divisor)}}}}draw(u,c,f,p){const{gl:g}=this,_=this._activeGeometry;if(_.indexBuffer){const y=_.indexBuffer.data.BYTES_PER_ELEMENT,v=2===y?g.UNSIGNED_SHORT:g.UNSIGNED_INT;2===y||4===y&&this.canUseUInt32ElementIndex?_.instanced?g.drawElementsInstanced(u,c||_.indexBuffer.data.length,v,(f||0)*y,p||1):g.drawElements(u,c||_.indexBuffer.data.length,v,(f||0)*y):console.warn("unsupported index buffer type: uint32")}else _.instanced?g.drawArraysInstanced(u,f,c||_.getSize(),p||1):g.drawArrays(u,f,c||_.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}fA.extension={type:Pe.RendererSystem,name:"geometry"},We.add(fA);const pA=new Jt;class gA{constructor(u,c){this._texture=u,this.mapCoord=new Jt,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof c>"u"?.5:c,this.isSimple=!1}get texture(){return this._texture}set texture(u){this._texture=u,this._textureID=-1}multiplyUvs(u,c){void 0===c&&(c=u);const f=this.mapCoord;for(let p=0;p<u.length;p+=2){const g=u[p],_=u[p+1];c[p]=g*f.a+_*f.c+f.tx,c[p+1]=g*f.b+_*f.d+f.ty}return c}update(u){const c=this._texture;if(!c||!c.valid||!u&&this._textureID===c._updateID)return!1;this._textureID=c._updateID,this._updateID++;const f=c._uvs;this.mapCoord.set(f.x1-f.x0,f.y1-f.y0,f.x3-f.x0,f.y3-f.y0,f.x0,f.y0);const p=c.orig,g=c.trim;g&&(pA.set(p.width/g.width,0,0,p.height/g.height,-g.x/g.width,-g.y/g.height),this.mapCoord.append(pA));const _=c.baseTexture,y=this.uClampFrame,v=this.clampMargin/_.resolution,x=this.clampOffset;return y[0]=(c._frame.x+v+x)/_.width,y[1]=(c._frame.y+v+x)/_.height,y[2]=(c._frame.x+c._frame.width-v+x)/_.width,y[3]=(c._frame.y+c._frame.height-v+x)/_.height,this.uClampOffset[0]=x/_.realWidth,this.uClampOffset[1]=x/_.realHeight,this.isSimple=c._frame.width===_.width&&c._frame.height===_.height&&0===c.rotate,!0}}class Yj extends Ft{constructor(u,c,f){let p=null;"string"!=typeof u&&void 0===c&&void 0===f&&(p=u,u=void 0,c=void 0,f=void 0),super(u||"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n",c||"varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n",f),this.maskSprite=p,this.maskMatrix=new Jt}get maskSprite(){return this._maskSprite}set maskSprite(u){this._maskSprite=u,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(u,c,f,p){const g=this._maskSprite,_=g._texture;_.valid&&(_.uvMatrix||(_.uvMatrix=new gA(_,0)),_.uvMatrix.update(),this.uniforms.npmAlpha=_.baseTexture.alphaMode?0:1,this.uniforms.mask=_,this.uniforms.otherMatrix=u.calculateSpriteMatrix(this.maskMatrix,g).prepend(_.uvMatrix.mapCoord),this.uniforms.alpha=g.worldAlpha,this.uniforms.maskClamp=_.uvMatrix.uClampFrame,u.applyFilter(this,c,f,p))}}class Kj{constructor(u=null){this.type=Or.NONE,this.autoDetect=!0,this.maskObject=u||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=Ft.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(u){u?this._filters?this._filters[0]=u:this._filters=[u]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=Or.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(u){u?(this._stencilCounter=u._stencilCounter,this._scissorCounter=u._scissorCounter,this._scissorRect=u._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class mA{constructor(u){this.renderer=u,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(u){this.maskStack=u,this.renderer.scissor.setMaskStack(u),this.renderer.stencil.setMaskStack(u)}push(u,c){let f=c;if(!f.isMaskData){const g=this.maskDataPool.pop()||new Kj;g.pooled=!0,g.maskObject=c,f=g}const p=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null;if(f.copyCountersOrReset(p),f._colorMask=p?p._colorMask:15,f.autoDetect&&this.detect(f),f._target=u,f.type!==Or.SPRITE&&this.maskStack.push(f),f.enabled)switch(f.type){case Or.SCISSOR:this.renderer.scissor.push(f);break;case Or.STENCIL:this.renderer.stencil.push(f);break;case Or.SPRITE:f.copyCountersOrReset(null),this.pushSpriteMask(f);break;case Or.COLOR:this.pushColorMask(f)}f.type===Or.SPRITE&&this.maskStack.push(f)}pop(u){const c=this.maskStack.pop();if(c&&c._target===u){if(c.enabled)switch(c.type){case Or.SCISSOR:this.renderer.scissor.pop(c);break;case Or.STENCIL:this.renderer.stencil.pop(c.maskObject);break;case Or.SPRITE:this.popSpriteMask(c);break;case Or.COLOR:this.popColorMask(c)}if(c.reset(),c.pooled&&this.maskDataPool.push(c),0!==this.maskStack.length){const f=this.maskStack[this.maskStack.length-1];f.type===Or.SPRITE&&f._filters&&(f._filters[0].maskSprite=f.maskObject)}}}detect(u){const c=u.maskObject;u.type=c?c.isSprite?Or.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(u)?Or.SCISSOR:Or.STENCIL:Or.COLOR}pushSpriteMask(u){const{maskObject:c}=u,f=u._target;let p=u._filters;p||(p=this.alphaMaskPool[this.alphaMaskIndex],p||(p=this.alphaMaskPool[this.alphaMaskIndex]=[new Yj])),p[0].resolution=u.resolution,p[0].multisample=u.multisample,p[0].maskSprite=c;const g=f.filterArea;f.filterArea=c.getBounds(!0),this.renderer.filter.push(f,p),f.filterArea=g,u._filters||this.alphaMaskIndex++}popSpriteMask(u){this.renderer.filter.pop(),u._filters?u._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(u){const c=u._colorMask,f=u._colorMask=c&u.colorMask;f!==c&&this.renderer.gl.colorMask(0!=(1&f),0!=(2&f),0!=(4&f),0!=(8&f))}popColorMask(u){const f=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;f!==u._colorMask&&this.renderer.gl.colorMask(0!=(1&f),0!=(2&f),0!=(4&f),0!=(8&f))}destroy(){this.renderer=null}}mA.extension={type:Pe.RendererSystem,name:"mask"},We.add(mA);class _A{constructor(u){this.renderer=u,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(u){const{gl:c}=this.renderer,f=this.getStackLength();this.maskStack=u;const p=this.getStackLength();p!==f&&(0===p?c.disable(this.glConst):(c.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const yA=new Jt,vA=[],xA=class Gp extends _A{constructor(u){super(u),this.glConst=Re.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const u=this.maskStack[this.maskStack.length-1];return u?u._scissorCounter:0}calcScissorRect(u){if(u._scissorRectLocal)return;const c=u._scissorRect,{maskObject:f}=u,{renderer:p}=this,g=p.renderTexture,_=f.getBounds(!0,vA.pop()??new wt);this.roundFrameToPixels(_,g.current?g.current.resolution:p.resolution,g.sourceFrame,g.destinationFrame,p.projection.transform),c&&_.fit(c),u._scissorRectLocal=_}static isMatrixRotated(u){if(!u)return!1;const{a:c,b:f,c:p,d:g}=u;return(Math.abs(f)>1e-4||Math.abs(p)>1e-4)&&(Math.abs(c)>1e-4||Math.abs(g)>1e-4)}testScissor(u){const{maskObject:c}=u;if(!c.isFastRect||!c.isFastRect()||Gp.isMatrixRotated(c.worldTransform)||Gp.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(u);const f=u._scissorRectLocal;return f.width>0&&f.height>0}roundFrameToPixels(u,c,f,p,g){Gp.isMatrixRotated(g)||((g=g?yA.copyFrom(g):yA.identity()).translate(-f.x,-f.y).scale(p.width/f.width,p.height/f.height).translate(p.x,p.y),this.renderer.filter.transformAABB(g,u),u.fit(p),u.x=Math.round(u.x*c),u.y=Math.round(u.y*c),u.width=Math.round(u.width*c),u.height=Math.round(u.height*c))}push(u){u._scissorRectLocal||this.calcScissorRect(u);const{gl:c}=this.renderer;u._scissorRect||c.enable(c.SCISSOR_TEST),u._scissorCounter++,u._scissorRect=u._scissorRectLocal,this._useCurrent()}pop(u){const{gl:c}=this.renderer;u&&vA.push(u._scissorRectLocal),this.getStackLength()>0?this._useCurrent():c.disable(c.SCISSOR_TEST)}_useCurrent(){const u=this.maskStack[this.maskStack.length-1]._scissorRect;let c;c=this.renderer.renderTexture.current?u.y:this.renderer.height-u.height-u.y,this.renderer.gl.scissor(u.x,c,u.width,u.height)}};xA.extension={type:Pe.RendererSystem,name:"scissor"},We.add(xA);class bA extends _A{constructor(u){super(u),this.glConst=Re.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const u=this.maskStack[this.maskStack.length-1];return u?u._stencilCounter:0}push(u){const c=u.maskObject,{gl:f}=this.renderer,p=u._stencilCounter;0===p&&(this.renderer.framebuffer.forceStencil(),f.clearStencil(0),f.clear(f.STENCIL_BUFFER_BIT),f.enable(f.STENCIL_TEST)),u._stencilCounter++;const g=u._colorMask;0!==g&&(u._colorMask=0,f.colorMask(!1,!1,!1,!1)),f.stencilFunc(f.EQUAL,p,4294967295),f.stencilOp(f.KEEP,f.KEEP,f.INCR),c.renderable=!0,c.render(this.renderer),this.renderer.batch.flush(),c.renderable=!1,0!==g&&(u._colorMask=g,f.colorMask(0!=(1&g),0!=(2&g),0!=(4&g),0!=(8&g))),this._useCurrent()}pop(u){const c=this.renderer.gl;if(0===this.getStackLength())c.disable(c.STENCIL_TEST);else{const f=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null,p=f?f._colorMask:15;0!==p&&(f._colorMask=0,c.colorMask(!1,!1,!1,!1)),c.stencilOp(c.KEEP,c.KEEP,c.DECR),u.renderable=!0,u.render(this.renderer),this.renderer.batch.flush(),u.renderable=!1,0!==p&&(f._colorMask=p,c.colorMask(0!=(1&p),0!=(2&p),0!=(4&p),0!=(8&p))),this._useCurrent()}}_useCurrent(){const u=this.renderer.gl;u.stencilFunc(u.EQUAL,this.getStackLength(),4294967295),u.stencilOp(u.KEEP,u.KEEP,u.KEEP)}}bA.extension={type:Pe.RendererSystem,name:"stencil"},We.add(bA);class wA{constructor(u){this.renderer=u,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get:()=>(lt("7.0.0","renderer.plugins.extract has moved to renderer.extract"),u.extract)},prepare:{enumerable:!1,get:()=>(lt("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),u.prepare)},interaction:{enumerable:!1,get:()=>(lt("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),u.events)}})}init(){const u=this.rendererPlugins;for(const c in u)this.plugins[c]=new u[c](this.renderer)}destroy(){for(const u in this.plugins)this.plugins[u].destroy(),this.plugins[u]=null}}wA.extension={type:[Pe.RendererSystem,Pe.CanvasRendererSystem],name:"_plugin"},We.add(wA);class CA{constructor(u){this.renderer=u,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Jt,this.transform=null}update(u,c,f,p){this.destinationFrame=u||this.destinationFrame||this.defaultFrame,this.sourceFrame=c||this.sourceFrame||u,this.calculateProjection(this.destinationFrame,this.sourceFrame,f,p),this.transform&&this.projectionMatrix.append(this.transform);const g=this.renderer;g.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,g.globalUniforms.update(),g.shader.shader&&g.shader.syncUniformGroup(g.shader.shader.uniforms.globals)}calculateProjection(u,c,f,p){const g=this.projectionMatrix,_=p?-1:1;g.identity(),g.a=1/c.width*2,g.d=_*(1/c.height*2),g.tx=-1-c.x*g.a,g.ty=-_-c.y*g.d}setTransform(u){}destroy(){this.renderer=null}}CA.extension={type:Pe.RendererSystem,name:"projection"},We.add(CA);const Qj=new _v,EA=new wt;class TA{constructor(u){this.renderer=u,this._tempMatrix=new Jt}generateTexture(u,c){const{region:f,...p}=c||{},g=f?.copyTo(EA)||u.getLocalBounds(EA,!0),_=p.resolution||this.renderer.resolution;g.width=Math.max(g.width,1/_),g.height=Math.max(g.height,1/_),p.width=g.width,p.height=g.height,p.resolution=_,p.multisample??(p.multisample=this.renderer.multisample);const y=sa.create(p);this._tempMatrix.tx=-g.x,this._tempMatrix.ty=-g.y;const v=u.transform;return u.transform=Qj,this.renderer.render(u,{renderTexture:y,transform:this._tempMatrix,skipUpdateTransform:!!u.parent,blit:!0}),u.transform=v,y}destroy(){}}TA.extension={type:[Pe.RendererSystem,Pe.CanvasRendererSystem],name:"textureGenerator"},We.add(TA);const oa=new wt,Rc=new wt;class SA{constructor(u){this.renderer=u,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new wt,this.destinationFrame=new wt,this.viewportFrame=new wt}contextChange(){const u=this.renderer?.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(u&&u.alpha&&u.premultipliedAlpha)}bind(u=null,c,f){const p=this.renderer;let g,_,y;this.current=u,u?(g=u.baseTexture,y=g.resolution,c||(oa.width=u.frame.width,oa.height=u.frame.height,c=oa),f||(Rc.x=u.frame.x,Rc.y=u.frame.y,Rc.width=c.width,Rc.height=c.height,f=Rc),_=g.framebuffer):(y=p.resolution,c||(oa.width=p._view.screen.width,oa.height=p._view.screen.height,c=oa),f||((f=oa).width=c.width,f.height=c.height));const v=this.viewportFrame;v.x=f.x*y,v.y=f.y*y,v.width=f.width*y,v.height=f.height*y,u||(v.y=p.view.height-(v.y+v.height)),v.ceil(),this.renderer.framebuffer.bind(_,v),this.renderer.projection.update(f,c,y,!_),this.renderer.mask.setMaskStack(u?g.maskStack:this.defaultMaskStack),this.sourceFrame.copyFrom(c),this.destinationFrame.copyFrom(f)}clear(u,c){const p=Ut.shared.setValue(u||(this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor));(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&p.premultiply(p.alpha);const g=this.destinationFrame,_=this.current?this.current.baseTexture:this.renderer._view.screen,y=g.width!==_.width||g.height!==_.height;if(y){let{x:v,y:x,width:w,height:C}=this.viewportFrame;v=Math.round(v),x=Math.round(x),w=Math.round(w),C=Math.round(C),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(v,x,w,C)}this.renderer.framebuffer.clear(p.red,p.green,p.blue,p.alpha,c),y&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}SA.extension={type:Pe.RendererSystem,name:"renderTexture"},We.add(SA);class Jj{constructor(u,c){this.program=u,this.uniformData=c,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function DA(d,u,c){const f=d.createShader(u);return d.shaderSource(f,c),d.compileShader(f),f}function Tv(d){const u=new Array(d);for(let c=0;c<u.length;c++)u[c]=!1;return u}function AA(d,u){switch(d){case"float":case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"vec2":return new Float32Array(2*u);case"vec3":return new Float32Array(3*u);case"vec4":return new Float32Array(4*u);case"ivec2":return new Int32Array(2*u);case"ivec3":return new Int32Array(3*u);case"ivec4":return new Int32Array(4*u);case"uvec2":return new Uint32Array(2*u);case"uvec3":return new Uint32Array(3*u);case"uvec4":return new Uint32Array(4*u);case"bool":return!1;case"bvec2":return Tv(2*u);case"bvec3":return Tv(3*u);case"bvec4":return Tv(4*u);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}function IA(d,u){const c=d.getShaderSource(u).split("\n").map((x,w)=>`${w}: ${x}`),f=d.getShaderInfoLog(u),p=f.split("\n"),g={},_=p.map(x=>parseFloat(x.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(x=>!(!x||g[x]||(g[x]=!0,0))),y=[""];_.forEach(x=>{c[x-1]=`%c${c[x-1]}%c`,y.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const v=c.join("\n");y[0]=v,console.error(f),console.groupCollapsed("click to view full shader code"),console.warn(...y),console.groupEnd()}function iG(d,u,c,f,p){c.buffer.update(p)}const sG={float:"\n        data[offset] = v;\n    ",vec2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n    ",vec3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n    ",vec4:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n        data[offset+3] = v[3];\n    ",mat2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n\n        data[offset+4] = v[2];\n        data[offset+5] = v[3];\n    ",mat3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n        data[offset + 4] = v[3];\n        data[offset + 5] = v[4];\n        data[offset + 6] = v[5];\n\n        data[offset + 8] = v[6];\n        data[offset + 9] = v[7];\n        data[offset + 10] = v[8];\n    ",mat4:"\n        for(var i = 0; i < 16; i++)\n        {\n            data[offset + i] = v[i];\n        }\n    "},MA={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:32,mat3:48,mat4:64};let Fc,cG=0;const Bf={textureCount:0,uboCount:0};class PA{constructor(u){this.destroyed=!1,this.renderer=u,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=cG++}systemCheck(){if(!function uG(){if("boolean"==typeof Fc)return Fc;try{Fc=!0===new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")}catch{Fc=!1}return Fc}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(u){this.gl=u,this.reset()}bind(u,c){u.disposeRunner.add(this),u.uniforms.globals=this.renderer.globalUniforms;const f=u.program,p=f.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(u);return this.shader=u,this.program!==f&&(this.program=f,this.gl.useProgram(p.program)),c||(Bf.textureCount=0,Bf.uboCount=0,this.syncUniformGroup(u.uniformGroup,Bf)),p}setUniforms(u){const c=this.shader.program;c.syncUniforms(c.glPrograms[this.renderer.CONTEXT_UID].uniformData,u,this.renderer)}syncUniformGroup(u,c){const f=this.getGlProgram();(!u.static||u.dirtyId!==f.uniformDirtyGroups[u.id])&&(f.uniformDirtyGroups[u.id]=u.dirtyId,this.syncUniforms(u,f,c))}syncUniforms(u,c,f){(u.syncUniforms[this.shader.program.id]||this.createSyncGroups(u))(c.uniformData,u.uniforms,this.renderer,f)}createSyncGroups(u){const c=this.getSignature(u,this.shader.program.uniformData,"u");return this.cache[c]||(this.cache[c]=function Ij(d,u){const c=["\n        var v = null;\n        var cv = null;\n        var cu = null;\n        var t = 0;\n        var gl = renderer.gl;\n    "];for(const f in d.uniforms){const p=u[f];if(!p){!0===d.uniforms[f]?.group&&c.push(d.uniforms[f].ubo?`\n                        renderer.shader.syncUniformBufferGroup(uv.${f}, '${f}');\n                    `:`\n                        renderer.shader.syncUniformGroup(uv.${f}, syncData);\n                    `);continue}const g=d.uniforms[f];let _=!1;for(let y=0;y<Nl.length;y++)if(Nl[y].test(p,g)){c.push(Nl[y].code(f,g)),_=!0;break}if(!_){const y=(1!==p.size||p.isArray?Aj:Dj)[p.type].replace("location",`ud["${f}"].location`);c.push(`\n            cu = ud["${f}"];\n            cv = cu.value;\n            v = uv["${f}"];\n            ${y};`)}}return new Function("ud","uv","renderer","syncData",c.join("\n"))}(u,this.shader.program.uniformData)),u.syncUniforms[this.shader.program.id]=this.cache[c],u.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(u,c){const f=this.getGlProgram();if(!u.static||0!==u.dirtyId||!f.uniformGroups[u.id]){u.dirtyId=0;const p=f.uniformGroups[u.id]||this.createSyncBufferGroup(u,f,c);u.buffer.update(),p(f.uniformData,u.uniforms,this.renderer,Bf,u.buffer)}this.renderer.buffer.bindBufferBase(u.buffer,f.uniformBufferBindings[c])}createSyncBufferGroup(u,c,f){const{gl:p}=this.renderer;this.renderer.buffer.bind(u.buffer);const g=this.gl.getUniformBlockIndex(c.program,f);c.uniformBufferBindings[f]=this.shader.uniformBindCount,p.uniformBlockBinding(c.program,g,this.shader.uniformBindCount),this.shader.uniformBindCount++;const _=this.getSignature(u,this.shader.program.uniformData,"ubo");let y=this._uboCache[_];if(y||(y=this._uboCache[_]=function lG(d,u){if(!d.autoManage)return{size:0,syncFunc:iG};const c=function aG(d,u){const c=[];for(const f in d)u[f]&&c.push(u[f]);return c.sort((f,p)=>f.index-p.index),c}(d.uniforms,u),{uboElements:f,size:p}=function oG(d){const u=d.map(g=>({data:g,offset:0,dataLen:0,dirty:0}));let c=0,f=0,p=0;for(let g=0;g<u.length;g++){const _=u[g];if(c=MA[_.data.type],_.data.size>1&&(c=Math.max(c,16)*_.data.size),_.dataLen=c,f%c!=0&&f<16){const y=f%c%16;f+=y,p+=y}f+c>16?(p=16*Math.ceil(p/16),_.offset=p,p+=c,f=c):(_.offset=p,f+=c,p+=c)}return p=16*Math.ceil(p/16),{uboElements:u,size:p}}(c),g=["\n    var v = null;\n    var v2 = null;\n    var cv = null;\n    var t = 0;\n    var gl = renderer.gl\n    var index = 0;\n    var data = buffer.data;\n    "];for(let _=0;_<f.length;_++){const y=f[_],v=d.uniforms[y.data.name],x=y.data.name;let w=!1;for(let C=0;C<Nl.length;C++){const E=Nl[C];if(E.codeUbo&&E.test(y.data,v)){g.push(`offset = ${y.offset/4};`,Nl[C].codeUbo(y.data.name,v)),w=!0;break}}if(!w)if(y.data.size>1){const C=tA(y.data.type),E=Math.max(MA[y.data.type]/16,1),T=C/E;g.push(`\n                cv = ud.${x}.value;\n                v = uv.${x};\n                offset = ${y.offset/4};\n\n                t = 0;\n\n                for(var i=0; i < ${y.data.size*E}; i++)\n                {\n                    for(var j = 0; j < ${T}; j++)\n                    {\n                        data[offset++] = v[t++];\n                    }\n                    offset += ${(4-T%4)%4};\n                }\n\n                `)}else g.push(`\n                cv = ud.${x}.value;\n                v = uv.${x};\n                offset = ${y.offset/4};\n                ${sG[y.data.type]};\n                `)}return g.push("\n       renderer.buffer.update(buffer);\n    "),{size:p,syncFunc:new Function("ud","uv","renderer","syncData","buffer",g.join("\n"))}}(u,this.shader.program.uniformData)),u.autoManage){const v=new Float32Array(y.size/4);u.buffer.update(v)}return c.uniformGroups[u.id]=y.syncFunc,c.uniformGroups[u.id]}getSignature(u,c,f){const p=u.uniforms,g=[`${f}-`];for(const _ in p)g.push(_),c[_]&&g.push(c[_].type);return g.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(u){const f=u.program,p=function nG(d,u){const c=DA(d,d.VERTEX_SHADER,u.vertexSrc),f=DA(d,d.FRAGMENT_SHADER,u.fragmentSrc),p=d.createProgram();d.attachShader(p,c),d.attachShader(p,f);const g=u.extra?.transformFeedbackVaryings;if(g&&("function"!=typeof d.transformFeedbackVaryings?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):d.transformFeedbackVaryings(p,g.names,"separate"===g.bufferMode?d.SEPARATE_ATTRIBS:d.INTERLEAVED_ATTRIBS)),d.linkProgram(p),d.getProgramParameter(p,d.LINK_STATUS)||function rG(d,u,c,f){d.getProgramParameter(u,d.LINK_STATUS)||(d.getShaderParameter(c,d.COMPILE_STATUS)||IA(d,c),d.getShaderParameter(f,d.COMPILE_STATUS)||IA(d,f),console.error("PixiJS Error: Could not initialize shader."),""!==d.getProgramInfoLog(u)&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",d.getProgramInfoLog(u)))}(d,p,c,f),u.attributeData=function eG(d,u){const c={},f=u.getProgramParameter(d,u.ACTIVE_ATTRIBUTES);for(let p=0;p<f;p++){const g=u.getActiveAttrib(d,p);if(g.name.startsWith("gl_"))continue;const _=nA(u,g.type),y={type:_,name:g.name,size:tA(_),location:u.getAttribLocation(d,g.name)};c[g.name]=y}return c}(p,d),u.uniformData=function tG(d,u){const c={},f=u.getProgramParameter(d,u.ACTIVE_UNIFORMS);for(let p=0;p<f;p++){const g=u.getActiveUniform(d,p),_=g.name.replace(/\[.*?\]$/,""),y=!!g.name.match(/\[.*?\]$/),v=nA(u,g.type);c[_]={name:_,index:p,type:v,size:g.size,isArray:y,value:AA(v,g.size)}}return c}(p,d),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(u.vertexSrc)){const y=Object.keys(u.attributeData);y.sort((v,x)=>v>x?1:-1);for(let v=0;v<y.length;v++)u.attributeData[y[v]].location=v,d.bindAttribLocation(p,v,y[v]);d.linkProgram(p)}d.deleteShader(c),d.deleteShader(f);const _={};for(const y in u.uniformData){const v=u.uniformData[y];_[y]={location:d.getUniformLocation(p,y),value:AA(v.type,v.size)}}return new Jj(p,_)}(this.gl,f);return f.glPrograms[this.renderer.CONTEXT_UID]=p,p}reset(){this.program=null,this.shader=null}disposeShader(u){this.shader===u&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}PA.extension={type:Pe.RendererSystem,name:"shader"},We.add(PA);class Uf{constructor(u){this.renderer=u}run(u){const{renderer:c}=this;c.runners.init.emit(c.options),u.hello&&console.log(`PixiJS 7.3.2 - ${c.rendererLogId} - https://pixijs.com`),c.resize(c.screen.width,c.screen.height)}destroy(){}}Uf.defaultOptions={hello:!1},Uf.extension={type:[Pe.RendererSystem,Pe.CanvasRendererSystem],name:"startup"},We.add(Uf);const RA=class ox{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=at.NONE,this._blendEq=!1,this.map=[],this.map[0]=this.setBlend,this.map[1]=this.setOffset,this.map[2]=this.setCullFace,this.map[3]=this.setDepthTest,this.map[4]=this.setFrontFace,this.map[5]=this.setDepthMask,this.checks=[],this.defaultState=new Ki,this.defaultState.blend=!0}contextChange(u){this.gl=u,this.blendModes=function hG(d,u=[]){return u[at.NORMAL]=[d.ONE,d.ONE_MINUS_SRC_ALPHA],u[at.ADD]=[d.ONE,d.ONE],u[at.MULTIPLY]=[d.DST_COLOR,d.ONE_MINUS_SRC_ALPHA,d.ONE,d.ONE_MINUS_SRC_ALPHA],u[at.SCREEN]=[d.ONE,d.ONE_MINUS_SRC_COLOR,d.ONE,d.ONE_MINUS_SRC_ALPHA],u[at.OVERLAY]=[d.ONE,d.ONE_MINUS_SRC_ALPHA],u[at.DARKEN]=[d.ONE,d.ONE_MINUS_SRC_ALPHA],u[at.LIGHTEN]=[d.ONE,d.ONE_MINUS_SRC_ALPHA],u[at.COLOR_DODGE]=[d.ONE,d.ONE_MINUS_SRC_ALPHA],u[at.COLOR_BURN]=[d.ONE,d.ONE_MINUS_SRC_ALPHA],u[at.HARD_LIGHT]=[d.ONE,d.ONE_MINUS_SRC_ALPHA],u[at.SOFT_LIGHT]=[d.ONE,d.ONE_MINUS_SRC_ALPHA],u[at.DIFFERENCE]=[d.ONE,d.ONE_MINUS_SRC_ALPHA],u[at.EXCLUSION]=[d.ONE,d.ONE_MINUS_SRC_ALPHA],u[at.HUE]=[d.ONE,d.ONE_MINUS_SRC_ALPHA],u[at.SATURATION]=[d.ONE,d.ONE_MINUS_SRC_ALPHA],u[at.COLOR]=[d.ONE,d.ONE_MINUS_SRC_ALPHA],u[at.LUMINOSITY]=[d.ONE,d.ONE_MINUS_SRC_ALPHA],u[at.NONE]=[0,0],u[at.NORMAL_NPM]=[d.SRC_ALPHA,d.ONE_MINUS_SRC_ALPHA,d.ONE,d.ONE_MINUS_SRC_ALPHA],u[at.ADD_NPM]=[d.SRC_ALPHA,d.ONE,d.ONE,d.ONE],u[at.SCREEN_NPM]=[d.SRC_ALPHA,d.ONE_MINUS_SRC_COLOR,d.ONE,d.ONE_MINUS_SRC_ALPHA],u[at.SRC_IN]=[d.DST_ALPHA,d.ZERO],u[at.SRC_OUT]=[d.ONE_MINUS_DST_ALPHA,d.ZERO],u[at.SRC_ATOP]=[d.DST_ALPHA,d.ONE_MINUS_SRC_ALPHA],u[at.DST_OVER]=[d.ONE_MINUS_DST_ALPHA,d.ONE],u[at.DST_IN]=[d.ZERO,d.SRC_ALPHA],u[at.DST_OUT]=[d.ZERO,d.ONE_MINUS_SRC_ALPHA],u[at.DST_ATOP]=[d.ONE_MINUS_DST_ALPHA,d.SRC_ALPHA],u[at.XOR]=[d.ONE_MINUS_DST_ALPHA,d.ONE_MINUS_SRC_ALPHA],u[at.SUBTRACT]=[d.ONE,d.ONE,d.ONE,d.ONE,d.FUNC_REVERSE_SUBTRACT,d.FUNC_ADD],u}(u),this.set(this.defaultState),this.reset()}set(u){if(this.stateId!==(u=u||this.defaultState).data){let c=this.stateId^u.data,f=0;for(;c;)1&c&&this.map[f].call(this,!!(u.data&1<<f)),c>>=1,f++;this.stateId=u.data}for(let c=0;c<this.checks.length;c++)this.checks[c](this,u)}forceState(u){u=u||this.defaultState;for(let c=0;c<this.map.length;c++)this.map[c].call(this,!!(u.data&1<<c));for(let c=0;c<this.checks.length;c++)this.checks[c](this,u);this.stateId=u.data}setBlend(u){this.updateCheck(ox.checkBlendMode,u),this.gl[u?"enable":"disable"](this.gl.BLEND)}setOffset(u){this.updateCheck(ox.checkPolygonOffset,u),this.gl[u?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(u){this.gl[u?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(u){this.gl.depthMask(u)}setCullFace(u){this.gl[u?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(u){this.gl.frontFace(this.gl[u?"CW":"CCW"])}setBlendMode(u){if(u===this.blendMode)return;this.blendMode=u;const c=this.blendModes[u],f=this.gl;2===c.length?f.blendFunc(c[0],c[1]):f.blendFuncSeparate(c[0],c[1],c[2],c[3]),6===c.length?(this._blendEq=!0,f.blendEquationSeparate(c[4],c[5])):this._blendEq&&(this._blendEq=!1,f.blendEquationSeparate(f.FUNC_ADD,f.FUNC_ADD))}setPolygonOffset(u,c){this.gl.polygonOffset(u,c)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(u,c){const f=this.checks.indexOf(u);c&&-1===f?this.checks.push(u):!c&&-1!==f&&this.checks.splice(f,1)}static checkBlendMode(u,c){u.setBlendMode(c.blendMode)}static checkPolygonOffset(u,c){u.setPolygonOffset(1,c.polygonOffset)}destroy(){this.gl=null}};RA.extension={type:Pe.RendererSystem,name:"state"},We.add(RA);class vG extends Sc{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(u){this.addRunners(...u.runners);const c=(u.priority??[]).filter(p=>u.systems[p]),f=[...c,...Object.keys(u.systems).filter(p=>!c.includes(p))];for(const p of f)this.addSystem(u.systems[p],p)}addRunners(...u){u.forEach(c=>{this.runners[c]=new Si(c)})}addSystem(u,c){const f=new u(this);if(this[c])throw new Error(`Whoops! The name "${c}" is already in use`);this[c]=f,this._systemsHash[c]=f;for(const p in this.runners)this.runners[p].add(f);return this}emitWithCustomOptions(u,c){const f=Object.keys(this._systemsHash);u.items.forEach(p=>{const g=f.find(_=>this._systemsHash[_]===p);p[u.name](c[g])})}destroy(){Object.values(this.runners).forEach(u=>{u.destroy()}),this._systemsHash={}}}const Oc=class zp{constructor(u){this.renderer=u,this.count=0,this.checkCount=0,this.maxIdle=zp.defaultMaxIdle,this.checkCountMax=zp.defaultCheckCountMax,this.mode=zp.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==$y.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const u=this.renderer.texture,c=u.managedTextures;let f=!1;for(let p=0;p<c.length;p++){const g=c[p];g.resource&&this.count-g.touched>this.maxIdle&&(u.destroyTexture(g,!0),c[p]=null,f=!0)}if(f){let p=0;for(let g=0;g<c.length;g++)null!==c[g]&&(c[p++]=c[g]);c.length=p}}unload(u){const f=u._texture;f&&!f.framebuffer&&this.renderer.texture.destroyTexture(f);for(let p=u.children.length-1;p>=0;p--)this.unload(u.children[p])}destroy(){this.renderer=null}};Oc.defaultMode=$y.AUTO,Oc.defaultMaxIdle=3600,Oc.defaultCheckCountMax=600,Oc.extension={type:Pe.RendererSystem,name:"textureGC"};let aa=Oc;We.add(aa);class Sv{constructor(u){this.texture=u,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=Ze.UNSIGNED_BYTE,this.internalFormat=be.RGBA,this.samplerType=0}}class FA{constructor(u){this.renderer=u,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new vt,this.hasIntegerTextures=!1}contextChange(){const u=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=function bG(d){let u;return u="WebGL2RenderingContext"in globalThis&&d instanceof globalThis.WebGL2RenderingContext?{[Ze.UNSIGNED_BYTE]:{[be.RGBA]:d.RGBA8,[be.RGB]:d.RGB8,[be.RG]:d.RG8,[be.RED]:d.R8,[be.RGBA_INTEGER]:d.RGBA8UI,[be.RGB_INTEGER]:d.RGB8UI,[be.RG_INTEGER]:d.RG8UI,[be.RED_INTEGER]:d.R8UI,[be.ALPHA]:d.ALPHA,[be.LUMINANCE]:d.LUMINANCE,[be.LUMINANCE_ALPHA]:d.LUMINANCE_ALPHA},[Ze.BYTE]:{[be.RGBA]:d.RGBA8_SNORM,[be.RGB]:d.RGB8_SNORM,[be.RG]:d.RG8_SNORM,[be.RED]:d.R8_SNORM,[be.RGBA_INTEGER]:d.RGBA8I,[be.RGB_INTEGER]:d.RGB8I,[be.RG_INTEGER]:d.RG8I,[be.RED_INTEGER]:d.R8I},[Ze.UNSIGNED_SHORT]:{[be.RGBA_INTEGER]:d.RGBA16UI,[be.RGB_INTEGER]:d.RGB16UI,[be.RG_INTEGER]:d.RG16UI,[be.RED_INTEGER]:d.R16UI,[be.DEPTH_COMPONENT]:d.DEPTH_COMPONENT16},[Ze.SHORT]:{[be.RGBA_INTEGER]:d.RGBA16I,[be.RGB_INTEGER]:d.RGB16I,[be.RG_INTEGER]:d.RG16I,[be.RED_INTEGER]:d.R16I},[Ze.UNSIGNED_INT]:{[be.RGBA_INTEGER]:d.RGBA32UI,[be.RGB_INTEGER]:d.RGB32UI,[be.RG_INTEGER]:d.RG32UI,[be.RED_INTEGER]:d.R32UI,[be.DEPTH_COMPONENT]:d.DEPTH_COMPONENT24},[Ze.INT]:{[be.RGBA_INTEGER]:d.RGBA32I,[be.RGB_INTEGER]:d.RGB32I,[be.RG_INTEGER]:d.RG32I,[be.RED_INTEGER]:d.R32I},[Ze.FLOAT]:{[be.RGBA]:d.RGBA32F,[be.RGB]:d.RGB32F,[be.RG]:d.RG32F,[be.RED]:d.R32F,[be.DEPTH_COMPONENT]:d.DEPTH_COMPONENT32F},[Ze.HALF_FLOAT]:{[be.RGBA]:d.RGBA16F,[be.RGB]:d.RGB16F,[be.RG]:d.RG16F,[be.RED]:d.R16F},[Ze.UNSIGNED_SHORT_5_6_5]:{[be.RGB]:d.RGB565},[Ze.UNSIGNED_SHORT_4_4_4_4]:{[be.RGBA]:d.RGBA4},[Ze.UNSIGNED_SHORT_5_5_5_1]:{[be.RGBA]:d.RGB5_A1},[Ze.UNSIGNED_INT_2_10_10_10_REV]:{[be.RGBA]:d.RGB10_A2,[be.RGBA_INTEGER]:d.RGB10_A2UI},[Ze.UNSIGNED_INT_10F_11F_11F_REV]:{[be.RGB]:d.R11F_G11F_B10F},[Ze.UNSIGNED_INT_5_9_9_9_REV]:{[be.RGB]:d.RGB9_E5},[Ze.UNSIGNED_INT_24_8]:{[be.DEPTH_STENCIL]:d.DEPTH24_STENCIL8},[Ze.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[be.DEPTH_STENCIL]:d.DEPTH32F_STENCIL8}}:{[Ze.UNSIGNED_BYTE]:{[be.RGBA]:d.RGBA,[be.RGB]:d.RGB,[be.ALPHA]:d.ALPHA,[be.LUMINANCE]:d.LUMINANCE,[be.LUMINANCE_ALPHA]:d.LUMINANCE_ALPHA},[Ze.UNSIGNED_SHORT_5_6_5]:{[be.RGB]:d.RGB},[Ze.UNSIGNED_SHORT_4_4_4_4]:{[be.RGBA]:d.RGBA},[Ze.UNSIGNED_SHORT_5_5_5_1]:{[be.RGBA]:d.RGBA}},u}(u),this.samplerTypes=function xG(d){let u;return u="WebGL2RenderingContext"in globalThis&&d instanceof globalThis.WebGL2RenderingContext?{[d.RGB]:Be.FLOAT,[d.RGBA]:Be.FLOAT,[d.ALPHA]:Be.FLOAT,[d.LUMINANCE]:Be.FLOAT,[d.LUMINANCE_ALPHA]:Be.FLOAT,[d.R8]:Be.FLOAT,[d.R8_SNORM]:Be.FLOAT,[d.RG8]:Be.FLOAT,[d.RG8_SNORM]:Be.FLOAT,[d.RGB8]:Be.FLOAT,[d.RGB8_SNORM]:Be.FLOAT,[d.RGB565]:Be.FLOAT,[d.RGBA4]:Be.FLOAT,[d.RGB5_A1]:Be.FLOAT,[d.RGBA8]:Be.FLOAT,[d.RGBA8_SNORM]:Be.FLOAT,[d.RGB10_A2]:Be.FLOAT,[d.RGB10_A2UI]:Be.FLOAT,[d.SRGB8]:Be.FLOAT,[d.SRGB8_ALPHA8]:Be.FLOAT,[d.R16F]:Be.FLOAT,[d.RG16F]:Be.FLOAT,[d.RGB16F]:Be.FLOAT,[d.RGBA16F]:Be.FLOAT,[d.R32F]:Be.FLOAT,[d.RG32F]:Be.FLOAT,[d.RGB32F]:Be.FLOAT,[d.RGBA32F]:Be.FLOAT,[d.R11F_G11F_B10F]:Be.FLOAT,[d.RGB9_E5]:Be.FLOAT,[d.R8I]:Be.INT,[d.R8UI]:Be.UINT,[d.R16I]:Be.INT,[d.R16UI]:Be.UINT,[d.R32I]:Be.INT,[d.R32UI]:Be.UINT,[d.RG8I]:Be.INT,[d.RG8UI]:Be.UINT,[d.RG16I]:Be.INT,[d.RG16UI]:Be.UINT,[d.RG32I]:Be.INT,[d.RG32UI]:Be.UINT,[d.RGB8I]:Be.INT,[d.RGB8UI]:Be.UINT,[d.RGB16I]:Be.INT,[d.RGB16UI]:Be.UINT,[d.RGB32I]:Be.INT,[d.RGB32UI]:Be.UINT,[d.RGBA8I]:Be.INT,[d.RGBA8UI]:Be.UINT,[d.RGBA16I]:Be.INT,[d.RGBA16UI]:Be.UINT,[d.RGBA32I]:Be.INT,[d.RGBA32UI]:Be.UINT,[d.DEPTH_COMPONENT16]:Be.FLOAT,[d.DEPTH_COMPONENT24]:Be.FLOAT,[d.DEPTH_COMPONENT32F]:Be.FLOAT,[d.DEPTH_STENCIL]:Be.FLOAT,[d.DEPTH24_STENCIL8]:Be.FLOAT,[d.DEPTH32F_STENCIL8]:Be.FLOAT}:{[d.RGB]:Be.FLOAT,[d.RGBA]:Be.FLOAT,[d.ALPHA]:Be.FLOAT,[d.LUMINANCE]:Be.FLOAT,[d.LUMINANCE_ALPHA]:Be.FLOAT,[d.DEPTH_STENCIL]:Be.FLOAT},u}(u);const c=u.getParameter(u.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=c;for(let p=0;p<c;p++)this.boundTextures[p]=null;this.emptyTextures={};const f=new Sv(u.createTexture());u.bindTexture(u.TEXTURE_2D,f.texture),u.texImage2D(u.TEXTURE_2D,0,u.RGBA,1,1,0,u.RGBA,u.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[u.TEXTURE_2D]=f,this.emptyTextures[u.TEXTURE_CUBE_MAP]=new Sv(u.createTexture()),u.bindTexture(u.TEXTURE_CUBE_MAP,this.emptyTextures[u.TEXTURE_CUBE_MAP].texture);for(let p=0;p<6;p++)u.texImage2D(u.TEXTURE_CUBE_MAP_POSITIVE_X+p,0,u.RGBA,1,1,0,u.RGBA,u.UNSIGNED_BYTE,null);u.texParameteri(u.TEXTURE_CUBE_MAP,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_CUBE_MAP,u.TEXTURE_MIN_FILTER,u.LINEAR);for(let p=0;p<this.boundTextures.length;p++)this.bind(null,p)}bind(u,c=0){const{gl:f}=this;if(u=u?.castToBaseTexture(),u?.valid&&!u.parentTextureArray){u.touched=this.renderer.textureGC.count;const p=u._glTextures[this.CONTEXT_UID]||this.initTexture(u);this.boundTextures[c]!==u&&(this.currentLocation!==c&&(this.currentLocation=c,f.activeTexture(f.TEXTURE0+c)),f.bindTexture(u.target,p.texture)),p.dirtyId!==u.dirtyId?(this.currentLocation!==c&&(this.currentLocation=c,f.activeTexture(f.TEXTURE0+c)),this.updateTexture(u)):p.dirtyStyleId!==u.dirtyStyleId&&this.updateTextureStyle(u),this.boundTextures[c]=u}else this.currentLocation!==c&&(this.currentLocation=c,f.activeTexture(f.TEXTURE0+c)),f.bindTexture(f.TEXTURE_2D,this.emptyTextures[f.TEXTURE_2D].texture),this.boundTextures[c]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let u=0;u<this.boundTextures.length;u++)this.boundTextures[u]=this.unknownTexture}unbind(u){const{gl:c,boundTextures:f}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let p=0;p<f.length;p++)f[p]===this.unknownTexture&&this.bind(null,p)}for(let p=0;p<f.length;p++)f[p]===u&&(this.currentLocation!==p&&(c.activeTexture(c.TEXTURE0+p),this.currentLocation=p),c.bindTexture(u.target,this.emptyTextures[u.target].texture),f[p]=null)}ensureSamplerType(u){const{boundTextures:c,hasIntegerTextures:f,CONTEXT_UID:p}=this;if(f)for(let g=u-1;g>=0;--g){const _=c[g];_&&_._glTextures[p].samplerType!==Be.FLOAT&&this.renderer.texture.unbind(_)}}initTexture(u){const c=new Sv(this.gl.createTexture());return c.dirtyId=-1,u._glTextures[this.CONTEXT_UID]=c,this.managedTextures.push(u),u.on("dispose",this.destroyTexture,this),c}initTextureType(u,c){c.internalFormat=this.internalFormats[u.type]?.[u.format]??u.format,c.samplerType=this.samplerTypes[c.internalFormat]??Be.FLOAT,c.type=2===this.webGLVersion&&u.type===Ze.HALF_FLOAT?this.gl.HALF_FLOAT:u.type}updateTexture(u){const c=u._glTextures[this.CONTEXT_UID];if(!c)return;const f=this.renderer;if(this.initTextureType(u,c),u.resource?.upload(f,u,c))c.samplerType!==Be.FLOAT&&(this.hasIntegerTextures=!0);else{const p=u.realWidth,g=u.realHeight,_=f.gl;(c.width!==p||c.height!==g||c.dirtyId<0)&&(c.width=p,c.height=g,_.texImage2D(u.target,0,c.internalFormat,p,g,0,u.format,c.type,null))}u.dirtyStyleId!==c.dirtyStyleId&&this.updateTextureStyle(u),c.dirtyId=u.dirtyId}destroyTexture(u,c){const{gl:f}=this;if((u=u.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(u),f.deleteTexture(u._glTextures[this.CONTEXT_UID].texture),u.off("dispose",this.destroyTexture,this),delete u._glTextures[this.CONTEXT_UID],!c)){const p=this.managedTextures.indexOf(u);-1!==p&&Ol(this.managedTextures,p,1)}}updateTextureStyle(u){const c=u._glTextures[this.CONTEXT_UID];c&&(c.mipmap=!!(u.mipmap!==Wi.POW2&&2===this.webGLVersion||u.isPowerOfTwo)&&u.mipmap>=1,c.wrapMode=2===this.webGLVersion||u.isPowerOfTwo?u.wrapMode:so.CLAMP,u.resource?.style(this.renderer,u,c)||this.setStyle(u,c),c.dirtyStyleId=u.dirtyStyleId)}setStyle(u,c){const f=this.gl;if(c.mipmap&&u.mipmap!==Wi.ON_MANUAL&&f.generateMipmap(u.target),f.texParameteri(u.target,f.TEXTURE_WRAP_S,c.wrapMode),f.texParameteri(u.target,f.TEXTURE_WRAP_T,c.wrapMode),c.mipmap){f.texParameteri(u.target,f.TEXTURE_MIN_FILTER,u.scaleMode===$i.LINEAR?f.LINEAR_MIPMAP_LINEAR:f.NEAREST_MIPMAP_NEAREST);const p=this.renderer.context.extensions.anisotropicFiltering;if(p&&u.anisotropicLevel>0&&u.scaleMode===$i.LINEAR){const g=Math.min(u.anisotropicLevel,f.getParameter(p.MAX_TEXTURE_MAX_ANISOTROPY_EXT));f.texParameterf(u.target,p.TEXTURE_MAX_ANISOTROPY_EXT,g)}}else f.texParameteri(u.target,f.TEXTURE_MIN_FILTER,u.scaleMode===$i.LINEAR?f.LINEAR:f.NEAREST);f.texParameteri(u.target,f.TEXTURE_MAG_FILTER,u.scaleMode===$i.LINEAR?f.LINEAR:f.NEAREST)}destroy(){this.renderer=null}}FA.extension={type:Pe.RendererSystem,name:"texture"},We.add(FA);class OA{constructor(u){this.renderer=u}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(u){const{gl:c,CONTEXT_UID:f}=this,p=u._glTransformFeedbacks[f]||this.createGLTransformFeedback(u);c.bindTransformFeedback(c.TRANSFORM_FEEDBACK,p)}unbind(){const{gl:u}=this;u.bindTransformFeedback(u.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(u,c){const{gl:f,renderer:p}=this;c&&p.shader.bind(c),f.beginTransformFeedback(u)}endTransformFeedback(){const{gl:u}=this;u.endTransformFeedback()}createGLTransformFeedback(u){const{gl:c,renderer:f,CONTEXT_UID:p}=this,g=c.createTransformFeedback();u._glTransformFeedbacks[p]=g,c.bindTransformFeedback(c.TRANSFORM_FEEDBACK,g);for(let _=0;_<u.buffers.length;_++){const y=u.buffers[_];y&&(f.buffer.update(y),y._glBuffers[p].refCount++,c.bindBufferBase(c.TRANSFORM_FEEDBACK_BUFFER,_,y._glBuffers[p].buffer||null))}return c.bindTransformFeedback(c.TRANSFORM_FEEDBACK,null),u.disposeRunner.add(this),g}disposeTransformFeedback(u,c){const f=u._glTransformFeedbacks[this.CONTEXT_UID],p=this.gl;u.disposeRunner.remove(this);const g=this.renderer.buffer;if(g)for(let _=0;_<u.buffers.length;_++){const y=u.buffers[_];if(!y)continue;const v=y._glBuffers[this.CONTEXT_UID];v&&(v.refCount--,0===v.refCount&&!c&&g.dispose(y,c))}f&&(c||p.deleteTransformFeedback(f),delete u._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}OA.extension={type:Pe.RendererSystem,name:"transformFeedback"},We.add(OA);class Vf{constructor(u){this.renderer=u}init(u){this.screen=new wt(0,0,u.width,u.height),this.element=u.view||Re.ADAPTER.createCanvas(),this.resolution=u.resolution||Re.RESOLUTION,this.autoDensity=!!u.autoDensity}resizeView(u,c){this.element.width=Math.round(u*this.resolution),this.element.height=Math.round(c*this.resolution);const f=this.element.width/this.resolution,p=this.element.height/this.resolution;this.screen.width=f,this.screen.height=p,this.autoDensity&&(this.element.style.width=`${f}px`,this.element.style.height=`${p}px`),this.renderer.emit("resize",f,p),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(u){u&&this.element.parentNode?.removeChild(this.element),this.renderer=null,this.element=null,this.screen=null}}Vf.defaultOptions={width:800,height:600,resolution:void 0,autoDensity:!1},Vf.extension={type:[Pe.RendererSystem,Pe.CanvasRendererSystem],name:"_view"},We.add(Vf),Re.PREFER_ENV=Zo.WEBGL2,Re.STRICT_TEXTURE_CACHE=!1,Re.RENDER_OPTIONS={...Nf.defaultOptions,...Of.defaultOptions,...Vf.defaultOptions,...Uf.defaultOptions},Object.defineProperties(Re,{WRAP_MODE:{get:()=>vt.defaultOptions.wrapMode,set(d){lt("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),vt.defaultOptions.wrapMode=d}},SCALE_MODE:{get:()=>vt.defaultOptions.scaleMode,set(d){lt("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),vt.defaultOptions.scaleMode=d}},MIPMAP_TEXTURES:{get:()=>vt.defaultOptions.mipmap,set(d){lt("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),vt.defaultOptions.mipmap=d}},ANISOTROPIC_LEVEL:{get:()=>vt.defaultOptions.anisotropicLevel,set(d){lt("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),vt.defaultOptions.anisotropicLevel=d}},FILTER_RESOLUTION:{get:()=>(lt("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),Ft.defaultResolution),set(d){Ft.defaultResolution=d}},FILTER_MULTISAMPLE:{get:()=>(lt("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),Ft.defaultMultisample),set(d){Ft.defaultMultisample=d}},SPRITE_MAX_TEXTURES:{get:()=>ia.defaultMaxTextures,set(d){lt("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),ia.defaultMaxTextures=d}},SPRITE_BATCH_SIZE:{get:()=>ia.defaultBatchSize,set(d){lt("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),ia.defaultBatchSize=d}},CAN_UPLOAD_SAME_BUFFER:{get:()=>ia.canUploadSameBuffer,set(d){lt("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),ia.canUploadSameBuffer=d}},GC_MODE:{get:()=>aa.defaultMode,set(d){lt("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),aa.defaultMode=d}},GC_MAX_IDLE:{get:()=>aa.defaultMaxIdle,set(d){lt("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),aa.defaultMaxIdle=d}},GC_MAX_CHECK_COUNT:{get:()=>aa.defaultCheckCountMax,set(d){lt("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),aa.defaultCheckCountMax=d}},PRECISION_VERTEX:{get:()=>Is.defaultVertexPrecision,set(d){lt("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),Is.defaultVertexPrecision=d}},PRECISION_FRAGMENT:{get:()=>Is.defaultFragmentPrecision,set(d){lt("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),Is.defaultFragmentPrecision=d}}});var la=(d=>(d[d.INTERACTION=50]="INTERACTION",d[d.HIGH=25]="HIGH",d[d.NORMAL=0]="NORMAL",d[d.LOW=-25]="LOW",d[d.UTILITY=-50]="UTILITY",d))(la||{});class Dv{constructor(u,c=null,f=0,p=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=u,this.context=c,this.priority=f,this.once=p}match(u,c=null){return this.fn===u&&this.context===c}emit(u){this.fn&&(this.context?this.fn.call(this.context,u):this.fn(u));const c=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),c}connect(u){this.previous=u,u.next&&(u.next.previous=this),this.next=u.next,u.next=this}destroy(u=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const c=this.next;return this.next=u?null:c,this.previous=null,c}}const NA=class zn{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Dv(null,null,1/0),this.deltaMS=1/zn.targetFPMS,this.elapsedMS=1/zn.targetFPMS,this._tick=u=>{this._requestId=null,this.started&&(this.update(u),this.started&&null===this._requestId&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(u,c,f=la.NORMAL){return this._addListener(new Dv(u,c,f))}addOnce(u,c,f=la.NORMAL){return this._addListener(new Dv(u,c,f,!0))}_addListener(u){let c=this._head.next,f=this._head;if(c){for(;c;){if(u.priority>c.priority){u.connect(f);break}f=c,c=c.next}u.previous||u.connect(f)}else u.connect(f);return this._startIfPossible(),this}remove(u,c){let f=this._head.next;for(;f;)f=f.match(u,c)?f.destroy():f.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let u=0,c=this._head;for(;c=c.next;)u++;return u}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let u=this._head.next;for(;u;)u=u.destroy(!0);this._head.destroy(),this._head=null}}update(u=performance.now()){let c;if(u>this.lastTime){if(c=this.elapsedMS=u-this.lastTime,c>this._maxElapsedMS&&(c=this._maxElapsedMS),c*=this.speed,this._minElapsedMS){const g=u-this._lastFrame|0;if(g<this._minElapsedMS)return;this._lastFrame=u-g%this._minElapsedMS}this.deltaMS=c,this.deltaTime=this.deltaMS*zn.targetFPMS;const f=this._head;let p=f.next;for(;p;)p=p.emit(this.deltaTime);f.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=u}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(u){const c=Math.min(this.maxFPS,u),f=Math.min(Math.max(0,c)/1e3,zn.targetFPMS);this._maxElapsedMS=1/f}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(u){if(0===u)this._minElapsedMS=0;else{const c=Math.max(this.minFPS,u);this._minElapsedMS=1/(c/1e3)}}static get shared(){if(!zn._shared){const u=zn._shared=new zn;u.autoStart=!0,u._protected=!0}return zn._shared}static get system(){if(!zn._system){const u=zn._system=new zn;u.autoStart=!0,u._protected=!0}return zn._system}};NA.targetFPMS=.06;let kn=NA;Object.defineProperties(Re,{TARGET_FPMS:{get:()=>kn.targetFPMS,set(d){lt("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),kn.targetFPMS=d}}});class LA{static init(u){u=Object.assign({autoStart:!0,sharedTicker:!1},u),Object.defineProperty(this,"ticker",{set(c){this._ticker&&this._ticker.remove(this.render,this),this._ticker=c,c&&c.add(this.render,this,la.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=u.sharedTicker?kn.shared:new kn,u.autoStart&&this.start()}static destroy(){if(this._ticker){const u=this._ticker;this.ticker=null,u.destroy()}}}LA.extension=Pe.Application,We.add(LA);const kA=[];We.handleByList(Pe.Renderer,kA);const BA="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n";class UA{constructor(u){this.renderer=u}contextChange(u){let c;if(1===this.renderer.context.webGLVersion){const f=u.getParameter(u.FRAMEBUFFER_BINDING);u.bindFramebuffer(u.FRAMEBUFFER,null),c=u.getParameter(u.SAMPLES),u.bindFramebuffer(u.FRAMEBUFFER,f)}else{const f=u.getParameter(u.DRAW_FRAMEBUFFER_BINDING);u.bindFramebuffer(u.DRAW_FRAMEBUFFER,null),c=u.getParameter(u.SAMPLES),u.bindFramebuffer(u.DRAW_FRAMEBUFFER,f)}this.multisample=c>=Er.HIGH?Er.HIGH:c>=Er.MEDIUM?Er.MEDIUM:c>=Er.LOW?Er.LOW:Er.NONE}destroy(){}}UA.extension={type:Pe.RendererSystem,name:"_multisample"},We.add(UA);class SG{constructor(u){this.buffer=u||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class VA{constructor(u){this.renderer=u,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(u){const{gl:c,CONTEXT_UID:f}=this,p=u._glBuffers[f]||this.createGLBuffer(u);c.bindBuffer(u.type,p.buffer)}unbind(u){const{gl:c}=this;c.bindBuffer(u,null)}bindBufferBase(u,c){const{gl:f,CONTEXT_UID:p}=this;if(this.boundBufferBases[c]!==u){const g=u._glBuffers[p]||this.createGLBuffer(u);this.boundBufferBases[c]=u,f.bindBufferBase(f.UNIFORM_BUFFER,c,g.buffer)}}bindBufferRange(u,c,f){const{gl:p,CONTEXT_UID:g}=this;f=f||0;const _=u._glBuffers[g]||this.createGLBuffer(u);p.bindBufferRange(p.UNIFORM_BUFFER,c||0,_.buffer,256*f,256)}update(u){const{gl:c,CONTEXT_UID:f}=this,p=u._glBuffers[f]||this.createGLBuffer(u);if(u._updateID!==p.updateID)if(p.updateID=u._updateID,c.bindBuffer(u.type,p.buffer),p.byteLength>=u.data.byteLength)c.bufferSubData(u.type,0,u.data);else{const g=u.static?c.STATIC_DRAW:c.DYNAMIC_DRAW;p.byteLength=u.data.byteLength,c.bufferData(u.type,u.data,g)}}dispose(u,c){if(!this.managedBuffers[u.id])return;delete this.managedBuffers[u.id];const f=u._glBuffers[this.CONTEXT_UID],p=this.gl;u.disposeRunner.remove(this),f&&(c||p.deleteBuffer(f.buffer),delete u._glBuffers[this.CONTEXT_UID])}disposeAll(u){const c=Object.keys(this.managedBuffers);for(let f=0;f<c.length;f++)this.dispose(this.managedBuffers[c[f]],u)}createGLBuffer(u){const{CONTEXT_UID:c,gl:f}=this;return u._glBuffers[c]=new SG(f.createBuffer()),this.managedBuffers[u.id]=u,u.disposeRunner.add(this),u._glBuffers[c]}}VA.extension={type:Pe.RendererSystem,name:"buffer"},We.add(VA);class HA{constructor(u){this.renderer=u}render(u,c){const f=this.renderer;let p,g,_,y;if(c&&(p=c.renderTexture,g=c.clear,_=c.transform,y=c.skipUpdateTransform),this.renderingToScreen=!p,f.runners.prerender.emit(),f.emit("prerender"),f.projection.transform=_,!f.context.isLost){if(p||(this.lastObjectRendered=u),!y){const v=u.enableTempParent();u.updateTransform(),u.disableTempParent(v)}f.renderTexture.bind(p),f.batch.currentRenderer.start(),(g??f.background.clearBeforeRender)&&f.renderTexture.clear(),u.render(f),f.batch.currentRenderer.flush(),p&&(c.blit&&f.framebuffer.blit(),p.baseTexture.update()),f.runners.postrender.emit(),f.projection.transform=null,f.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}HA.extension={type:Pe.RendererSystem,name:"objectRenderer"},We.add(HA);const Hf=class ax extends vG{constructor(u){super(),this.type=mD.WEBGL,u=Object.assign({},Re.RENDER_OPTIONS,u),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new Di({projectionMatrix:new Jt},!0),this.setup({runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:ax.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]}),"useContextAlpha"in u&&(lt("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),u.premultipliedAlpha=u.useContextAlpha&&"notMultiplied"!==u.useContextAlpha,u.backgroundAlpha=!1===u.useContextAlpha?1:u.backgroundAlpha),this._plugin.rendererPlugins=ax.__plugins,this.options=u,this.startup.run(this.options)}static test(u){return!u?.forceCanvas&&function YH(){return typeof Zy>"u"&&(Zy=function(){const d={stencil:!0,failIfMajorPerformanceCaveat:Re.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!Re.ADAPTER.getWebGLRenderingContext())return!1;const u=Re.ADAPTER.createCanvas();let c=u.getContext("webgl",d)||u.getContext("experimental-webgl",d);const f=!!c?.getContextAttributes()?.stencil;if(c){const p=c.getExtension("WEBGL_lose_context");p&&p.loseContext()}return c=null,f}catch{return!1}}()),Zy}()}render(u,c){this.objectRenderer.render(u,c)}resize(u,c){this._view.resizeView(u,c)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(u=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:u}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(u){this._view.resolution=u,this.runners.resolutionChange.emit(u)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return lt("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return lt("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return lt("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return lt("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(u){lt("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=u}get backgroundAlpha(){return lt("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(u){lt("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=u}get powerPreference(){return lt("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(u,c){return this.textureGenerator.generateTexture(u,c)}};Hf.extension={type:Pe.Renderer,priority:1},Hf.__plugins={},Hf.__systems={};let Av=Hf;We.handleByMap(Pe.RendererPlugin,Av.__plugins),We.handleByMap(Pe.RendererSystem,Av.__systems),We.add(Av);class jA extends Ic{constructor(u,c){const{width:f,height:p}=c||{};super(f,p),this.items=[],this.itemDirtyIds=[];for(let g=0;g<u;g++){const _=new vt;this.items.push(_),this.itemDirtyIds.push(-2)}this.length=u,this._load=null,this.baseTexture=null}initFromArray(u,c){for(let f=0;f<this.length;f++)u[f]&&(u[f].castToBaseTexture?this.addBaseTextureAt(u[f].castToBaseTexture(),f):this.addResourceAt(u[f]instanceof Ic?u[f]:KD(u[f],c),f))}dispose(){for(let u=0,c=this.length;u<c;u++)this.items[u].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(u,c){if(!this.items[c])throw new Error(`Index ${c} is out of bounds`);return u.valid&&!this.valid&&this.resize(u.width,u.height),this.items[c].setResource(u),this}bind(u){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");super.bind(u);for(let c=0;c<this.length;c++)this.items[c].parentTextureArray=u,this.items[c].on("update",u.update,u)}unbind(u){super.unbind(u);for(let c=0;c<this.length;c++)this.items[c].parentTextureArray=null,this.items[c].off("update",u.update,u)}load(){if(this._load)return this._load;const u=this.items.map(c=>c.resource).filter(c=>c).map(c=>c.load());return this._load=Promise.all(u).then(()=>{const{realWidth:c,realHeight:f}=this.items[0];return this.resize(c,f),this.update(),Promise.resolve(this)}),this._load}}const GA=class nh extends jA{constructor(u,c){const{width:f,height:p,autoLoad:g,linkBaseTexture:_}=c||{};if(u&&u.length!==nh.SIDES)throw new Error(`Invalid length. Got ${u.length}, expected 6`);super(6,{width:f,height:p});for(let y=0;y<nh.SIDES;y++)this.items[y].target=Pl.TEXTURE_CUBE_MAP_POSITIVE_X+y;this.linkBaseTexture=!1!==_,u&&this.initFromArray(u,c),!1!==g&&this.load()}bind(u){super.bind(u),u.target=Pl.TEXTURE_CUBE_MAP}addBaseTextureAt(u,c,f){if(void 0===f&&(f=this.linkBaseTexture),!this.items[c])throw new Error(`Index ${c} is out of bounds`);if(!this.linkBaseTexture||u.parentTextureArray||Object.keys(u._glTextures).length>0){if(!u.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(u.resource,c)}else u.target=Pl.TEXTURE_CUBE_MAP_POSITIVE_X+c,u.parentTextureArray=this.baseTexture,this.items[c]=u;return u.valid&&!this.valid&&this.resize(u.realWidth,u.realHeight),this.items[c]=u,this}upload(u,c,f){const p=this.itemDirtyIds;for(let g=0;g<nh.SIDES;g++){const _=this.items[g];(p[g]<_.dirtyId||f.dirtyId<c.dirtyId)&&(_.valid&&_.resource?(_.resource.upload(u,_,f),p[g]=_.dirtyId):p[g]<-1&&(u.gl.texImage2D(_.target,0,f.internalFormat,c.realWidth,c.realHeight,0,c.format,f.type,null),p[g]=-1))}return!0}static test(u){return Array.isArray(u)&&u.length===nh.SIDES}};GA.SIDES=6;let IG=GA;class Ll extends lo{constructor(u,c){let f,p,g;c=c||{},"string"==typeof u?(f=Ll.EMPTY,p=u,g=!0):(f=u,p=null,g=!1),super(f),this.url=p,this.crossOrigin=c.crossOrigin??!0,this.alphaMode="number"==typeof c.alphaMode?c.alphaMode:null,this.ownsImageBitmap=c.ownsImageBitmap??g,this._load=null,!1!==c.autoLoad&&this.load()}load(){var u=this;return this._load||(this._load=new Promise(function(){var c=Ge(function*(f,p){if(null!==u.url)try{const g=yield Re.ADAPTER.fetch(u.url,{mode:u.crossOrigin?"cors":"no-cors"});if(u.destroyed)return;const _=yield g.blob();if(u.destroyed)return;const y=yield createImageBitmap(_,{premultiplyAlpha:null===u.alphaMode||u.alphaMode===_n.UNPACK?"premultiply":"none"});if(u.destroyed)return void y.close();u.source=y,u.update(),f(u)}catch(g){if(u.destroyed)return;p(g),u.onError.emit(g)}else f(u)});return function(f,p){return c.apply(this,arguments)}}())),this._load}upload(u,c,f){return this.source instanceof ImageBitmap?("number"==typeof this.alphaMode&&(c.alphaMode=this.alphaMode),super.upload(u,c,f)):(this.load(),!1)}dispose(){this.ownsImageBitmap&&this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(u){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&("string"==typeof u||u instanceof ImageBitmap)}static get EMPTY(){return Ll._EMPTY=Ll._EMPTY??Re.ADAPTER.createCanvas(0,0),Ll._EMPTY}}const Iv=class $p extends lo{constructor(u,c){c=c||{},super(Re.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=u,this.scale=c.scale||1,this._overrideWidth=c.width,this._overrideHeight=c.height,this._resolve=null,this._crossorigin=c.crossorigin,this._load=null,!1!==c.autoLoad&&this.load()}load(){return this._load||(this._load=new Promise(u=>{if(this._resolve=()=>{this.update(),u(this)},$p.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()})),this._load}_loadSvg(){const u=new Image;lo.crossOrigin(u,this.svg,this._crossorigin),u.src=this.svg,u.onerror=c=>{this._resolve&&(u.onerror=null,this.onError.emit(c))},u.onload=()=>{if(!this._resolve)return;const c=u.width,f=u.height;if(!c||!f)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let p=c*this.scale,g=f*this.scale;(this._overrideWidth||this._overrideHeight)&&(p=this._overrideWidth||this._overrideHeight/f*c,g=this._overrideHeight||this._overrideWidth/c*f),p=Math.round(p),g=Math.round(g);const _=this.source;_.width=p,_.height=g,_._pixiId=`canvas_${Qo()}`,_.getContext("2d").drawImage(u,0,0,c,f,0,0,p,g),this._resolve(),this._resolve=null}}static getSize(u){const c=$p.SVG_SIZE.exec(u),f={};return c&&(f[c[1]]=Math.round(parseFloat(c[3])),f[c[5]]=Math.round(parseFloat(c[7]))),f}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(u,c){return"svg"===c||"string"==typeof u&&u.startsWith("data:image/svg+xml")||"string"==typeof u&&$p.SVG_XML.test(u)}};Iv.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,Iv.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;let Mv=Iv;const Pv=class lx extends lo{constructor(u,c){if(c=c||{},!(u instanceof HTMLVideoElement)){const f=document.createElement("video");!1!==c.autoLoad&&f.setAttribute("preload","auto"),!1!==c.playsinline&&(f.setAttribute("webkit-playsinline",""),f.setAttribute("playsinline","")),!0===c.muted&&(f.setAttribute("muted",""),f.muted=!0),!0===c.loop&&f.setAttribute("loop",""),!1!==c.autoPlay&&f.setAttribute("autoplay",""),"string"==typeof u&&(u=[u]),lo.crossOrigin(f,u[0].src||u[0],c.crossorigin);for(let g=0;g<u.length;++g){const _=document.createElement("source");let{src:y,mime:v}=u[g];if(y=y||u[g],y.startsWith("data:"))v=y.slice(5,y.indexOf(";"));else if(!y.startsWith("blob:")){const x=y.split("?").shift().toLowerCase(),w=x.slice(x.lastIndexOf(".")+1);v=v||lx.MIME_TYPES[w]||`video/${w}`}_.src=y,v&&(_.type=v),f.appendChild(_)}u=f}super(u),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=c.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=!1!==c.autoPlay,this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),!1!==c.autoLoad&&this.load()}update(u=0){this.destroyed||(this._updateFPS&&(this._msToNextUpdate=Math.floor(this._msToNextUpdate-kn.shared.elapsedMS*this.source.playbackRate)),(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0))}_videoFrameRequestCallback(){this.update(),this._videoFrameRequestCallbackHandle=this.destroyed?null:this.source.requestVideoFrameCallback(this._videoFrameRequestCallback)}load(){if(this._load)return this._load;const u=this.source;return(u.readyState===u.HAVE_ENOUGH_DATA||u.readyState===u.HAVE_FUTURE_DATA)&&u.width&&u.height&&(u.complete=!0),u.addEventListener("play",this._onPlayStart),u.addEventListener("pause",this._onPlayStop),u.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._onCanPlay():(u.addEventListener("canplay",this._onCanPlay),u.addEventListener("canplaythrough",this._onCanPlay),u.addEventListener("error",this._onError,!0)),this._load=new Promise((c,f)=>{this.valid?c(this):(this._resolve=c,this._reject=f,u.load())}),this._load}_onError(u){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(u),this._reject&&(this._reject(u),this._reject=null,this._resolve=null)}_isSourcePlaying(){const u=this.source;return!u.paused&&!u.ended}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0)}_onCanPlay(){const u=this.source;u.removeEventListener("canplay",this._onCanPlay),u.removeEventListener("canplaythrough",this._onCanPlay);const c=this.valid;this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0,!c&&this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&u.play()}dispose(){this._configureAutoUpdate();const u=this.source;u&&(u.removeEventListener("play",this._onPlayStart),u.removeEventListener("pause",this._onPlayStop),u.removeEventListener("seeked",this._onSeeked),u.removeEventListener("canplay",this._onCanPlay),u.removeEventListener("canplaythrough",this._onCanPlay),u.removeEventListener("error",this._onError,!0),u.pause(),u.src="",u.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(u){u!==this._autoUpdate&&(this._autoUpdate=u,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(u){u!==this._updateFPS&&(this._updateFPS=u,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.source.requestVideoFrameCallback?(this._isConnectedToTicker&&(kn.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),null===this._videoFrameRequestCallbackHandle&&(this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback))):(null!==this._videoFrameRequestCallbackHandle&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(kn.shared.add(this.update,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(null!==this._videoFrameRequestCallbackHandle&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(kn.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(u,c){return globalThis.HTMLVideoElement&&u instanceof HTMLVideoElement||lx.TYPES.includes(c)}};Pv.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],Pv.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let zA=Pv;dv.push(Ll,lA,class AG extends lo{constructor(u){super(u)}static test(u){const{OffscreenCanvas:c}=globalThis;return!!(c&&u instanceof c)||globalThis.HTMLCanvasElement&&u instanceof HTMLCanvasElement}},zA,Mv,bf,IG,class DG extends jA{constructor(u,c){const{width:f,height:p}=c||{};let g,_;Array.isArray(u)?(g=u,_=u.length):_=u,super(_,{width:f,height:p}),g&&this.initFromArray(g,c)}addBaseTextureAt(u,c){if(!u.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(u.resource,c),this}bind(u){super.bind(u),u.target=Pl.TEXTURE_2D_ARRAY}upload(u,c,f){const{length:p,itemDirtyIds:g,items:_}=this,{gl:y}=u;f.dirtyId<0&&y.texImage3D(y.TEXTURE_2D_ARRAY,0,f.internalFormat,this._width,this._height,p,0,c.format,f.type,null);for(let v=0;v<p;v++){const x=_[v];g[v]<x.dirtyId&&(g[v]=x.dirtyId,x.valid&&y.texSubImage3D(y.TEXTURE_2D_ARRAY,0,0,0,v,x.resource.width,x.resource.height,1,c.format,f.type,x.resource.source))}return!0}});class jf{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(u){return this.minX>this.maxX||this.minY>this.maxY?wt.EMPTY:((u=u||new wt(0,0,1,1)).x=this.minX,u.y=this.minY,u.width=this.maxX-this.minX,u.height=this.maxY-this.minY,u)}addPoint(u){this.minX=Math.min(this.minX,u.x),this.maxX=Math.max(this.maxX,u.x),this.minY=Math.min(this.minY,u.y),this.maxY=Math.max(this.maxY,u.y)}addPointMatrix(u,c){const{a:f,b:p,c:g,d:_,tx:y,ty:v}=u,x=f*c.x+g*c.y+y,w=p*c.x+_*c.y+v;this.minX=Math.min(this.minX,x),this.maxX=Math.max(this.maxX,x),this.minY=Math.min(this.minY,w),this.maxY=Math.max(this.maxY,w)}addQuad(u){let c=this.minX,f=this.minY,p=this.maxX,g=this.maxY,_=u[0],y=u[1];c=_<c?_:c,f=y<f?y:f,p=_>p?_:p,g=y>g?y:g,_=u[2],y=u[3],c=_<c?_:c,f=y<f?y:f,p=_>p?_:p,g=y>g?y:g,_=u[4],y=u[5],c=_<c?_:c,f=y<f?y:f,p=_>p?_:p,g=y>g?y:g,_=u[6],y=u[7],c=_<c?_:c,f=y<f?y:f,p=_>p?_:p,g=y>g?y:g,this.minX=c,this.minY=f,this.maxX=p,this.maxY=g}addFrame(u,c,f,p,g){this.addFrameMatrix(u.worldTransform,c,f,p,g)}addFrameMatrix(u,c,f,p,g){const _=u.a,y=u.b,v=u.c,x=u.d,w=u.tx,C=u.ty;let E=this.minX,T=this.minY,D=this.maxX,S=this.maxY,A=_*c+v*f+w,I=y*c+x*f+C;E=A<E?A:E,T=I<T?I:T,D=A>D?A:D,S=I>S?I:S,A=_*p+v*f+w,I=y*p+x*f+C,E=A<E?A:E,T=I<T?I:T,D=A>D?A:D,S=I>S?I:S,A=_*c+v*g+w,I=y*c+x*g+C,E=A<E?A:E,T=I<T?I:T,D=A>D?A:D,S=I>S?I:S,A=_*p+v*g+w,I=y*p+x*g+C,E=A<E?A:E,T=I<T?I:T,D=A>D?A:D,S=I>S?I:S,this.minX=E,this.minY=T,this.maxX=D,this.maxY=S}addVertexData(u,c,f){let p=this.minX,g=this.minY,_=this.maxX,y=this.maxY;for(let v=c;v<f;v+=2){const x=u[v],w=u[v+1];p=x<p?x:p,g=w<g?w:g,_=x>_?x:_,y=w>y?w:y}this.minX=p,this.minY=g,this.maxX=_,this.maxY=y}addVertices(u,c,f,p){this.addVerticesMatrix(u.worldTransform,c,f,p)}addVerticesMatrix(u,c,f,p,g=0,_=g){const y=u.a,v=u.b,x=u.c,w=u.d,C=u.tx,E=u.ty;let T=this.minX,D=this.minY,S=this.maxX,A=this.maxY;for(let I=f;I<p;I+=2){const P=c[I],M=c[I+1],R=y*P+x*M+C,L=w*M+v*P+E;T=Math.min(T,R-g),S=Math.max(S,R+g),D=Math.min(D,L-_),A=Math.max(A,L+_)}this.minX=T,this.minY=D,this.maxX=S,this.maxY=A}addBounds(u){const c=this.minX,f=this.minY,p=this.maxX,g=this.maxY;this.minX=u.minX<c?u.minX:c,this.minY=u.minY<f?u.minY:f,this.maxX=u.maxX>p?u.maxX:p,this.maxY=u.maxY>g?u.maxY:g}addBoundsMask(u,c){const f=u.minX>c.minX?u.minX:c.minX,p=u.minY>c.minY?u.minY:c.minY,g=u.maxX<c.maxX?u.maxX:c.maxX,_=u.maxY<c.maxY?u.maxY:c.maxY;if(f<=g&&p<=_){const y=this.minX,v=this.minY,x=this.maxX,w=this.maxY;this.minX=f<y?f:y,this.minY=p<v?p:v,this.maxX=g>x?g:x,this.maxY=_>w?_:w}}addBoundsMatrix(u,c){this.addFrameMatrix(c,u.minX,u.minY,u.maxX,u.maxY)}addBoundsArea(u,c){const f=u.minX>c.x?u.minX:c.x,p=u.minY>c.y?u.minY:c.y,g=u.maxX<c.x+c.width?u.maxX:c.x+c.width,_=u.maxY<c.y+c.height?u.maxY:c.y+c.height;if(f<=g&&p<=_){const y=this.minX,v=this.minY,x=this.maxX,w=this.maxY;this.minX=f<y?f:y,this.minY=p<v?p:v,this.maxX=g>x?g:x,this.maxY=_>w?_:w}}pad(u=0,c=u){this.isEmpty()||(this.minX-=u,this.maxX+=u,this.minY-=c,this.maxY+=c)}addFramePad(u,c,f,p,g,_){c-=_,f+=g,p+=_,this.minX=this.minX<(u-=g)?this.minX:u,this.maxX=this.maxX>f?this.maxX:f,this.minY=this.minY<c?this.minY:c,this.maxY=this.maxY>p?this.maxY:p}}class or extends Sc{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new _v,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new jf,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(u){const c=Object.keys(u);for(let f=0;f<c.length;++f){const p=c[f];Object.defineProperty(or.prototype,p,Object.getOwnPropertyDescriptor(u,p))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(u,c){return u||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),c||(this._boundsRect||(this._boundsRect=new wt),c=this._boundsRect),this._bounds.getRectangle(c)}getLocalBounds(u){u||(this._localBoundsRect||(this._localBoundsRect=new wt),u=this._localBoundsRect),this._localBounds||(this._localBounds=new jf);const c=this.transform,f=this.parent;this.parent=null,this._tempDisplayObjectParent.worldAlpha=f?.worldAlpha??1,this.transform=this._tempDisplayObjectParent.transform;const p=this._bounds,g=this._boundsID;this._bounds=this._localBounds;const _=this.getBounds(!1,u);return this.parent=f,this.transform=c,this._bounds=p,this._bounds.updateID+=this._boundsID-g,_}toGlobal(u,c,f=!1){return f||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(u,c)}toLocal(u,c,f,p){return c&&(u=c.toGlobal(u,f,p)),p||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(u,f)}setParent(u){if(!u||!u.addChild)throw new Error("setParent: Argument must be a Container");return u.addChild(this),u}removeFromParent(){this.parent?.removeChild(this)}setTransform(u=0,c=0,f=1,p=1,g=0,_=0,y=0,v=0,x=0){return this.position.x=u,this.position.y=c,this.scale.x=f||1,this.scale.y=p||1,this.rotation=g,this.skew.x=_,this.skew.y=y,this.pivot.x=v,this.pivot.y=x,this}destroy(u){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new MG),this.tempDisplayObjectParent}enableTempParent(){const u=this.parent;return this.parent=this._tempDisplayObjectParent,u}disableTempParent(u){this.parent=u}get x(){return this.position.x}set x(u){this.transform.position.x=u}get y(){return this.position.y}set y(u){this.transform.position.y=u}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(u){this.transform.position.copyFrom(u)}get scale(){return this.transform.scale}set scale(u){this.transform.scale.copyFrom(u)}get pivot(){return this.transform.pivot}set pivot(u){this.transform.pivot.copyFrom(u)}get skew(){return this.transform.skew}set skew(u){this.transform.skew.copyFrom(u)}get rotation(){return this.transform.rotation}set rotation(u){this.transform.rotation=u}get angle(){return this.transform.rotation*Cj}set angle(u){this.transform.rotation=u*Mc}get zIndex(){return this._zIndex}set zIndex(u){this._zIndex=u,this.parent&&(this.parent.sortDirty=!0)}get worldVisible(){let u=this;do{if(!u.visible)return!1;u=u.parent}while(u);return!0}get mask(){return this._mask}set mask(u){if(this._mask!==u){if(this._mask){const c=this._mask.isMaskData?this._mask.maskObject:this._mask;c&&(c._maskRefCount--,0===c._maskRefCount&&(c.renderable=!0,c.isMask=!1))}if(this._mask=u,this._mask){const c=this._mask.isMaskData?this._mask.maskObject:this._mask;c&&(0===c._maskRefCount&&(c.renderable=!1,c.isMask=!0),c._maskRefCount++)}}}}class MG extends or{constructor(){super(...arguments),this.sortDirty=null}}or.prototype.displayObjectUpdateTransform=or.prototype.updateTransform;const PG=new Jt;function RG(d,u){return d.zIndex===u.zIndex?d._lastSortedIndex-u._lastSortedIndex:d.zIndex-u.zIndex}const $A=class ux extends or{constructor(){super(),this.children=[],this.sortableChildren=ux.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(u){}addChild(...u){if(u.length>1)for(let c=0;c<u.length;c++)this.addChild(u[c]);else{const c=u[0];c.parent&&c.parent.removeChild(c),c.parent=this,this.sortDirty=!0,c.transform._parentID=-1,this.children.push(c),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",c,this,this.children.length-1),c.emit("added",this)}return u[0]}addChildAt(u,c){if(c<0||c>this.children.length)throw new Error(`${u}addChildAt: The index ${c} supplied is out of bounds ${this.children.length}`);return u.parent&&u.parent.removeChild(u),u.parent=this,this.sortDirty=!0,u.transform._parentID=-1,this.children.splice(c,0,u),this._boundsID++,this.onChildrenChange(c),u.emit("added",this),this.emit("childAdded",u,this,c),u}swapChildren(u,c){if(u===c)return;const f=this.getChildIndex(u),p=this.getChildIndex(c);this.children[f]=c,this.children[p]=u,this.onChildrenChange(f<p?f:p)}getChildIndex(u){const c=this.children.indexOf(u);if(-1===c)throw new Error("The supplied DisplayObject must be a child of the caller");return c}setChildIndex(u,c){if(c<0||c>=this.children.length)throw new Error(`The index ${c} supplied is out of bounds ${this.children.length}`);const f=this.getChildIndex(u);Ol(this.children,f,1),this.children.splice(c,0,u),this.onChildrenChange(c)}getChildAt(u){if(u<0||u>=this.children.length)throw new Error(`getChildAt: Index (${u}) does not exist.`);return this.children[u]}removeChild(...u){if(u.length>1)for(let c=0;c<u.length;c++)this.removeChild(u[c]);else{const c=u[0],f=this.children.indexOf(c);if(-1===f)return null;c.parent=null,c.transform._parentID=-1,Ol(this.children,f,1),this._boundsID++,this.onChildrenChange(f),c.emit("removed",this),this.emit("childRemoved",c,this,f)}return u[0]}removeChildAt(u){const c=this.getChildAt(u);return c.parent=null,c.transform._parentID=-1,Ol(this.children,u,1),this._boundsID++,this.onChildrenChange(u),c.emit("removed",this),this.emit("childRemoved",c,this,u),c}removeChildren(u=0,c=this.children.length){const g=c-u;let _;if(g>0&&g<=c){_=this.children.splice(u,g);for(let y=0;y<_.length;++y)_[y].parent=null,_[y].transform&&(_[y].transform._parentID=-1);this._boundsID++,this.onChildrenChange(u);for(let y=0;y<_.length;++y)_[y].emit("removed",this),this.emit("childRemoved",_[y],this,y);return _}if(0===g&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let u=!1;for(let c=0,f=this.children.length;c<f;++c){const p=this.children[c];p._lastSortedIndex=c,!u&&0!==p.zIndex&&(u=!0)}u&&this.children.length>1&&this.children.sort(RG),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let u=0,c=this.children.length;u<c;++u){const f=this.children[u];f.visible&&f.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let u=0;u<this.children.length;u++){const c=this.children[u];if(c.visible&&c.renderable)if(c.calculateBounds(),c._mask){const f=c._mask.isMaskData?c._mask.maskObject:c._mask;f?(f.calculateBounds(),this._bounds.addBoundsMask(c._bounds,f._bounds)):this._bounds.addBounds(c._bounds)}else c.filterArea?this._bounds.addBoundsArea(c._bounds,c.filterArea):this._bounds.addBounds(c._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(u,c=!1){const f=super.getLocalBounds(u);if(!c)for(let p=0,g=this.children.length;p<g;++p){const _=this.children[p];_.visible&&_.updateTransform()}return f}_calculateBounds(){}_renderWithCulling(u){const c=u.renderTexture.sourceFrame;if(!(c.width>0&&c.height>0))return;let f,p;this.cullArea?(f=this.cullArea,p=this.worldTransform):this._render!==ux.prototype._render&&(f=this.getBounds(!0));const g=u.projection.transform;if(g&&(p?(p=PG.copyFrom(p),p.prepend(g)):p=g),f&&c.intersects(f,p))this._render(u);else if(this.cullArea)return;for(let _=0,y=this.children.length;_<y;++_){const v=this.children[_],x=v.cullable;v.cullable=x||!this.cullArea,v.render(u),v.cullable=x}}render(u){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters?.length)this.renderAdvanced(u);else if(this.cullable)this._renderWithCulling(u);else{this._render(u);for(let c=0,f=this.children.length;c<f;++c)this.children[c].render(u)}}renderAdvanced(u){const c=this.filters,f=this._mask;if(c){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let g=0;g<c.length;g++)c[g].enabled&&this._enabledFilters.push(c[g])}const p=c&&this._enabledFilters?.length||f&&(!f.isMaskData||f.enabled&&(f.autoDetect||f.type!==Or.NONE));if(p&&u.batch.flush(),c&&this._enabledFilters?.length&&u.filter.push(this,this._enabledFilters),f&&u.mask.push(this,this._mask),this.cullable)this._renderWithCulling(u);else{this._render(u);for(let g=0,_=this.children.length;g<_;++g)this.children[g].render(u)}p&&u.batch.flush(),f&&u.mask.pop(this),c&&this._enabledFilters?.length&&u.filter.pop()}_render(u){}destroy(u){super.destroy(),this.sortDirty=!1;const c="boolean"==typeof u?u:u?.children,f=this.removeChildren(0,this.children.length);if(c)for(let p=0;p<f.length;++p)f[p].destroy(u)}get width(){return this.scale.x*this.getLocalBounds().width}set width(u){const c=this.getLocalBounds().width;this.scale.x=0!==c?u/c:1,this._width=u}get height(){return this.scale.y*this.getLocalBounds().height}set height(u){const c=this.getLocalBounds().height;this.scale.y=0!==c?u/c:1,this._height=u}};$A.defaultSortableChildren=!1;let vn=$A;vn.prototype.containerUpdateTransform=vn.prototype.updateTransform,Object.defineProperties(Re,{SORTABLE_CHILDREN:{get:()=>vn.defaultSortableChildren,set(d){lt("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),vn.defaultSortableChildren=d}}});const Nc=new xt,FG=new Uint16Array([0,1,2,0,2,3]);class Ms extends vn{constructor(u){super(),this._anchor=new Zi(this._onAnchorUpdate,this,u?u.defaultAnchor.x:0,u?u.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new Ut(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=at.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=u||Xe.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=FG,this.pluginName="batch",this.isSprite=!0,this._roundPixels=Re.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=oo(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=oo(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const u=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===u._updateID)return;this._textureID!==u._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=u._updateID;const c=this.transform.worldTransform,f=c.a,p=c.b,g=c.c,_=c.d,y=c.tx,v=c.ty,x=this.vertexData,w=u.trim,C=u.orig,E=this._anchor;let T=0,D=0,S=0,A=0;if(w?(D=w.x-E._x*C.width,T=D+w.width,A=w.y-E._y*C.height,S=A+w.height):(D=-E._x*C.width,T=D+C.width,A=-E._y*C.height,S=A+C.height),x[0]=f*D+g*A+y,x[1]=_*A+p*D+v,x[2]=f*T+g*A+y,x[3]=_*A+p*T+v,x[4]=f*T+g*S+y,x[5]=_*S+p*T+v,x[6]=f*D+g*S+y,x[7]=_*S+p*D+v,this._roundPixels){const I=Re.RESOLUTION;for(let P=0;P<x.length;++P)x[P]=Math.round(x[P]*I)/I}}calculateTrimmedVertices(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const c=this.vertexTrimmedData,f=this._texture.orig,p=this._anchor,g=this.transform.worldTransform,_=g.a,y=g.b,v=g.c,x=g.d,w=g.tx,C=g.ty,E=-p._x*f.width,T=E+f.width,D=-p._y*f.height,S=D+f.height;if(c[0]=_*E+v*D+w,c[1]=x*D+y*E+C,c[2]=_*T+v*D+w,c[3]=x*D+y*T+C,c[4]=_*T+v*S+w,c[5]=x*S+y*T+C,c[6]=_*E+v*S+w,c[7]=x*S+y*E+C,this._roundPixels){const A=Re.RESOLUTION;for(let I=0;I<c.length;++I)c[I]=Math.round(c[I]*A)/A}}_render(u){this.calculateVertices(),u.batch.setObjectRenderer(u.plugins[this.pluginName]),u.plugins[this.pluginName].render(this)}_calculateBounds(){const u=this._texture.trim,c=this._texture.orig;!u||u.width===c.width&&u.height===c.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(u){return 0===this.children.length?(this._localBounds||(this._localBounds=new jf),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),u||(this._localBoundsRect||(this._localBoundsRect=new wt),u=this._localBoundsRect),this._localBounds.getRectangle(u)):super.getLocalBounds.call(this,u)}containsPoint(u){this.worldTransform.applyInverse(u,Nc);const c=this._texture.orig.width,f=this._texture.orig.height,p=-c*this.anchor.x;let g=0;return Nc.x>=p&&Nc.x<p+c&&(g=-f*this.anchor.y,Nc.y>=g&&Nc.y<g+f)}destroy(u){super.destroy(u),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,("boolean"==typeof u?u:u?.texture)&&this._texture.destroy(!!("boolean"==typeof u?u:u?.baseTexture)),this._texture=null}static from(u,c){const f=u instanceof Xe?u:Xe.from(u,c);return new Ms(f)}set roundPixels(u){this._roundPixels!==u&&(this._transformID=-1,this._transformTrimmedID=-1),this._roundPixels=u}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(u){const c=oo(this.scale.x)||1;this.scale.x=c*u/this._texture.orig.width,this._width=u}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(u){const c=oo(this.scale.y)||1;this.scale.y=c*u/this._texture.orig.height,this._height=u}get anchor(){return this._anchor}set anchor(u){this._anchor.copyFrom(u)}get tint(){return this._tintColor.value}set tint(u){this._tintColor.setValue(u),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(u){this._texture!==u&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=u||Xe.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,u&&(u.baseTexture.valid?this._onTextureUpdate():u.once("update",this._onTextureUpdate,this)))}}const WA=new Jt;or.prototype._cacheAsBitmap=!1,or.prototype._cacheData=null,or.prototype._cacheAsBitmapResolution=null,or.prototype._cacheAsBitmapMultisample=null;class OG{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(or.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(d){d!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=d,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(d){d!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=d,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(d){if(this._cacheAsBitmap===d)return;let u;this._cacheAsBitmap=d,d?(this._cacheData||(this._cacheData=new OG),u=this._cacheData,u.originalRender=this.render,u.originalRenderCanvas=this.renderCanvas,u.originalUpdateTransform=this.updateTransform,u.originalCalculateBounds=this.calculateBounds,u.originalGetLocalBounds=this.getLocalBounds,u.originalDestroy=this.destroy,u.originalContainsPoint=this.containsPoint,u.originalMask=this._mask,u.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(u=this._cacheData,u.sprite&&this._destroyCachedDisplayObject(),this.render=u.originalRender,this.renderCanvas=u.originalRenderCanvas,this.calculateBounds=u.originalCalculateBounds,this.getLocalBounds=u.originalGetLocalBounds,this.destroy=u.originalDestroy,this.updateTransform=u.originalUpdateTransform,this.containsPoint=u.originalContainsPoint,this._mask=u.originalMask,this.filterArea=u.originalFilterArea)}}}),or.prototype._renderCached=function(d){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(d),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(d))},or.prototype._initCachedDisplayObject=function(d){if(this._cacheData?.sprite)return;const u=this.alpha;this.alpha=1,d.batch.flush();const c=this.getLocalBounds(new wt,!0);this.filters?.length&&c.pad(this.filters[0].padding);const f=this.cacheAsBitmapResolution||d.resolution;c.ceil(f),c.width=Math.max(c.width,1/f),c.height=Math.max(c.height,1/f);const p=d.renderTexture.current,g=d.renderTexture.sourceFrame.clone(),_=d.renderTexture.destinationFrame.clone(),y=d.projection.transform,v=sa.create({width:c.width,height:c.height,resolution:f,multisample:this.cacheAsBitmapMultisample??d.multisample}),x=`cacheAsBitmap_${Qo()}`;this._cacheData.textureCacheId=x,vt.addToCache(v.baseTexture,x),Xe.addToCache(v,x);const w=this.transform.localTransform.copyTo(WA).invert().translate(-c.x,-c.y);this.render=this._cacheData.originalRender,d.render(this,{renderTexture:v,clear:!0,transform:w,skipUpdateTransform:!1}),d.framebuffer.blit(),d.projection.transform=y,d.renderTexture.bind(p,g,_),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=u;const C=new Ms(v);C.transform.worldTransform=this.transform.worldTransform,C.anchor.x=-c.x/c.width,C.anchor.y=-c.y/c.height,C.alpha=u,C._bounds=this._bounds,this._cacheData.sprite=C,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=C.containsPoint.bind(C)},or.prototype._renderCachedCanvas=function(d){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(d),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(d))},or.prototype._initCachedDisplayObjectCanvas=function(d){if(this._cacheData?.sprite)return;const u=this.getLocalBounds(new wt,!0),c=this.alpha;this.alpha=1;const f=d.canvasContext.activeContext,p=d._projTransform,g=this.cacheAsBitmapResolution||d.resolution;u.ceil(g),u.width=Math.max(u.width,1/g),u.height=Math.max(u.height,1/g);const _=sa.create({width:u.width,height:u.height,resolution:g}),y=`cacheAsBitmap_${Qo()}`;this._cacheData.textureCacheId=y,vt.addToCache(_.baseTexture,y),Xe.addToCache(_,y);const v=WA;this.transform.localTransform.copyTo(v),v.invert(),v.tx-=u.x,v.ty-=u.y,this.renderCanvas=this._cacheData.originalRenderCanvas,d.render(this,{renderTexture:_,clear:!0,transform:v,skipUpdateTransform:!1}),d.canvasContext.activeContext=f,d._projTransform=p,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=c;const x=new Ms(_);x.transform.worldTransform=this.transform.worldTransform,x.anchor.x=-u.x/u.width,x.anchor.y=-u.y/u.height,x.alpha=c,x._bounds=this._bounds,this._cacheData.sprite=x,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=d._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=x.containsPoint.bind(x)},or.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},or.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)},or.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,vt.removeFromCache(this._cacheData.textureCacheId),Xe.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},or.prototype._cacheAsBitmapDestroy=function(d){this.cacheAsBitmap=!1,this.destroy(d)},or.prototype.name=null,vn.prototype.getChildByName=function(d,u){for(let c=0,f=this.children.length;c<f;c++)if(this.children[c].name===d)return this.children[c];if(u)for(let c=0,f=this.children.length;c<f;c++){const p=this.children[c];if(!p.getChildByName)continue;const g=p.getChildByName(d,!0);if(g)return g}return null},or.prototype.getGlobalPosition=function(d=new xt,u=!1){return this.parent?this.parent.toGlobal(this.position,d,u):(d.x=this.position.x,d.y=this.position.y),d};const kG={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},BG=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n");class Rv extends Ft{constructor(u,c=8,f=4,p=Ft.defaultResolution,g=5){const _=function HG(d,u){const c=Math.ceil(d/2);let g,f="\n    attribute vec2 aVertexPosition;\n\n    uniform mat3 projectionMatrix;\n\n    uniform float strength;\n\n    varying vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 inputSize;\n    uniform vec4 outputFrame;\n\n    vec4 filterVertexPosition( void )\n    {\n        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n    }\n\n    vec2 filterTextureCoord( void )\n    {\n        return aVertexPosition * (outputFrame.zw * inputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }",p="";g=u?"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let _=0;_<d;_++){let y=g.replace("%index%",_.toString());y=y.replace("%sampleIndex%",_-(c-1)+".0"),p+=y,p+="\n"}return f=f.replace("%blur%",p),f=f.replace("%size%",d.toString()),f}(g,u),y=function UG(d){const u=kG[d],c=u.length;let _,f=BG,p="";for(let y=0;y<d;y++){let v="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",y.toString());_=y,y>=c&&(_=d-y-1),v=v.replace("%value%",u[_].toString()),p+=v,p+="\n"}return f=f.replace("%blur%",p),f=f.replace("%size%",d.toString()),f}(g);super(_,y),this.horizontal=u,this.resolution=p,this._quality=0,this.quality=f,this.blur=c}apply(u,c,f,p){if(this.uniforms.strength=f?this.horizontal?1/f.width*(f.width/c.width):1/f.height*(f.height/c.height):this.horizontal?1/u.renderer.width*(u.renderer.width/c.width):1/u.renderer.height*(u.renderer.height/c.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)u.applyFilter(this,c,f,p);else{const g=u.getFilterTexture(),_=u.renderer;let y=c,v=g;this.state.blend=!1,u.applyFilter(this,y,v,Xi.CLEAR);for(let x=1;x<this.passes-1;x++){u.bindAndClear(y,Xi.BLIT),this.uniforms.uSampler=v;const w=v;v=y,y=w,_.shader.bind(this),_.geometry.draw(5)}this.state.blend=!0,u.applyFilter(this,v,f,p),u.returnFilterTexture(g)}}get blur(){return this.strength}set blur(u){this.padding=1+2*Math.abs(u),this.strength=u}get quality(){return this._quality}set quality(u){this._quality=u,this.passes=u}}class Fv extends Ft{constructor(){const u={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(BA,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n",u),this.alpha=1}_loadMatrix(u,c=!1){let f=u;c&&(this._multiply(f,this.uniforms.m,u),f=this._colorMatrix(f)),this.uniforms.m=f}_multiply(u,c,f){return u[0]=c[0]*f[0]+c[1]*f[5]+c[2]*f[10]+c[3]*f[15],u[1]=c[0]*f[1]+c[1]*f[6]+c[2]*f[11]+c[3]*f[16],u[2]=c[0]*f[2]+c[1]*f[7]+c[2]*f[12]+c[3]*f[17],u[3]=c[0]*f[3]+c[1]*f[8]+c[2]*f[13]+c[3]*f[18],u[4]=c[0]*f[4]+c[1]*f[9]+c[2]*f[14]+c[3]*f[19]+c[4],u[5]=c[5]*f[0]+c[6]*f[5]+c[7]*f[10]+c[8]*f[15],u[6]=c[5]*f[1]+c[6]*f[6]+c[7]*f[11]+c[8]*f[16],u[7]=c[5]*f[2]+c[6]*f[7]+c[7]*f[12]+c[8]*f[17],u[8]=c[5]*f[3]+c[6]*f[8]+c[7]*f[13]+c[8]*f[18],u[9]=c[5]*f[4]+c[6]*f[9]+c[7]*f[14]+c[8]*f[19]+c[9],u[10]=c[10]*f[0]+c[11]*f[5]+c[12]*f[10]+c[13]*f[15],u[11]=c[10]*f[1]+c[11]*f[6]+c[12]*f[11]+c[13]*f[16],u[12]=c[10]*f[2]+c[11]*f[7]+c[12]*f[12]+c[13]*f[17],u[13]=c[10]*f[3]+c[11]*f[8]+c[12]*f[13]+c[13]*f[18],u[14]=c[10]*f[4]+c[11]*f[9]+c[12]*f[14]+c[13]*f[19]+c[14],u[15]=c[15]*f[0]+c[16]*f[5]+c[17]*f[10]+c[18]*f[15],u[16]=c[15]*f[1]+c[16]*f[6]+c[17]*f[11]+c[18]*f[16],u[17]=c[15]*f[2]+c[16]*f[7]+c[17]*f[12]+c[18]*f[17],u[18]=c[15]*f[3]+c[16]*f[8]+c[17]*f[13]+c[18]*f[18],u[19]=c[15]*f[4]+c[16]*f[9]+c[17]*f[14]+c[18]*f[19]+c[19],u}_colorMatrix(u){const c=new Float32Array(u);return c[4]/=255,c[9]/=255,c[14]/=255,c[19]/=255,c}brightness(u,c){this._loadMatrix([u,0,0,0,0,0,u,0,0,0,0,0,u,0,0,0,0,0,1,0],c)}tint(u,c){const[f,p,g]=Ut.shared.setValue(u).toArray();this._loadMatrix([f,0,0,0,0,0,p,0,0,0,0,0,g,0,0,0,0,0,1,0],c)}greyscale(u,c){this._loadMatrix([u,u,u,0,0,u,u,u,0,0,u,u,u,0,0,0,0,0,1,0],c)}blackAndWhite(u){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],u)}hue(u,c){u=(u||0)/180*Math.PI;const f=Math.cos(u),p=Math.sin(u),_=1/3,y=(0,Math.sqrt)(_);this._loadMatrix([f+(1-f)*_,_*(1-f)-y*p,_*(1-f)+y*p,0,0,_*(1-f)+y*p,f+_*(1-f),_*(1-f)-y*p,0,0,_*(1-f)-y*p,_*(1-f)+y*p,f+_*(1-f),0,0,0,0,0,1,0],c)}contrast(u,c){const f=(u||0)+1,p=-.5*(f-1);this._loadMatrix([f,0,0,0,p,0,f,0,0,p,0,0,f,0,p,0,0,0,1,0],c)}saturate(u=0,c){const f=2*u/3+1,p=-.5*(f-1);this._loadMatrix([f,p,p,0,0,p,f,p,0,0,p,p,f,0,0,0,0,0,1,0],c)}desaturate(){this.saturate(-1)}negative(u){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],u)}sepia(u){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],u)}technicolor(u){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],u)}polaroid(u){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],u)}toBGR(u){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],u)}kodachrome(u){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],u)}browni(u){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],u)}vintage(u){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],u)}colorTone(u,c,f,p,g){u=u||.2,c=c||.15,f=f||16770432,p=p||3375104;const _=Ut.shared,[y,v,x]=_.setValue(f).toArray(),[w,C,E]=_.setValue(p).toArray();this._loadMatrix([.3,.59,.11,0,0,y,v,x,u,0,w,C,E,c,0,y-w,v-C,x-E,0,0],g)}night(u,c){this._loadMatrix([-2*(u=u||.1),-u,0,0,0,-u,0,u,0,0,0,u,2*u,0,0,0,0,0,1,0],c)}predator(u,c){this._loadMatrix([11.224130630493164*u,-4.794486999511719*u,-2.8746118545532227*u,0*u,.40342438220977783*u,-3.6330697536468506*u,9.193157196044922*u,-2.951810836791992*u,0*u,-1.316135048866272*u,-3.2184197902679443*u,-4.2375030517578125*u,7.476448059082031*u,0*u,.8044459223747253*u,0,0,0,1,0],c)}lsd(u){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],u)}reset(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)}get matrix(){return this.uniforms.m}set matrix(u){this.uniforms.m=u}get alpha(){return this.uniforms.uAlpha}set alpha(u){this.uniforms.uAlpha=u}}Fv.prototype.grayscale=Fv.prototype.greyscale;const XA={AlphaFilter:class LG extends Ft{constructor(u=1){super("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n",{uAlpha:1}),this.alpha=u}get alpha(){return this.uniforms.uAlpha}set alpha(u){this.uniforms.uAlpha=u}},BlurFilter:class jG extends Ft{constructor(u=8,c=4,f=Ft.defaultResolution,p=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new Rv(!0,u,c,f,p),this.blurYFilter=new Rv(!1,u,c,f,p),this.resolution=f,this.quality=c,this.blur=u,this.repeatEdgePixels=!1}apply(u,c,f,p){const g=Math.abs(this.blurXFilter.strength),_=Math.abs(this.blurYFilter.strength);if(g&&_){const y=u.getFilterTexture();this.blurXFilter.apply(u,c,y,Xi.CLEAR),this.blurYFilter.apply(u,y,f,p),u.returnFilterTexture(y)}else _?this.blurYFilter.apply(u,c,f,p):this.blurXFilter.apply(u,c,f,p)}updatePadding(){this.padding=this._repeatEdgePixels?0:2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}get blur(){return this.blurXFilter.blur}set blur(u){this.blurXFilter.blur=this.blurYFilter.blur=u,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(u){this.blurXFilter.quality=this.blurYFilter.quality=u}get blurX(){return this.blurXFilter.blur}set blurX(u){this.blurXFilter.blur=u,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(u){this.blurYFilter.blur=u,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(u){this.blurYFilter.blendMode=u}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(u){this._repeatEdgePixels=u,this.updatePadding()}},BlurFilterPass:Rv,ColorMatrixFilter:Fv,DisplacementFilter:class WG extends Ft{constructor(u,c){const f=new Jt;u.renderable=!1,super("attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tvFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy = scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n",{mapSampler:u._texture,filterMatrix:f,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=u,this.maskMatrix=f,null==c&&(c=20),this.scale=new xt(c,c)}apply(u,c,f,p){this.uniforms.filterMatrix=u.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const g=this.maskSprite.worldTransform,_=Math.sqrt(g.a*g.a+g.b*g.b),y=Math.sqrt(g.c*g.c+g.d*g.d);0!==_&&0!==y&&(this.uniforms.rotation[0]=g.a/_,this.uniforms.rotation[1]=g.b/_,this.uniforms.rotation[2]=g.c/y,this.uniforms.rotation[3]=g.d/y),u.applyFilter(this,c,f,p)}get map(){return this.uniforms.mapSampler}set map(u){this.uniforms.mapSampler=u}},FXAAFilter:class YG extends Ft{constructor(){super("\nattribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvoid texcoords(vec2 fragCoord, vec2 inverseVP,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = filterVertexPosition();\n\n   vFragCoord = aVertexPosition * outputFrame.zw;\n\n   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\nuniform sampler2D uSampler;\nuniform highp vec4 inputSize;\n\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n\n --\n\n From:\n https://github.com/mitsuhiko/webgl-meincraft\n\n Copyright (c) 2011 by Armin Ronacher.\n\n Some rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n\n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n\n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n\n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec4 color;\n\n      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n')}},NoiseFilter:class ZG extends Ft{constructor(u=.5,c=Math.random()){super(BA,"precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n",{uNoise:0,uSeed:0}),this.noise=u,this.seed=c}get noise(){return this.uniforms.uNoise}set noise(u){this.uniforms.uNoise=u}get seed(){return this.uniforms.uSeed}set seed(u){this.uniforms.uSeed=u}}};Object.entries(XA).forEach(([d,u])=>{Object.defineProperty(XA,d,{get:()=>(lt("7.1.0",`filters.${d} has moved to ${d}`),u)})});const uo=new class QG{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(u){this.removeTickerListener(),this.events=u,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(u){this._pauseUpdate=u}addTickerListener(){this.tickerAdded||!this.domElement||(kn.system.add(this.tickerUpdate,this,la.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(kn.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove)return void(this._didMove=!1);const u=this.events.rootPointerEvent;this.events.supportsTouchEvents&&"touch"===u.pointerType||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:u.clientX,clientY:u.clientY}))}tickerUpdate(u){this._deltaTime+=u,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}};class Lc{constructor(u){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=Lc.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new xt,this.page=new xt,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=u}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(u,c,f){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(u,c,f,p,g){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class Gf extends Lc{constructor(){super(...arguments),this.client=new xt,this.movement=new xt,this.offset=new xt,this.global=new xt,this.screen=new xt}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(u,c,f){return u.worldTransform.applyInverse(f||this.global,c)}getModifierState(u){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(u)}initMouseEvent(u,c,f,p,g,_,y,v,x,w,C,E,T,D,S){throw new Error("Method not implemented.")}}class Ai extends Gf{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return"pointermove"===this.type||"mousemove"===this.type||"touchmove"===this.type?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class kl extends Gf{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}kl.DOM_DELTA_PIXEL=0,kl.DOM_DELTA_LINE=1,kl.DOM_DELTA_PAGE=2;const ez=new xt,Ov=new xt;class tz{constructor(u){this.dispatch=new Sc,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=u,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(u,c){this.mappingTable[u]||(this.mappingTable[u]=[]),this.mappingTable[u].push({fn:c,priority:0}),this.mappingTable[u].sort((f,p)=>f.priority-p.priority)}dispatchEvent(u,c){u.propagationStopped=!1,u.propagationImmediatelyStopped=!1,this.propagate(u,c),this.dispatch.emit(c||u.type,u)}mapEvent(u){if(!this.rootTarget)return;const c=this.mappingTable[u.type];if(c)for(let f=0,p=c.length;f<p;f++)c[f].fn(u);else console.warn(`[EventBoundary]: Event mapping not defined for ${u.type}`)}hitTest(u,c){uo.pauseUpdate=!0;const p=this[this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive"](this.rootTarget,this.rootTarget.eventMode,ez.set(u,c),this.hitTestFn,this.hitPruneFn);return p&&p[0]}propagate(u,c){if(!u.target)return;const f=u.composedPath();u.eventPhase=u.CAPTURING_PHASE;for(let p=0,g=f.length-1;p<g;p++)if(u.currentTarget=f[p],this.notifyTarget(u,c),u.propagationStopped||u.propagationImmediatelyStopped)return;if(u.eventPhase=u.AT_TARGET,u.currentTarget=u.target,this.notifyTarget(u,c),!u.propagationStopped&&!u.propagationImmediatelyStopped){u.eventPhase=u.BUBBLING_PHASE;for(let p=f.length-2;p>=0;p--)if(u.currentTarget=f[p],this.notifyTarget(u,c),u.propagationStopped||u.propagationImmediatelyStopped)return}}all(u,c,f=this._allInteractiveElements){if(0===f.length)return;u.eventPhase=u.BUBBLING_PHASE;const p=Array.isArray(c)?c:[c];for(let g=f.length-1;g>=0;g--)p.forEach(_=>{u.currentTarget=f[g],this.notifyTarget(u,_)})}propagationPath(u){const c=[u];for(let f=0;f<2048&&u!==this.rootTarget;f++){if(!u.parent)throw new Error("Cannot find propagation path to disconnected target");c.push(u.parent),u=u.parent}return c.reverse(),c}hitTestMoveRecursive(u,c,f,p,g,_=!1){let y=!1;if(this._interactivePrune(u))return null;if(("dynamic"===u.eventMode||"dynamic"===c)&&(uo.pauseUpdate=!1),u.interactiveChildren&&u.children){const w=u.children;for(let C=w.length-1;C>=0;C--){const E=w[C],T=this.hitTestMoveRecursive(E,this._isInteractive(c)?c:E.eventMode,f,p,g,_||g(u,f));if(T){if(T.length>0&&!T[T.length-1].parent)continue;const D=u.isInteractive();(T.length>0||D)&&(D&&this._allInteractiveElements.push(u),T.push(u)),0===this._hitElements.length&&(this._hitElements=T),y=!0}}}const v=this._isInteractive(c),x=u.isInteractive();return v&&x&&this._allInteractiveElements.push(u),_||this._hitElements.length>0?null:y?this._hitElements:v&&!g(u,f)&&p(u,f)?x?[u]:[]:null}hitTestRecursive(u,c,f,p,g){if(this._interactivePrune(u)||g(u,f))return null;if(("dynamic"===u.eventMode||"dynamic"===c)&&(uo.pauseUpdate=!1),u.interactiveChildren&&u.children){const v=u.children;for(let x=v.length-1;x>=0;x--){const w=v[x],C=this.hitTestRecursive(w,this._isInteractive(c)?c:w.eventMode,f,p,g);if(C){if(C.length>0&&!C[C.length-1].parent)continue;const E=u.isInteractive();return(C.length>0||E)&&C.push(u),C}}}const _=this._isInteractive(c),y=u.isInteractive();return _&&p(u,f)?y?[u]:[]:null}_isInteractive(u){return"static"===u||"dynamic"===u}_interactivePrune(u){return!(u&&!u.isMask&&u.visible&&u.renderable&&"none"!==u.eventMode&&("passive"!==u.eventMode||u.interactiveChildren)&&!u.isMask)}hitPruneFn(u,c){if(u.hitArea&&(u.worldTransform.applyInverse(c,Ov),!u.hitArea.contains(Ov.x,Ov.y)))return!0;if(u._mask){const f=u._mask.isMaskData?u._mask.maskObject:u._mask;if(f&&!f.containsPoint?.(c))return!0}return!1}hitTestFn(u,c){return"passive"!==u.eventMode&&(!!u.hitArea||!!u.containsPoint&&u.containsPoint(c))}notifyTarget(u,c){u.currentTarget[`on${c=c??u.type}`]?.(u),this.notifyListeners(u,u.eventPhase===u.CAPTURING_PHASE||u.eventPhase===u.AT_TARGET?`${c}capture`:c),u.eventPhase===u.AT_TARGET&&this.notifyListeners(u,c)}mapPointerDown(u){if(!(u instanceof Ai))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const c=this.createPointerEvent(u);this.dispatchEvent(c,"pointerdown"),"touch"===c.pointerType?this.dispatchEvent(c,"touchstart"):"mouse"!==c.pointerType&&"pen"!==c.pointerType||this.dispatchEvent(c,2===c.button?"rightdown":"mousedown"),this.trackingData(u.pointerId).pressTargetsByButton[u.button]=c.composedPath(),this.freeEvent(c)}mapPointerMove(u){if(!(u instanceof Ai))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const c=this.createPointerEvent(u);this._isPointerMoveEvent=!1;const f="mouse"===c.pointerType||"pen"===c.pointerType,p=this.trackingData(u.pointerId),g=this.findMountedTarget(p.overTargets);if(p.overTargets?.length>0&&g!==c.target){const x=this.createPointerEvent(u,"mousemove"===u.type?"mouseout":"pointerout",g);if(this.dispatchEvent(x,"pointerout"),f&&this.dispatchEvent(x,"mouseout"),!c.composedPath().includes(g)){const w=this.createPointerEvent(u,"pointerleave",g);for(w.eventPhase=w.AT_TARGET;w.target&&!c.composedPath().includes(w.target);)w.currentTarget=w.target,this.notifyTarget(w),f&&this.notifyTarget(w,"mouseleave"),w.target=w.target.parent;this.freeEvent(w)}this.freeEvent(x)}if(g!==c.target){const x=this.clonePointerEvent(c,"mousemove"===u.type?"mouseover":"pointerover");this.dispatchEvent(x,"pointerover"),f&&this.dispatchEvent(x,"mouseover");let w=g?.parent;for(;w&&w!==this.rootTarget.parent&&w!==c.target;)w=w.parent;if(!w||w===this.rootTarget.parent){const C=this.clonePointerEvent(c,"pointerenter");for(C.eventPhase=C.AT_TARGET;C.target&&C.target!==g&&C.target!==this.rootTarget.parent;)C.currentTarget=C.target,this.notifyTarget(C),f&&this.notifyTarget(C,"mouseenter"),C.target=C.target.parent;this.freeEvent(C)}this.freeEvent(x)}const _=[],y=this.enableGlobalMoveEvents??!0;this.moveOnAll?_.push("pointermove"):this.dispatchEvent(c,"pointermove"),y&&_.push("globalpointermove"),"touch"===c.pointerType&&(this.moveOnAll?_.splice(1,0,"touchmove"):this.dispatchEvent(c,"touchmove"),y&&_.push("globaltouchmove")),f&&(this.moveOnAll?_.splice(1,0,"mousemove"):this.dispatchEvent(c,"mousemove"),y&&_.push("globalmousemove"),this.cursor=c.target?.cursor),_.length>0&&this.all(c,_),this._allInteractiveElements.length=0,this._hitElements.length=0,p.overTargets=c.composedPath(),this.freeEvent(c)}mapPointerOver(u){if(!(u instanceof Ai))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const c=this.trackingData(u.pointerId),f=this.createPointerEvent(u),p="mouse"===f.pointerType||"pen"===f.pointerType;this.dispatchEvent(f,"pointerover"),p&&this.dispatchEvent(f,"mouseover"),"mouse"===f.pointerType&&(this.cursor=f.target?.cursor);const g=this.clonePointerEvent(f,"pointerenter");for(g.eventPhase=g.AT_TARGET;g.target&&g.target!==this.rootTarget.parent;)g.currentTarget=g.target,this.notifyTarget(g),p&&this.notifyTarget(g,"mouseenter"),g.target=g.target.parent;c.overTargets=f.composedPath(),this.freeEvent(f),this.freeEvent(g)}mapPointerOut(u){if(!(u instanceof Ai))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const c=this.trackingData(u.pointerId);if(c.overTargets){const f="mouse"===u.pointerType||"pen"===u.pointerType,p=this.findMountedTarget(c.overTargets),g=this.createPointerEvent(u,"pointerout",p);this.dispatchEvent(g),f&&this.dispatchEvent(g,"mouseout");const _=this.createPointerEvent(u,"pointerleave",p);for(_.eventPhase=_.AT_TARGET;_.target&&_.target!==this.rootTarget.parent;)_.currentTarget=_.target,this.notifyTarget(_),f&&this.notifyTarget(_,"mouseleave"),_.target=_.target.parent;c.overTargets=null,this.freeEvent(g),this.freeEvent(_)}this.cursor=null}mapPointerUp(u){if(!(u instanceof Ai))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const c=performance.now(),f=this.createPointerEvent(u);this.dispatchEvent(f,"pointerup"),"touch"===f.pointerType?this.dispatchEvent(f,"touchend"):"mouse"!==f.pointerType&&"pen"!==f.pointerType||this.dispatchEvent(f,2===f.button?"rightup":"mouseup");const p=this.trackingData(u.pointerId),g=this.findMountedTarget(p.pressTargetsByButton[u.button]);let _=g;if(g&&!f.composedPath().includes(g)){let y=g;for(;y&&!f.composedPath().includes(y);)f.currentTarget=y,this.notifyTarget(f,"pointerupoutside"),"touch"===f.pointerType?this.notifyTarget(f,"touchendoutside"):"mouse"!==f.pointerType&&"pen"!==f.pointerType||this.notifyTarget(f,2===f.button?"rightupoutside":"mouseupoutside"),y=y.parent;delete p.pressTargetsByButton[u.button],_=y}if(_){const y=this.clonePointerEvent(f,"click");y.target=_,y.path=null,p.clicksByButton[u.button]||(p.clicksByButton[u.button]={clickCount:0,target:y.target,timeStamp:c});const v=p.clicksByButton[u.button];v.target===y.target&&c-v.timeStamp<200?++v.clickCount:v.clickCount=1,v.target=y.target,v.timeStamp=c,y.detail=v.clickCount,"mouse"===y.pointerType?this.dispatchEvent(y,2===y.button?"rightclick":"click"):"touch"===y.pointerType&&this.dispatchEvent(y,"tap"),this.dispatchEvent(y,"pointertap"),this.freeEvent(y)}this.freeEvent(f)}mapPointerUpOutside(u){if(!(u instanceof Ai))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const c=this.trackingData(u.pointerId),f=this.findMountedTarget(c.pressTargetsByButton[u.button]),p=this.createPointerEvent(u);if(f){let g=f;for(;g;)p.currentTarget=g,this.notifyTarget(p,"pointerupoutside"),"touch"===p.pointerType?this.notifyTarget(p,"touchendoutside"):("mouse"===p.pointerType||"pen"===p.pointerType)&&this.notifyTarget(p,2===p.button?"rightupoutside":"mouseupoutside"),g=g.parent;delete c.pressTargetsByButton[u.button]}this.freeEvent(p)}mapWheel(u){if(!(u instanceof kl))return void console.warn("EventBoundary cannot map a non-wheel event as a wheel event");const c=this.createWheelEvent(u);this.dispatchEvent(c),this.freeEvent(c)}findMountedTarget(u){if(!u)return null;let c=u[0];for(let f=1;f<u.length&&u[f].parent===c;f++)c=u[f];return c}createPointerEvent(u,c,f){const p=this.allocateEvent(Ai);return this.copyPointerData(u,p),this.copyMouseData(u,p),this.copyData(u,p),p.nativeEvent=u.nativeEvent,p.originalEvent=u,p.target=f??this.hitTest(p.global.x,p.global.y)??this._hitElements[0],"string"==typeof c&&(p.type=c),p}createWheelEvent(u){const c=this.allocateEvent(kl);return this.copyWheelData(u,c),this.copyMouseData(u,c),this.copyData(u,c),c.nativeEvent=u.nativeEvent,c.originalEvent=u,c.target=this.hitTest(c.global.x,c.global.y),c}clonePointerEvent(u,c){const f=this.allocateEvent(Ai);return f.nativeEvent=u.nativeEvent,f.originalEvent=u.originalEvent,this.copyPointerData(u,f),this.copyMouseData(u,f),this.copyData(u,f),f.target=u.target,f.path=u.composedPath().slice(),f.type=c??f.type,f}copyWheelData(u,c){c.deltaMode=u.deltaMode,c.deltaX=u.deltaX,c.deltaY=u.deltaY,c.deltaZ=u.deltaZ}copyPointerData(u,c){u instanceof Ai&&c instanceof Ai&&(c.pointerId=u.pointerId,c.width=u.width,c.height=u.height,c.isPrimary=u.isPrimary,c.pointerType=u.pointerType,c.pressure=u.pressure,c.tangentialPressure=u.tangentialPressure,c.tiltX=u.tiltX,c.tiltY=u.tiltY,c.twist=u.twist)}copyMouseData(u,c){u instanceof Gf&&c instanceof Gf&&(c.altKey=u.altKey,c.button=u.button,c.buttons=u.buttons,c.client.copyFrom(u.client),c.ctrlKey=u.ctrlKey,c.metaKey=u.metaKey,c.movement.copyFrom(u.movement),c.screen.copyFrom(u.screen),c.shiftKey=u.shiftKey,c.global.copyFrom(u.global))}copyData(u,c){c.isTrusted=u.isTrusted,c.srcElement=u.srcElement,c.timeStamp=performance.now(),c.type=u.type,c.detail=u.detail,c.view=u.view,c.which=u.which,c.layer.copyFrom(u.layer),c.page.copyFrom(u.page)}trackingData(u){return this.mappingState.trackingData[u]||(this.mappingState.trackingData[u]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[u]}allocateEvent(u){this.eventPool.has(u)||this.eventPool.set(u,[]);const c=this.eventPool.get(u).pop()||new u(this);return c.eventPhase=c.NONE,c.currentTarget=null,c.path=null,c.target=null,c}freeEvent(u){if(u.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const c=u.constructor;this.eventPool.has(c)||this.eventPool.set(c,[]),this.eventPool.get(c).push(u)}notifyListeners(u,c){const f=u.currentTarget._events[c];if(f&&u.currentTarget.isInteractive())if("fn"in f)f.once&&u.currentTarget.removeListener(c,f.fn,void 0,!0),f.fn.call(f.context,u);else for(let p=0,g=f.length;p<g&&!u.propagationImmediatelyStopped;p++)f[p].once&&u.currentTarget.removeListener(c,f[p].fn,void 0,!0),f[p].fn.call(f[p].context,u)}}const nz={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},Nv=class cx{constructor(u){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=u,this.rootBoundary=new tz(null),uo.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new Ai(null),this.rootWheelEvent=new kl(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...cx.defaultEventFeatures},{set:(c,f,p)=>("globalMove"===f&&(this.rootBoundary.enableGlobalMoveEvents=p),c[f]=p,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(u){const{view:c,resolution:f}=this.renderer;this.setTargetElement(c),this.resolution=f,cx._defaultEventMode=u.eventMode??"auto",Object.assign(this.features,u.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(u){this.resolution=u}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(u){u=u||"default";let c=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(c=!1),this.currentCursor===u)return;this.currentCursor=u;const f=this.cursorStyles[u];if(f)switch(typeof f){case"string":c&&(this.domElement.style.cursor=f);break;case"function":f(u);break;case"object":c&&Object.assign(this.domElement.style,f)}else c&&"string"==typeof u&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,u)&&(this.domElement.style.cursor=u)}get pointer(){return this.rootPointerEvent}onPointerDown(u){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const c=this.normalizeToPointerData(u);this.autoPreventDefault&&c[0].isNormalized&&(u.cancelable||!("cancelable"in u))&&u.preventDefault();for(let f=0,p=c.length;f<p;f++){const _=this.bootstrapEvent(this.rootPointerEvent,c[f]);this.rootBoundary.mapEvent(_)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(u){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,uo.pointerMoved();const c=this.normalizeToPointerData(u);for(let f=0,p=c.length;f<p;f++){const g=this.bootstrapEvent(this.rootPointerEvent,c[f]);this.rootBoundary.mapEvent(g)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(u){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let c=u.target;u.composedPath&&u.composedPath().length>0&&(c=u.composedPath()[0]);const f=c!==this.domElement?"outside":"",p=this.normalizeToPointerData(u);for(let g=0,_=p.length;g<_;g++){const y=this.bootstrapEvent(this.rootPointerEvent,p[g]);y.type+=f,this.rootBoundary.mapEvent(y)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(u){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const c=this.normalizeToPointerData(u);for(let f=0,p=c.length;f<p;f++){const g=this.bootstrapEvent(this.rootPointerEvent,c[f]);this.rootBoundary.mapEvent(g)}this.setCursor(this.rootBoundary.cursor)}onWheel(u){if(!this.features.wheel)return;const c=this.normalizeWheelEvent(u);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(c)}setTargetElement(u){this.removeEvents(),this.domElement=u,uo.domElement=u,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;uo.addTickerListener();const u=this.domElement.style;u&&(globalThis.navigator.msPointerEnabled?(u.msContentZooming="none",u.msTouchAction="none"):this.supportsPointerEvents&&(u.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;uo.removeTickerListener();const u=this.domElement.style;globalThis.navigator.msPointerEnabled?(u.msContentZooming="",u.msTouchAction=""):this.supportsPointerEvents&&(u.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(u,c,f){const p=this.domElement.isConnected?this.domElement.getBoundingClientRect():{x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0},g=1/this.resolution;u.x=this.domElement.width/p.width*(c-p.left)*g,u.y=this.domElement.height/p.height*(f-p.top)*g}normalizeToPointerData(u){const c=[];if(this.supportsTouchEvents&&u instanceof TouchEvent)for(let f=0,p=u.changedTouches.length;f<p;f++){const g=u.changedTouches[f];typeof g.button>"u"&&(g.button=0),typeof g.buttons>"u"&&(g.buttons=1),typeof g.isPrimary>"u"&&(g.isPrimary=1===u.touches.length&&"touchstart"===u.type),typeof g.width>"u"&&(g.width=g.radiusX||1),typeof g.height>"u"&&(g.height=g.radiusY||1),typeof g.tiltX>"u"&&(g.tiltX=0),typeof g.tiltY>"u"&&(g.tiltY=0),typeof g.pointerType>"u"&&(g.pointerType="touch"),typeof g.pointerId>"u"&&(g.pointerId=g.identifier||0),typeof g.pressure>"u"&&(g.pressure=g.force||.5),typeof g.twist>"u"&&(g.twist=0),typeof g.tangentialPressure>"u"&&(g.tangentialPressure=0),typeof g.layerX>"u"&&(g.layerX=g.offsetX=g.clientX),typeof g.layerY>"u"&&(g.layerY=g.offsetY=g.clientY),g.isNormalized=!0,g.type=u.type,c.push(g)}else if(!globalThis.MouseEvent||u instanceof MouseEvent&&!(this.supportsPointerEvents&&u instanceof globalThis.PointerEvent)){const f=u;typeof f.isPrimary>"u"&&(f.isPrimary=!0),typeof f.width>"u"&&(f.width=1),typeof f.height>"u"&&(f.height=1),typeof f.tiltX>"u"&&(f.tiltX=0),typeof f.tiltY>"u"&&(f.tiltY=0),typeof f.pointerType>"u"&&(f.pointerType="mouse"),typeof f.pointerId>"u"&&(f.pointerId=1),typeof f.pressure>"u"&&(f.pressure=.5),typeof f.twist>"u"&&(f.twist=0),typeof f.tangentialPressure>"u"&&(f.tangentialPressure=0),f.isNormalized=!0,c.push(f)}else c.push(u);return c}normalizeWheelEvent(u){const c=this.rootWheelEvent;return this.transferMouseData(c,u),c.deltaX=u.deltaX,c.deltaY=u.deltaY,c.deltaZ=u.deltaZ,c.deltaMode=u.deltaMode,this.mapPositionToPoint(c.screen,u.clientX,u.clientY),c.global.copyFrom(c.screen),c.offset.copyFrom(c.screen),c.nativeEvent=u,c.type=u.type,c}bootstrapEvent(u,c){return u.originalEvent=null,u.nativeEvent=c,u.pointerId=c.pointerId,u.width=c.width,u.height=c.height,u.isPrimary=c.isPrimary,u.pointerType=c.pointerType,u.pressure=c.pressure,u.tangentialPressure=c.tangentialPressure,u.tiltX=c.tiltX,u.tiltY=c.tiltY,u.twist=c.twist,this.transferMouseData(u,c),this.mapPositionToPoint(u.screen,c.clientX,c.clientY),u.global.copyFrom(u.screen),u.offset.copyFrom(u.screen),u.isTrusted=c.isTrusted,"pointerleave"===u.type&&(u.type="pointerout"),u.type.startsWith("mouse")&&(u.type=u.type.replace("mouse","pointer")),u.type.startsWith("touch")&&(u.type=nz[u.type]||u.type),u}transferMouseData(u,c){u.isTrusted=c.isTrusted,u.srcElement=c.srcElement,u.timeStamp=performance.now(),u.type=c.type,u.altKey=c.altKey,u.button=c.button,u.buttons=c.buttons,u.client.x=c.clientX,u.client.y=c.clientY,u.ctrlKey=c.ctrlKey,u.metaKey=c.metaKey,u.movement.x=c.movementX,u.movement.y=c.movementY,u.page.x=c.pageX,u.page.y=c.pageY,u.relatedTarget=null,u.shiftKey=c.shiftKey}};Nv.extension={name:"events",type:[Pe.RendererSystem,Pe.CanvasRendererSystem]},Nv.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};let Lv=Nv;function qA(d){return"dynamic"===d||"static"===d}We.add(Lv);const iz={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??qA(Lv.defaultEventMode)},set interactive(d){lt("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=d,this.eventMode=d?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??Lv.defaultEventMode},set eventMode(d){this._internalInteractive=qA(d),this._internalEventMode=d},isInteractive(){return"static"===this.eventMode||"dynamic"===this.eventMode},interactiveChildren:!0,hitArea:null,addEventListener(d,u,c){const p="function"==typeof u?void 0:u;this.on(d="boolean"==typeof c&&c||"object"==typeof c&&c.capture?`${d}capture`:d,u="function"==typeof u?u:u.handleEvent,p)},removeEventListener(d,u,c){const p="function"==typeof u?void 0:u;this.off(d="boolean"==typeof c&&c||"object"==typeof c&&c.capture?`${d}capture`:d,u="function"==typeof u?u:u.handleEvent,p)},dispatchEvent(d){if(!(d instanceof Lc))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return d.defaultPrevented=!1,d.path=null,d.target=this,d.manager.dispatchEvent(d),!d.defaultPrevented}};or.mixin(iz),or.mixin({accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1});class ZA{constructor(u){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(Ss.tablet||Ss.phone)&&this.createTouchHook();const c=document.createElement("div");c.style.width="100px",c.style.height="100px",c.style.position="absolute",c.style.top="0px",c.style.left="0px",c.style.zIndex=2..toString(),this.div=c,this.renderer=u,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const u=document.createElement("button");u.style.width="1px",u.style.height="1px",u.style.position="absolute",u.style.top="-1000px",u.style.left="-1000px",u.style.zIndex=2..toString(),u.style.backgroundColor="#FF0000",u.title="select to enable accessibility for this content",u.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(u),this._hookDiv=u}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode?.appendChild(this.div))}deactivate(){!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode?.removeChild(this.div))}updateAccessibleObjects(u){if(!u.visible||!u.accessibleChildren)return;u.accessible&&u.isInteractive()&&(u._accessibleActive||this.addChild(u),u.renderId=this.renderId);const c=u.children;if(c)for(let f=0;f<c.length;f++)this.updateAccessibleObjects(c[f])}update(){const u=performance.now();if(Ss.android.device&&u<this.androidUpdateCount||(this.androidUpdateCount=u+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:c,y:f,width:p,height:g}=this.renderer.view.getBoundingClientRect(),{width:_,height:y,resolution:v}=this.renderer,x=p/_*v,w=g/y*v;let C=this.div;C.style.left=`${c}px`,C.style.top=`${f}px`,C.style.width=`${_}px`,C.style.height=`${y}px`;for(let E=0;E<this.children.length;E++){const T=this.children[E];if(T.renderId!==this.renderId)T._accessibleActive=!1,Ol(this.children,E,1),this.div.removeChild(T._accessibleDiv),this.pool.push(T._accessibleDiv),T._accessibleDiv=null,E--;else{C=T._accessibleDiv;let D=T.hitArea;const S=T.worldTransform;T.hitArea?(C.style.left=(S.tx+D.x*S.a)*x+"px",C.style.top=(S.ty+D.y*S.d)*w+"px",C.style.width=D.width*S.a*x+"px",C.style.height=D.height*S.d*w+"px"):(D=T.getBounds(),this.capHitArea(D),C.style.left=D.x*x+"px",C.style.top=D.y*w+"px",C.style.width=D.width*x+"px",C.style.height=D.height*w+"px",C.title!==T.accessibleTitle&&null!==T.accessibleTitle&&(C.title=T.accessibleTitle),C.getAttribute("aria-label")!==T.accessibleHint&&null!==T.accessibleHint&&C.setAttribute("aria-label",T.accessibleHint)),(T.accessibleTitle!==C.title||T.tabIndex!==C.tabIndex)&&(C.title=T.accessibleTitle,C.tabIndex=T.tabIndex,this.debug&&this.updateDebugHTML(C))}}this.renderId++}updateDebugHTML(u){u.innerHTML=`type: ${u.type}</br> title : ${u.title}</br> tabIndex: ${u.tabIndex}`}capHitArea(u){u.x<0&&(u.width+=u.x,u.x=0),u.y<0&&(u.height+=u.y,u.y=0);const{width:c,height:f}=this.renderer;u.x+u.width>c&&(u.width=c-u.x),u.y+u.height>f&&(u.height=f-u.y)}addChild(u){let c=this.pool.pop();c||(c=document.createElement("button"),c.style.width="100px",c.style.height="100px",c.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",c.style.position="absolute",c.style.zIndex=2..toString(),c.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?c.setAttribute("aria-live","off"):c.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?c.setAttribute("aria-relevant","additions"):c.setAttribute("aria-relevant","text"),c.addEventListener("click",this._onClick.bind(this)),c.addEventListener("focus",this._onFocus.bind(this)),c.addEventListener("focusout",this._onFocusOut.bind(this))),c.style.pointerEvents=u.accessiblePointerEvents,c.type=u.accessibleType,u.accessibleTitle&&null!==u.accessibleTitle?c.title=u.accessibleTitle:(!u.accessibleHint||null===u.accessibleHint)&&(c.title=`displayObject ${u.tabIndex}`),u.accessibleHint&&null!==u.accessibleHint&&c.setAttribute("aria-label",u.accessibleHint),this.debug&&this.updateDebugHTML(c),u._accessibleActive=!0,u._accessibleDiv=c,c.displayObject=u,this.children.push(u),this.div.appendChild(u._accessibleDiv),u._accessibleDiv.tabIndex=u.tabIndex}_dispatchEvent(u,c){const{displayObject:f}=u.target,p=this.renderer.events.rootBoundary,g=Object.assign(new Lc(p),{target:f});p.rootTarget=this.renderer.lastObjectRendered,c.forEach(_=>p.dispatchEvent(g,_))}_onClick(u){this._dispatchEvent(u,["click","pointertap","tap"])}_onFocus(u){u.target.getAttribute("aria-live")||u.target.setAttribute("aria-live","assertive"),this._dispatchEvent(u,["mouseover"])}_onFocusOut(u){u.target.getAttribute("aria-live")||u.target.setAttribute("aria-live","polite"),this._dispatchEvent(u,["mouseout"])}_onKeyDown(u){9===u.keyCode&&this.activate()}_onMouseMove(u){0===u.movementX&&0===u.movementY||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}ZA.extension={name:"accessibility",type:[Pe.RendererPlugin,Pe.CanvasRendererPlugin]},We.add(ZA);const QA=class hx{constructor(u){this.stage=new vn,u=Object.assign({forceCanvas:!1},u),this.renderer=function wG(d){for(const u of kA)if(u.test(d))return new u(d);throw new Error("Unable to auto-detect a suitable renderer.")}(u),hx._plugins.forEach(c=>{c.init.call(this,u)})}render(){this.renderer.render(this.stage)}get view(){return this.renderer?.view}get screen(){return this.renderer?.screen}destroy(u,c){const f=hx._plugins.slice(0);f.reverse(),f.forEach(p=>{p.destroy.call(this)}),this.stage.destroy(c),this.stage=null,this.renderer.destroy(u),this.renderer=null}};QA._plugins=[];let JA=QA;We.handleByList(Pe.Application,JA._plugins);class eI{static init(u){Object.defineProperty(this,"resizeTo",{set(c){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=c,c&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;let c,f;if(this.cancelResize(),this._resizeTo===globalThis.window)c=globalThis.innerWidth,f=globalThis.innerHeight;else{const{clientWidth:p,clientHeight:g}=this._resizeTo;c=p,f=g}this.renderer.resize(c,f),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=u.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}eI.extension=Pe.Application,We.add(eI);const tI={loader:Pe.LoadParser,resolver:Pe.ResolveParser,cache:Pe.CacheParser,detection:Pe.DetectionParser};We.handle(Pe.Asset,d=>{const u=d.ref;Object.entries(tI).filter(([c])=>!!u[c]).forEach(([c,f])=>We.add(Object.assign(u[c],{extension:u[c].extension??f})))},d=>{const u=d.ref;Object.keys(tI).filter(c=>!!u[c]).forEach(c=>We.remove(u[c]))});class dz{constructor(u,c=!1){this._loader=u,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=c}add(u){u.forEach(c=>{this._assetList.push(c)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}_next(){var u=this;return Ge(function*(){if(u._assetList.length&&u._isActive){u._isLoading=!0;const c=[],f=Math.min(u._assetList.length,u._maxConcurrent);for(let p=0;p<f;p++)c.push(u._assetList.pop());yield u._loader.load(c),u._isLoading=!1,u._next()}})()}get active(){return this._isActive}set active(u){this._isActive!==u&&(this._isActive=u,u&&!this._isLoading&&this._next())}}function co(d,u){const c=d.split("?")[0],f=Nr.extname(c).toLowerCase();return Array.isArray(u)?u.includes(f):f===u}const Ii=(d,u,c=!1)=>(Array.isArray(d)||(d=[d]),u?d.map(f=>"string"==typeof f||c?u(f):f):d),ua=new class fz{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(u){return this._cache.has(u)}get(u){const c=this._cache.get(u);return c||console.warn(`[Assets] Asset id ${u} was not found in the Cache`),c}set(u,c){const f=Ii(u);let p;for(let y=0;y<this.parsers.length;y++){const v=this.parsers[y];if(v.test(c)){p=v.getCacheableAssets(f,c);break}}p||(p={},f.forEach(y=>{p[y]=c}));const g=Object.keys(p),_={cacheKeys:g,keys:f};if(f.forEach(y=>{this._cacheMap.set(y,_)}),g.forEach(y=>{this._cache.has(y)&&this._cache.get(y)!==c&&console.warn("[Cache] already has key:",y),this._cache.set(y,p[y])}),c instanceof Xe){const y=c;f.forEach(v=>{y.baseTexture!==Xe.EMPTY.baseTexture&&vt.addToCache(y.baseTexture,v),Xe.addToCache(y,v)})}}remove(u){if(!this._cacheMap.has(u))return void console.warn(`[Assets] Asset id ${u} was not found in the Cache`);const c=this._cacheMap.get(u);c.cacheKeys.forEach(f=>{this._cache.delete(f)}),c.keys.forEach(f=>{this._cacheMap.delete(f)})}get parsers(){return this._parsers}},$f=d=>!Array.isArray(d);class pz{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(u,c,f)=>(this._parsersValidated=!1,u[c]=f,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(u,c){var f=this;const p={promise:null,parser:null};return p.promise=Ge(function*(){let g=null,_=null;if(c.loadParser&&(_=f._parserHash[c.loadParser],_||console.warn(`[Assets] specified load parser "${c.loadParser}" not found while loading ${u}`)),!_){for(let y=0;y<f.parsers.length;y++){const v=f.parsers[y];if(v.load&&v.test?.(u,c,f)){_=v;break}}if(!_)return console.warn(`[Assets] ${u} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}g=yield _.load(u,c,f),p.parser=_;for(let y=0;y<f.parsers.length;y++){const v=f.parsers[y];v.parse&&v.parse&&(yield v.testParse?.(g,c,f))&&(g=(yield v.parse(g,c,f))||g,p.parser=v)}return g})(),p}load(u,c){var f=this;return Ge(function*(){f._parsersValidated||f._validateParsers();let p=0;const g={},_=$f(u),y=Ii(u,w=>({alias:[w],src:w})),v=y.length,x=y.map(function(){var w=Ge(function*(C){const E=Nr.toAbsolute(C.src);if(!g[C.src])try{f.promiseCache[E]||(f.promiseCache[E]=f._getLoadPromiseAndParser(E,C)),g[C.src]=yield f.promiseCache[E].promise,c&&c(++p/v)}catch(T){throw delete f.promiseCache[E],delete g[C.src],new Error(`[Loader.load] Failed to load ${E}.\n${T}`)}});return function(C){return w.apply(this,arguments)}}());return yield Promise.all(x),_?g[y[0].src]:g})()}unload(u){var c=this;return Ge(function*(){const f=Ii(u,p=>({alias:[p],src:p})).map(function(){var p=Ge(function*(g){const _=Nr.toAbsolute(g.src),y=c.promiseCache[_];if(y){const v=yield y.promise;delete c.promiseCache[_],y.parser?.unload?.(v,g,c)}});return function(g){return p.apply(this,arguments)}}());yield Promise.all(f)})()}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(u=>u.name).reduce((u,c)=>(u[c.name]&&console.warn(`[Assets] loadParser name conflict "${c.name}"`),{...u,[c.name]:c}),{})}}var Mi=(d=>(d[d.Low=0]="Low",d[d.Normal=1]="Normal",d[d.High=2]="High",d))(Mi||{});function Bl(d,u){if(Array.isArray(u)){for(const c of u)if(d.startsWith(`data:${c}`))return!0;return!1}return d.startsWith(`data:${u}`)}const _z={extension:{type:Pe.LoadParser,priority:Mi.Low},name:"loadJson",test:d=>Bl(d,"application/json")||co(d,".json"),load:d=>Ge(function*(){return yield(yield Re.ADAPTER.fetch(d)).json()})()};We.add(_z);const xz={name:"loadTxt",extension:{type:Pe.LoadParser,priority:Mi.Low},test:d=>Bl(d,"text/plain")||co(d,".txt"),load:d=>Ge(function*(){return yield(yield Re.ADAPTER.fetch(d)).text()})()};We.add(xz);const bz=["normal","bold","100","200","300","400","500","600","700","800","900"],wz=[".ttf",".otf",".woff",".woff2"],Cz=["font/ttf","font/otf","font/woff","font/woff2"],Ez=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i,Sz=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function Dz(d){return Sz.test(d)?d:encodeURI(d)}const Az={extension:{type:Pe.LoadParser,priority:Mi.Low},name:"loadWebFont",test:d=>Bl(d,Cz)||co(d,wz),load:(d,u)=>Ge(function*(){const c=Re.ADAPTER.getFontFaceSet();if(c){const f=[],p=u.data?.family??function Tz(d){const u=Nr.extname(d),c=Nr.basename(d,u).replace(/(-|_)/g," ").toLowerCase().split(" ").map(g=>g.charAt(0).toUpperCase()+g.slice(1));let f=c.length>0;for(const g of c)if(!g.match(Ez)){f=!1;break}let p=c.join(" ");return f||(p=`"${p.replace(/[\\"]/g,"\\$&")}"`),p}(d),g=u.data?.weights?.filter(y=>bz.includes(y))??["normal"],_=u.data??{};for(let y=0;y<g.length;y++){const v=g[y],x=new FontFace(p,`url(${Dz(d)})`,{..._,weight:v});yield x.load(),c.add(x),f.push(x)}return 1===f.length?f[0]:f}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null})(),unload(d){(Array.isArray(d)?d:[d]).forEach(u=>Re.ADAPTER.getFontFaceSet().delete(u))}};We.add(Az);let kv,rI=0;const Mz_code="\n    async function checkImageBitmap()\n    {\n        try\n        {\n            if (typeof createImageBitmap !== 'function') return false;\n\n            const response = await fetch('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=');\n            const imageBlob =  await response.blob();\n            const imageBitmap = await createImageBitmap(imageBlob);\n\n            return imageBitmap.width === 1 && imageBitmap.height === 1;\n        }\n        catch (e)\n        {\n            return false;\n        }\n    }\n    checkImageBitmap().then((result) => { self.postMessage(result); });\n    ",Pz_code="\n    async function loadImageBitmap(url)\n    {\n        const response = await fetch(url);\n\n        if (!response.ok)\n        {\n            throw new Error(`[WorkerManager.loadImageBitmap] Failed to fetch ${url}: `\n                + `${response.status} ${response.statusText}`);\n        }\n\n        const imageBlob =  await response.blob();\n        const imageBitmap = await createImageBitmap(imageBlob);\n\n        return imageBitmap;\n    }\n    self.onmessage = async (event) =>\n    {\n        try\n        {\n            const imageBitmap = await loadImageBitmap(event.data.data[0]);\n\n            self.postMessage({\n                data: imageBitmap,\n                uuid: event.data.uuid,\n                id: event.data.id,\n            }, [imageBitmap]);\n        }\n        catch(e)\n        {\n            self.postMessage({\n                error: e,\n                uuid: event.data.uuid,\n                id: event.data.id,\n            });\n        }\n    };";let Bv;const nI=new class Rz{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return void 0!==this._isImageBitmapSupported||(this._isImageBitmapSupported=new Promise(u=>{const c=URL.createObjectURL(new Blob([Mz_code],{type:"application/javascript"})),f=new Worker(c);f.addEventListener("message",p=>{f.terminate(),URL.revokeObjectURL(c),u(p.data)})})),this._isImageBitmapSupported}loadImageBitmap(u){return this._run("loadImageBitmap",[u])}_initWorkers(){var u=this;return Ge(function*(){u._initialized||(u._initialized=!0)})()}getWorker(){void 0===kv&&(kv=navigator.hardwareConcurrency||4);let u=this.workerPool.pop();return!u&&this._createdWorkers<kv&&(Bv||(Bv=URL.createObjectURL(new Blob([Pz_code],{type:"application/javascript"}))),this._createdWorkers++,u=new Worker(Bv),u.addEventListener("message",c=>{this.complete(c.data),this.returnWorker(c.target),this.next()})),u}returnWorker(u){this.workerPool.push(u)}complete(u){void 0!==u.error?this.resolveHash[u.uuid].reject(u.error):this.resolveHash[u.uuid].resolve(u.data),this.resolveHash[u.uuid]=null}_run(u,c){var f=this;return Ge(function*(){yield f._initWorkers();const p=new Promise((g,_)=>{f.queue.push({id:u,arguments:c,resolve:g,reject:_})});return f.next(),p})()}next(){if(!this.queue.length)return;const u=this.getWorker();if(!u)return;const c=this.queue.pop(),f=c.id;this.resolveHash[rI]={resolve:c.resolve,reject:c.reject},u.postMessage({data:c.arguments,uuid:rI++,id:f})}};function kc(d,u,c){d.resource.internal=!0;const f=new Xe(d),p=()=>{delete u.promiseCache[c],ua.has(c)&&ua.remove(c)};return f.baseTexture.once("destroyed",()=>{c in u.promiseCache&&(console.warn("[Assets] A BaseTexture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the BaseTexture."),p())}),f.once("destroyed",()=>{d.destroyed||(console.warn("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),p())}),f}const Fz=[".jpeg",".jpg",".png",".webp",".avif"],Oz=["image/jpeg","image/png","image/webp","image/avif"];function Uv(){return(Uv=Ge(function*(d){const u=yield Re.ADAPTER.fetch(d);if(!u.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${d}: ${u.status} ${u.statusText}`);const c=yield u.blob();return yield createImageBitmap(c)})).apply(this,arguments)}const Wf={name:"loadTextures",extension:{type:Pe.LoadParser,priority:Mi.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test:d=>Bl(d,Oz)||co(d,Fz),load(d,u,c){var f=this;return Ge(function*(){const p=globalThis.createImageBitmap&&f.config.preferCreateImageBitmap;let g;g=p?f.config.preferWorkers&&(yield nI.isImageBitmapSupported())?yield nI.loadImageBitmap(d):yield function Nz(d){return Uv.apply(this,arguments)}(d):yield new Promise((v,x)=>{const w=new Image;w.crossOrigin=f.config.crossOrigin,w.src=d,w.complete?v(w):(w.onload=()=>v(w),w.onerror=C=>x(C))});const _={...u.data};_.resolution??(_.resolution=As(d)),p&&void 0===_.resourceOptions?.ownsImageBitmap&&(_.resourceOptions={..._.resourceOptions},_.resourceOptions.ownsImageBitmap=!0);const y=new vt(g,_);return y.resource.src=d,kc(y,c,d)})()},unload(d){d.destroy(!0)}};We.add(Wf);const Bz={extension:{type:Pe.LoadParser,priority:Mi.High},name:"loadSVG",test:d=>Bl(d,"image/svg+xml")||co(d,".svg"),testParse:d=>Ge(function*(){return Mv.test(d)})(),parse:(d,u,c)=>Ge(function*(){const f=new Mv(d,u?.data?.resourceOptions);yield f.load();const p=new vt(f,{resolution:As(d),...u?.data});return p.resource.src=u.src,kc(p,c,u.src)})(),load:(d,u)=>Ge(function*(){return(yield Re.ADAPTER.fetch(d)).text()})(),unload:Wf.unload};We.add(Bz);const Uz=[".mp4",".m4v",".webm",".ogv"],Vz=["video/mp4","video/webm","video/ogg"],Hz={name:"loadVideo",extension:{type:Pe.LoadParser,priority:Mi.High},config:{defaultAutoPlay:!0},test:d=>Bl(d,Vz)||co(d,Uz),load(d,u,c){var f=this;return Ge(function*(){let p;const g=yield(yield Re.ADAPTER.fetch(d)).blob(),_=URL.createObjectURL(g);try{const y={autoPlay:f.config.defaultAutoPlay,...u?.data?.resourceOptions},v=new zA(_,y);yield v.load();const x=new vt(v,{alphaMode:yield qH(),resolution:As(d),...u?.data});x.resource.src=d,p=kc(x,c,d),p.baseTexture.once("destroyed",()=>{URL.revokeObjectURL(_)})}catch(y){throw URL.revokeObjectURL(_),y}return p})()},unload(d){d.destroy(!0)}};function iI(d,u,c,f,p){const g=u[c];for(let _=0;_<g.length;_++){const y=g[_];c<u.length-1?iI(d.replace(f[c],y),u,c+1,f,p):p.push(d.replace(f[c],y))}}function jz(d){const c=d.match(/\{(.*?)\}/g),f=[];if(c){const p=[];c.forEach(g=>{const _=g.substring(1,g.length-1).split(",");p.push(_)}),iI(d,p,0,c,f)}else f.push(d);return f}We.add(Hz);class Gz{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(u,c)=>`${u}${this._bundleIdConnector}${c}`,extractAssetIdFromBundle:(u,c)=>c.replace(`${u}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(u){if(this._bundleIdConnector=u.connector??this._bundleIdConnector,this._createBundleAssetId=u.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=u.extractAssetIdFromBundle??this._extractAssetIdFromBundle,"bar"!==this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar")))throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...u){u.forEach(c=>{this._preferredOrder.push(c),c.priority||(c.priority=Object.keys(c.params))}),this._resolverHash={}}set basePath(u){this._basePath=u}get basePath(){return this._basePath}set rootPath(u){this._rootPath=u}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(u){if("string"==typeof u)this._defaultSearchParams=u;else{const c=u;this._defaultSearchParams=Object.keys(c).map(f=>`${encodeURIComponent(f)}=${encodeURIComponent(c[f])}`).join("&")}}getAlias(u){const{alias:c,name:f,src:p,srcs:g}=u;return Ii(c||f||p||g,_=>"string"==typeof _?_:Array.isArray(_)?_.map(y=>y?.src??y?.srcs??y):_?.src||_?.srcs?_.src??_.srcs:_,!0)}addManifest(u){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=u,u.bundles.forEach(c=>{this.addBundle(c.name,c.assets)})}addBundle(u,c){const f=[];Array.isArray(c)?c.forEach(p=>{const g=p.src??p.srcs,_=p.alias??p.name;let y;if("string"==typeof _){const v=this._createBundleAssetId(u,_);f.push(v),y=[_,v]}else{const v=_.map(x=>this._createBundleAssetId(u,x));f.push(...v),y=[..._,...v]}this.add({...p,alias:y,src:g})}):Object.keys(c).forEach(p=>{const g=[p,this._createBundleAssetId(u,p)];if("string"==typeof c[p])this.add({alias:g,src:c[p]});else if(Array.isArray(c[p]))this.add({alias:g,src:c[p]});else{const _=c[p],y=_.src??_.srcs;this.add({..._,alias:g,src:Array.isArray(y)?y:[y]})}f.push(...g)}),this._bundles[u]=f}add(u,c,f,p,g){const _=[];let y;"string"==typeof u||Array.isArray(u)&&"string"==typeof u[0]?(lt("7.2.0","Assets.add now uses an object instead of individual parameters.\nPlease use Assets.add({ alias, src, data, format, loadParser }) instead."),_.push({alias:u,src:c,data:f,format:p,loadParser:g})):Array.isArray(u)?_.push(...u):_.push(u),y=v=>{this.hasKey(v)&&console.warn(`[Resolver] already has key: ${v} overwriting`)},Ii(_).forEach(v=>{const{src:x,srcs:w}=v;let{data:C,format:E,loadParser:T}=v;const D=Ii(x||w).map(I=>"string"==typeof I?jz(I):Array.isArray(I)?I:[I]),S=this.getAlias(v);Array.isArray(S)?S.forEach(y):y(S);const A=[];D.forEach(I=>{I.forEach(P=>{let M={};if("object"!=typeof P){M.src=P;for(let R=0;R<this._parsers.length;R++){const L=this._parsers[R];if(L.test(P)){M=L.parse(P);break}}}else C=P.data??C,E=P.format??E,T=P.loadParser??T,M={...M,...P};if(!S)throw new Error(`[Resolver] alias is undefined for this asset: ${M.src}`);M=this.buildResolvedAsset(M,{aliases:S,data:C,format:E,loadParser:T}),A.push(M)})}),S.forEach(I=>{this._assetMap[I]=A})})}resolveBundle(u){const c=$f(u);u=Ii(u);const f={};return u.forEach(p=>{const g=this._bundles[p];if(g){const _=this.resolve(g),y={};for(const v in _){const x=_[v];y[this._extractAssetIdFromBundle(p,v)]=x}f[p]=y}}),c?f[u[0]]:f}resolveUrl(u){const c=this.resolve(u);if("string"!=typeof u){const f={};for(const p in c)f[p]=c[p].src;return f}return c.src}resolve(u){const c=$f(u);u=Ii(u);const f={};return u.forEach(p=>{if(!this._resolverHash[p])if(this._assetMap[p]){let g=this._assetMap[p];const _=g[0],y=this._getPreferredOrder(g);y?.priority.forEach(v=>{y.params[v].forEach(x=>{const w=g.filter(C=>!!C[v]&&C[v]===x);w.length&&(g=w)})}),this._resolverHash[p]=g[0]??_}else this._resolverHash[p]=this.buildResolvedAsset({alias:[p],src:p},{});f[p]=this._resolverHash[p]}),c?f[u[0]]:f}hasKey(u){return!!this._assetMap[u]}hasBundle(u){return!!this._bundles[u]}_getPreferredOrder(u){for(let c=0;c<u.length;c++){const f=u[0],p=this._preferredOrder.find(g=>g.params.format.includes(f.format));if(p)return p}return this._preferredOrder[0]}_appendDefaultSearchParams(u){return this._defaultSearchParams?`${u}${/\?/.test(u)?"&":"?"}${this._defaultSearchParams}`:u}buildResolvedAsset(u,c){const{aliases:f,data:p,loadParser:g,format:_}=c;return(this._basePath||this._rootPath)&&(u.src=Nr.toAbsolute(u.src,this._basePath,this._rootPath)),u.alias=f??u.alias??[u.src],u.src=this._appendDefaultSearchParams(u.src),u.data={...p||{},...u.data},u.loadParser=g??u.loadParser,u.format=_??Nr.extname(u.src).slice(1),u.srcs=u.src,u.name=u.alias,u}}const Ps=new class zz{constructor(){this._detections=[],this._initialized=!1,this.resolver=new Gz,this.loader=new pz,this.cache=ua,this._backgroundLoader=new dz(this.loader),this._backgroundLoader.active=!0,this.reset()}init(u={}){var c=this;return Ge(function*(){if(c._initialized)return void console.warn("[Assets]AssetManager already initialized, did you load before calling this Asset.init()?");if(c._initialized=!0,u.defaultSearchParams&&c.resolver.setDefaultSearchParams(u.defaultSearchParams),u.basePath&&(c.resolver.basePath=u.basePath),u.bundleIdentifier&&c.resolver.setBundleIdentifier(u.bundleIdentifier),u.manifest){let _=u.manifest;"string"==typeof _&&(_=yield c.load(_)),c.resolver.addManifest(_)}const f=u.texturePreference?.resolution??1,p="number"==typeof f?[f]:f,g=yield c._detectFormats({preferredFormats:u.texturePreference?.format,skipDetections:u.skipDetections,detections:c._detections});c.resolver.prefer({params:{format:g,resolution:p}}),u.preferences&&c.setPreferences(u.preferences)})()}add(u,c,f,p,g){this.resolver.add(u,c,f,p,g)}load(u,c){var f=this;return Ge(function*(){f._initialized||(yield f.init());const p=$f(u),g=Ii(u).map(v=>{if("string"!=typeof v){const x=f.resolver.getAlias(v);return x.some(w=>!f.resolver.hasKey(w))&&f.add(v),Array.isArray(x)?x[0]:x}return f.resolver.hasKey(v)||f.add({alias:v,src:v}),v}),_=f.resolver.resolve(g),y=yield f._mapLoadToResolve(_,c);return p?y[g[0]]:y})()}addBundle(u,c){this.resolver.addBundle(u,c)}loadBundle(u,c){var f=this;return Ge(function*(){f._initialized||(yield f.init());let p=!1;"string"==typeof u&&(p=!0,u=[u]);const g=f.resolver.resolveBundle(u),_={},y=Object.keys(g);let v=0,x=0;const w=()=>{c?.(++v/x)},C=y.map(E=>{const T=g[E];return x+=Object.keys(T).length,f._mapLoadToResolve(T,w).then(D=>{_[E]=D})});return yield Promise.all(C),p?_[u[0]]:_})()}backgroundLoad(u){var c=this;return Ge(function*(){c._initialized||(yield c.init()),"string"==typeof u&&(u=[u]);const f=c.resolver.resolve(u);c._backgroundLoader.add(Object.values(f))})()}backgroundLoadBundle(u){var c=this;return Ge(function*(){c._initialized||(yield c.init()),"string"==typeof u&&(u=[u]);const f=c.resolver.resolveBundle(u);Object.values(f).forEach(p=>{c._backgroundLoader.add(Object.values(p))})})()}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(u){if("string"==typeof u)return ua.get(u);const c={};for(let f=0;f<u.length;f++)c[f]=ua.get(u[f]);return c}_mapLoadToResolve(u,c){var f=this;return Ge(function*(){const p=Object.values(u),g=Object.keys(u);f._backgroundLoader.active=!1;const _=yield f.loader.load(p,c);f._backgroundLoader.active=!0;const y={};return p.forEach((v,x)=>{const w=_[v.src],C=[v.src];v.alias&&C.push(...v.alias),y[g[x]]=w,ua.set(C,w)}),y})()}unload(u){var c=this;return Ge(function*(){c._initialized||(yield c.init());const f=Ii(u).map(g=>"string"!=typeof g?g.src:g),p=c.resolver.resolve(f);yield c._unloadFromResolved(p)})()}unloadBundle(u){var c=this;return Ge(function*(){c._initialized||(yield c.init()),u=Ii(u);const f=c.resolver.resolveBundle(u),p=Object.keys(f).map(g=>c._unloadFromResolved(f[g]));yield Promise.all(p)})()}_unloadFromResolved(u){var c=this;return Ge(function*(){const f=Object.values(u);f.forEach(p=>{ua.remove(p.src)}),yield c.loader.unload(f)})()}_detectFormats(u){return Ge(function*(){let c=[];u.preferredFormats&&(c=Array.isArray(u.preferredFormats)?u.preferredFormats:[u.preferredFormats]);for(const f of u.detections)u.skipDetections||(yield f.test())?c=yield f.add(c):u.skipDetections||(c=yield f.remove(c));return c=c.filter((f,p)=>c.indexOf(f)===p),c})()}get detections(){return this._detections}get preferWorkers(){return Wf.config.preferWorkers}set preferWorkers(u){lt("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:u})}setPreferences(u){this.loader.parsers.forEach(c=>{c.config&&Object.keys(c.config).filter(f=>f in u).forEach(f=>{c.config[f]=u[f]})})}};We.handleByList(Pe.LoadParser,Ps.loader.parsers).handleByList(Pe.ResolveParser,Ps.resolver.parsers).handleByList(Pe.CacheParser,Ps.cache.parsers).handleByList(Pe.DetectionParser,Ps.detections);const $z={extension:Pe.CacheParser,test:d=>Array.isArray(d)&&d.every(u=>u instanceof Xe),getCacheableAssets:(d,u)=>{const c={};return d.forEach(f=>{u.forEach((p,g)=>{c[f+(0===g?"":g+1)]=p})}),c}};function sI(d){return Vv.apply(this,arguments)}function Vv(){return(Vv=Ge(function*(d){if("Image"in globalThis)return new Promise(u=>{const c=new Image;c.onload=()=>{u(!0)},c.onerror=()=>{u(!1)},c.src=d});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const u=yield(yield fetch(d)).blob();yield createImageBitmap(u)}catch{return!1}return!0}return!1})).apply(this,arguments)}We.add($z);const Wz={extension:{type:Pe.DetectionParser,priority:1},test:(d=Ge(function*(){return sI("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=")}),function(){return d.apply(this,arguments)}),add:function(){var d=Ge(function*(u){return[...u,"avif"]});return function(c){return d.apply(this,arguments)}}(),remove:function(){var d=Ge(function*(u){return u.filter(c=>"avif"!==c)});return function(c){return d.apply(this,arguments)}}()};var d;We.add(Wz);const Xz={extension:{type:Pe.DetectionParser,priority:0},test:function(){var d=Ge(function*(){return sI("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=")});return function(){return d.apply(this,arguments)}}(),add:function(){var d=Ge(function*(u){return[...u,"webp"]});return function(c){return d.apply(this,arguments)}}(),remove:function(){var d=Ge(function*(u){return u.filter(c=>"webp"!==c)});return function(c){return d.apply(this,arguments)}}()};We.add(Xz);const oI=["png","jpg","jpeg"],qz={extension:{type:Pe.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:function(){var d=Ge(function*(u){return[...u,...oI]});return function(c){return d.apply(this,arguments)}}(),remove:function(){var d=Ge(function*(u){return u.filter(c=>!oI.includes(c))});return function(c){return d.apply(this,arguments)}}()};We.add(qz);const Yz="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function Hv(d){return!Yz&&""!==document.createElement("video").canPlayType(d)}const Kz={extension:{type:Pe.DetectionParser,priority:0},test:function(){var d=Ge(function*(){return Hv("video/webm")});return function(){return d.apply(this,arguments)}}(),add:function(){var d=Ge(function*(u){return[...u,"webm"]});return function(c){return d.apply(this,arguments)}}(),remove:function(){var d=Ge(function*(u){return u.filter(c=>"webm"!==c)});return function(c){return d.apply(this,arguments)}}()};We.add(Kz);const Zz={extension:{type:Pe.DetectionParser,priority:0},test:function(){var d=Ge(function*(){return Hv("video/mp4")});return function(){return d.apply(this,arguments)}}(),add:function(){var d=Ge(function*(u){return[...u,"mp4","m4v"]});return function(c){return d.apply(this,arguments)}}(),remove:function(){var d=Ge(function*(u){return u.filter(c=>"mp4"!==c&&"m4v"!==c)});return function(c){return d.apply(this,arguments)}}()};We.add(Zz);const Qz={extension:{type:Pe.DetectionParser,priority:0},test:function(){var d=Ge(function*(){return Hv("video/ogg")});return function(){return d.apply(this,arguments)}}(),add:function(){var d=Ge(function*(u){return[...u,"ogv"]});return function(c){return d.apply(this,arguments)}}(),remove:function(){var d=Ge(function*(u){return u.filter(c=>"ogv"!==c)});return function(c){return d.apply(this,arguments)}}()};We.add(Qz);const Jz={extension:Pe.ResolveParser,test:Wf.test,parse:d=>({resolution:parseFloat(Re.RETINA_PREFIX.exec(d)?.[1]??"1"),format:Nr.extname(d).slice(1),src:d})};We.add(Jz);const jv=(d,u)=>{const c=u.split("?")[1];return c&&(d+=`?${c}`),d};var Bn=(d=>(d[d.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",d[d.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",d[d.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",d[d.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",d[d.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",d[d.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",d[d.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",d[d.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",d[d.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",d[d.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",d[d.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",d[d.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",d[d.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",d[d.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",d[d.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",d[d.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",d[d.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",d[d.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",d[d.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",d[d.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",d[d.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",d[d.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",d[d.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",d[d.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",d[d.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",d[d.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",d[d.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",d))(Bn||{});const Xf={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35986:1,34798:1,37808:1};let Rs,Ul;function aI(){Ul={s3tc:Rs.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:Rs.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:Rs.getExtension("WEBGL_compressed_texture_etc"),etc1:Rs.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:Rs.getExtension("WEBGL_compressed_texture_pvrtc")||Rs.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:Rs.getExtension("WEBGL_compressed_texture_atc"),astc:Rs.getExtension("WEBGL_compressed_texture_astc")}}const e8={extension:{type:Pe.DetectionParser,priority:2},test:function(){var d=Ge(function*(){const u=Re.ADAPTER.createCanvas().getContext("webgl");return u?(Rs=u,!0):(console.warn("WebGL not available for compressed textures."),!1)});return function(){return d.apply(this,arguments)}}(),add:function(){var d=Ge(function*(u){Ul||aI();const c=[];for(const f in Ul)Ul[f]&&c.push(f);return[...c,...u]});return function(c){return d.apply(this,arguments)}}(),remove:function(){var d=Ge(function*(u){return Ul||aI(),u.filter(c=>!(c in Ul))});return function(c){return d.apply(this,arguments)}}()};We.add(e8);class t8 extends bf{constructor(u,c={width:1,height:1,autoLoad:!0}){let f,p;"string"==typeof u?(f=u,p=new Uint8Array):(f=null,p=u),super(p,c),this.origin=f,this.buffer=p?new sv(p):null,this._load=null,this.loaded=!1,null!==this.origin&&!1!==c.autoLoad&&this.load(),null===this.origin&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(u){}load(){return this._load||(this._load=fetch(this.origin).then(u=>u.blob()).then(u=>u.arrayBuffer()).then(u=>(this.data=new Uint32Array(u),this.buffer=new sv(u),this.loaded=!0,this.onBlobLoaded(u),this.update(),this))),this._load}}class ca extends t8{constructor(u,c){super(u,c),this.format=c.format,this.levels=c.levels||1,this._width=c.width,this._height=c.height,this._extension=ca._formatToExtension(this.format),(c.levelBuffers||this.buffer)&&(this._levelBuffers=c.levelBuffers||ca._createLevelBuffers(u instanceof Uint8Array?u:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(u,c,f){const p=u.gl;if(!u.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;p.pixelStorei(p.UNPACK_ALIGNMENT,4);for(let g=0,_=this.levels;g<_;g++){const{levelID:y,levelWidth:v,levelHeight:x,levelBuffer:w}=this._levelBuffers[g];p.compressedTexImage2D(p.TEXTURE_2D,y,this.format,v,x,0,w)}return!0}onBlobLoaded(){this._levelBuffers=ca._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(u){if(u>=33776&&u<=33779)return"s3tc";if(u>=37488&&u<=37497)return"etc";if(u>=35840&&u<=35843)return"pvrtc";if(u>=36196)return"etc1";if(u>=35986&&u<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")}static _createLevelBuffers(u,c,f,p,g,_,y){const v=new Array(f);let x=u.byteOffset,w=_,C=y,E=w+p-1&~(p-1),T=C+g-1&~(g-1),D=E*T*Xf[c];for(let S=0;S<f;S++)v[S]={levelID:S,levelWidth:f>1?w:E,levelHeight:f>1?C:T,levelBuffer:new Uint8Array(u.buffer,x,D)},x+=D,w=w>>1||1,C=C>>1||1,E=w+p-1&~(p-1),T=C+g-1&~(g-1),D=E*T*Xf[c];return v}}const m8={827611204:Bn.COMPRESSED_RGBA_S3TC_DXT1_EXT,861165636:Bn.COMPRESSED_RGBA_S3TC_DXT3_EXT,894720068:Bn.COMPRESSED_RGBA_S3TC_DXT5_EXT},_8={70:Bn.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:Bn.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:Bn.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:Bn.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:Bn.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:Bn.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:Bn.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:Bn.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:Bn.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT},uI=[171,75,84,88,32,49,49,187,13,10,26,10],cI={[Ze.UNSIGNED_BYTE]:1,[Ze.UNSIGNED_SHORT]:2,[Ze.INT]:4,[Ze.UNSIGNED_INT]:4,[Ze.FLOAT]:4,[Ze.HALF_FLOAT]:8},x8={[be.RGBA]:4,[be.RGB]:3,[be.RG]:2,[be.RED]:1,[be.LUMINANCE]:1,[be.LUMINANCE_ALPHA]:2,[be.ALPHA]:1},b8={[Ze.UNSIGNED_SHORT_4_4_4_4]:2,[Ze.UNSIGNED_SHORT_5_5_5_1]:2,[Ze.UNSIGNED_SHORT_5_6_5]:2};function E8(d){switch(d){case be.RGBA:return be.RGBA_INTEGER;case be.RGB:return be.RGB_INTEGER;case be.RG:return be.RG_INTEGER;case be.RED:return be.RED_INTEGER;default:return d}}const S8={extension:{type:Pe.LoadParser,priority:Mi.High},name:"loadDDS",test:d=>co(d,".dds"),load:(d,u,c)=>Ge(function*(){const p=function y8(d){const u=new Uint32Array(d);if(542327876!==u[0])throw new Error("Invalid DDS file magic word");const c=new Uint32Array(d,0,124/Uint32Array.BYTES_PER_ELEMENT),f=c[3],p=c[4],g=c[7],_=new Uint32Array(d,19*Uint32Array.BYTES_PER_ELEMENT,32/Uint32Array.BYTES_PER_ELEMENT),y=_[1];if(4&y){const v=_[2];if(808540228!==v){const P=m8[v],R=new Uint8Array(d,128);return[new ca(R,{format:P,width:p,height:f,levels:g})]}const w=new Uint32Array(u.buffer,128,20/Uint32Array.BYTES_PER_ELEMENT),C=w[0],E=w[1],T=w[2],D=w[3],S=_8[C];if(void 0===S)throw new Error(`DDSParser cannot parse texture data with DXGI format ${C}`);if(4===T)throw new Error("DDSParser does not support cubemap textures");if(6===E)throw new Error("DDSParser does not supported 3D texture data");const A=new Array,I=148;if(1===D)A.push(new Uint8Array(d,I));else{const P=Xf[S];let M=0,R=p,L=f;for(let H=0;H<g;H++)M+=Math.max(1,R+3&-4)*Math.max(1,L+3&-4)*P,R>>>=1,L>>>=1;let j=I;for(let H=0;H<D;H++)A.push(new Uint8Array(d,j,M)),j+=M}return A.map(P=>new ca(P,{format:S,width:p,height:f,levels:g}))}throw 64&y?new Error("DDSParser does not support uncompressed texture data."):512&y?new Error("DDSParser does not supported YUV uncompressed texture data."):131072&y?new Error("DDSParser does not support single-channel (lumninance) texture data!"):2&y?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}(yield(yield Re.ADAPTER.fetch(d)).arrayBuffer()).map(g=>kc(new vt(g,{mipmap:Wi.OFF,alphaMode:_n.NO_PREMULTIPLIED_ALPHA,resolution:As(d),...u.data}),c,d));return 1===p.length?p[0]:p})(),unload(d){Array.isArray(d)?d.forEach(u=>u.destroy(!0)):d.destroy(!0)}};We.add(S8);const D8={extension:{type:Pe.LoadParser,priority:Mi.High},name:"loadKTX",test:d=>co(d,".ktx"),load:(d,u,c)=>Ge(function*(){const f=yield(yield Re.ADAPTER.fetch(d)).arrayBuffer(),{compressed:p,uncompressed:g,kvData:_}=function w8(d,u,c=!1){const f=new DataView(u);if(!function C8(d,u){for(let c=0;c<uI.length;c++)if(u.getUint8(c)!==uI[c])return console.error(`${d} is not a valid *.ktx file!`),!1;return!0}(d,f))return null;const p=67305985===f.getUint32(12,!0),g=f.getUint32(16,p),_=f.getUint32(24,p),y=f.getUint32(28,p),v=f.getUint32(36,p),x=f.getUint32(40,p)||1,w=f.getUint32(44,p)||1,C=f.getUint32(48,p)||1,E=f.getUint32(52,p),T=f.getUint32(56,p),D=f.getUint32(60,p);if(0===x||1!==w)throw new Error("Only 2D textures are supported");if(1!==E)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(1!==C)throw new Error("WebGL does not support array textures");const I=v+3&-4,P=x+3&-4,M=new Array(C);let L,R=v*x;if(0===g&&(R=I*P),L=0!==g?cI[g]?cI[g]*x8[_]:b8[g]:Xf[y],void 0===L)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const j=c?function T8(d,u,c){const f=new Map;let p=0;for(;p<u;){const g=d.getUint32(64+p,c),_=64+p+4,y=3-(g+3)%4;if(0===g||g>u-p){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let v=0;for(;v<g&&0!==d.getUint8(_+v);v++);if(-1===v){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const x=(new TextDecoder).decode(new Uint8Array(d.buffer,_,v)),w=new DataView(d.buffer,_+v+1,g-v-1);f.set(x,w),p+=4+g+y}return f}(f,D,p):null;let H=R*L,G=v,z=x,ce=I,ie=P,le=64+D;for(let te=0;te<T;te++){const re=f.getUint32(le,p);let Ie=le+4;for(let $e=0;$e<C;$e++){let Q=M[$e];Q||(Q=M[$e]=new Array(T)),Q[te]={levelID:te,levelWidth:T>1||0!==g?G:ce,levelHeight:T>1||0!==g?z:ie,levelBuffer:new Uint8Array(u,Ie,H)},Ie+=H}le+=re+4,le=le%4!=0?le+4-le%4:le,G=G>>1||1,z=z>>1||1,ce=G+4-1&-4,ie=z+4-1&-4,H=ce*ie*L}return 0!==g?{uncompressed:M.map(te=>{let re=te[0].levelBuffer,Ie=!1;return g===Ze.FLOAT?re=new Float32Array(te[0].levelBuffer.buffer,te[0].levelBuffer.byteOffset,te[0].levelBuffer.byteLength/4):g===Ze.UNSIGNED_INT?(Ie=!0,re=new Uint32Array(te[0].levelBuffer.buffer,te[0].levelBuffer.byteOffset,te[0].levelBuffer.byteLength/4)):g===Ze.INT&&(Ie=!0,re=new Int32Array(te[0].levelBuffer.buffer,te[0].levelBuffer.byteOffset,te[0].levelBuffer.byteLength/4)),{resource:new bf(re,{width:te[0].levelWidth,height:te[0].levelHeight}),type:g,format:Ie?E8(_):_}}),kvData:j}:{compressed:M.map(te=>new ca(null,{format:y,width:v,height:x,levels:T,levelBuffers:te})),kvData:j}}(d,f),y=p??g,v={mipmap:Wi.OFF,alphaMode:_n.NO_PREMULTIPLIED_ALPHA,resolution:As(d),...u.data},x=y.map(w=>{y===g&&Object.assign(v,{type:w.type,format:w.format});const E=new vt(w.resource??w,v);return E.ktxKeyValueData=_,kc(E,c,d)});return 1===x.length?x[0]:x})(),unload(d){Array.isArray(d)?d.forEach(u=>u.destroy(!0)):d.destroy(!0)}};We.add(D8);const A8={extension:Pe.ResolveParser,test:d=>{const u=Nr.extname(d).slice(1);return["basis","ktx","dds"].includes(u)},parse:d=>{const u=Nr.extname(d).slice(1);if("ktx"===u){const c=[".s3tc.ktx",".s3tc_sRGB.ktx",".etc.ktx",".etc1.ktx",".pvrt.ktx",".atc.ktx",".astc.ktx"];if(c.some(f=>d.endsWith(f)))return{resolution:parseFloat(Re.RETINA_PREFIX.exec(d)?.[1]??"1"),format:c.find(f=>d.endsWith(f)),src:d}}return{resolution:parseFloat(Re.RETINA_PREFIX.exec(d)?.[1]??"1"),format:u,src:d}}};We.add(A8);const Zf=new wt,hI=class ih{constructor(u){this.renderer=u,this._rendererPremultipliedAlpha=!1}contextChange(){const u=this.renderer?.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(u&&u.alpha&&u.premultipliedAlpha)}image(u,c,f,p){var g=this;return Ge(function*(){const _=new Image;return _.src=yield g.base64(u,c,f,p),_})()}base64(u,c,f,p){var g=this;return Ge(function*(){const _=g.canvas(u,p);if(void 0!==_.toBlob)return new Promise((y,v)=>{_.toBlob(x=>{if(!x)return void v(new Error("ICanvas.toBlob failed!"));const w=new FileReader;w.onload=()=>y(w.result),w.onerror=v,w.readAsDataURL(x)},c,f)});if(void 0!==_.toDataURL)return _.toDataURL(c,f);if(void 0!==_.convertToBlob){const y=yield _.convertToBlob({type:c,quality:f});return new Promise((v,x)=>{const w=new FileReader;w.onload=()=>v(w.result),w.onerror=x,w.readAsDataURL(y)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")})()}canvas(u,c){const{pixels:f,width:p,height:g,flipY:_,premultipliedAlpha:y}=this._rawPixels(u,c);_&&ih._flipY(f,p,g),y&&ih._unpremultiplyAlpha(f);const v=new cj(p,g,1),x=new ImageData(new Uint8ClampedArray(f.buffer),p,g);return v.context.putImageData(x,0,0),v.canvas}pixels(u,c){const{pixels:f,width:p,height:g,flipY:_,premultipliedAlpha:y}=this._rawPixels(u,c);return _&&ih._flipY(f,p,g),y&&ih._unpremultiplyAlpha(f),f}_rawPixels(u,c){const f=this.renderer;if(!f)throw new Error("The Extract has already been destroyed");let p,y,g=!1,_=!1,v=!1;u&&(u instanceof sa?y=u:(y=f.generateTexture(u,{region:c,resolution:f.resolution,multisample:f.multisample}),v=!0,c&&(Zf.width=c.width,Zf.height=c.height,c=Zf)));const x=f.gl;if(y){if(p=y.baseTexture.resolution,c=c??y.frame,g=!1,_=y.baseTexture.alphaMode>0&&y.baseTexture.format===be.RGBA,!v){f.renderTexture.bind(y);const T=y.framebuffer.glFramebuffers[f.CONTEXT_UID];T.blitFramebuffer&&f.framebuffer.bind(T.blitFramebuffer)}}else p=f.resolution,c||((c=Zf).width=f.width/p,c.height=f.height/p),g=!0,_=this._rendererPremultipliedAlpha,f.renderTexture.bind();const w=Math.max(Math.round(c.width*p),1),C=Math.max(Math.round(c.height*p),1),E=new Uint8Array(4*w*C);return x.readPixels(Math.round(c.x*p),Math.round(c.y*p),w,C,x.RGBA,x.UNSIGNED_BYTE,E),v&&y?.destroy(!0),{pixels:E,width:w,height:C,flipY:g,premultipliedAlpha:_}}destroy(){this.renderer=null}static _flipY(u,c,f){const p=c<<2,g=f>>1,_=new Uint8Array(p);for(let y=0;y<g;y++){const v=y*p,x=(f-y-1)*p;_.set(u.subarray(v,v+p)),u.copyWithin(v,x,x+p),u.set(_,x)}}static _unpremultiplyAlpha(u){u instanceof Uint8ClampedArray&&(u=new Uint8Array(u.buffer));const c=u.length;for(let f=0;f<c;f+=4){const p=u[f+3];if(0!==p){const g=255.001/p;u[f]=u[f]*g+.5,u[f+1]=u[f+1]*g+.5,u[f+2]=u[f+2]*g+.5}}}};hI.extension={name:"extract",type:Pe.RendererSystem},We.add(hI);const Bc={build(d){const u=d.points;let c,f,p,g,_,y;if(d.type===Hr.CIRC){const D=d.shape;c=D.x,f=D.y,_=y=D.radius,p=g=0}else if(d.type===Hr.ELIP){const D=d.shape;c=D.x,f=D.y,_=D.width,y=D.height,p=g=0}else{const D=d.shape,S=D.width/2,A=D.height/2;c=D.x+S,f=D.y+A,_=y=Math.max(0,Math.min(D.radius,Math.min(S,A))),p=S-_,g=A-y}if(!(_>=0&&y>=0&&p>=0&&g>=0))return void(u.length=0);const v=Math.ceil(2.3*Math.sqrt(_+y)),x=8*v+(p?4:0)+(g?4:0);if(u.length=x,0===x)return;if(0===v)return u.length=8,u[0]=u[6]=c+p,u[1]=u[3]=f+g,u[2]=u[4]=c-p,void(u[5]=u[7]=f-g);let w=0,C=4*v+(p?2:0)+2,E=C,T=x;{const D=p+_,S=g,A=c+D,I=c-D,P=f+S;if(u[w++]=A,u[w++]=P,u[--C]=P,u[--C]=I,g){const M=f-S;u[E++]=I,u[E++]=M,u[--T]=M,u[--T]=A}}for(let D=1;D<v;D++){const S=Math.PI/2*(D/v),A=p+Math.cos(S)*_,I=g+Math.sin(S)*y,P=c+A,M=c-A,R=f+I,L=f-I;u[w++]=P,u[w++]=R,u[--C]=R,u[--C]=M,u[E++]=M,u[E++]=L,u[--T]=L,u[--T]=P}{const S=g+y,A=c+p,I=c-p,P=f+S,M=f-S;u[w++]=A,u[w++]=P,u[--T]=M,u[--T]=A,p&&(u[w++]=I,u[w++]=P,u[--T]=M,u[--T]=I)}},triangulate(d,u){const c=d.points,f=u.points,p=u.indices;if(0===c.length)return;let g=f.length/2;const _=g;let y,v;if(d.type!==Hr.RREC){const w=d.shape;y=w.x,v=w.y}else{const w=d.shape;y=w.x+w.width/2,v=w.y+w.height/2}const x=d.matrix;f.push(d.matrix?x.a*y+x.c*v+x.tx:y,d.matrix?x.b*y+x.d*v+x.ty:v),g++,f.push(c[0],c[1]);for(let w=2;w<c.length;w+=2)f.push(c[w],c[w+1]),p.push(g++,_,g);p.push(_+1,_,g)}};function dI(d,u=!1){const c=d.length;if(c<6)return;let f=0;for(let p=0,g=d[c-2],_=d[c-1];p<c;p+=2){const y=d[p],v=d[p+1];f+=(y-g)*(v+_),g=y,_=v}if(!u&&f>0||u&&f<=0){const p=c/2;for(let g=p+p%2;g<c;g+=2){const _=c-g-2,y=c-g-1,v=g,x=g+1;[d[_],d[v]]=[d[v],d[_]],[d[y],d[x]]=[d[x],d[y]]}}}const $v={build(d){d.points=d.shape.points.slice()},triangulate(d,u){let c=d.points;const f=d.holes,p=u.points,g=u.indices;if(c.length>=6){dI(c,!1);const _=[];for(let x=0;x<f.length;x++){const w=f[x];dI(w.points,!0),_.push(c.length/2),c=c.concat(w.points)}const y=zH(c,_,2);if(!y)return;const v=p.length/2;for(let x=0;x<y.length;x+=3)g.push(y[x]+v),g.push(y[x+1]+v),g.push(y[x+2]+v);for(let x=0;x<c.length;x++)p.push(c[x])}}},fI={build(d){const u=d.shape,c=u.x,f=u.y,p=u.width,g=u.height,_=d.points;_.length=0,p>=0&&g>=0&&_.push(c,f,c+p,f,c+p,f+g,c,f+g)},triangulate(d,u){const c=d.points,f=u.points;if(0===c.length)return;const p=f.length/2;f.push(c[0],c[1],c[2],c[3],c[6],c[7],c[4],c[5]),u.indices.push(p,p+1,p+2,p+1,p+2,p+3)}},pI={build(d){Bc.build(d)},triangulate(d,u){Bc.triangulate(d,u)}};var ni=(d=>(d.MITER="miter",d.BEVEL="bevel",d.ROUND="round",d))(ni||{}),ho=(d=>(d.BUTT="butt",d.ROUND="round",d.SQUARE="square",d))(ho||{});const Vl={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(d,u=20){if(!this.adaptive||!d||isNaN(d))return u;let c=Math.ceil(d/this.maxLength);return c<this.minSegments?c=this.minSegments:c>this.maxSegments&&(c=this.maxSegments),c}};class Wv{static curveTo(u,c,f,p,g,_){const v=_[_.length-1]-c,x=_[_.length-2]-u,w=p-c,C=f-u,E=Math.abs(v*C-x*w);if(E<1e-8||0===g)return(_[_.length-2]!==u||_[_.length-1]!==c)&&_.push(u,c),null;const T=v*v+x*x,D=w*w+C*C,S=v*w+x*C,A=g*Math.sqrt(T)/E,I=g*Math.sqrt(D)/E,P=A*S/T,M=I*S/D,R=A*C+I*x,L=A*w+I*v,G=C*(A+M),z=w*(A+M);return{cx:R+u,cy:L+c,radius:g,startAngle:Math.atan2(v*(I+P)-L,x*(I+P)-R),endAngle:Math.atan2(z-L,G-R),anticlockwise:x*w>C*v}}static arc(u,c,f,p,g,_,y,v,x){const w=y-_,C=Vl._segmentsCount(Math.abs(w)*g,40*Math.ceil(Math.abs(w)/Cf)),E=w/(2*C),T=2*E,D=Math.cos(E),S=Math.sin(E),A=C-1,I=A%1/A;for(let P=0;P<=A;++P){const R=E+_+T*(P+I*P),L=Math.cos(R),j=-Math.sin(R);x.push((D*L+S*j)*g+f,(D*-j+S*L)*g+p)}}}class Qf{static curveLength(u,c,f,p,g,_,y,v){let x=0,w=0,C=0,E=0,T=0,D=0,S=0,A=0,I=0,P=0,M=0,R=u,L=c;for(let j=1;j<=10;++j)w=j/10,C=w*w,E=C*w,T=1-w,D=T*T,S=D*T,A=S*u+3*D*w*f+3*T*C*g+E*y,I=S*c+3*D*w*p+3*T*C*_+E*v,P=R-A,M=L-I,R=A,L=I,x+=Math.sqrt(P*P+M*M);return x}static curveTo(u,c,f,p,g,_,y){const v=y[y.length-2],x=y[y.length-1];y.length-=2;const w=Vl._segmentsCount(Qf.curveLength(v,x,u,c,f,p,g,_));let C=0,E=0,T=0,D=0,S=0;y.push(v,x);for(let A=1,I=0;A<=w;++A)I=A/w,C=1-I,E=C*C,T=E*C,D=I*I,S=D*I,y.push(T*v+3*E*I*u+3*C*D*f+S*g,T*x+3*E*I*c+3*C*D*p+S*_)}}function gI(d,u,c,f,p,g,_,y){let E,T;return _?(E=f,T=-c):(E=-f,T=c),y.push(d-c*p+E,u-f*p+T,d+c*g+E,u+f*g+T),2}function ha(d,u,c,f,p,g,_,y){const v=c-d,x=f-u;let w=Math.atan2(v,x),C=Math.atan2(p-d,g-u);y&&w<C?w+=2*Math.PI:!y&&w>C&&(C+=2*Math.PI);let E=w;const T=C-w,D=Math.abs(T),S=Math.sqrt(v*v+x*x),A=1+(15*D*Math.sqrt(S)/Math.PI>>0),I=T/A;if(E+=I,y){_.push(d,u,c,f);for(let P=1,M=E;P<A;P++,M+=I)_.push(d,u,d+Math.sin(M)*S,u+Math.cos(M)*S);_.push(d,u,p,g)}else{_.push(c,f,d,u);for(let P=1,M=E;P<A;P++,M+=I)_.push(d+Math.sin(M)*S,u+Math.cos(M)*S,d,u);_.push(p,g,d,u)}return 2*A}function Xv(d,u){d.lineStyle.native?function R8(d,u){let c=0;const f=d.shape,p=d.points||f.points,g=f.type!==Hr.POLY||f.closeStroke;if(0===p.length)return;const _=u.points,y=u.indices,v=p.length/2,x=_.length/2;let w=x;for(_.push(p[0],p[1]),c=1;c<v;c++)_.push(p[2*c],p[2*c+1]),y.push(w,w+1),w++;g&&y.push(w,x)}(d,u):function P8(d,u){const c=d.shape;let f=d.points||c.points.slice();const p=u.closePointEps;if(0===f.length)return;const g=d.lineStyle,_=new xt(f[0],f[1]),y=new xt(f[f.length-2],f[f.length-1]),v=c.type!==Hr.POLY||c.closeStroke,x=Math.abs(_.x-y.x)<p&&Math.abs(_.y-y.y)<p;if(v){f=f.slice(),x&&(f.pop(),f.pop(),y.set(f[f.length-2],f[f.length-1]));const Q=.5*(_.x+y.x),Le=.5*(y.y+_.y);f.unshift(Q,Le),f.push(Q,Le)}const w=u.points,C=f.length/2;let E=f.length;const T=w.length/2,D=g.width/2,S=D*D,A=g.miterLimit*g.miterLimit;let I=f[0],P=f[1],M=f[2],R=f[3],L=0,j=0,H=-(P-R),G=I-M,z=0,ce=0,ie=Math.sqrt(H*H+G*G);H/=ie,G/=ie,H*=D,G*=D;const le=g.alignment,te=2*(1-le),re=2*le;v||(g.cap===ho.ROUND?E+=ha(I-H*(te-re)*.5,P-G*(te-re)*.5,I-H*te,P-G*te,I+H*re,P+G*re,w,!0)+2:g.cap===ho.SQUARE&&(E+=gI(I,P,H,G,te,re,!0,w))),w.push(I-H*te,P-G*te,I+H*re,P+G*re);for(let Q=1;Q<C-1;++Q){I=f[2*(Q-1)],P=f[2*(Q-1)+1],M=f[2*Q],R=f[2*Q+1],L=f[2*(Q+1)],j=f[2*(Q+1)+1],H=-(P-R),G=I-M,ie=Math.sqrt(H*H+G*G),H/=ie,G/=ie,H*=D,G*=D,z=-(R-j),ce=M-L,ie=Math.sqrt(z*z+ce*ce),z/=ie,ce/=ie,z*=D,ce*=D;const Le=M-I,tt=P-R,Je=M-L,tr=j-R,Gn=Le*Je+tt*tr,Gr=tt*Je-tr*Le,Sr=Gr<0;if(Math.abs(Gr)<.001*Math.abs(Gn)){w.push(M-H*te,R-G*te,M+H*re,R+G*re),Gn>=0&&(E+=g.join===ni.ROUND?ha(M,R,M-H*te,R-G*te,M-z*te,R-ce*te,w,!1)+4:2,w.push(M-z*re,R-ce*re,M+z*te,R+ce*te));continue}const un=(-H+I)*(-G+R)-(-H+M)*(-G+P),Up=(-z+L)*(-ce+R)-(-z+M)*(-ce+j),tu=(Le*Up-Je*un)/Gr,ru=(tr*un-tt*Up)/Gr,Vp=(tu-M)*(tu-M)+(ru-R)*(ru-R),vr=M+(tu-M)*te,Ea=R+(ru-R)*te,Ta=M-(tu-M)*re,Sa=R-(ru-R)*re,m9=Math.min(Le*Le+tt*tt,Je*Je+tr*tr),BP=Sr?te:re;let Hp=g.join;if(Hp===ni.MITER&&Vp/S>A&&(Hp=ni.BEVEL),Vp<=m9+BP*BP*S)switch(Hp){case ni.MITER:w.push(vr,Ea,Ta,Sa);break;case ni.BEVEL:Sr?w.push(vr,Ea,M+H*re,R+G*re,vr,Ea,M+z*re,R+ce*re):w.push(M-H*te,R-G*te,Ta,Sa,M-z*te,R-ce*te,Ta,Sa),E+=2;break;case ni.ROUND:Sr?(w.push(vr,Ea,M+H*re,R+G*re),E+=ha(M,R,M+H*re,R+G*re,M+z*re,R+ce*re,w,!0)+4,w.push(vr,Ea,M+z*re,R+ce*re)):(w.push(M-H*te,R-G*te,Ta,Sa),E+=ha(M,R,M-H*te,R-G*te,M-z*te,R-ce*te,w,!1)+4,w.push(M-z*te,R-ce*te,Ta,Sa))}else{switch(w.push(M-H*te,R-G*te,M+H*re,R+G*re),Hp){case ni.MITER:Sr?w.push(Ta,Sa,Ta,Sa):w.push(vr,Ea,vr,Ea),E+=2;break;case ni.ROUND:E+=Sr?ha(M,R,M+H*re,R+G*re,M+z*re,R+ce*re,w,!0)+2:ha(M,R,M-H*te,R-G*te,M-z*te,R-ce*te,w,!1)+2}w.push(M-z*te,R-ce*te,M+z*re,R+ce*re),E+=2}}I=f[2*(C-2)],P=f[2*(C-2)+1],M=f[2*(C-1)],R=f[2*(C-1)+1],H=-(P-R),G=I-M,ie=Math.sqrt(H*H+G*G),H/=ie,G/=ie,H*=D,G*=D,w.push(M-H*te,R-G*te,M+H*re,R+G*re),v||(g.cap===ho.ROUND?E+=ha(M-H*(te-re)*.5,R-G*(te-re)*.5,M-H*te,R-G*te,M+H*re,R+G*re,w,!1)+2:g.cap===ho.SQUARE&&(E+=gI(M,R,H,G,te,re,!1,w)));const Ie=u.indices,$e=Vl.epsilon*Vl.epsilon;for(let Q=T;Q<E+T-2;++Q)I=w[2*Q],P=w[2*Q+1],M=w[2*(Q+1)],R=w[2*(Q+1)+1],L=w[2*(Q+2)],j=w[2*(Q+2)+1],!(Math.abs(I*(R-j)+M*(j-P)+L*(P-R))<$e)&&Ie.push(Q,Q+1,Q+2)}(d,u)}class Jf{static curveLength(u,c,f,p,g,_){const y=u-2*f+g,v=c-2*p+_,x=2*f-2*u,w=2*p-2*c,C=4*(y*y+v*v),E=4*(y*x+v*w),T=x*x+w*w,D=2*Math.sqrt(C+E+T),S=Math.sqrt(C),A=2*C*S,I=2*Math.sqrt(T),P=E/S;return(A*D+S*E*(D-I)+(4*T*C-E*E)*Math.log((2*S+P+D)/(P+I)))/(4*A)}static curveTo(u,c,f,p,g){const _=g[g.length-2],y=g[g.length-1],v=Vl._segmentsCount(Jf.curveLength(_,y,u,c,f,p));let x=0,w=0;for(let C=1;C<=v;++C){const E=C/v;x=_+(u-_)*E,w=y+(c-y)*E,g.push(x+(u+(f-u)*E-x)*E,w+(c+(p-c)*E-w)*E)}}}const ep={[Hr.POLY]:$v,[Hr.CIRC]:Bc,[Hr.ELIP]:Bc,[Hr.RECT]:fI,[Hr.RREC]:pI},qv=[],Uc=[];class tp{constructor(u,c=null,f=null,p=null){this.points=[],this.holes=[],this.shape=u,this.lineStyle=f,this.fillStyle=c,this.matrix=p,this.type=u.type}clone(){return new tp(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}class mI{constructor(){this.reset()}begin(u,c,f){this.reset(),this.style=u,this.start=c,this.attribStart=f}end(u,c){this.attribSize=c-this.attribStart,this.size=u-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}const Hl=new xt,_I=class UP extends QD{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new jf,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let u=0;u<this.drawCalls.length;u++)this.drawCalls[u].texArray.clear(),Uc.push(this.drawCalls[u]);this.drawCalls.length=0;for(let u=0;u<this.batches.length;u++){const c=this.batches[u];c.reset(),qv.push(c)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(u,c=null,f=null,p=null){const g=new tp(u,c,f,p);return this.graphicsData.push(g),this.dirty++,this}drawHole(u,c=null){if(!this.graphicsData.length)return null;const f=new tp(u,null,null,c),p=this.graphicsData[this.graphicsData.length-1];return f.lineStyle=p.lineStyle,p.holes.push(f),this.dirty++,this}destroy(){super.destroy();for(let u=0;u<this.graphicsData.length;++u)this.graphicsData[u].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(u){const c=this.graphicsData;for(let f=0;f<c.length;++f){const p=c[f];if(p.fillStyle.visible&&p.shape&&(p.matrix?p.matrix.applyInverse(u,Hl):Hl.copyFrom(u),p.shape.contains(Hl.x,Hl.y))){let g=!1;if(p.holes)for(let _=0;_<p.holes.length;_++)if(p.holes[_].shape.contains(Hl.x,Hl.y)){g=!0;break}if(!g)return!0}}return!1}updateBatches(){if(!this.graphicsData.length)return void(this.batchable=!0);if(!this.validateBatching())return;this.cacheDirty=this.dirty;const u=this.uvs,c=this.graphicsData;let f=null,p=null;this.batches.length>0&&(f=this.batches[this.batches.length-1],p=f.style);for(let v=this.shapeIndex;v<c.length;v++){this.shapeIndex++;const x=c[v],w=x.fillStyle,C=x.lineStyle;ep[x.type].build(x),x.matrix&&this.transformPoints(x.points,x.matrix),(w.visible||C.visible)&&this.processHoles(x.holes);for(let E=0;E<2;E++){const T=0===E?w:C;if(!T.visible)continue;const S=this.indices.length,A=this.points.length/2;T.texture.baseTexture.wrapMode=so.REPEAT,0===E?this.processFill(x):this.processLine(x);const I=this.points.length/2-A;0!==I&&(f&&!this._compareStyles(p,T)&&(f.end(S,A),f=null),f||(f=qv.pop()||new mI,f.begin(T,S,A),this.batches.push(f),p=T),this.addUvs(this.points,u,T.texture,A,I,T.matrix))}}const _=this.points.length/2;if(f&&f.end(this.indices.length,_),0===this.batches.length)return void(this.batchable=!0);const y=_>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&y===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=y?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(u,c){return!(!u||!c||u.texture.baseTexture!==c.texture.baseTexture||u.color+u.alpha!==c.color+c.alpha||!!u.native!=!!c.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let u=0,c=this.graphicsData.length;u<c;u++){const f=this.graphicsData[u],p=f.fillStyle,g=f.lineStyle;if(p&&!p.texture.baseTexture.valid||g&&!g.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const u=this.batches;for(let c=0,f=u.length;c<f;c++){const p=u[c];for(let g=0;g<p.size;g++){const _=p.start+g;this.indicesUint16[_]=this.indicesUint16[_]-p.attribStart}}}isBatchable(){if(this.points.length>131070)return!1;const u=this.batches;for(let c=0;c<u.length;c++)if(u[c].style.native)return!1;return this.points.length<2*UP.BATCHABLE_SIZE}buildDrawCalls(){let u=++vt._globalBatch;for(let C=0;C<this.drawCalls.length;C++)this.drawCalls[C].texArray.clear(),Uc.push(this.drawCalls[C]);this.drawCalls.length=0;const c=this.colors,f=this.textureIds;let p=Uc.pop();p||(p=new pv,p.texArray=new vv),p.texArray.count=0,p.start=0,p.size=0,p.type=zi.TRIANGLES;let g=0,_=null,y=0,v=!1,x=zi.TRIANGLES,w=0;this.drawCalls.push(p);for(let C=0;C<this.batches.length;C++){const E=this.batches[C],T=8,D=E.style,S=D.texture.baseTexture;v!==!!D.native&&(v=!!D.native,x=v?zi.LINES:zi.TRIANGLES,_=null,g=T,u++),_!==S&&(_=S,S._batchEnabled!==u&&(g===T&&(u++,g=0,p.size>0&&(p=Uc.pop(),p||(p=new pv,p.texArray=new vv),this.drawCalls.push(p)),p.start=w,p.size=0,p.texArray.count=0,p.type=x),S.touched=1,S._batchEnabled=u,S._batchLocation=g,S.wrapMode=so.REPEAT,p.texArray.elements[p.texArray.count++]=S,g++)),p.size+=E.size,w+=E.size,y=S._batchLocation,this.addColors(c,D.color,D.alpha,E.attribSize,E.attribStart),this.addTextureIds(f,y,E.attribSize,E.attribStart)}vt._globalBatch=u,this.packAttributes()}packAttributes(){const u=this.points,c=this.uvs,f=this.colors,p=this.textureIds,g=new ArrayBuffer(3*u.length*4),_=new Float32Array(g),y=new Uint32Array(g);let v=0;for(let x=0;x<u.length/2;x++)_[v++]=u[2*x],_[v++]=u[2*x+1],_[v++]=c[2*x],_[v++]=c[2*x+1],y[v++]=f[x],_[v++]=p[x];this._buffer.update(g),this._indexBuffer.update(this.indicesUint16)}processFill(u){u.holes.length?$v.triangulate(u,this):ep[u.type].triangulate(u,this)}processLine(u){Xv(u,this);for(let c=0;c<u.holes.length;c++)Xv(u.holes[c],this)}processHoles(u){for(let c=0;c<u.length;c++){const f=u[c];ep[f.type].build(f),f.matrix&&this.transformPoints(f.points,f.matrix)}}calculateBounds(){const u=this._bounds;u.clear(),u.addVertexData(this.points,0,this.points.length),u.pad(this.boundsPadding,this.boundsPadding)}transformPoints(u,c){for(let f=0;f<u.length/2;f++){const p=u[2*f],g=u[2*f+1];u[2*f]=c.a*p+c.c*g+c.tx,u[2*f+1]=c.b*p+c.d*g+c.ty}}addColors(u,c,f,p,g=0){const _=Ut.shared.setValue(c).toLittleEndianNumber(),y=Ut.shared.setValue(_).toPremultiplied(f);u.length=Math.max(u.length,g+p);for(let v=0;v<p;v++)u[g+v]=y}addTextureIds(u,c,f,p=0){u.length=Math.max(u.length,p+f);for(let g=0;g<f;g++)u[p+g]=c}addUvs(u,c,f,p,g,_=null){let y=0;const v=c.length,x=f.frame;for(;y<g;){let C=u[2*(p+y)],E=u[2*(p+y)+1];if(_){const T=_.a*C+_.c*E+_.tx;E=_.b*C+_.d*E+_.ty,C=T}y++,c.push(C/x.width,E/x.height)}const w=f.baseTexture;(x.width<w.width||x.height<w.height)&&this.adjustUvs(c,f,v,g)}adjustUvs(u,c,f,p){const g=c.baseTexture,_=1e-6,y=f+2*p,v=c.frame,x=v.width/g.width,w=v.height/g.height;let C=v.x/v.width,E=v.y/v.height,T=Math.floor(u[f]+_),D=Math.floor(u[f+1]+_);for(let S=f+2;S<y;S+=2)T=Math.min(T,Math.floor(u[S]+_)),D=Math.min(D,Math.floor(u[S+1]+_));C-=T,E-=D;for(let S=f;S<y;S+=2)u[S]=(u[S]+C)*x,u[S+1]=(u[S+1]+E)*w}};_I.BATCHABLE_SIZE=100;let F8=_I;class rp{constructor(){this.color=16777215,this.alpha=1,this.texture=Xe.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const u=new rp;return u.color=this.color,u.alpha=this.alpha,u.texture=this.texture,u.matrix=this.matrix,u.visible=this.visible,u}reset(){this.color=16777215,this.alpha=1,this.texture=Xe.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class Yv extends rp{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=ho.BUTT,this.join=ni.MITER,this.miterLimit=10}clone(){const u=new Yv;return u.color=this.color,u.alpha=this.alpha,u.texture=this.texture,u.matrix=this.matrix,u.visible=this.visible,u.width=this.width,u.alignment=this.alignment,u.native=this.native,u.cap=this.cap,u.join=this.join,u.miterLimit=this.miterLimit,u}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1,this.cap=ho.BUTT,this.join=ni.MITER,this.miterLimit=10}}const Kv={},Zv=class Wp extends vn{constructor(u=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new rp,this._lineStyle=new Yv,this._matrix=null,this._holeMode=!1,this.state=Ki.for2d(),this._geometry=u||new F8,this._geometry.refCount++,this._transformID=-1,this._tintColor=new Ut(16777215),this.blendMode=at.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new Wp(this._geometry)}set blendMode(u){this.state.blendMode=u}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(u){this._tintColor.setValue(u)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(u=null,c=0,f,p=.5,g=!1){return"number"==typeof u&&(u={width:u,color:c,alpha:f,alignment:p,native:g}),this.lineTextureStyle(u)}lineTextureStyle(u){u=Object.assign({width:0,texture:Xe.WHITE,color:u?.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:ho.BUTT,join:ni.MITER,miterLimit:10},u),this.normalizeColor(u),this.currentPath&&this.startPoly();const f=u.width>0&&u.alpha>0;return f?(u.matrix&&(u.matrix=u.matrix.clone(),u.matrix.invert()),Object.assign(this._lineStyle,{visible:f},u)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const u=this.currentPath.points,c=this.currentPath.points.length;c>2&&(this.drawShape(this.currentPath),this.currentPath=new Jo,this.currentPath.closeStroke=!1,this.currentPath.points.push(u[c-2],u[c-1]))}else this.currentPath=new Jo,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(u,c){return this.startPoly(),this.currentPath.points[0]=u,this.currentPath.points[1]=c,this}lineTo(u,c){this.currentPath||this.moveTo(0,0);const f=this.currentPath.points;return(f[f.length-2]!==u||f[f.length-1]!==c)&&f.push(u,c),this}_initCurve(u=0,c=0){this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[u,c]):this.moveTo(u,c)}quadraticCurveTo(u,c,f,p){this._initCurve();const g=this.currentPath.points;return 0===g.length&&this.moveTo(0,0),Jf.curveTo(u,c,f,p,g),this}bezierCurveTo(u,c,f,p,g,_){return this._initCurve(),Qf.curveTo(u,c,f,p,g,_,this.currentPath.points),this}arcTo(u,c,f,p,g){this._initCurve(u,c);const y=Wv.curveTo(u,c,f,p,g,this.currentPath.points);if(y){const{cx:v,cy:x,radius:w,startAngle:C,endAngle:E,anticlockwise:T}=y;this.arc(v,x,w,C,E,T)}return this}arc(u,c,f,p,g,_=!1){if(p===g)return this;if(!_&&g<=p?g+=Cf:_&&p<=g&&(p+=Cf),g-p==0)return this;const y=u+Math.cos(p)*f,v=c+Math.sin(p)*f,x=this._geometry.closePointEps;let w=this.currentPath?this.currentPath.points:null;if(w){const C=Math.abs(w[w.length-2]-y),E=Math.abs(w[w.length-1]-v);C<x&&E<x||w.push(y,v)}else this.moveTo(y,v),w=this.currentPath.points;return Wv.arc(y,v,u,c,f,p,g,_,w),this}beginFill(u=0,c){return this.beginTextureFill({texture:Xe.WHITE,color:u,alpha:c})}normalizeColor(u){const c=Ut.shared.setValue(u.color??0);u.color=c.toNumber(),u.alpha??(u.alpha=c.alpha)}beginTextureFill(u){u=Object.assign({texture:Xe.WHITE,color:16777215,matrix:null},u),this.normalizeColor(u),this.currentPath&&this.startPoly();const f=u.alpha>0;return f?(u.matrix&&(u.matrix=u.matrix.clone(),u.matrix.invert()),Object.assign(this._fillStyle,{visible:f},u)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(u,c,f,p){return this.drawShape(new wt(u,c,f,p))}drawRoundedRect(u,c,f,p,g){return this.drawShape(new Df(u,c,f,p,g))}drawCircle(u,c,f){return this.drawShape(new Tf(u,c,f))}drawEllipse(u,c,f,p){return this.drawShape(new Sf(u,c,f,p))}drawPolygon(...u){let c,f=!0;const p=u[0];p.points?(f=p.closeStroke,c=p.points):c=Array.isArray(u[0])?u[0]:u;const g=new Jo(c);return g.closeStroke=f,this.drawShape(g),this}drawShape(u){return this._holeMode?this._geometry.drawHole(u,this._matrix):this._geometry.drawShape(u,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const u=this._geometry.graphicsData;return!(1!==u.length||u[0].shape.type!==Hr.RECT||u[0].matrix||u[0].holes.length||u[0].lineStyle.visible&&u[0].lineStyle.width)}_render(u){this.finishPoly();const c=this._geometry;c.updateBatches(),c.batchable?(this.batchDirty!==c.batchDirty&&this._populateBatches(),this._renderBatched(u)):(u.batch.flush(),this._renderDirect(u))}_populateBatches(){const u=this._geometry,c=this.blendMode,f=u.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=u.batchDirty,this.batches.length=f,this.vertexData=new Float32Array(u.points);for(let p=0;p<f;p++){const g=u.batches[p],_=g.style.color,y=new Float32Array(this.vertexData.buffer,4*g.attribStart*2,2*g.attribSize),v=new Float32Array(u.uvsFloat32.buffer,4*g.attribStart*2,2*g.attribSize),w={vertexData:y,blendMode:c,indices:new Uint16Array(u.indicesUint16.buffer,2*g.start,g.size),uvs:v,_batchRGB:Ut.shared.setValue(_).toRgbArray(),_tintRGB:_,_texture:g.style.texture,alpha:g.style.alpha,worldAlpha:1};this.batches[p]=w}}_renderBatched(u){if(this.batches.length){u.batch.setObjectRenderer(u.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let c=0,f=this.batches.length;c<f;c++){const p=this.batches[c];p.worldAlpha=this.worldAlpha*p.alpha,u.plugins[this.pluginName].render(p)}}}_renderDirect(u){const c=this._resolveDirectShader(u),f=this._geometry,p=this.worldAlpha,g=c.uniforms,_=f.drawCalls;g.translationMatrix=this.transform.worldTransform,Ut.shared.setValue(this._tintColor).premultiply(p).toArray(g.tint),u.shader.bind(c),u.geometry.bind(f,c),u.state.set(this.state);for(let y=0,v=_.length;y<v;y++)this._renderDrawCallDirect(u,f.drawCalls[y])}_renderDrawCallDirect(u,c){const{texArray:f,type:p,size:g,start:_}=c,y=f.count;for(let v=0;v<y;v++)u.texture.bind(f.elements[v],v);u.geometry.draw(p,g,_)}_resolveDirectShader(u){let c=this.shader;const f=this.pluginName;if(!c){if(!Kv[f]){const{maxTextures:p}=u.plugins[f],g=new Int32Array(p);for(let v=0;v<p;v++)g[v]=v;const _={tint:new Float32Array([1,1,1,1]),translationMatrix:new Jt,default:Di.from({uSamplers:g},!0)};Kv[f]=new Qi(u.plugins[f]._shader.program,_)}c=Kv[f]}return c}_calculateBounds(){this.finishPoly();const u=this._geometry;if(!u.graphicsData.length)return;const{minX:c,minY:f,maxX:p,maxY:g}=u.bounds;this._bounds.addFrame(this.transform,c,f,p,g)}containsPoint(u){return this.worldTransform.applyInverse(u,Wp._TEMP_POINT),this._geometry.containsPoint(Wp._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let u=0;u<this.batches.length;u++){const c=this.batches[u];c._tintRGB=Ut.shared.setValue(this._tintColor).multiply(c._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const u=this.transform._worldID;if(this._transformID===u)return;this._transformID=u;const c=this.transform.worldTransform,f=c.a,p=c.b,g=c.c,_=c.d,y=c.tx,v=c.ty,x=this._geometry.points,w=this.vertexData;let C=0;for(let E=0;E<x.length;E+=2){const T=x[E],D=x[E+1];w[C++]=f*T+g*D+y,w[C++]=_*D+p*T+v}}closePath(){const u=this.currentPath;return u&&(u.closeStroke=!0,this.finishPoly()),this}setMatrix(u){return this._matrix=u,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(u){this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(u)}};Zv.curves=Vl,Zv._TEMP_POINT=new xt;let np=Zv;class O8{constructor(u,c){this.uvBuffer=u,this.uvMatrix=c,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(u){if(!u&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const c=this.uvBuffer.data;(!this.data||this.data.length!==c.length)&&(this.data=new Float32Array(c.length)),this.uvMatrix.multiplyUvs(c,this.data),this._updateID++}}const Qv=new xt,yI=new Jo,vI=class VP extends vn{constructor(u,c,f,p=zi.TRIANGLES){super(),this.geometry=u,this.shader=c,this.state=f||Ki.for2d(),this.drawMode=p,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=Re.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(u){this._geometry!==u&&(this._geometry&&(this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose()),this._geometry=u,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(u){this.shader=u}get material(){return this.shader}set blendMode(u){this.state.blendMode=u}get blendMode(){return this.state.blendMode}set roundPixels(u){this._roundPixels!==u&&(this._transformID=-1),this._roundPixels=u}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(u){this.shader.tint=u}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(u){this.shader.texture=u}_render(u){this.shader.batchable&&this.drawMode===zi.TRIANGLES&&this.geometry.buffers[0].data.length<2*VP.BATCHABLE_SIZE?this._renderToBatch(u):this._renderDefault(u)}_renderDefault(u){const c=this.shader;c.alpha=this.worldAlpha,c.update&&c.update(),u.batch.flush(),c.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),u.shader.bind(c),u.state.set(this.state),u.geometry.bind(this.geometry,c),u.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(u){const c=this.geometry,f=this.shader;f.uvMatrix&&(f.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=c.indexBuffer.data,this._tintRGB=f._tintRGB,this._texture=f.texture;const p=this.material.pluginName;u.batch.setObjectRenderer(u.plugins[p]),u.plugins[p].render(this)}calculateVertices(){const u=this.geometry.buffers[0],c=u.data,f=u._updateID;if(f===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==c.length&&(this.vertexData=new Float32Array(c.length));const p=this.transform.worldTransform,g=p.a,_=p.b,y=p.c,v=p.d,x=p.tx,w=p.ty,C=this.vertexData;for(let E=0;E<C.length/2;E++){const T=c[2*E],D=c[2*E+1];C[2*E]=g*T+y*D+x,C[2*E+1]=_*T+v*D+w}if(this._roundPixels){const E=Re.RESOLUTION;for(let T=0;T<C.length;++T)C[T]=Math.round(C[T]*E)/E}this.vertexDirty=f}calculateUvs(){const u=this.geometry.buffers[1],c=this.shader;c.uvMatrix.isSimple?this.uvs=u.data:(this.batchUvs||(this.batchUvs=new O8(u,c.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(u){if(!this.getBounds().contains(u.x,u.y))return!1;this.worldTransform.applyInverse(u,Qv);const c=this.geometry.getBuffer("aVertexPosition").data,f=yI.points,p=this.geometry.getIndex().data,g=p.length,_=4===this.drawMode?3:1;for(let y=0;y+2<g;y+=_){const v=2*p[y],x=2*p[y+1],w=2*p[y+2];if(f[0]=c[v],f[1]=c[v+1],f[2]=c[x],f[3]=c[x+1],f[4]=c[w],f[5]=c[w+1],yI.contains(Qv.x,Qv.y))return!0}return!1}destroy(u){super.destroy(u),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};vI.BATCHABLE_SIZE=100;let xI=vI;class N8 extends ao{constructor(u,c,f){super();const p=new _r(u),g=new _r(c,!0),_=new _r(f,!0,!0);this.addAttribute("aVertexPosition",p,2,!1,Ze.FLOAT).addAttribute("aTextureCoord",g,2,!1,Ze.FLOAT).addIndex(_),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}class bI extends Qi{constructor(u,c){const f={uSampler:u,alpha:1,uTextureMatrix:Jt.IDENTITY,uColor:new Float32Array([1,1,1,1])};(c=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},c)).uniforms&&Object.assign(f,c.uniforms),super(c.program||Is.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n"),f),this._colorDirty=!1,this.uvMatrix=new gA(u),this.batchable=void 0===c.program,this.pluginName=c.pluginName,this._tintColor=new Ut(c.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=c.alpha}get texture(){return this.uniforms.uSampler}set texture(u){this.uniforms.uSampler!==u&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!u.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=u,this.uvMatrix.texture=u)}set alpha(u){u!==this._alpha&&(this._alpha=u,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(u){u!==this.tint&&(this._tintColor.setValue(u),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const u=this.texture.baseTexture.alphaMode;Ut.shared.setValue(this._tintColor).premultiply(this._alpha,u).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class wI{constructor(u,c,f){this.geometry=new ao,this.indexBuffer=null,this.size=f,this.dynamicProperties=[],this.staticProperties=[];for(let p=0;p<u.length;++p){let g=u[p];g={attributeName:g.attributeName,size:g.size,uploadFunction:g.uploadFunction,type:g.type||Ze.FLOAT,offset:g.offset},c[p]?this.dynamicProperties.push(g):this.staticProperties.push(g)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const u=this.geometry;let c=0;this.indexBuffer=new _r(function aj(d,u=null){const c=6*d;if((u=u||new Uint16Array(c)).length!==c)throw new Error(`Out buffer length is incorrect, got ${u.length} and expected ${c}`);for(let f=0,p=0;f<c;f+=6,p+=4)u[f+0]=p+0,u[f+1]=p+1,u[f+2]=p+2,u[f+3]=p+0,u[f+4]=p+2,u[f+5]=p+3;return u}(this.size),!0,!0),u.addIndex(this.indexBuffer),this.dynamicStride=0;for(let _=0;_<this.dynamicProperties.length;++_){const y=this.dynamicProperties[_];y.offset=c,c+=y.size,this.dynamicStride+=y.size}const f=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(f),this.dynamicDataUint32=new Uint32Array(f),this.dynamicBuffer=new _r(this.dynamicData,!1,!1);let p=0;this.staticStride=0;for(let _=0;_<this.staticProperties.length;++_){const y=this.staticProperties[_];y.offset=p,p+=y.size,this.staticStride+=y.size}const g=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(g),this.staticDataUint32=new Uint32Array(g),this.staticBuffer=new _r(this.staticData,!0,!1);for(let _=0;_<this.dynamicProperties.length;++_){const y=this.dynamicProperties[_];u.addAttribute(y.attributeName,this.dynamicBuffer,0,y.type===Ze.UNSIGNED_BYTE,y.type,4*this.dynamicStride,4*y.offset)}for(let _=0;_<this.staticProperties.length;++_){const y=this.staticProperties[_];u.addAttribute(y.attributeName,this.staticBuffer,0,y.type===Ze.UNSIGNED_BYTE,y.type,4*this.staticStride,4*y.offset)}}uploadDynamic(u,c,f){for(let p=0;p<this.dynamicProperties.length;p++){const g=this.dynamicProperties[p];g.uploadFunction(u,c,f,g.type===Ze.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,g.offset)}this.dynamicBuffer._updateID++}uploadStatic(u,c,f){for(let p=0;p<this.staticProperties.length;p++){const g=this.staticProperties[p];g.uploadFunction(u,c,f,g.type===Ze.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,g.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}class CI extends Ff{constructor(u){super(u),this.shader=null,this.properties=null,this.tempMatrix=new Jt,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:Ze.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=Qi.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}",{}),this.state=Ki.for2d()}render(u){const c=u.children,f=u._maxSize,p=u._batchSize,g=this.renderer;let _=c.length;if(0===_)return;_>f&&!u.autoResize&&(_=f);let y=u._buffers;y||(y=u._buffers=this.generateBuffers(u));const v=c[0]._texture.baseTexture,x=v.alphaMode>0;this.state.blendMode=jD(u.blendMode,x),g.state.set(this.state);const w=g.gl,C=u.worldTransform.copyTo(this.tempMatrix);C.prepend(g.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=C.toArray(!0),this.shader.uniforms.uColor=Ut.shared.setValue(u.tintRgb).premultiply(u.worldAlpha,x).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=v,this.renderer.shader.bind(this.shader);let E=!1;for(let T=0,D=0;T<_;T+=p,D+=1){let S=_-T;S>p&&(S=p),D>=y.length&&y.push(this._generateOneMoreBuffer(u));const A=y[D];A.uploadDynamic(c,T,S);const I=u._bufferUpdateIDs[D]||0;E=E||A._updateID<I,E&&(A._updateID=u._updateID,A.uploadStatic(c,T,S)),g.geometry.bind(A.geometry),w.drawElements(w.TRIANGLES,6*S,w.UNSIGNED_SHORT,0)}}generateBuffers(u){const c=[],f=u._maxSize,p=u._batchSize,g=u._properties;for(let _=0;_<f;_+=p)c.push(new wI(this.properties,g,p));return c}_generateOneMoreBuffer(u){return new wI(this.properties,u._properties,u._batchSize)}uploadVertices(u,c,f,p,g,_){let y=0,v=0,x=0,w=0;for(let C=0;C<f;++C){const E=u[c+C],T=E._texture,D=E.scale.x,S=E.scale.y,A=T.trim,I=T.orig;A?(v=A.x-E.anchor.x*I.width,y=v+A.width,w=A.y-E.anchor.y*I.height,x=w+A.height):(y=I.width*(1-E.anchor.x),v=I.width*-E.anchor.x,x=I.height*(1-E.anchor.y),w=I.height*-E.anchor.y),p[_]=v*D,p[_+1]=w*S,p[_+g]=y*D,p[_+g+1]=w*S,p[_+2*g]=y*D,p[_+2*g+1]=x*S,p[_+3*g]=v*D,p[_+3*g+1]=x*S,_+=4*g}}uploadPosition(u,c,f,p,g,_){for(let y=0;y<f;y++){const v=u[c+y].position;p[_]=v.x,p[_+1]=v.y,p[_+g]=v.x,p[_+g+1]=v.y,p[_+2*g]=v.x,p[_+2*g+1]=v.y,p[_+3*g]=v.x,p[_+3*g+1]=v.y,_+=4*g}}uploadRotation(u,c,f,p,g,_){for(let y=0;y<f;y++){const v=u[c+y].rotation;p[_]=v,p[_+g]=v,p[_+2*g]=v,p[_+3*g]=v,_+=4*g}}uploadUvs(u,c,f,p,g,_){for(let y=0;y<f;++y){const v=u[c+y]._texture._uvs;v?(p[_]=v.x0,p[_+1]=v.y0,p[_+g]=v.x1,p[_+g+1]=v.y1,p[_+2*g]=v.x2,p[_+2*g+1]=v.y2,p[_+3*g]=v.x3,p[_+3*g+1]=v.y3,_+=4*g):(p[_]=0,p[_+1]=0,p[_+g]=0,p[_+g+1]=0,p[_+2*g]=0,p[_+2*g+1]=0,p[_+3*g]=0,p[_+3*g+1]=0,_+=4*g)}}uploadTint(u,c,f,p,g,_){for(let y=0;y<f;++y){const v=u[c+y],x=Ut.shared.setValue(v._tintRGB).toPremultiplied(v.alpha,v.texture.baseTexture.alphaMode>0);p[_]=x,p[_+g]=x,p[_+2*g]=x,p[_+3*g]=x,_+=4*g}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}CI.extension={name:"particle",type:Pe.RendererPlugin},We.add(CI);var sp=(d=>(d[d.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",d[d.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",d))(sp||{});const op={willReadFrequently:!0},Ji=class qe{static get experimentalLetterSpacingSupported(){let u=qe._experimentalLetterSpacingSupported;if(void 0!==u){const c=Re.ADAPTER.getCanvasRenderingContext2D().prototype;u=qe._experimentalLetterSpacingSupported="letterSpacing"in c||"textLetterSpacing"in c}return u}constructor(u,c,f,p,g,_,y,v,x){this.text=u,this.style=c,this.width=f,this.height=p,this.lines=g,this.lineWidths=_,this.lineHeight=y,this.maxLineWidth=v,this.fontProperties=x}static measureText(u,c,f,p=qe._canvas){f=f??c.wordWrap;const g=c.toFontString(),_=qe.measureFont(g);0===_.fontSize&&(_.fontSize=c.fontSize,_.ascent=c.fontSize);const y=p.getContext("2d",op);y.font=g;const v=(f?qe.wordWrap(u,c,p):u).split(/(?:\r\n|\r|\n)/),x=new Array(v.length);let w=0;for(let D=0;D<v.length;D++){const S=qe._measureText(v[D],c.letterSpacing,y);x[D]=S,w=Math.max(w,S)}let C=w+c.strokeThickness;c.dropShadow&&(C+=c.dropShadowDistance);const E=c.lineHeight||_.fontSize+c.strokeThickness;let T=Math.max(E,_.fontSize+2*c.strokeThickness)+c.leading+(v.length-1)*(E+c.leading);return c.dropShadow&&(T+=c.dropShadowDistance),new qe(u,c,C,T,v,x,E+c.leading,w,_)}static _measureText(u,c,f){let p=!1;qe.experimentalLetterSpacingSupported&&(qe.experimentalLetterSpacing?(f.letterSpacing=`${c}px`,f.textLetterSpacing=`${c}px`,p=!0):(f.letterSpacing="0px",f.textLetterSpacing="0px"));let g=f.measureText(u).width;return g>0&&(p?g-=c:g+=(qe.graphemeSegmenter(u).length-1)*c),g}static wordWrap(u,c,f=qe._canvas){const p=f.getContext("2d",op);let g=0,_="",y="";const v=Object.create(null),{letterSpacing:x,whiteSpace:w}=c,C=qe.collapseSpaces(w),E=qe.collapseNewlines(w);let T=!C;const D=c.wordWrapWidth+x,S=qe.tokenize(u);for(let A=0;A<S.length;A++){let I=S[A];if(qe.isNewline(I)){if(!E){y+=qe.addLine(_),T=!C,_="",g=0;continue}I=" "}if(C){const M=qe.isBreakingSpace(I),R=qe.isBreakingSpace(_[_.length-1]);if(M&&R)continue}const P=qe.getFromCache(I,x,v,p);if(P>D)if(""!==_&&(y+=qe.addLine(_),_="",g=0),qe.canBreakWords(I,c.breakWords)){const M=qe.wordWrapSplit(I);for(let R=0;R<M.length;R++){let L=M[R],j=L,H=1;for(;M[R+H];){const z=M[R+H];if(qe.canBreakChars(j,z,I,R,c.breakWords))break;L+=z,j=z,H++}R+=H-1;const G=qe.getFromCache(L,x,v,p);G+g>D&&(y+=qe.addLine(_),T=!1,_="",g=0),_+=L,g+=G}}else _.length>0&&(y+=qe.addLine(_),_="",g=0),y+=qe.addLine(I,!(A===S.length-1)),T=!1,_="",g=0;else P+g>D&&(T=!1,y+=qe.addLine(_),_="",g=0),(_.length>0||!qe.isBreakingSpace(I)||T)&&(_+=I,g+=P)}return y+=qe.addLine(_,!1),y}static addLine(u,c=!0){return u=qe.trimRight(u),c?`${u}\n`:u}static getFromCache(u,c,f,p){let g=f[u];return"number"!=typeof g&&(g=qe._measureText(u,c,p)+c,f[u]=g),g}static collapseSpaces(u){return"normal"===u||"pre-line"===u}static collapseNewlines(u){return"normal"===u}static trimRight(u){if("string"!=typeof u)return"";for(let c=u.length-1;c>=0&&qe.isBreakingSpace(u[c]);c--)u=u.slice(0,-1);return u}static isNewline(u){return"string"==typeof u&&qe._newlines.includes(u.charCodeAt(0))}static isBreakingSpace(u,c){return"string"==typeof u&&qe._breakingSpaces.includes(u.charCodeAt(0))}static tokenize(u){const c=[];let f="";if("string"!=typeof u)return c;for(let p=0;p<u.length;p++){const g=u[p];qe.isBreakingSpace(g,u[p+1])||qe.isNewline(g)?(""!==f&&(c.push(f),f=""),c.push(g)):f+=g}return""!==f&&c.push(f),c}static canBreakWords(u,c){return c}static canBreakChars(u,c,f,p,g){return!0}static wordWrapSplit(u){return qe.graphemeSegmenter(u)}static measureFont(u){if(qe._fonts[u])return qe._fonts[u];const c={ascent:0,descent:0,fontSize:0},f=qe._canvas,p=qe._context;p.font=u;const g=qe.METRICS_STRING+qe.BASELINE_SYMBOL,_=Math.ceil(p.measureText(g).width);let y=Math.ceil(p.measureText(qe.BASELINE_SYMBOL).width);const v=Math.ceil(qe.HEIGHT_MULTIPLIER*y);if(y=y*qe.BASELINE_MULTIPLIER|0,0===_||0===v)return qe._fonts[u]=c,c;f.width=_,f.height=v,p.fillStyle="#f00",p.fillRect(0,0,_,v),p.font=u,p.textBaseline="alphabetic",p.fillStyle="#000",p.fillText(g,0,y);const x=p.getImageData(0,0,_,v).data,w=x.length,C=4*_;let E=0,T=0,D=!1;for(E=0;E<y;++E){for(let S=0;S<C;S+=4)if(255!==x[T+S]){D=!0;break}if(D)break;T+=C}for(c.ascent=y-E,T=w-C,D=!1,E=v;E>y;--E){for(let S=0;S<C;S+=4)if(255!==x[T+S]){D=!0;break}if(D)break;T-=C}return c.descent=E-y,c.fontSize=c.ascent+c.descent,qe._fonts[u]=c,c}static clearMetrics(u=""){u?delete qe._fonts[u]:qe._fonts={}}static get _canvas(){if(!qe.__canvas){let u;try{const c=new OffscreenCanvas(0,0);if(c.getContext("2d",op)?.measureText)return qe.__canvas=c,c;u=Re.ADAPTER.createCanvas()}catch{u=Re.ADAPTER.createCanvas()}u.width=u.height=10,qe.__canvas=u}return qe.__canvas}static get _context(){return qe.__context||(qe.__context=qe._canvas.getContext("2d",op)),qe.__context}};Ji.METRICS_STRING="|\xc9q\xc5",Ji.BASELINE_SYMBOL="M",Ji.BASELINE_MULTIPLIER=1.4,Ji.HEIGHT_MULTIPLIER=2,Ji.graphemeSegmenter=(()=>{if("function"==typeof Intl?.Segmenter){const d=new Intl.Segmenter;return u=>[...d.segment(u)].map(c=>c.segment)}return d=>[...d]})(),Ji.experimentalLetterSpacing=!1,Ji._fonts={},Ji._newlines=[10,13],Ji._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];let fo=Ji;const V8=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],EI=class sh{constructor(u){this.styleID=0,this.reset(),e0(this,u,u)}clone(){const u={};return e0(u,this,sh.defaultStyle),new sh(u)}reset(){e0(this,sh.defaultStyle,sh.defaultStyle)}get align(){return this._align}set align(u){this._align!==u&&(this._align=u,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(u){this._breakWords!==u&&(this._breakWords=u,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(u){this._dropShadow!==u&&(this._dropShadow=u,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(u){this._dropShadowAlpha!==u&&(this._dropShadowAlpha=u,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(u){this._dropShadowAngle!==u&&(this._dropShadowAngle=u,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(u){this._dropShadowBlur!==u&&(this._dropShadowBlur=u,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(u){const c=Jv(u);this._dropShadowColor!==c&&(this._dropShadowColor=c,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(u){this._dropShadowDistance!==u&&(this._dropShadowDistance=u,this.styleID++)}get fill(){return this._fill}set fill(u){const c=Jv(u);this._fill!==c&&(this._fill=c,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(u){this._fillGradientType!==u&&(this._fillGradientType=u,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(u){(function H8(d,u){if(!Array.isArray(d)||!Array.isArray(u)||d.length!==u.length)return!1;for(let c=0;c<d.length;++c)if(d[c]!==u[c])return!1;return!0})(this._fillGradientStops,u)||(this._fillGradientStops=u,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(u){this.fontFamily!==u&&(this._fontFamily=u,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(u){this._fontSize!==u&&(this._fontSize=u,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(u){this._fontStyle!==u&&(this._fontStyle=u,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(u){this._fontVariant!==u&&(this._fontVariant=u,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(u){this._fontWeight!==u&&(this._fontWeight=u,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(u){this._letterSpacing!==u&&(this._letterSpacing=u,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(u){this._lineHeight!==u&&(this._lineHeight=u,this.styleID++)}get leading(){return this._leading}set leading(u){this._leading!==u&&(this._leading=u,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(u){this._lineJoin!==u&&(this._lineJoin=u,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(u){this._miterLimit!==u&&(this._miterLimit=u,this.styleID++)}get padding(){return this._padding}set padding(u){this._padding!==u&&(this._padding=u,this.styleID++)}get stroke(){return this._stroke}set stroke(u){const c=Jv(u);this._stroke!==c&&(this._stroke=c,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(u){this._strokeThickness!==u&&(this._strokeThickness=u,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(u){this._textBaseline!==u&&(this._textBaseline=u,this.styleID++)}get trim(){return this._trim}set trim(u){this._trim!==u&&(this._trim=u,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(u){this._whiteSpace!==u&&(this._whiteSpace=u,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(u){this._wordWrap!==u&&(this._wordWrap=u,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(u){this._wordWrapWidth!==u&&(this._wordWrapWidth=u,this.styleID++)}toFontString(){const u="number"==typeof this.fontSize?`${this.fontSize}px`:this.fontSize;let c=this.fontFamily;Array.isArray(this.fontFamily)||(c=this.fontFamily.split(","));for(let f=c.length-1;f>=0;f--){let p=c[f].trim();!/([\"\'])[^\'\"]+\1/.test(p)&&!V8.includes(p)&&(p=`"${p}"`),c[f]=p}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${u} ${c.join(",")}`}};EI.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:sp.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let po=EI;function Jv(d){const u=Ut.shared,c=f=>{const p=u.setValue(f);return 1===p.alpha?p.toHex():p.toRgbaString()};return Array.isArray(d)?d.map(c):c(d)}function e0(d,u,c){for(const f in c)d[f]=Array.isArray(u[f])?u[f].slice():u[f]}const j8={texture:!0,children:!1,baseTexture:!0},TI=class dx extends Ms{constructor(u,c,f){let p=!1;f||(f=Re.ADAPTER.createCanvas(),p=!0),f.width=3,f.height=3;const g=Xe.from(f);g.orig=new wt,g.trim=new wt,super(g),this._ownCanvas=p,this.canvas=f,this.context=f.getContext("2d",{willReadFrequently:!0}),this._resolution=dx.defaultResolution??Re.RESOLUTION,this._autoResolution=dx.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=u,this.style=c,this.localStyleID=-1}static get experimentalLetterSpacing(){return fo.experimentalLetterSpacing}static set experimentalLetterSpacing(u){lt("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),fo.experimentalLetterSpacing=u}updateText(u){const c=this._style;if(this.localStyleID!==c.styleID&&(this.dirty=!0,this.localStyleID=c.styleID),!this.dirty&&u)return;this._font=this._style.toFontString();const f=this.context,p=fo.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),_=p.height,y=p.lines,v=p.lineHeight,x=p.lineWidths,w=p.maxLineWidth,C=p.fontProperties;let E,T;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,p.width)+2*c.padding)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,_)+2*c.padding)*this._resolution),f.scale(this._resolution,this._resolution),f.clearRect(0,0,this.canvas.width,this.canvas.height),f.font=this._font,f.lineWidth=c.strokeThickness,f.textBaseline=c.textBaseline,f.lineJoin=c.lineJoin,f.miterLimit=c.miterLimit;const D=c.dropShadow?2:1;for(let S=0;S<D;++S){const A=c.dropShadow&&0===S,I=A?Math.ceil(Math.max(1,_)+2*c.padding):0,P=I*this._resolution;if(A){f.fillStyle="black",f.strokeStyle="black";const L=c.dropShadowBlur*this._resolution,j=c.dropShadowDistance*this._resolution;f.shadowColor=Ut.shared.setValue(c.dropShadowColor).setAlpha(c.dropShadowAlpha).toRgbaString(),f.shadowBlur=L,f.shadowOffsetX=Math.cos(c.dropShadowAngle)*j,f.shadowOffsetY=Math.sin(c.dropShadowAngle)*j+P}else f.fillStyle=this._generateFillStyle(c,y,p),f.strokeStyle=c.stroke,f.shadowColor="black",f.shadowBlur=0,f.shadowOffsetX=0,f.shadowOffsetY=0;let M=(v-C.fontSize)/2;v-C.fontSize<0&&(M=0);for(let R=0;R<y.length;R++)E=c.strokeThickness/2,T=c.strokeThickness/2+R*v+C.ascent+M,"right"===c.align?E+=w-x[R]:"center"===c.align&&(E+=(w-x[R])/2),c.stroke&&c.strokeThickness&&this.drawLetterSpacing(y[R],E+c.padding,T+c.padding-I,!0),c.fill&&this.drawLetterSpacing(y[R],E+c.padding,T+c.padding-I)}this.updateTexture()}drawLetterSpacing(u,c,f,p=!1){const g=this._style.letterSpacing;let _=!1;if(fo.experimentalLetterSpacingSupported&&(fo.experimentalLetterSpacing?(this.context.letterSpacing=`${g}px`,this.context.textLetterSpacing=`${g}px`,_=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),0===g||_)return void(p?this.context.strokeText(u,c,f):this.context.fillText(u,c,f));let y=c;const v=fo.graphemeSegmenter(u);let x=this.context.measureText(u).width,w=0;for(let C=0;C<v.length;++C){const E=v[C];p?this.context.strokeText(E,y,f):this.context.fillText(E,y,f);let T="";for(let D=C+1;D<v.length;++D)T+=v[D];w=this.context.measureText(T).width,y+=x-w+g,x=w}}updateTexture(){const u=this.canvas;if(this._style.trim){const _=function dj(d){const u=function hj(d){const{width:u,height:c}=d,f=d.getContext("2d",{willReadFrequently:!0});if(null===f)throw new TypeError("Failed to get canvas 2D context");const p=f.getImageData(0,0,u,c).data;let g=0,_=0,y=u-1,v=c-1;for(;_<c&&XD(p,u,_);)++_;if(_===c)return $D.EMPTY;for(;XD(p,u,v);)--v;for(;qD(p,u,g,_,v);)++g;for(;qD(p,u,y,_,v);)--y;return++y,++v,new $D(g,_,y,v)}(d),{width:c,height:f}=u;let p=null;if(!u.isEmpty()){const g=d.getContext("2d");if(null===g)throw new TypeError("Failed to get canvas 2D context");p=g.getImageData(u.left,u.top,c,f)}return{width:c,height:f,data:p}}(u);_.data&&(u.width=_.width,u.height=_.height,this.context.putImageData(_.data,0,0))}const c=this._texture,f=this._style,p=f.trim?0:f.padding,g=c.baseTexture;c.trim.width=c._frame.width=u.width/this._resolution,c.trim.height=c._frame.height=u.height/this._resolution,c.trim.x=-p,c.trim.y=-p,c.orig.width=c._frame.width-2*p,c.orig.height=c._frame.height-2*p,this._onTextureUpdate(),g.setRealSize(u.width,u.height,this._resolution),c.updateUvs(),this.dirty=!1}_render(u){this._autoResolution&&this._resolution!==u.resolution&&(this._resolution=u.resolution,this.dirty=!0),this.updateText(!0),super._render(u)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(u,c){return this.updateText(!0),-1===this._textureID&&(u=!1),super.getBounds(u,c)}getLocalBounds(u){return this.updateText(!0),super.getLocalBounds.call(this,u)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(u,c,f){const p=u.fill;if(!Array.isArray(p))return p;if(1===p.length)return p[0];let g;const _=u.dropShadow?u.dropShadowDistance:0,y=u.padding||0,v=this.canvas.width/this._resolution-_-2*y,x=this.canvas.height/this._resolution-_-2*y,w=p.slice(),C=u.fillGradientStops.slice();if(!C.length){const E=w.length+1;for(let T=1;T<E;++T)C.push(T/E)}if(w.unshift(p[0]),C.unshift(0),w.push(p[p.length-1]),C.push(1),u.fillGradientType===sp.LINEAR_VERTICAL){g=this.context.createLinearGradient(v/2,y,v/2,x+y);const E=f.fontProperties.fontSize+u.strokeThickness;for(let T=0;T<c.length;T++){const D=f.lineHeight*(T-1)+E,S=f.lineHeight*T;let A=S;T>0&&D>S&&(A=(S+D)/2);const I=S+E,P=f.lineHeight*(T+1);let M=I;T+1<c.length&&P<I&&(M=(I+P)/2);const R=(M-A)/x;for(let L=0;L<w.length;L++){let j=0;j="number"==typeof C[L]?C[L]:L/w.length;let H=Math.min(1,Math.max(0,A/x+j*R));H=Number(H.toFixed(5)),g.addColorStop(H,w[L])}}}else{g=this.context.createLinearGradient(y,x/2,v+y,x/2);const E=w.length+1;let T=1;for(let D=0;D<w.length;D++){let S;S="number"==typeof C[D]?C[D]:T/E,g.addColorStop(S,w[D]),T++}}return g}destroy(u){"boolean"==typeof u&&(u={children:u}),u=Object.assign({},j8,u),super.destroy(u),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(u){this.updateText(!0);const c=oo(this.scale.x)||1;this.scale.x=c*u/this._texture.orig.width,this._width=u}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(u){this.updateText(!0);const c=oo(this.scale.y)||1;this.scale.y=c*u/this._texture.orig.height,this._height=u}get style(){return this._style}set style(u){this._style=(u=u||{})instanceof po?u:new po(u),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(u){u=String(u??""),this._text!==u&&(this._text=u,this.dirty=!0)}get resolution(){return this._resolution}set resolution(u){this._autoResolution=!1,this._resolution!==u&&(this._resolution=u,this.dirty=!0)}};TI.defaultAutoResolution=!0;let ap=TI;class G8{constructor(u){this.maxItemsPerFrame=u,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function z8(d,u){let c=!1;if(d?._textures?.length)for(let f=0;f<d._textures.length;f++)if(d._textures[f]instanceof Xe){const p=d._textures[f].baseTexture;u.includes(p)||(u.push(p),c=!0)}return c}function $8(d,u){if(d.baseTexture instanceof vt){const c=d.baseTexture;return u.includes(c)||u.push(c),!0}return!1}function W8(d,u){if(d._texture&&d._texture instanceof Xe){const c=d._texture.baseTexture;return u.includes(c)||u.push(c),!0}return!1}function X8(d,u){return u instanceof ap&&(u.updateText(!0),!0)}function q8(d,u){if(u instanceof po){const c=u.toFontString();return fo.measureFont(c),!0}return!1}function Y8(d,u){if(d instanceof ap){u.includes(d.style)||u.push(d.style),u.includes(d)||u.push(d);const c=d._texture.baseTexture;return u.includes(c)||u.push(c),!0}return!1}function K8(d,u){return d instanceof po&&(u.includes(d)||u.push(d),!0)}const SI=class HP{constructor(u){this.limiter=new G8(HP.uploadsPerFrame),this.renderer=u,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(Y8),this.registerFindHook(K8),this.registerFindHook(z8),this.registerFindHook($8),this.registerFindHook(W8),this.registerUploadHook(X8),this.registerUploadHook(q8)}upload(u){return new Promise(c=>{u&&this.add(u),this.queue.length?(this.completes.push(c),this.ticking||(this.ticking=!0,kn.system.addOnce(this.tick,this,la.UTILITY))):c()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const u=this.queue[0];let c=!1;if(u&&!u._destroyed)for(let f=0,p=this.uploadHooks.length;f<p;f++)if(this.uploadHooks[f](this.uploadHookHelper,u)){this.queue.shift(),c=!0;break}c||this.queue.shift()}if(this.queue.length)kn.system.addOnce(this.tick,this,la.UTILITY);else{this.ticking=!1;const u=this.completes.slice(0);this.completes.length=0;for(let c=0,f=u.length;c<f;c++)u[c]()}}registerFindHook(u){return u&&this.addHooks.push(u),this}registerUploadHook(u){return u&&this.uploadHooks.push(u),this}add(u){for(let c=0,f=this.addHooks.length;c<f&&!this.addHooks[c](u,this.queue);c++);if(u instanceof vn)for(let c=u.children.length-1;c>=0;c--)this.add(u.children[c]);return this}destroy(){this.ticking&&kn.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};SI.uploadsPerFrame=4;let t0=SI;function DI(d,u){return u instanceof vt&&(u._glTextures[d.CONTEXT_UID]||d.texture.bind(u),!0)}function Z8(d,u){if(!(u instanceof np))return!1;const{geometry:c}=u;u.finishPoly(),c.updateBatches();const{batches:f}=c;for(let p=0;p<f.length;p++){const{texture:g}=f[p].style;g&&DI(d,g.baseTexture)}return c.batchable||d.geometry.bind(c,u._resolveDirectShader(d)),!0}function Q8(d,u){return d instanceof np&&(u.push(d),!0)}Object.defineProperties(Re,{UPLOADS_PER_FRAME:{get:()=>t0.uploadsPerFrame,set(d){lt("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),t0.uploadsPerFrame=d}}});class AI extends t0{constructor(u){super(u),this.uploadHookHelper=this.renderer,this.registerFindHook(Q8),this.registerUploadHook(DI),this.registerUploadHook(Z8)}}AI.extension={name:"prepare",type:Pe.RendererSystem},We.add(AI),new xt;var MI="#version 100\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n";const lp=new Jt;class PI extends Ff{constructor(u){super(u),u.runners.contextChange.add(this),this.quad=new cA,this.state=Ki.for2d()}contextChange(){const u=this.renderer,c={globals:u.globalUniforms};this.simpleShader=Qi.from(MI,"#version 100\n#define SHADER_NAME Tiling-Sprite-Simple-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 texSample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = texSample * uColor;\n}\n",c),this.shader=u.context.webGLVersion>1?Qi.from("#version 300 es\n#define SHADER_NAME Tiling-Sprite-300\n\nprecision lowp float;\n\nin vec2 aVertexPosition;\nin vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nout vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","#version 300 es\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nin vec2 vTextureCoord;\n\nout vec4 fragmentColor;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0\n\n    fragmentColor = texSample * uColor;\n}\n",c):Qi.from(MI,"#version 100\n#ifdef GL_EXT_shader_texture_lod\n    #extension GL_EXT_shader_texture_lod : enable\n#endif\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    #ifdef GL_EXT_shader_texture_lod\n        vec4 texSample = unclamped == coord\n            ? texture2D(uSampler, coord) \n            : texture2DLodEXT(uSampler, coord, 0);\n    #else\n        vec4 texSample = texture2D(uSampler, coord);\n    #endif\n\n    gl_FragColor = texSample * uColor;\n}\n",c)}render(u){const c=this.renderer,f=this.quad;let p=f.vertices;p[0]=p[6]=u._width*-u.anchor.x,p[1]=p[3]=u._height*-u.anchor.y,p[2]=p[4]=u._width*(1-u.anchor.x),p[5]=p[7]=u._height*(1-u.anchor.y);const g=u.uvRespectAnchor?u.anchor.x:0,_=u.uvRespectAnchor?u.anchor.y:0;p=f.uvs,p[0]=p[6]=-g,p[1]=p[3]=-_,p[2]=p[4]=1-g,p[5]=p[7]=1-_,f.invalidate();const y=u._texture,v=y.baseTexture,x=v.alphaMode>0,w=u.tileTransform.localTransform,C=u.uvMatrix;let E=v.isPowerOfTwo&&y.frame.width===v.width&&y.frame.height===v.height;E&&(v._glTextures[c.CONTEXT_UID]?E=v.wrapMode!==so.CLAMP:v.wrapMode===so.CLAMP&&(v.wrapMode=so.REPEAT));const T=E?this.simpleShader:this.shader,D=y.width,S=y.height,A=u._width,I=u._height;lp.set(w.a*D/A,w.b*D/I,w.c*S/A,w.d*S/I,w.tx/A,w.ty/I),lp.invert(),E?lp.prepend(C.mapCoord):(T.uniforms.uMapCoord=C.mapCoord.toArray(!0),T.uniforms.uClampFrame=C.uClampFrame,T.uniforms.uClampOffset=C.uClampOffset),T.uniforms.uTransform=lp.toArray(!0),T.uniforms.uColor=Ut.shared.setValue(u.tint).premultiply(u.worldAlpha,x).toArray(T.uniforms.uColor),T.uniforms.translationMatrix=u.transform.worldTransform.toArray(!0),T.uniforms.uSampler=y,c.shader.bind(T),c.geometry.bind(f),this.state.blendMode=jD(u.blendMode,x),c.state.set(this.state),c.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}PI.extension={name:"tilingSprite",type:Pe.RendererPlugin},We.add(PI);const RI=class oh{constructor(u,c,f=null){this.linkedSheets=[],this._texture=u instanceof Xe?u:null,this.baseTexture=u instanceof vt?u:this._texture.baseTexture,this.textures={},this.animations={},this.data=c;const p=this.baseTexture.resource;this.resolution=this._updateResolution(f||(p?p.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(u=null){const{scale:c}=this.data.meta;let f=As(u,null);return null===f&&(f=parseFloat(c??"1")),1!==f&&this.baseTexture.setResolution(f),f}parse(){return new Promise(u=>{this._callback=u,this._batchIndex=0,this._frameKeys.length<=oh.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(u){let c=u;const f=oh.BATCH_SIZE;for(;c-u<f&&c<this._frameKeys.length;){const p=this._frameKeys[c],g=this._frames[p],_=g.frame;if(_){let y=null,v=null;const x=!1!==g.trimmed&&g.sourceSize?g.sourceSize:g.frame,w=new wt(0,0,Math.floor(x.w)/this.resolution,Math.floor(x.h)/this.resolution);y=g.rotated?new wt(Math.floor(_.x)/this.resolution,Math.floor(_.y)/this.resolution,Math.floor(_.h)/this.resolution,Math.floor(_.w)/this.resolution):new wt(Math.floor(_.x)/this.resolution,Math.floor(_.y)/this.resolution,Math.floor(_.w)/this.resolution,Math.floor(_.h)/this.resolution),!1!==g.trimmed&&g.spriteSourceSize&&(v=new wt(Math.floor(g.spriteSourceSize.x)/this.resolution,Math.floor(g.spriteSourceSize.y)/this.resolution,Math.floor(_.w)/this.resolution,Math.floor(_.h)/this.resolution)),this.textures[p]=new Xe(this.baseTexture,y,w,v,g.rotated?2:0,g.anchor,g.borders),Xe.addToCache(this.textures[p],p.toString())}c++}}_processAnimations(){const u=this.data.animations||{};for(const c in u){this.animations[c]=[];for(let f=0;f<u[c].length;f++)this.animations[c].push(this.textures[u[c][f]])}}_parseComplete(){const u=this._callback;this._callback=null,this._batchIndex=0,u.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*oh.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*oh.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(u=!1){for(const c in this.textures)this.textures[c].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,u&&(this._texture?.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};RI.BATCH_SIZE=1e3;let FI=RI;const n$=["jpg","png","jpeg","avif","webp"];function OI(d,u,c){const f={};if(d.forEach(p=>{f[p]=u}),Object.keys(u.textures).forEach(p=>{f[p]=u.textures[p]}),!c){const p=Nr.dirname(d[0]);u.linkedSheets.forEach((g,_)=>{const y=OI([`${p}/${u.data.meta.related_multi_packs[_]}`],g,!0);Object.assign(f,y)})}return f}const i$={extension:Pe.Asset,cache:{test:d=>d instanceof FI,getCacheableAssets:(d,u)=>OI(d,u,!1)},resolver:{test:d=>{const u=d.split("?")[0].split("."),c=u.pop(),f=u.pop();return"json"===c&&n$.includes(f)},parse:d=>{const u=d.split(".");return{resolution:parseFloat(Re.RETINA_PREFIX.exec(d)?.[1]??"1"),format:u[u.length-2],src:d}}},loader:{name:"spritesheetLoader",extension:{type:Pe.LoadParser,priority:Mi.Normal},testParse:(d,u)=>Ge(function*(){return".json"===Nr.extname(u.src).toLowerCase()&&!!d.frames})(),parse:(d,u,c)=>Ge(function*(){let f=Nr.dirname(u.src);f&&f.lastIndexOf("/")!==f.length-1&&(f+="/");let p=f+d.meta.image;p=jv(p,u.src);const g=(yield c.load([p]))[p],_=new FI(g.baseTexture,d,u.src);yield _.parse();const y=d?.meta?.related_multi_packs;if(Array.isArray(y)){const v=[];for(const w of y){if("string"!=typeof w)continue;let C=f+w;u.data?.ignoreMultiPack||(C=jv(C,u.src),v.push(c.load({src:C,data:{ignoreMultiPack:!0}})))}const x=yield Promise.all(v);_.linkedSheets=x,x.forEach(w=>{w.linkedSheets=[_].concat(_.linkedSheets.filter(C=>C!==w))})}return _})(),unload(d){d.destroy(!0)}}};We.add(i$);class up{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class cp{static test(u){return"string"==typeof u&&u.startsWith("info face=")}static parse(u){const c=u.match(/^[a-z]+\s+.+$/gm),f={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const g in c){const _=c[g].match(/^[a-z]+/gm)[0],y=c[g].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),v={};for(const x in y){const w=y[x].split("="),C=w[0],E=w[1].replace(/"/gm,""),T=parseFloat(E),D=isNaN(T)?E:T;v[C]=D}f[_].push(v)}const p=new up;return f.info.forEach(g=>p.info.push({face:g.face,size:parseInt(g.size,10)})),f.common.forEach(g=>p.common.push({lineHeight:parseInt(g.lineHeight,10)})),f.page.forEach(g=>p.page.push({id:parseInt(g.id,10),file:g.file})),f.char.forEach(g=>p.char.push({id:parseInt(g.id,10),page:parseInt(g.page,10),x:parseInt(g.x,10),y:parseInt(g.y,10),width:parseInt(g.width,10),height:parseInt(g.height,10),xoffset:parseInt(g.xoffset,10),yoffset:parseInt(g.yoffset,10),xadvance:parseInt(g.xadvance,10)})),f.kerning.forEach(g=>p.kerning.push({first:parseInt(g.first,10),second:parseInt(g.second,10),amount:parseInt(g.amount,10)})),f.distanceField.forEach(g=>p.distanceField.push({distanceRange:parseInt(g.distanceRange,10),fieldType:g.fieldType})),p}}class n0{static test(u){const c=u;return"string"!=typeof u&&"getElementsByTagName"in u&&c.getElementsByTagName("page").length&&null!==c.getElementsByTagName("info")[0].getAttribute("face")}static parse(u){const c=new up,f=u.getElementsByTagName("info"),p=u.getElementsByTagName("common"),g=u.getElementsByTagName("page"),_=u.getElementsByTagName("char"),y=u.getElementsByTagName("kerning"),v=u.getElementsByTagName("distanceField");for(let x=0;x<f.length;x++)c.info.push({face:f[x].getAttribute("face"),size:parseInt(f[x].getAttribute("size"),10)});for(let x=0;x<p.length;x++)c.common.push({lineHeight:parseInt(p[x].getAttribute("lineHeight"),10)});for(let x=0;x<g.length;x++)c.page.push({id:parseInt(g[x].getAttribute("id"),10)||0,file:g[x].getAttribute("file")});for(let x=0;x<_.length;x++){const w=_[x];c.char.push({id:parseInt(w.getAttribute("id"),10),page:parseInt(w.getAttribute("page"),10)||0,x:parseInt(w.getAttribute("x"),10),y:parseInt(w.getAttribute("y"),10),width:parseInt(w.getAttribute("width"),10),height:parseInt(w.getAttribute("height"),10),xoffset:parseInt(w.getAttribute("xoffset"),10),yoffset:parseInt(w.getAttribute("yoffset"),10),xadvance:parseInt(w.getAttribute("xadvance"),10)})}for(let x=0;x<y.length;x++)c.kerning.push({first:parseInt(y[x].getAttribute("first"),10),second:parseInt(y[x].getAttribute("second"),10),amount:parseInt(y[x].getAttribute("amount"),10)});for(let x=0;x<v.length;x++)c.distanceField.push({fieldType:v[x].getAttribute("fieldType"),distanceRange:parseInt(v[x].getAttribute("distanceRange"),10)});return c}}class s0{static test(u){return!("string"!=typeof u||!u.includes("<font>"))&&n0.test(Re.ADAPTER.parseXML(u))}static parse(u){return n0.parse(Re.ADAPTER.parseXML(u))}}const o0=[cp,n0,s0];function a$(d,u,c,f,p,g,_){const y=c.text,v=c.fontProperties;u.translate(f,p),u.scale(g,g);const x=_.strokeThickness/2,w=-_.strokeThickness/2;if(u.font=_.toFontString(),u.lineWidth=_.strokeThickness,u.textBaseline=_.textBaseline,u.lineJoin=_.lineJoin,u.miterLimit=_.miterLimit,u.fillStyle=function o$(d,u,c,f,p,g){const _=c.fill;if(!Array.isArray(_))return _;if(1===_.length)return _[0];let y;const v=c.dropShadow?c.dropShadowDistance:0,x=c.padding||0,w=d.width/f-v-2*x,C=d.height/f-v-2*x,E=_.slice(),T=c.fillGradientStops.slice();if(!T.length){const D=E.length+1;for(let S=1;S<D;++S)T.push(S/D)}if(E.unshift(_[0]),T.unshift(0),E.push(_[_.length-1]),T.push(1),c.fillGradientType===sp.LINEAR_VERTICAL){y=u.createLinearGradient(w/2,x,w/2,C+x);let D=0;const S=(g.fontProperties.fontSize+c.strokeThickness)/C;for(let A=0;A<p.length;A++){const I=g.lineHeight*A;for(let P=0;P<E.length;P++){let M=0;M="number"==typeof T[P]?T[P]:P/E.length;let L=Math.max(D,I/C+M*S);L=Math.min(L,1),y.addColorStop(L,E[P]),D=L}}}else{y=u.createLinearGradient(x,C/2,w+x,C/2);const D=E.length+1;let S=1;for(let A=0;A<E.length;A++){let I;I="number"==typeof T[A]?T[A]:S/D,y.addColorStop(I,E[A]),S++}}return y}(d,u,_,g,[y],c),u.strokeStyle=_.stroke,_.dropShadow){const E=_.dropShadowBlur*g,T=_.dropShadowDistance*g;u.shadowColor=Ut.shared.setValue(_.dropShadowColor).setAlpha(_.dropShadowAlpha).toRgbaString(),u.shadowBlur=E,u.shadowOffsetX=Math.cos(_.dropShadowAngle)*T,u.shadowOffsetY=Math.sin(_.dropShadowAngle)*T}else u.shadowColor="black",u.shadowBlur=0,u.shadowOffsetX=0,u.shadowOffsetY=0;_.stroke&&_.strokeThickness&&u.strokeText(y,x,w+c.lineHeight-v.descent),_.fill&&u.fillText(y,x,w+c.lineHeight-v.descent),u.setTransform(1,0,0,1,0,0),u.fillStyle="rgba(0, 0, 0, 0)"}function NI(d){return Array.from?Array.from(d):d.split("")}function hp(d){return d.codePointAt?d.codePointAt(0):d.charCodeAt(0)}const go=class is{constructor(u,c,f){const[p]=u.info,[g]=u.common,[_]=u.page,[y]=u.distanceField,v=As(_.file),x={};this._ownsTextures=f,this.font=p.face,this.size=p.size,this.lineHeight=g.lineHeight/v,this.chars={},this.pageTextures=x;for(let w=0;w<u.page.length;w++){const{id:C,file:E}=u.page[w];x[C]=c instanceof Array?c[w]:c[E],y?.fieldType&&"none"!==y.fieldType&&(x[C].baseTexture.alphaMode=_n.NO_PREMULTIPLIED_ALPHA,x[C].baseTexture.mipmap=Wi.OFF)}for(let w=0;w<u.char.length;w++){const{id:C,page:E}=u.char[w];let{x:T,y:D,width:S,height:A,xoffset:I,yoffset:P,xadvance:M}=u.char[w];T/=v,D/=v,S/=v,A/=v,I/=v,P/=v,M/=v;const R=new wt(T+x[E].frame.x/v,D+x[E].frame.y/v,S,A);this.chars[C]={xOffset:I,yOffset:P,xAdvance:M,kerning:{},texture:new Xe(x[E].baseTexture,R),page:E}}for(let w=0;w<u.kerning.length;w++){let{first:C,second:E,amount:T}=u.kerning[w];C/=v,E/=v,T/=v,this.chars[E]&&(this.chars[E].kerning[C]=T)}this.distanceFieldRange=y?.distanceRange,this.distanceFieldType=y?.fieldType?.toLowerCase()??"none"}destroy(){for(const u in this.chars)this.chars[u].texture.destroy(),this.chars[u].texture=null;for(const u in this.pageTextures)this._ownsTextures&&this.pageTextures[u].destroy(!0),this.pageTextures[u]=null;this.chars=null,this.pageTextures=null}static install(u,c,f){let p;if(u instanceof up)p=u;else{const _=function s$(d){for(let u=0;u<o0.length;u++)if(o0[u].test(d))return o0[u];return null}(u);if(!_)throw new Error("Unrecognized data format for font.");p=_.parse(u)}c instanceof Xe&&(c=[c]);const g=new is(p,c,f);return is.available[g.font]=g,g}static uninstall(u){const c=is.available[u];if(!c)throw new Error(`No font found named '${u}'`);c.destroy(),delete is.available[u]}static from(u,c,f){if(!u)throw new Error("[BitmapFont] Property `name` is required.");const{chars:p,padding:g,resolution:_,textureWidth:y,textureHeight:v,...x}=Object.assign({},is.defaultOptions,f),w=function l$(d){"string"==typeof d&&(d=[d]);const u=[];for(let c=0,f=d.length;c<f;c++){const p=d[c];if(Array.isArray(p)){if(2!==p.length)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${p.length}.`);const g=p[0].charCodeAt(0),_=p[1].charCodeAt(0);if(_<g)throw new Error("[BitmapFont]: Invalid character range.");for(let y=g,v=_;y<=v;y++)u.push(String.fromCharCode(y))}else u.push(...NI(p))}if(0===u.length)throw new Error("[BitmapFont]: Empty set when resolving characters.");return u}(p),C=c instanceof po?c:new po(c),E=y,T=new up;T.info[0]={face:C.fontFamily,size:C.fontSize},T.common[0]={lineHeight:C.fontSize};let A,I,P,D=0,S=0,M=0;const R=[],L=[];for(let H=0;H<w.length;H++){A||(A=Re.ADAPTER.createCanvas(),A.width=y,A.height=v,I=A.getContext("2d"),P=new vt(A,{resolution:_,...x}),R.push(P),L.push(new Xe(P)),T.page.push({id:L.length-1,file:""}));const G=w[H],z=fo.measureText(G,C,!1,A),ce=z.width,ie=Math.ceil(z.height),le=Math.ceil(("italic"===C.fontStyle?2:1)*ce);if(S>=v-ie*_){if(0===S)throw new Error(`[BitmapFont] textureHeight ${v}px is too small (fontFamily: '${C.fontFamily}', fontSize: ${C.fontSize}px, char: '${G}')`);--H,A=null,I=null,P=null,S=0,D=0,M=0;continue}if(M=Math.max(ie+z.fontProperties.descent,M),le*_+D>=E){if(0===D)throw new Error(`[BitmapFont] textureWidth ${y}px is too small (fontFamily: '${C.fontFamily}', fontSize: ${C.fontSize}px, char: '${G}')`);--H,S+=M*_,S=Math.ceil(S),D=0,M=0;continue}a$(A,I,z,D,S,_,C);const te=hp(z.text);T.char.push({id:te,page:L.length-1,x:D/_,y:S/_,width:le,height:ie,xoffset:0,yoffset:0,xadvance:ce-(C.dropShadow?C.dropShadowDistance:0)-(C.stroke?C.strokeThickness:0)}),D+=(le+2*g)*_,D=Math.ceil(D)}if(!f?.skipKerning)for(let H=0,G=w.length;H<G;H++){const z=w[H];for(let ce=0;ce<G;ce++){const ie=w[ce],le=I.measureText(z).width,te=I.measureText(ie).width,re=I.measureText(z+ie).width-(le+te);re&&T.kerning.push({first:hp(z),second:hp(ie),amount:re})}}const j=new is(T,L,!0);return void 0!==is.available[u]&&is.uninstall(u),is.available[u]=j,j}};go.ALPHA=[["a","z"],["A","Z"]," "],go.NUMERIC=[["0","9"]],go.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],go.ASCII=[[" ","~"]],go.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:go.ALPHANUMERIC},go.available={};let mo=go;const LI=[],kI=[],BI=[];(class jP extends vn{constructor(u,c={}){super();const{align:f,tint:p,maxWidth:g,letterSpacing:_,fontName:y,fontSize:v}=Object.assign({},jP.styleDefaults,c);if(!mo.available[y])throw new Error(`Missing BitmapFont "${y}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=f,this._tintColor=new Ut(p),this._font=void 0,this._fontName=y,this._fontSize=v,this.text=u,this._maxWidth=g,this._maxLineHeight=0,this._letterSpacing=_,this._anchor=new Zi(()=>{this.dirty=!0},this,0,0),this._roundPixels=Re.ROUND_PIXELS,this.dirty=!0,this._resolution=Re.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){const u=mo.available[this._fontName],c=this.fontSize,f=c/u.size,p=new xt,g=[],_=[],y=[],x=NI(this._text.replace(/(?:\r\n|\r)/g,"\n")||" "),w=this._maxWidth*u.size/c,C="none"===u.distanceFieldType?LI:kI;let E=null,T=0,D=0,S=0,A=-1,I=0,P=0,M=0,R=0;for(let ie=0;ie<x.length;ie++){const le=x[ie],te=hp(le);if(/(?:\s)/.test(le)&&(A=ie,I=T,R++),"\r"===le||"\n"===le){_.push(T),y.push(-1),D=Math.max(D,T),++S,++P,p.x=0,p.y+=u.lineHeight,E=null,R=0;continue}const re=u.chars[te];if(!re)continue;E&&re.kerning[E]&&(p.x+=re.kerning[E]);const Ie=BI.pop()||{texture:Xe.EMPTY,line:0,charCode:0,prevSpaces:0,position:new xt};Ie.texture=re.texture,Ie.line=S,Ie.charCode=te,Ie.position.x=Math.round(p.x+re.xOffset+this._letterSpacing/2),Ie.position.y=Math.round(p.y+re.yOffset),Ie.prevSpaces=R,g.push(Ie),T=Ie.position.x+Math.max(re.xAdvance-re.xOffset,re.texture.orig.width),p.x+=re.xAdvance+this._letterSpacing,M=Math.max(M,re.yOffset+re.texture.height),E=te,-1!==A&&w>0&&p.x>w&&(++P,Ol(g,1+A-P,1+ie-A),ie=A,A=-1,_.push(I),y.push(g.length>0?g[g.length-1].prevSpaces:0),D=Math.max(D,I),S++,p.x=0,p.y+=u.lineHeight,E=null,R=0)}const L=x[x.length-1];"\r"!==L&&"\n"!==L&&(/(?:\s)/.test(L)&&(T=I),_.push(T),D=Math.max(D,T),y.push(-1));const j=[];for(let ie=0;ie<=S;ie++){let le=0;"right"===this._align?le=D-_[ie]:"center"===this._align?le=(D-_[ie])/2:"justify"===this._align&&(le=y[ie]<0?0:(D-_[ie])/y[ie]),j.push(le)}const H=g.length,G={},z=[],ce=this._activePagesMeshData;C.push(...ce);for(let ie=0;ie<H;ie++){const le=g[ie].texture,te=le.baseTexture.uid;if(!G[te]){let re=C.pop();if(!re){const $e=new N8;let Q,Le;"none"===u.distanceFieldType?(Q=new bI(Xe.EMPTY),Le=at.NORMAL):(Q=new bI(Xe.EMPTY,{program:Is.from("// Mesh material default fragment\r\nattribute vec2 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\n\r\nuniform mat3 projectionMatrix;\r\nuniform mat3 translationMatrix;\r\nuniform mat3 uTextureMatrix;\r\n\r\nvarying vec2 vTextureCoord;\r\n\r\nvoid main(void)\r\n{\r\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r\n\r\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r\n}\r\n","// Pixi texture info\r\nvarying vec2 vTextureCoord;\r\nuniform sampler2D uSampler;\r\n\r\n// Tint\r\nuniform vec4 uColor;\r\n\r\n// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r\nuniform float uFWidth;\r\n\r\nvoid main(void) {\r\n\r\n  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r\n  vec4 texColor = texture2D(uSampler, vTextureCoord);\r\n\r\n  // MSDF\r\n  float median = texColor.r + texColor.g + texColor.b -\r\n                  min(texColor.r, min(texColor.g, texColor.b)) -\r\n                  max(texColor.r, max(texColor.g, texColor.b));\r\n  // SDF\r\n  median = min(median, texColor.a);\r\n\r\n  float screenPxDistance = uFWidth * (median - 0.5);\r\n  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r\n  if (median < 0.01) {\r\n    alpha = 0.0;\r\n  } else if (median > 0.99) {\r\n    alpha = 1.0;\r\n  }\r\n\r\n  // Gamma correction for coverage-like alpha\r\n  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r\n  float gamma = mix(1.0, 1.0 / 2.2, luma);\r\n  float coverage = pow(uColor.a * alpha, gamma);  \r\n\r\n  // NPM Textures, NPM outputs\r\n  gl_FragColor = vec4(uColor.rgb, coverage);\r\n}\r\n"),uniforms:{uFWidth:0}}),Le=at.NORMAL_NPM);const tt=new xI($e,Q);tt.blendMode=Le,re={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:tt,vertices:null,uvs:null,indices:null}}re.index=0,re.indexCount=0,re.vertexCount=0,re.uvsCount=0,re.total=0;const{_textureCache:Ie}=this;Ie[te]=Ie[te]||new Xe(le.baseTexture),re.mesh.texture=Ie[te],re.mesh.tint=this._tintColor.value,z.push(re),G[te]=re}G[te].total++}for(let ie=0;ie<ce.length;ie++)z.includes(ce[ie])||this.removeChild(ce[ie].mesh);for(let ie=0;ie<z.length;ie++)z[ie].mesh.parent!==this&&this.addChild(z[ie].mesh);this._activePagesMeshData=z;for(const ie in G){const le=G[ie],te=le.total;if(!(le.indices?.length>6*te)||le.vertices.length<2*xI.BATCHABLE_SIZE)le.vertices=new Float32Array(8*te),le.uvs=new Float32Array(8*te),le.indices=new Uint16Array(6*te);else{const Ie=le.vertices;for(let $e=4*le.total*2;$e<Ie.length;$e++)Ie[$e]=0}le.mesh.size=6*te}for(let ie=0;ie<H;ie++){const le=g[ie];let te=le.position.x+j[le.line]*("justify"===this._align?le.prevSpaces:1);this._roundPixels&&(te=Math.round(te));const re=te*f,Ie=le.position.y*f,$e=le.texture,Q=G[$e.baseTexture.uid],Le=$e.frame,tt=$e._uvs,Je=Q.index++;Q.indices[6*Je+0]=0+4*Je,Q.indices[6*Je+1]=1+4*Je,Q.indices[6*Je+2]=2+4*Je,Q.indices[6*Je+3]=0+4*Je,Q.indices[6*Je+4]=2+4*Je,Q.indices[6*Je+5]=3+4*Je,Q.vertices[8*Je+0]=re,Q.vertices[8*Je+1]=Ie,Q.vertices[8*Je+2]=re+Le.width*f,Q.vertices[8*Je+3]=Ie,Q.vertices[8*Je+4]=re+Le.width*f,Q.vertices[8*Je+5]=Ie+Le.height*f,Q.vertices[8*Je+6]=re,Q.vertices[8*Je+7]=Ie+Le.height*f,Q.uvs[8*Je+0]=tt.x0,Q.uvs[8*Je+1]=tt.y0,Q.uvs[8*Je+2]=tt.x1,Q.uvs[8*Je+3]=tt.y1,Q.uvs[8*Je+4]=tt.x2,Q.uvs[8*Je+5]=tt.y2,Q.uvs[8*Je+6]=tt.x3,Q.uvs[8*Je+7]=tt.y3}this._textWidth=D*f,this._textHeight=(p.y+u.lineHeight)*f;for(const ie in G){const le=G[ie];if(0!==this.anchor.x||0!==this.anchor.y){let $e=0;const Q=this._textWidth*this.anchor.x,Le=this._textHeight*this.anchor.y;for(let tt=0;tt<le.total;tt++)le.vertices[$e++]-=Q,le.vertices[$e++]-=Le,le.vertices[$e++]-=Q,le.vertices[$e++]-=Le,le.vertices[$e++]-=Q,le.vertices[$e++]-=Le,le.vertices[$e++]-=Q,le.vertices[$e++]-=Le}this._maxLineHeight=M*f;const te=le.mesh.geometry.getBuffer("aVertexPosition"),re=le.mesh.geometry.getBuffer("aTextureCoord"),Ie=le.mesh.geometry.getIndex();te.data=le.vertices,re.data=le.uvs,Ie.data=le.indices,te.update(),re.update(),Ie.update()}for(let ie=0;ie<g.length;ie++)BI.push(g[ie]);this._font=u,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(u){this._autoResolution&&this._resolution!==u.resolution&&(this._resolution=u.resolution,this.dirty=!0);const{distanceFieldRange:c,distanceFieldType:f,size:p}=mo.available[this._fontName];if("none"!==f){const{a:g,b:_,c:y,d:v}=this.worldTransform,x=Math.sqrt(g*g+_*_),w=Math.sqrt(y*y+v*v),C=(Math.abs(x)+Math.abs(w))/2,E=this.fontSize/p,T=u._view.resolution;for(const D of this._activePagesMeshData)D.mesh.shader.uniforms.uFWidth=C*c*E*T}super._render(u)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const u=mo.available[this._fontName];if(!u)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==u&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(u){if(this.tint!==u){this._tintColor.setValue(u);for(let c=0;c<this._activePagesMeshData.length;c++)this._activePagesMeshData[c].mesh.tint=u}}get align(){return this._align}set align(u){this._align!==u&&(this._align=u,this.dirty=!0)}get fontName(){return this._fontName}set fontName(u){if(!mo.available[u])throw new Error(`Missing BitmapFont "${u}"`);this._fontName!==u&&(this._fontName=u,this.dirty=!0)}get fontSize(){return this._fontSize??mo.available[this._fontName].size}set fontSize(u){this._fontSize!==u&&(this._fontSize=u,this.dirty=!0)}get anchor(){return this._anchor}set anchor(u){"number"==typeof u?this._anchor.set(u):this._anchor.copyFrom(u)}get text(){return this._text}set text(u){u=String(u??""),this._text!==u&&(this._text=u,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(u){this._maxWidth!==u&&(this._maxWidth=u,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(u){this._letterSpacing!==u&&(this._letterSpacing=u,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(u){u!==this._roundPixels&&(this._roundPixels=u,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(u){this._autoResolution=!1,this._resolution!==u&&(this._resolution=u,this.dirty=!0)}destroy(u){const{_textureCache:c}=this,f="none"===mo.available[this._fontName].distanceFieldType?LI:kI;f.push(...this._activePagesMeshData);for(const p of this._activePagesMeshData)this.removeChild(p.mesh);this._activePagesMeshData=[],f.filter(p=>c[p.mesh.texture.baseTexture.uid]).forEach(p=>{p.mesh.texture=Xe.EMPTY});for(const p in c)c[p].destroy(),delete c[p];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(u)}}).styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};const d$=[".xml",".fnt"],f$={extension:{type:Pe.LoadParser,priority:Mi.Normal},name:"loadBitmapFont",test:d=>d$.includes(Nr.extname(d).toLowerCase()),testParse:d=>Ge(function*(){return cp.test(d)||s0.test(d)})(),parse:(d,u,c)=>Ge(function*(){const f=cp.test(d)?cp.parse(d):s0.parse(d),{src:p}=u,{page:g}=f,_=[];for(let x=0;x<g.length;++x){const w=g[x].file;let C=Nr.join(Nr.dirname(p),w);C=jv(C,p),_.push(C)}const y=yield c.load(_),v=_.map(x=>y[x]);return mo.install(f,v,!0)})(),load:(d,u)=>Ge(function*(){return(yield Re.ADAPTER.fetch(d)).text()})(),unload(d){d.destroy()}};We.add(f$);const a0=class su extends po{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(u){return new su(Object.keys(su.defaultOptions).reduce((c,f)=>({...c,[f]:u[f]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(u=>{URL.revokeObjectURL(u.src),u.refs--,0===u.refs&&(u.fontFace&&document.fonts.delete(u.fontFace),delete su.availableFonts[u.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(u,c={}){var f=this;const{availableFonts:p}=su;if(p[u]){const g=p[u];return this._fonts.push(g),g.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return Re.ADAPTER.fetch(u).then(g=>g.blob()).then(function(){var g=Ge(function*(_){return new Promise((y,v)=>{const x=URL.createObjectURL(_),w=new FileReader;w.onload=()=>y([x,w.result]),w.onerror=v,w.readAsDataURL(_)})});return function(_){return g.apply(this,arguments)}}()).then(function(){var g=Ge(function*([_,y]){const v=Object.assign({family:Nr.basename(u,Nr.extname(u)),weight:"normal",style:"normal",display:"auto",src:_,dataSrc:y,refs:1,originalUrl:u,fontFace:null},c);p[u]=v,f._fonts.push(v),f.styleID++;const x=new FontFace(v.family,`url(${v.src})`,{weight:v.weight,style:v.style,display:v.display});v.fontFace=x,yield x.load(),document.fonts.add(x),yield document.fonts.ready,f.styleID++,f.fontsDirty=!0});return function(_){return g.apply(this,arguments)}}())}addOverride(...u){const c=u.filter(f=>!this._overrides.includes(f));c.length>0&&(this._overrides.push(...c),this.styleID++)}removeOverride(...u){const c=u.filter(f=>this._overrides.includes(f));c.length>0&&(this._overrides=this._overrides.filter(f=>!c.includes(f)),this.styleID++)}toCSS(u){return[`transform: scale(${u})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?["word-wrap: "+(this.breakWords?"break-all":"break-word"),`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((u,c)=>`${u}\n            @font-face {\n                font-family: "${c.family}";\n                src: url('${c.dataSrc}');\n                font-weight: ${c.weight};\n                font-style: ${c.style};\n                font-display: ${c.display};\n            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(u){this._stylesheet!==u&&(this._stylesheet=u,this.styleID++)}normalizeColor(u){return Array.isArray(u)&&(u=vf(u)),"number"==typeof u?function ij(d){return lt("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),Ut.shared.setValue(d).toHex()}(u):u}dropShadowToCSS(){let u=this.normalizeColor(this.dropShadowColor);const c=this.dropShadowAlpha,f=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),p=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);u.startsWith("#")&&c<1&&(u+=(255*c|0).toString(16).padStart(2,"0"));const g=`${f}px ${p}px`;return this.dropShadowBlur>0?`text-shadow: ${g} ${this.dropShadowBlur}px ${u}`:`text-shadow: ${g} ${u}`}reset(){Object.assign(this,su.defaultOptions)}onBeforeDraw(){const{fontsDirty:u}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&u?new Promise(c=>setTimeout(c,100)):Promise.resolve()}get isSafari(){const{userAgent:u}=Re.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(u)}set fillGradientStops(u){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(u){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(u){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(u){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(u){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(u){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(u){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};a0.availableFonts={},a0.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};let l0=a0;const dp=class ou extends Ms{constructor(u="",c={}){super(Xe.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this.localStyleID=-1,this.dirty=!1,this._updateID=0,this.ownsStyle=!1;const f=new Image,p=Xe.from(f,{scaleMode:Re.SCALE_MODE,resourceOptions:{autoLoad:!1}});p.orig=new wt,p.trim=new wt,this.texture=p;const g="http://www.w3.org/2000/svg",_="http://www.w3.org/1999/xhtml",y=document.createElementNS(g,"svg"),v=document.createElementNS(g,"foreignObject"),x=document.createElementNS(_,"div"),w=document.createElementNS(_,"style");v.setAttribute("width","10000"),v.setAttribute("height","10000"),v.style.overflow="hidden",y.appendChild(v),this.maxWidth=ou.defaultMaxWidth,this.maxHeight=ou.defaultMaxHeight,this._domElement=x,this._styleElement=w,this._svgRoot=y,this._foreignObject=v,this._foreignObject.appendChild(w),this._foreignObject.appendChild(x),this._image=f,this._loadImage=new Image,this._autoResolution=ou.defaultAutoResolution,this._resolution=ou.defaultResolution??Re.RESOLUTION,this.text=u,this.style=c}measureText(u){const{text:c,style:f,resolution:p}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},u);Object.assign(this._domElement,{innerHTML:c,style:f.toCSS(p)}),this._styleElement.textContent=f.toGlobalCSS(),document.body.appendChild(this._svgRoot);const g=this._domElement.getBoundingClientRect();this._svgRoot.remove();const{width:_,height:y}=g;(_>this.maxWidth||y>this.maxHeight)&&console.warn("[HTMLText] Large expanse of text, increase HTMLText.maxWidth or HTMLText.maxHeight property.");const v=Math.min(this.maxWidth,Math.ceil(_)),x=Math.min(this.maxHeight,Math.ceil(y));return this._svgRoot.setAttribute("width",v.toString()),this._svgRoot.setAttribute("height",x.toString()),c!==this._text&&(this._domElement.innerHTML=this._text),f!==this._style&&(Object.assign(this._domElement,{style:this._style?.toCSS(p)}),this._styleElement.textContent=this._style?.toGlobalCSS()),{width:v+2*f.padding,height:x+2*f.padding}}updateText(u=!0){var c=this;return Ge(function*(){const{style:f,_image:p,_loadImage:g}=c;if(c.localStyleID!==f.styleID&&(c.dirty=!0,c.localStyleID=f.styleID),!c.dirty&&u)return;const{width:_,height:y}=c.measureText();p.width=g.width=Math.ceil(Math.max(1,_)),p.height=g.height=Math.ceil(Math.max(1,y)),c._updateID++;const v=c._updateID;yield new Promise(x=>{g.onload=Ge(function*(){v<c._updateID||(yield f.onBeforeDraw(),p.src=g.src,g.onload=null,g.src="",c.updateTexture()),x()});const w=(new XMLSerializer).serializeToString(c._svgRoot);g.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(w)}`})})()}get source(){return this._image}updateTexture(){const{style:u,texture:c,_image:f,resolution:p}=this,{padding:g}=u,{baseTexture:_}=c;c.trim.width=c._frame.width=f.width/p,c.trim.height=c._frame.height=f.height/p,c.trim.x=-g,c.trim.y=-g,c.orig.width=c._frame.width-2*g,c.orig.height=c._frame.height-2*g,this._onTextureUpdate(),_.setRealSize(f.width,f.height,p),this.dirty=!1}_render(u){this._autoResolution&&this._resolution!==u.resolution&&(this._resolution=u.resolution,this.dirty=!0),this.updateText(!0),super._render(u)}_renderCanvas(u){this._autoResolution&&this._resolution!==u.resolution&&(this._resolution=u.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(u)}getLocalBounds(u){return this.updateText(!0),super.getLocalBounds(u)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(u){"boolean"==typeof u&&(u={children:u}),u=Object.assign({},ou.defaultDestroyOptions,u),super.destroy(u);const c=null;this.ownsStyle&&this._style?.cleanFonts(),this._style=c,this._svgRoot?.remove(),this._svgRoot=c,this._domElement?.remove(),this._domElement=c,this._foreignObject?.remove(),this._foreignObject=c,this._styleElement?.remove(),this._styleElement=c,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=c,this._image.src="",this._image=c}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(u){this.updateText(!0);const c=oo(this.scale.x)||1;this.scale.x=c*u/this._image.width/this.resolution,this._width=u}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(u){this.updateText(!0);const c=oo(this.scale.y)||1;this.scale.y=c*u/this._image.height/this.resolution,this._height=u}get style(){return this._style}set style(u){this._style!==u&&((u=u||{})instanceof l0?(this.ownsStyle=!1,this._style=u):u instanceof po?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=l0.from(u)):(this.ownsStyle=!0,this._style=new l0(u)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(u){u=String(""===u||null==u?" ":u),u=this.sanitiseText(u),this._text!==u&&(this._text=u,this.dirty=!0)}get resolution(){return this._resolution}set resolution(u){this._autoResolution=!1,this._resolution!==u&&(this._resolution=u,this.dirty=!0)}sanitiseText(u){return u.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};dp.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},dp.defaultMaxWidth=2024,dp.defaultMaxHeight=2024,dp.defaultAutoResolution=!0;class fp extends Ft{constructor(u=4,c=3,f=!1){super("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",f?"\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec2 uOffset;\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n\n    // Sample top left pixel\n    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));\n\n    // Sample top right pixel\n    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));\n\n    // Sample bottom right pixel\n    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));\n\n    // Sample bottom left pixel\n    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));\n\n    // Average\n    color *= 0.25;\n\n    gl_FragColor = color;\n}\n":"\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec2 uOffset;\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n\n    // Sample top left pixel\n    color += texture2D(uSampler, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y));\n\n    // Sample top right pixel\n    color += texture2D(uSampler, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y));\n\n    // Sample bottom right pixel\n    color += texture2D(uSampler, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y));\n\n    // Sample bottom left pixel\n    color += texture2D(uSampler, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y));\n\n    // Average\n    color *= 0.25;\n\n    gl_FragColor = color;\n}"),this._kernels=[],this._blur=4,this._quality=3,this.uniforms.uOffset=new Float32Array(2),this._pixelSize=new xt,this.pixelSize=1,this._clamp=f,Array.isArray(u)?this.kernels=u:(this._blur=u,this.quality=c)}apply(u,c,f,p){const g=this._pixelSize.x/c._frame.width,_=this._pixelSize.y/c._frame.height;let y;if(1===this._quality||0===this._blur)y=this._kernels[0]+.5,this.uniforms.uOffset[0]=y*g,this.uniforms.uOffset[1]=y*_,u.applyFilter(this,c,f,p);else{const v=u.getFilterTexture();let C,x=c,w=v;const E=this._quality-1;for(let T=0;T<E;T++)y=this._kernels[T]+.5,this.uniforms.uOffset[0]=y*g,this.uniforms.uOffset[1]=y*_,u.applyFilter(this,x,w,1),C=x,x=w,w=C;y=this._kernels[E]+.5,this.uniforms.uOffset[0]=y*g,this.uniforms.uOffset[1]=y*_,u.applyFilter(this,x,f,p),u.returnFilterTexture(v)}}_updatePadding(){this.padding=Math.ceil(this._kernels.reduce((u,c)=>u+c+.5,0))}_generateKernels(){const u=this._blur,c=this._quality,f=[u];if(u>0){let p=u;const g=u/c;for(let _=1;_<c;_++)p-=g,f.push(p)}this._kernels=f,this._updatePadding()}get kernels(){return this._kernels}set kernels(u){Array.isArray(u)&&u.length>0?(this._kernels=u,this._quality=u.length,this._blur=Math.max(...u)):(this._kernels=[0],this._quality=1)}get clamp(){return this._clamp}set pixelSize(u){"number"==typeof u?(this._pixelSize.x=u,this._pixelSize.y=u):Array.isArray(u)?(this._pixelSize.x=u[0],this._pixelSize.y=u[1]):u instanceof xt?(this._pixelSize.x=u.x,this._pixelSize.y=u.y):(this._pixelSize.x=1,this._pixelSize.y=1)}get pixelSize(){return this._pixelSize}get quality(){return this._quality}set quality(u){this._quality=Math.max(1,Math.round(u)),this._generateKernels()}get blur(){return this._blur}set blur(u){this._blur=u,this._generateKernels()}}var UI="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}";class x$ extends Ft{constructor(u=.5){super(UI,"\nuniform sampler2D uSampler;\nvarying vec2 vTextureCoord;\n\nuniform float threshold;\n\nvoid main() {\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    // A simple & fast algorithm for getting brightness.\n    // It's inaccuracy , but good enought for this feature.\n    float _max = max(max(color.r, color.g), color.b);\n    float _min = min(min(color.r, color.g), color.b);\n    float brightness = (_max + _min) * 0.5;\n\n    if(brightness > threshold) {\n        gl_FragColor = color;\n    } else {\n        gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\n    }\n}\n"),this.threshold=u}get threshold(){return this.uniforms.threshold}set threshold(u){this.uniforms.threshold=u}}const VI=class extends Ft{constructor(d){super(UI,"uniform sampler2D uSampler;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D bloomTexture;\nuniform float bloomScale;\nuniform float brightness;\n\nvoid main() {\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    color.rgb *= brightness;\n    vec4 bloomColor = vec4(texture2D(bloomTexture, vTextureCoord).rgb, 0.0);\n    bloomColor.rgb *= bloomScale;\n    gl_FragColor = color + bloomColor;\n}\n"),this.bloomScale=1,this.brightness=1,this._resolution=Re.FILTER_RESOLUTION,"number"==typeof d&&(d={threshold:d});const u=Object.assign(VI.defaults,d);this.bloomScale=u.bloomScale,this.brightness=u.brightness;const{kernels:c,blur:f,quality:p,pixelSize:g,resolution:_}=u;this._extractFilter=new x$(u.threshold),this._extractFilter.resolution=_,this._blurFilter=c?new fp(c):new fp(f,p),this.pixelSize=g,this.resolution=_}apply(d,u,c,f,p){const g=d.getFilterTexture();this._extractFilter.apply(d,u,g,1,p);const _=d.getFilterTexture();this._blurFilter.apply(d,g,_,1),this.uniforms.bloomScale=this.bloomScale,this.uniforms.brightness=this.brightness,this.uniforms.bloomTexture=_,d.applyFilter(this,u,c,f),d.returnFilterTexture(_),d.returnFilterTexture(g)}get resolution(){return this._resolution}set resolution(d){this._resolution=d,this._extractFilter&&(this._extractFilter.resolution=d),this._blurFilter&&(this._blurFilter.resolution=d)}get threshold(){return this._extractFilter.threshold}set threshold(d){this._extractFilter.threshold=d}get kernels(){return this._blurFilter.kernels}set kernels(d){this._blurFilter.kernels=d}get blur(){return this._blurFilter.blur}set blur(d){this._blurFilter.blur=d}get quality(){return this._blurFilter.quality}set quality(d){this._blurFilter.quality=d}get pixelSize(){return this._blurFilter.pixelSize}set pixelSize(d){this._blurFilter.pixelSize=d}};VI.defaults={threshold:.5,bloomScale:1,brightness:1,kernels:null,blur:8,quality:4,pixelSize:1,resolution:Re.FILTER_RESOLUTION};const HI=class extends Ft{constructor(d){super("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","uniform float radius;\nuniform float strength;\nuniform vec2 center;\nuniform sampler2D uSampler;\nvarying vec2 vTextureCoord;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\nuniform vec2 dimensions;\n\nvoid main()\n{\n    vec2 coord = vTextureCoord * filterArea.xy;\n    coord -= center * dimensions.xy;\n    float distance = length(coord);\n    if (distance < radius) {\n        float percent = distance / radius;\n        if (strength > 0.0) {\n            coord *= mix(1.0, smoothstep(0.0, radius / distance, percent), strength * 0.75);\n        } else {\n            coord *= mix(1.0, pow(percent, 1.0 + strength * 0.75) * radius / distance, 1.0 - percent);\n        }\n    }\n    coord += center * dimensions.xy;\n    coord /= filterArea.xy;\n    vec2 clampedCoord = clamp(coord, filterClamp.xy, filterClamp.zw);\n    vec4 color = texture2D(uSampler, clampedCoord);\n    if (coord != clampedCoord) {\n        color *= max(0.0, 1.0 - length(coord - clampedCoord));\n    }\n\n    gl_FragColor = color;\n}\n"),this.uniforms.dimensions=new Float32Array(2),Object.assign(this,HI.defaults,d)}apply(d,u,c,f){const{width:p,height:g}=u.filterFrame;this.uniforms.dimensions[0]=p,this.uniforms.dimensions[1]=g,d.applyFilter(this,u,c,f)}get radius(){return this.uniforms.radius}set radius(d){this.uniforms.radius=d}get strength(){return this.uniforms.strength}set strength(d){this.uniforms.strength=d}get center(){return this.uniforms.center}set center(d){this.uniforms.center=d}};var da;HI.defaults={center:[.5,.5],radius:100,strength:1},(da=da||{}).stringify=function(){var d={"visit_linear-gradient":function(u){return d.visit_gradient(u)},"visit_repeating-linear-gradient":function(u){return d.visit_gradient(u)},"visit_radial-gradient":function(u){return d.visit_gradient(u)},"visit_repeating-radial-gradient":function(u){return d.visit_gradient(u)},visit_gradient:function(u){var c=d.visit(u.orientation);return c&&(c+=", "),u.type+"("+c+d.visit(u.colorStops)+")"},visit_shape:function(u){var c=u.value,f=d.visit(u.at),p=d.visit(u.style);return p&&(c+=" "+p),f&&(c+=" at "+f),c},"visit_default-radial":function(u){var c="",f=d.visit(u.at);return f&&(c+=f),c},"visit_extent-keyword":function(u){var c=u.value,f=d.visit(u.at);return f&&(c+=" at "+f),c},"visit_position-keyword":function(u){return u.value},visit_position:function(u){return d.visit(u.value.x)+" "+d.visit(u.value.y)},"visit_%":function(u){return u.value+"%"},visit_em:function(u){return u.value+"em"},visit_px:function(u){return u.value+"px"},visit_literal:function(u){return d.visit_color(u.value,u)},visit_hex:function(u){return d.visit_color("#"+u.value,u)},visit_rgb:function(u){return d.visit_color("rgb("+u.value.join(", ")+")",u)},visit_rgba:function(u){return d.visit_color("rgba("+u.value.join(", ")+")",u)},visit_color:function(u,c){var f=u,p=d.visit(c.length);return p&&(f+=" "+p),f},visit_angular:function(u){return u.value+"deg"},visit_directional:function(u){return"to "+u.value},visit_array:function(u){var c="",f=u.length;return u.forEach(function(p,g){c+=d.visit(p),g<f-1&&(c+=", ")}),c},visit:function(u){if(!u)return"";if(u instanceof Array)return d.visit_array(u,"");if(u.type){var f=d["visit_"+u.type];if(f)return f(u);throw Error("Missing visitor visit_"+u.type)}throw Error("Invalid node.")}};return function(u){return d.visit(u)}}(),(da=da||{}).parse=function(){var d_linearGradient=/^(\-(webkit|o|ms|moz)\-)?(linear\-gradient)/i,d_repeatingLinearGradient=/^(\-(webkit|o|ms|moz)\-)?(repeating\-linear\-gradient)/i,d_radialGradient=/^(\-(webkit|o|ms|moz)\-)?(radial\-gradient)/i,d_repeatingRadialGradient=/^(\-(webkit|o|ms|moz)\-)?(repeating\-radial\-gradient)/i,d_sideOrCorner=/^to (left (top|bottom)|right (top|bottom)|left|right|top|bottom)/i,d_extentKeywords=/^(closest\-side|closest\-corner|farthest\-side|farthest\-corner|contain|cover)/,d_positionKeywords=/^(left|center|right|top|bottom)/i,d_pixelValue=/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))px/,d_percentageValue=/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))\%/,d_emValue=/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))em/,d_angleValue=/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,d_startCall=/^\(/,d_endCall=/^\)/,d_comma=/^,/,d_hexColor=/^\#([0-9a-fA-F]+)/,d_literalColor=/^([a-zA-Z]+)/,d_rgbColor=/^rgb/i,d_rgbaColor=/^rgba/i,d_number=/^(([0-9]*\.[0-9]+)|([0-9]+\.?))/,u="";function c(Q){var Le=new Error(u+": "+Q);throw Le.source=u,Le}function g(){return _("linear-gradient",d_linearGradient,v)||_("repeating-linear-gradient",d_repeatingLinearGradient,v)||_("radial-gradient",d_radialGradient,C)||_("repeating-radial-gradient",d_repeatingRadialGradient,C)}function _(Q,Le,tt){return y(Le,function(Je){var tr=tt();return tr&&(Ie(d_comma)||c("Missing comma before color stops")),{type:Q,orientation:tr,colorStops:M(R)}})}function y(Q,Le){var tt=Ie(Q);if(tt){Ie(d_startCall)||c("Missing (");var Je=Le(tt);return Ie(d_endCall)||c("Missing )"),Je}}function v(){return function x(){return re("directional",d_sideOrCorner,1)}()||function w(){return re("angular",d_angleValue,1)}()}function C(){var Q,tt,Le=E();return Le&&((Q=[]).push(Le),tt=u,Ie(d_comma)&&((Le=E())?Q.push(Le):u=tt)),Q}function E(){var Q=function T(){var Q=re("shape",/^(circle)/i,0);return Q&&(Q.style=te()||S()),Q}()||function D(){var Q=re("shape",/^(ellipse)/i,0);return Q&&(Q.style=ie()||S()),Q}();if(Q)Q.at=A();else{var Le=S();if(Le){Q=Le;var tt=A();tt&&(Q.at=tt)}else{var Je=I();Je&&(Q={type:"default-radial",at:Je})}}return Q}function S(){return re("extent-keyword",d_extentKeywords,1)}function A(){if(re("position",/^at/,0)){var Q=I();return Q||c("Missing positioning value"),Q}}function I(){var Q=function P(){return{x:ie(),y:ie()}}();if(Q.x||Q.y)return{type:"position",value:Q}}function M(Q){var Le=Q(),tt=[];if(Le)for(tt.push(Le);Ie(d_comma);)(Le=Q())?tt.push(Le):c("One extra comma");return tt}function R(){var Q=function L(){return function H(){return re("hex",d_hexColor,1)}()||function z(){return y(d_rgbaColor,function(){return{type:"rgba",value:M(ce)}})}()||function G(){return y(d_rgbColor,function(){return{type:"rgb",value:M(ce)}})}()||function j(){return re("literal",d_literalColor,0)}()}();return Q||c("Expected color definition"),Q.length=ie(),Q}function ce(){return Ie(d_number)[1]}function ie(){return re("%",d_percentageValue,1)||function le(){return re("position-keyword",d_positionKeywords,1)}()||te()}function te(){return re("px",d_pixelValue,1)||re("em",d_emValue,1)}function re(Q,Le,tt){var Je=Ie(Le);if(Je)return{type:Q,value:Je[tt]}}function Ie(Q){var Le,tt;return(tt=/^[\n\r\t\s]+/.exec(u))&&$e(tt[0].length),(Le=Q.exec(u))&&$e(Le[0].length),Le}function $e(Q){u=u.substr(Q)}return function(Q){return u=Q.toString(),function f(){var Q=function p(){return M(g)}();return u.length>0&&c("Invalid input not EOF"),Q}()}}();var R$=da.parse,jI={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},GI={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function F$(d){var u,p,c=[],f=1;if("string"==typeof d)if(jI[d])c=jI[d].slice(),p="rgb";else if("transparent"===d)f=0,p="rgb",c=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(d)){var g=d.slice(1);f=1,(_=g.length)<=4?(c=[parseInt(g[0]+g[0],16),parseInt(g[1]+g[1],16),parseInt(g[2]+g[2],16)],4===_&&(f=parseInt(g[3]+g[3],16)/255)):(c=[parseInt(g[0]+g[1],16),parseInt(g[2]+g[3],16),parseInt(g[4]+g[5],16)],8===_&&(f=parseInt(g[6]+g[7],16)/255)),c[0]||(c[0]=0),c[1]||(c[1]=0),c[2]||(c[2]=0),p="rgb"}else if(u=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(d)){var v=u[1],x="rgb"===v;p=g=v.replace(/a$/,"");var _="cmyk"===g?4:"gray"===g?1:3;c=u[2].trim().split(/\s*[,\/]\s*|\s+/).map(function(E,T){if(/%$/.test(E))return T===_?parseFloat(E)/100:"rgb"===g?255*parseFloat(E)/100:parseFloat(E);if("h"===g[T]){if(/deg$/.test(E))return parseFloat(E);if(void 0!==GI[E])return GI[E]}return parseFloat(E)}),v===g&&c.push(1),f=x||void 0===c[_]?1:c[_],c=c.slice(0,_)}else d.length>10&&/[0-9](?:\s|\/)/.test(d)&&(c=d.match(/([0-9]+)/g).map(function(w){return parseFloat(w)}),p=d.match(/([a-z])/gi).join("").toLowerCase());else isNaN(d)?Array.isArray(d)||d.length?(c=[d[0],d[1],d[2]],p="rgb",f=4===d.length?d[3]:1):d instanceof Object&&(null!=d.r||null!=d.red||null!=d.R?(p="rgb",c=[d.r||d.red||d.R||0,d.g||d.green||d.G||0,d.b||d.blue||d.B||0]):(p="hsl",c=[d.h||d.hue||d.H||0,d.s||d.saturation||d.S||0,d.l||d.lightness||d.L||d.b||d.brightness]),f=d.a||d.alpha||d.opacity||1,null!=d.opacity&&(f/=100)):(p="rgb",c=[d>>>16,(65280&d)>>>8,255&d]);return{space:p,values:c,alpha:f}}var u0={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]},c0={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(d){var p,g,_,y,v,u=d[0]/360,c=d[1]/100,f=d[2]/100;if(0===c)return[v=255*f,v,v];p=2*f-(g=f<.5?f*(1+c):f+c-f*c),y=[0,0,0];for(var x=0;x<3;x++)(_=u+1/3*-(x-1))<0?_++:_>1&&_--,y[x]=255*(v=6*_<1?p+6*(g-p)*_:2*_<1?g:3*_<2?p+(g-p)*(2/3-_)*6:p);return y}};function zI(d){switch(typeof d){case"string":return function N$(d){const u=function O$(d){Array.isArray(d)&&d.raw&&(d=String.raw(...arguments));var u,c=F$(d);if(!c.space)return[];const f="h"===c.space[0]?c0.min:u0.min,p="h"===c.space[0]?c0.max:u0.max;return(u=Array(3))[0]=Math.min(Math.max(c.values[0],f[0]),p[0]),u[1]=Math.min(Math.max(c.values[1],f[1]),p[1]),u[2]=Math.min(Math.max(c.values[2],f[2]),p[2]),"h"===c.space[0]&&(u=c0.rgb(u)),u.push(Math.min(Math.max(c.alpha,0),1)),u}(d);if(!u)throw new Error(`Unable to parse color "${d}" as RGBA.`);return[u[0]/255,u[1]/255,u[2]/255,u[3]]}(d);case"number":return yf(d);default:return d}}function U$(d){return zI(function V$(d){switch(d.type){case"hex":return`#${d.value}`;case"literal":return d.value;default:return`${d.type}(${d.value.join(",")})`}}(d))}function j$(d){return d.toString().length>6?parseFloat(d.toString().substring(0,6)):d}u0.hsl=function(d){var y,x,u=d[0]/255,c=d[1]/255,f=d[2]/255,p=Math.min(u,c,f),g=Math.max(u,c,f),_=g-p;return g===p?y=0:u===g?y=(c-f)/_:c===g?y=2+(f-u)/_:f===g&&(y=4+(u-c)/_),(y=Math.min(60*y,360))<0&&(y+=360),x=(p+g)/2,[y,100*(g===p?0:x<=.5?_/(g+p):_/(2-g-p)),100*x]};var W$=Object.defineProperty,X$=Object.defineProperties,q$=Object.getOwnPropertyDescriptors,$I=Object.getOwnPropertySymbols,Y$=Object.prototype.hasOwnProperty,K$=Object.prototype.propertyIsEnumerable,WI=(d,u,c)=>u in d?W$(d,u,{enumerable:!0,configurable:!0,writable:!0,value:c}):d[u]=c,h0=(d,u)=>{for(var c in u||(u={}))Y$.call(u,c)&&WI(d,c,u[c]);if($I)for(var c of $I(u))K$.call(u,c)&&WI(d,c,u[c]);return d};const d0=class extends Ft{constructor(d){d&&"css"in d&&(d=((d,u)=>X$(d,q$(u)))(h0({},function L$(d){const u=R$(function $$(d){let u=d.replace(/\s{2,}/gu," ");return u=u.replace(/;/g,""),u=u.replace(/ ,/g,","),u=u.replace(/\( /g,"("),u=u.replace(/ \)/g,")"),u.trim()}(d));if(0===u.length)throw new Error("Invalid CSS gradient.");if(1!==u.length)throw new Error("Unsupported CSS gradient (multiple gradients is not supported).");const c=u[0],f=function k$(d){const u={"linear-gradient":0,"radial-gradient":1};if(!(d in u))throw new Error(`Unsupported gradient type "${d}"`);return u[d]}(c.type),p=function B$(d){const u=function H$(d){const u=[];for(let p=0;p<d.length;p++){const g=d[p];let _=-1;"literal"===g.type&&g.length&&"type"in g.length&&"%"===g.length.type&&"value"in g.length&&(_=parseFloat(g.length.value)/100),u.push(_)}const c=p=>{for(let g=p;g<u.length;g++)if(-1!==u[g])return{indexDelta:g-p,offset:u[g]};return{indexDelta:u.length-1-p,offset:1}};let f=0;for(let p=0;p<u.length;p++){const g=u[p];if(-1!==g)f=g;else if(0===p)u[p]=0;else if(p+1===u.length)u[p]=1;else{const _=c(p),y=(_.offset-f)/(1+_.indexDelta);for(let v=0;v<=_.indexDelta;v++)u[p+v]=f+(v+1)*y;p+=_.indexDelta,f=u[p]}}return u.map(j$)}(d),c=[];for(let f=0;f<d.length;f++){const p=U$(d[f]);c.push({offset:u[f],color:p.slice(0,3),alpha:p[3]})}return c}(c.colorStops),g=function G$(d){if(typeof d>"u")return 0;if("type"in d&&"value"in d)switch(d.type){case"angular":return parseFloat(d.value);case"directional":return function z$(d){const u={left:270,top:0,bottom:180,right:90,"left top":315,"top left":315,"left bottom":225,"bottom left":225,"right top":45,"top right":45,"right bottom":135,"bottom right":135};if(!(d in u))throw new Error(`Unsupported directional value "${d}"`);return u[d]}(d.value)}return 0}(c.orientation);return{type:f,stops:p,angle:g}}(d.css||"")),{alpha:d.alpha,maxColors:d.maxColors}));const u=h0(h0({},d0.defaults),d);if(!u.stops||u.stops.length<2)throw new Error("ColorGradientFilter requires at least 2 color stops.");super("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n    vFilterCoord = vTextureCoord * inputSize.xy / outputFrame.zw;\n}\n","const float PI = 3.1415926538;\nconst float PI_2 = PI*2.;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\nuniform sampler2D uSampler;\n\nconst int TYPE_LINEAR = 0;\nconst int TYPE_RADIAL = 1;\nconst int TYPE_CONIC = 2;\nconst int MAX_STOPS = 32;\n\nuniform int uNumStops;\nuniform float uAlphas[3*MAX_STOPS];\nuniform vec3 uColors[MAX_STOPS];\nuniform float uOffsets[MAX_STOPS];\nuniform int uType;\nuniform float uAngle;\nuniform float uAlpha;\nuniform int uMaxColors;\n\nstruct ColorStop {\n    float offset;\n    vec3 color;\n    float alpha;\n};\n\nmat2 rotate2d(float angle){\n    return mat2(cos(angle), -sin(angle),\n    sin(angle), cos(angle));\n}\n\nfloat projectLinearPosition(vec2 pos, float angle){\n    vec2 center = vec2(0.5);\n    vec2 result = pos - center;\n    result = rotate2d(angle) * result;\n    result = result + center;\n    return clamp(result.x, 0., 1.);\n}\n\nfloat projectRadialPosition(vec2 pos) {\n    float r = distance(vFilterCoord, vec2(0.5));\n    return clamp(2.*r, 0., 1.);\n}\n\nfloat projectAnglePosition(vec2 pos, float angle) {\n    vec2 center = pos - vec2(0.5);\n    float polarAngle=atan(-center.y, center.x);\n    return mod(polarAngle + angle, PI_2) / PI_2;\n}\n\nfloat projectPosition(vec2 pos, int type, float angle) {\n    if (type == TYPE_LINEAR) {\n        return projectLinearPosition(pos, angle);\n    } else if (type == TYPE_RADIAL) {\n        return projectRadialPosition(pos);\n    } else if (type == TYPE_CONIC) {\n        return projectAnglePosition(pos, angle);\n    }\n\n    return pos.y;\n}\n\nvoid main(void) {\n    // current/original color\n    vec4 currentColor = texture2D(uSampler, vTextureCoord);\n\n    // skip calculations if gradient alpha is 0\n    if (0.0 == uAlpha) {\n        gl_FragColor = currentColor;\n        return;\n    }\n\n    // project position\n    float y = projectPosition(vFilterCoord, uType, radians(uAngle));\n\n    // check gradient bounds\n    float offsetMin = uOffsets[0];\n    float offsetMax = 0.0;\n\n    for (int i = 0; i < MAX_STOPS; i++) {\n        if (i == uNumStops-1){ // last index\n            offsetMax = uOffsets[i];\n        }\n    }\n\n    if (y  < offsetMin || y > offsetMax) {\n        gl_FragColor = currentColor;\n        return;\n    }\n\n    // limit colors\n    if (uMaxColors > 0) {\n        float stepSize = 1./float(uMaxColors);\n        float stepNumber = float(floor(y/stepSize));\n        y = stepSize * (stepNumber + 0.5);// offset by 0.5 to use color from middle of segment\n    }\n\n    // find color stops\n    ColorStop from;\n    ColorStop to;\n\n    for (int i = 0; i < MAX_STOPS; i++) {\n        if (y >= uOffsets[i]) {\n            from = ColorStop(uOffsets[i], uColors[i], uAlphas[i]);\n            to = ColorStop(uOffsets[i+1], uColors[i+1], uAlphas[i+1]);\n        }\n\n        if (i == uNumStops-1){ // last index\n            break;\n        }\n    }\n\n    // mix colors from stops\n    vec4 colorFrom = vec4(from.color * from.alpha, from.alpha);\n    vec4 colorTo = vec4(to.color * to.alpha, to.alpha);\n\n    float segmentHeight = to.offset - from.offset;\n    float relativePos = y - from.offset;// position from 0 to [segmentHeight]\n    float relativePercent = relativePos / segmentHeight;// position in percent between [from.offset] and [to.offset].\n\n    float gradientAlpha = uAlpha * currentColor.a;\n    vec4 gradientColor = mix(colorFrom, colorTo, relativePercent) * gradientAlpha;\n\n    // mix resulting color with current color\n    gl_FragColor = gradientColor + currentColor*(1.-gradientColor.a);\n}\n"),this._stops=[],this.autoFit=!1,Object.assign(this,u)}get stops(){return this._stops}set stops(d){const u=function Q$(d){return[...d].sort((u,c)=>u.offset-c.offset)}(d),c=new Float32Array(3*u.length);for(let _=0;_<u.length;_++){const y=zI(u[_].color),v=3*_;c[v+0]=y[0],c[v+1]=y[1],c[v+2]=y[2]}this.uniforms.uColors=c,this.uniforms.uOffsets=u.map(_=>_.offset),this.uniforms.uAlphas=u.map(_=>_.alpha),this.uniforms.uNumStops=u.length,this._stops=u}set type(d){this.uniforms.uType=d}get type(){return this.uniforms.uType}set angle(d){this.uniforms.uAngle=d-90}get angle(){return this.uniforms.uAngle+90}set alpha(d){this.uniforms.uAlpha=d}get alpha(){return this.uniforms.uAlpha}set maxColors(d){this.uniforms.uMaxColors=d}get maxColors(){return this.uniforms.uMaxColors}};let pp=d0;pp.LINEAR=0,pp.RADIAL=1,pp.CONIC=2,pp.defaults={type:d0.LINEAR,stops:[{offset:0,color:16711680,alpha:1},{offset:1,color:255,alpha:1}],alpha:1,angle:90,maxColors:0};const qI=class extends Ft{constructor(d){super("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec4 filterArea;\nuniform vec2 dimensions;\n\nconst float SQRT_2 = 1.414213;\n\nconst float light = 1.0;\n\nuniform float curvature;\nuniform float lineWidth;\nuniform float lineContrast;\nuniform bool verticalLine;\nuniform float noise;\nuniform float noiseSize;\n\nuniform float vignetting;\nuniform float vignettingAlpha;\nuniform float vignettingBlur;\n\nuniform float seed;\nuniform float time;\n\nfloat rand(vec2 co) {\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main(void)\n{\n    vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;\n    vec2 dir = vec2(vTextureCoord.xy * filterArea.xy / dimensions - vec2(0.5, 0.5));\n    \n    gl_FragColor = texture2D(uSampler, vTextureCoord);\n    vec3 rgb = gl_FragColor.rgb;\n\n    if (noise > 0.0 && noiseSize > 0.0)\n    {\n        pixelCoord.x = floor(pixelCoord.x / noiseSize);\n        pixelCoord.y = floor(pixelCoord.y / noiseSize);\n        float _noise = rand(pixelCoord * noiseSize * seed) - 0.5;\n        rgb += _noise * noise;\n    }\n\n    if (lineWidth > 0.0)\n    {\n        float _c = curvature > 0. ? curvature : 1.;\n        float k = curvature > 0. ?(length(dir * dir) * 0.25 * _c * _c + 0.935 * _c) : 1.;\n        vec2 uv = dir * k;\n\n        float v = (verticalLine ? uv.x * dimensions.x : uv.y * dimensions.y) * min(1.0, 2.0 / lineWidth ) / _c;\n        float j = 1. + cos(v * 1.2 - time) * 0.5 * lineContrast;\n        rgb *= j;\n        float segment = verticalLine ? mod((dir.x + .5) * dimensions.x, 4.) : mod((dir.y + .5) * dimensions.y, 4.);\n        rgb *= 0.99 + ceil(segment) * 0.015;\n    }\n\n    if (vignetting > 0.0)\n    {\n        float outter = SQRT_2 - vignetting * SQRT_2;\n        float darker = clamp((outter - length(dir) * SQRT_2) / ( 0.00001 + vignettingBlur * SQRT_2), 0.0, 1.0);\n        rgb *= darker + (1.0 - darker) * (1.0 - vignettingAlpha);\n    }\n\n    gl_FragColor.rgb = rgb;\n}\n"),this.time=0,this.seed=0,this.uniforms.dimensions=new Float32Array(2),Object.assign(this,qI.defaults,d)}apply(d,u,c,f){const{width:p,height:g}=u.filterFrame;this.uniforms.dimensions[0]=p,this.uniforms.dimensions[1]=g,this.uniforms.seed=this.seed,this.uniforms.time=this.time,d.applyFilter(this,u,c,f)}set curvature(d){this.uniforms.curvature=d}get curvature(){return this.uniforms.curvature}set lineWidth(d){this.uniforms.lineWidth=d}get lineWidth(){return this.uniforms.lineWidth}set lineContrast(d){this.uniforms.lineContrast=d}get lineContrast(){return this.uniforms.lineContrast}set verticalLine(d){this.uniforms.verticalLine=d}get verticalLine(){return this.uniforms.verticalLine}set noise(d){this.uniforms.noise=d}get noise(){return this.uniforms.noise}set noiseSize(d){this.uniforms.noiseSize=d}get noiseSize(){return this.uniforms.noiseSize}set vignetting(d){this.uniforms.vignetting=d}get vignetting(){return this.uniforms.vignetting}set vignettingAlpha(d){this.uniforms.vignettingAlpha=d}get vignettingAlpha(){return this.uniforms.vignettingAlpha}set vignettingBlur(d){this.uniforms.vignettingBlur=d}get vignettingBlur(){return this.uniforms.vignettingBlur}};qI.defaults={curvature:1,lineWidth:1,lineContrast:.25,verticalLine:!1,noise:0,noiseSize:1,seed:0,vignetting:.3,vignettingAlpha:1,vignettingBlur:.3,time:0};var m6=Object.defineProperty,YI=Object.getOwnPropertySymbols,_6=Object.prototype.hasOwnProperty,y6=Object.prototype.propertyIsEnumerable,KI=(d,u,c)=>u in d?m6(d,u,{enumerable:!0,configurable:!0,writable:!0,value:c}):d[u]=c,ZI=(d,u)=>{for(var c in u||(u={}))_6.call(u,c)&&KI(d,c,u[c]);if(YI)for(var c of YI(u))y6.call(u,c)&&KI(d,c,u[c]);return d};const f0=class extends Ft{constructor(d){super(),this.angle=45,this._distance=5,this._resolution=Re.FILTER_RESOLUTION;const u=d?ZI(ZI({},f0.defaults),d):f0.defaults,{kernels:c,blur:f,quality:p,pixelSize:g,resolution:_}=u;this._offset=new Zi(this._updatePadding,this),this._tintFilter=new Ft("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float alpha;\nuniform vec3 color;\n\nuniform vec2 shift;\nuniform vec4 inputSize;\n\nvoid main(void){\n    vec4 sample = texture2D(uSampler, vTextureCoord - shift * inputSize.zw);\n\n    // Premultiply alpha\n    sample.rgb = color.rgb * sample.a;\n\n    // alpha user alpha\n    sample *= alpha;\n\n    gl_FragColor = sample;\n}"),this._tintFilter.uniforms.color=new Float32Array(4),this._tintFilter.uniforms.shift=this._offset,this._tintFilter.resolution=_,this._blurFilter=c?new fp(c):new fp(f,p),this.pixelSize=g,this.resolution=_;const{shadowOnly:y,rotation:v,distance:x,offset:w,alpha:C,color:E}=u;this.shadowOnly=y,void 0!==v&&void 0!==x?(this.rotation=v,this.distance=x):this.offset=w,this.alpha=C,this.color=E}apply(d,u,c,f){const p=d.getFilterTexture();this._tintFilter.apply(d,u,p,1),this._blurFilter.apply(d,p,c,f),!0!==this.shadowOnly&&d.applyFilter(this,u,c,0),d.returnFilterTexture(p)}_updatePadding(){const d=Math.max(Math.abs(this._offset.x),Math.abs(this._offset.y));this.padding=d+2*this.blur}_updateShift(){this._tintFilter.uniforms.shift.set(this.distance*Math.cos(this.angle),this.distance*Math.sin(this.angle))}set offset(d){this._offset.copyFrom(d),this._updatePadding()}get offset(){return this._offset}get resolution(){return this._resolution}set resolution(d){this._resolution=d,this._tintFilter&&(this._tintFilter.resolution=d),this._blurFilter&&(this._blurFilter.resolution=d)}get distance(){return this._distance}set distance(d){lt("5.3.0","DropShadowFilter distance is deprecated, use offset"),this._distance=d,this._updatePadding(),this._updateShift()}get rotation(){return this.angle/Mc}set rotation(d){lt("5.3.0","DropShadowFilter rotation is deprecated, use offset"),this.angle=d*Mc,this._updateShift()}get alpha(){return this._tintFilter.uniforms.alpha}set alpha(d){this._tintFilter.uniforms.alpha=d}get color(){return vf(this._tintFilter.uniforms.color)}set color(d){yf(d,this._tintFilter.uniforms.color)}get kernels(){return this._blurFilter.kernels}set kernels(d){this._blurFilter.kernels=d}get blur(){return this._blurFilter.blur}set blur(d){this._blurFilter.blur=d,this._updatePadding()}get quality(){return this._blurFilter.quality}set quality(d){this._blurFilter.quality=d}get pixelSize(){return this._blurFilter.pixelSize}set pixelSize(d){this._blurFilter.pixelSize=d}};let QI=f0;QI.defaults={offset:{x:4,y:4},color:0,alpha:.5,shadowOnly:!1,kernels:null,blur:2,quality:3,pixelSize:1,resolution:Re.FILTER_RESOLUTION};const p0=class extends Ft{constructor(d){super("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","// precision highp float;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\nuniform vec2 dimensions;\nuniform float aspect;\n\nuniform sampler2D displacementMap;\nuniform float offset;\nuniform float sinDir;\nuniform float cosDir;\nuniform int fillMode;\n\nuniform float seed;\nuniform vec2 red;\nuniform vec2 green;\nuniform vec2 blue;\n\nconst int TRANSPARENT = 0;\nconst int ORIGINAL = 1;\nconst int LOOP = 2;\nconst int CLAMP = 3;\nconst int MIRROR = 4;\n\nvoid main(void)\n{\n    vec2 coord = (vTextureCoord * filterArea.xy) / dimensions;\n\n    if (coord.x > 1.0 || coord.y > 1.0) {\n        return;\n    }\n\n    float cx = coord.x - 0.5;\n    float cy = (coord.y - 0.5) * aspect;\n    float ny = (-sinDir * cx + cosDir * cy) / aspect + 0.5;\n\n    // displacementMap: repeat\n    // ny = ny > 1.0 ? ny - 1.0 : (ny < 0.0 ? 1.0 + ny : ny);\n\n    // displacementMap: mirror\n    ny = ny > 1.0 ? 2.0 - ny : (ny < 0.0 ? -ny : ny);\n\n    vec4 dc = texture2D(displacementMap, vec2(0.5, ny));\n\n    float displacement = (dc.r - dc.g) * (offset / filterArea.x);\n\n    coord = vTextureCoord + vec2(cosDir * displacement, sinDir * displacement * aspect);\n\n    if (fillMode == CLAMP) {\n        coord = clamp(coord, filterClamp.xy, filterClamp.zw);\n    } else {\n        if( coord.x > filterClamp.z ) {\n            if (fillMode == TRANSPARENT) {\n                discard;\n            } else if (fillMode == LOOP) {\n                coord.x -= filterClamp.z;\n            } else if (fillMode == MIRROR) {\n                coord.x = filterClamp.z * 2.0 - coord.x;\n            }\n        } else if( coord.x < filterClamp.x ) {\n            if (fillMode == TRANSPARENT) {\n                discard;\n            } else if (fillMode == LOOP) {\n                coord.x += filterClamp.z;\n            } else if (fillMode == MIRROR) {\n                coord.x *= -filterClamp.z;\n            }\n        }\n\n        if( coord.y > filterClamp.w ) {\n            if (fillMode == TRANSPARENT) {\n                discard;\n            } else if (fillMode == LOOP) {\n                coord.y -= filterClamp.w;\n            } else if (fillMode == MIRROR) {\n                coord.y = filterClamp.w * 2.0 - coord.y;\n            }\n        } else if( coord.y < filterClamp.y ) {\n            if (fillMode == TRANSPARENT) {\n                discard;\n            } else if (fillMode == LOOP) {\n                coord.y += filterClamp.w;\n            } else if (fillMode == MIRROR) {\n                coord.y *= -filterClamp.w;\n            }\n        }\n    }\n\n    gl_FragColor.r = texture2D(uSampler, coord + red * (1.0 - seed * 0.4) / filterArea.xy).r;\n    gl_FragColor.g = texture2D(uSampler, coord + green * (1.0 - seed * 0.3) / filterArea.xy).g;\n    gl_FragColor.b = texture2D(uSampler, coord + blue * (1.0 - seed * 0.2) / filterArea.xy).b;\n    gl_FragColor.a = texture2D(uSampler, coord).a;\n}\n"),this.offset=100,this.fillMode=p0.TRANSPARENT,this.average=!1,this.seed=0,this.minSize=8,this.sampleSize=512,this._slices=0,this._offsets=new Float32Array(1),this._sizes=new Float32Array(1),this._direction=-1,this.uniforms.dimensions=new Float32Array(2),this._canvas=document.createElement("canvas"),this._canvas.width=4,this._canvas.height=this.sampleSize,this.texture=Xe.from(this._canvas,{scaleMode:$i.NEAREST}),Object.assign(this,p0.defaults,d)}apply(d,u,c,f){const{width:p,height:g}=u.filterFrame;this.uniforms.dimensions[0]=p,this.uniforms.dimensions[1]=g,this.uniforms.aspect=g/p,this.uniforms.seed=this.seed,this.uniforms.offset=this.offset,this.uniforms.fillMode=this.fillMode,d.applyFilter(this,u,c,f)}_randomizeSizes(){const d=this._sizes,u=this._slices-1,f=Math.min(this.minSize/this.sampleSize,.9/this._slices);if(this.average){const p=this._slices;let g=1;for(let _=0;_<u;_++){const v=Math.max(g/(p-_)*(1-.6*Math.random()),f);d[_]=v,g-=v}d[u]=g}else{let p=1;const g=Math.sqrt(1/this._slices);for(let _=0;_<u;_++){const y=Math.max(g*p*Math.random(),f);d[_]=y,p-=y}d[u]=p}this.shuffle()}shuffle(){const d=this._sizes;for(let c=this._slices-1;c>0;c--){const f=Math.random()*c>>0,p=d[c];d[c]=d[f],d[f]=p}}_randomizeOffsets(){for(let d=0;d<this._slices;d++)this._offsets[d]=Math.random()*(Math.random()<.5?-1:1)}refresh(){this._randomizeSizes(),this._randomizeOffsets(),this.redraw()}redraw(){const d=this.sampleSize,u=this.texture,c=this._canvas.getContext("2d");c.clearRect(0,0,8,d);let f,p=0;for(let g=0;g<this._slices;g++){f=Math.floor(256*this._offsets[g]);const _=this._sizes[g]*d;c.fillStyle=`rgba(${f>0?f:0}, ${f<0?-f:0}, 0, 1)`,c.fillRect(0,p>>0,d,_+1>>0),p+=_}u.baseTexture.update(),this.uniforms.displacementMap=u}set sizes(d){const u=Math.min(this._slices,d.length);for(let c=0;c<u;c++)this._sizes[c]=d[c]}get sizes(){return this._sizes}set offsets(d){const u=Math.min(this._slices,d.length);for(let c=0;c<u;c++)this._offsets[c]=d[c]}get offsets(){return this._offsets}get slices(){return this._slices}set slices(d){this._slices!==d&&(this._slices=d,this.uniforms.slices=d,this._sizes=this.uniforms.slicesWidth=new Float32Array(d),this._offsets=this.uniforms.slicesOffset=new Float32Array(d),this.refresh())}get direction(){return this._direction}set direction(d){if(this._direction===d)return;this._direction=d;const u=d*Mc;this.uniforms.sinDir=Math.sin(u),this.uniforms.cosDir=Math.cos(u)}get red(){return this.uniforms.red}set red(d){this.uniforms.red=d}get green(){return this.uniforms.green}set green(d){this.uniforms.green=d}get blue(){return this.uniforms.blue}set blue(d){this.uniforms.blue=d}destroy(){var d;null==(d=this.texture)||d.destroy(!0),this.texture=this._canvas=this.red=this.green=this.blue=this._sizes=this._offsets=null}};let jl=p0;jl.defaults={slices:5,offset:100,direction:0,fillMode:0,average:!1,seed:0,red:[0,0],green:[0,0],blue:[0,0],minSize:8,sampleSize:512},jl.TRANSPARENT=0,jl.ORIGINAL=1,jl.LOOP=2,jl.CLAMP=3,jl.MIRROR=4;const JI=class extends Ft{constructor(d){const u=Object.assign({},JI.defaults,d),{outerStrength:c,innerStrength:f,color:p,knockout:g,quality:_,alpha:y}=u,v=Math.round(u.distance);super("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nuniform float outerStrength;\nuniform float innerStrength;\n\nuniform vec4 glowColor;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\nuniform bool knockout;\nuniform float alpha;\n\nconst float PI = 3.14159265358979323846264;\n\nconst float DIST = __DIST__;\nconst float ANGLE_STEP_SIZE = min(__ANGLE_STEP_SIZE__, PI * 2.0);\nconst float ANGLE_STEP_NUM = ceil(PI * 2.0 / ANGLE_STEP_SIZE);\n\nconst float MAX_TOTAL_ALPHA = ANGLE_STEP_NUM * DIST * (DIST + 1.0) / 2.0;\n\nvoid main(void) {\n    vec2 px = vec2(1.0 / filterArea.x, 1.0 / filterArea.y);\n\n    float totalAlpha = 0.0;\n\n    vec2 direction;\n    vec2 displaced;\n    vec4 curColor;\n\n    for (float angle = 0.0; angle < PI * 2.0; angle += ANGLE_STEP_SIZE) {\n       direction = vec2(cos(angle), sin(angle)) * px;\n\n       for (float curDistance = 0.0; curDistance < DIST; curDistance++) {\n           displaced = clamp(vTextureCoord + direction * \n                   (curDistance + 1.0), filterClamp.xy, filterClamp.zw);\n\n           curColor = texture2D(uSampler, displaced);\n\n           totalAlpha += (DIST - curDistance) * curColor.a;\n       }\n    }\n    \n    curColor = texture2D(uSampler, vTextureCoord);\n\n    float alphaRatio = (totalAlpha / MAX_TOTAL_ALPHA);\n\n    float innerGlowAlpha = (1.0 - alphaRatio) * innerStrength * curColor.a;\n    float innerGlowStrength = min(1.0, innerGlowAlpha);\n    \n    vec4 innerColor = mix(curColor, glowColor, innerGlowStrength);\n\n    float outerGlowAlpha = alphaRatio * outerStrength * (1. - curColor.a);\n    float outerGlowStrength = min(1.0 - innerColor.a, outerGlowAlpha);\n\n    if (knockout) {\n      float resultAlpha = (outerGlowAlpha + innerGlowAlpha) * alpha;\n      gl_FragColor = vec4(glowColor.rgb * resultAlpha, resultAlpha);\n    }\n    else {\n      vec4 outerGlowColor = outerGlowStrength * glowColor.rgba * alpha;\n      gl_FragColor = innerColor + outerGlowColor;\n    }\n}\n".replace(/__ANGLE_STEP_SIZE__/gi,`${(1/_/v).toFixed(7)}`).replace(/__DIST__/gi,`${v.toFixed(0)}.0`)),this.uniforms.glowColor=new Float32Array([0,0,0,1]),this.uniforms.alpha=1,Object.assign(this,{color:p,outerStrength:c,innerStrength:f,padding:v,knockout:g,alpha:y})}get color(){return vf(this.uniforms.glowColor)}set color(d){yf(d,this.uniforms.glowColor)}get outerStrength(){return this.uniforms.outerStrength}set outerStrength(d){this.uniforms.outerStrength=d}get innerStrength(){return this.uniforms.innerStrength}set innerStrength(d){this.uniforms.innerStrength=d}get knockout(){return this.uniforms.knockout}set knockout(d){this.uniforms.knockout=d}get alpha(){return this.uniforms.alpha}set alpha(d){this.uniforms.alpha=d}};JI.defaults={distance:10,outerStrength:4,innerStrength:0,color:16777215,quality:.1,knockout:!1,alpha:1};const eM=class extends Ft{constructor(d){super("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\nuniform vec2 dimensions;\n\nuniform vec2 light;\nuniform bool parallel;\nuniform float aspect;\n\nuniform float gain;\nuniform float lacunarity;\nuniform float time;\nuniform float alpha;\n\n${perlin}\n\nvoid main(void) {\n    vec2 coord = vTextureCoord * filterArea.xy / dimensions.xy;\n\n    float d;\n\n    if (parallel) {\n        float _cos = light.x;\n        float _sin = light.y;\n        d = (_cos * coord.x) + (_sin * coord.y * aspect);\n    } else {\n        float dx = coord.x - light.x / dimensions.x;\n        float dy = (coord.y - light.y / dimensions.y) * aspect;\n        float dis = sqrt(dx * dx + dy * dy) + 0.00001;\n        d = dy / dis;\n    }\n\n    vec3 dir = vec3(d, d, 0.0);\n\n    float noise = turb(dir + vec3(time, 0.0, 62.1 + time) * 0.05, vec3(480.0, 320.0, 480.0), lacunarity, gain);\n    noise = mix(noise, 0.0, 0.3);\n    //fade vertically.\n    vec4 mist = vec4(noise, noise, noise, 1.0) * (1.0 - coord.y);\n    mist.a = 1.0;\n    // apply user alpha\n    mist *= alpha;\n\n    gl_FragColor = texture2D(uSampler, vTextureCoord) + mist;\n\n}\n".replace("${perlin}","vec3 mod289(vec3 x)\n{\n    return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\nvec4 mod289(vec4 x)\n{\n    return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\nvec4 permute(vec4 x)\n{\n    return mod289(((x * 34.0) + 1.0) * x);\n}\nvec4 taylorInvSqrt(vec4 r)\n{\n    return 1.79284291400159 - 0.85373472095314 * r;\n}\nvec3 fade(vec3 t)\n{\n    return t * t * t * (t * (t * 6.0 - 15.0) + 10.0);\n}\n// Classic Perlin noise, periodic variant\nfloat pnoise(vec3 P, vec3 rep)\n{\n    vec3 Pi0 = mod(floor(P), rep); // Integer part, modulo period\n    vec3 Pi1 = mod(Pi0 + vec3(1.0), rep); // Integer part + 1, mod period\n    Pi0 = mod289(Pi0);\n    Pi1 = mod289(Pi1);\n    vec3 Pf0 = fract(P); // Fractional part for interpolation\n    vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0\n    vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n    vec4 iy = vec4(Pi0.yy, Pi1.yy);\n    vec4 iz0 = Pi0.zzzz;\n    vec4 iz1 = Pi1.zzzz;\n    vec4 ixy = permute(permute(ix) + iy);\n    vec4 ixy0 = permute(ixy + iz0);\n    vec4 ixy1 = permute(ixy + iz1);\n    vec4 gx0 = ixy0 * (1.0 / 7.0);\n    vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;\n    gx0 = fract(gx0);\n    vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n    vec4 sz0 = step(gz0, vec4(0.0));\n    gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n    gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n    vec4 gx1 = ixy1 * (1.0 / 7.0);\n    vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;\n    gx1 = fract(gx1);\n    vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n    vec4 sz1 = step(gz1, vec4(0.0));\n    gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n    gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n    vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n    vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n    vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n    vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n    vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n    vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n    vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n    vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n    vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n    g000 *= norm0.x;\n    g010 *= norm0.y;\n    g100 *= norm0.z;\n    g110 *= norm0.w;\n    vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n    g001 *= norm1.x;\n    g011 *= norm1.y;\n    g101 *= norm1.z;\n    g111 *= norm1.w;\n    float n000 = dot(g000, Pf0);\n    float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n    float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n    float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n    float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n    float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n    float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n    float n111 = dot(g111, Pf1);\n    vec3 fade_xyz = fade(Pf0);\n    vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\n    vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n    float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n    return 2.2 * n_xyz;\n}\nfloat turb(vec3 P, vec3 rep, float lacunarity, float gain)\n{\n    float sum = 0.0;\n    float sc = 1.0;\n    float totalgain = 1.0;\n    for (float i = 0.0; i < 6.0; i++)\n    {\n        sum += totalgain * pnoise(P * sc, rep);\n        sc *= lacunarity;\n        totalgain *= gain;\n    }\n    return abs(sum);\n}\n")),this.parallel=!0,this.time=0,this._angle=0,this.uniforms.dimensions=new Float32Array(2);const u=Object.assign(eM.defaults,d);this._angleLight=new xt,this.angle=u.angle,this.gain=u.gain,this.lacunarity=u.lacunarity,this.alpha=u.alpha,this.parallel=u.parallel,this.center=u.center,this.time=u.time}apply(d,u,c,f){const{width:p,height:g}=u.filterFrame;this.uniforms.light=this.parallel?this._angleLight:this.center,this.uniforms.parallel=this.parallel,this.uniforms.dimensions[0]=p,this.uniforms.dimensions[1]=g,this.uniforms.aspect=g/p,this.uniforms.time=this.time,this.uniforms.alpha=this.alpha,d.applyFilter(this,u,c,f)}get angle(){return this._angle}set angle(d){this._angle=d;const u=d*Mc;this._angleLight.x=Math.cos(u),this._angleLight.y=Math.sin(u)}get gain(){return this.uniforms.gain}set gain(d){this.uniforms.gain=d}get lacunarity(){return this.uniforms.lacunarity}set lacunarity(d){this.uniforms.lacunarity=d}get alpha(){return this.uniforms.alpha}set alpha(d){this.uniforms.alpha=d}};eM.defaults={angle:30,gain:.5,lacunarity:2.5,time:0,parallel:!0,center:[0,0],alpha:1};const tM=class extends Ft{constructor(d){super("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision mediump float;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float uHue;\nuniform float uAlpha;\nuniform bool uColorize;\nuniform float uSaturation;\nuniform float uLightness;\n\n// https://en.wikipedia.org/wiki/Luma_(video)\nconst vec3 weight = vec3(0.299, 0.587, 0.114);\n\nfloat getWeightedAverage(vec3 rgb) {\n    return rgb.r * weight.r + rgb.g * weight.g + rgb.b * weight.b;\n}\n\n// https://gist.github.com/mairod/a75e7b44f68110e1576d77419d608786?permalink_comment_id=3195243#gistcomment-3195243\nconst vec3 k = vec3(0.57735, 0.57735, 0.57735);\n\nvec3 hueShift(vec3 color, float angle) {\n    float cosAngle = cos(angle);\n    return vec3(\n    color * cosAngle +\n    cross(k, color) * sin(angle) +\n    k * dot(k, color) * (1.0 - cosAngle)\n    );\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    vec4 result = color;\n\n    // colorize\n    if (uColorize) {\n        result.rgb = vec3(getWeightedAverage(result.rgb), 0., 0.);\n    }\n\n    // hue\n    result.rgb = hueShift(result.rgb, uHue);\n\n    // saturation\n    // https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/huesaturation.js\n    float average = (result.r + result.g + result.b) / 3.0;\n\n    if (uSaturation > 0.) {\n        result.rgb += (average - result.rgb) * (1. - 1. / (1.001 - uSaturation));\n    } else {\n        result.rgb -= (average - result.rgb) * uSaturation;\n    }\n\n    // lightness\n    result.rgb = mix(result.rgb, vec3(ceil(uLightness)) * color.a, abs(uLightness));\n\n    // alpha\n    gl_FragColor = mix(color, result, uAlpha);\n}\n"),this._hue=0;const u=Object.assign({},tM.defaults,d);Object.assign(this,u)}get hue(){return this._hue}set hue(d){this._hue=d,this.uniforms.uHue=this._hue*(Math.PI/180)}get alpha(){return this.uniforms.uAlpha}set alpha(d){this.uniforms.uAlpha=d}get colorize(){return this.uniforms.uColorize}set colorize(d){this.uniforms.uColorize=d}get lightness(){return this.uniforms.uLightness}set lightness(d){this.uniforms.uLightness=d}get saturation(){return this.uniforms.uSaturation}set saturation(d){this.uniforms.uSaturation=d}};tM.defaults={hue:0,saturation:0,lightness:0,colorize:!1,alpha:1};const rM=class extends Ft{constructor(d,u=0){super("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\nuniform vec2 dimensions;\n\nuniform float sepia;\nuniform float noise;\nuniform float noiseSize;\nuniform float scratch;\nuniform float scratchDensity;\nuniform float scratchWidth;\nuniform float vignetting;\nuniform float vignettingAlpha;\nuniform float vignettingBlur;\nuniform float seed;\n\nconst float SQRT_2 = 1.414213;\nconst vec3 SEPIA_RGB = vec3(112.0 / 255.0, 66.0 / 255.0, 20.0 / 255.0);\n\nfloat rand(vec2 co) {\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvec3 Overlay(vec3 src, vec3 dst)\n{\n    // if (dst <= 0.5) then: 2 * src * dst\n    // if (dst > 0.5) then: 1 - 2 * (1 - dst) * (1 - src)\n    return vec3((dst.x <= 0.5) ? (2.0 * src.x * dst.x) : (1.0 - 2.0 * (1.0 - dst.x) * (1.0 - src.x)),\n                (dst.y <= 0.5) ? (2.0 * src.y * dst.y) : (1.0 - 2.0 * (1.0 - dst.y) * (1.0 - src.y)),\n                (dst.z <= 0.5) ? (2.0 * src.z * dst.z) : (1.0 - 2.0 * (1.0 - dst.z) * (1.0 - src.z)));\n}\n\n\nvoid main()\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord);\n    vec3 color = gl_FragColor.rgb;\n\n    if (sepia > 0.0)\n    {\n        float gray = (color.x + color.y + color.z) / 3.0;\n        vec3 grayscale = vec3(gray);\n\n        color = Overlay(SEPIA_RGB, grayscale);\n\n        color = grayscale + sepia * (color - grayscale);\n    }\n\n    vec2 coord = vTextureCoord * filterArea.xy / dimensions.xy;\n\n    if (vignetting > 0.0)\n    {\n        float outter = SQRT_2 - vignetting * SQRT_2;\n        vec2 dir = vec2(vec2(0.5, 0.5) - coord);\n        dir.y *= dimensions.y / dimensions.x;\n        float darker = clamp((outter - length(dir) * SQRT_2) / ( 0.00001 + vignettingBlur * SQRT_2), 0.0, 1.0);\n        color.rgb *= darker + (1.0 - darker) * (1.0 - vignettingAlpha);\n    }\n\n    if (scratchDensity > seed && scratch != 0.0)\n    {\n        float phase = seed * 256.0;\n        float s = mod(floor(phase), 2.0);\n        float dist = 1.0 / scratchDensity;\n        float d = distance(coord, vec2(seed * dist, abs(s - seed * dist)));\n        if (d < seed * 0.6 + 0.4)\n        {\n            highp float period = scratchDensity * 10.0;\n\n            float xx = coord.x * period + phase;\n            float aa = abs(mod(xx, 0.5) * 4.0);\n            float bb = mod(floor(xx / 0.5), 2.0);\n            float yy = (1.0 - bb) * aa + bb * (2.0 - aa);\n\n            float kk = 2.0 * period;\n            float dw = scratchWidth / dimensions.x * (0.75 + seed);\n            float dh = dw * kk;\n\n            float tine = (yy - (2.0 - dh));\n\n            if (tine > 0.0) {\n                float _sign = sign(scratch);\n\n                tine = s * tine / period + scratch + 0.1;\n                tine = clamp(tine + 1.0, 0.5 + _sign * 0.5, 1.5 + _sign * 0.5);\n\n                color.rgb *= tine;\n            }\n        }\n    }\n\n    if (noise > 0.0 && noiseSize > 0.0)\n    {\n        vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;\n        pixelCoord.x = floor(pixelCoord.x / noiseSize);\n        pixelCoord.y = floor(pixelCoord.y / noiseSize);\n        // vec2 d = pixelCoord * noiseSize * vec2(1024.0 + seed * 512.0, 1024.0 - seed * 512.0);\n        // float _noise = snoise(d) * 0.5;\n        float _noise = rand(pixelCoord * noiseSize * seed) - 0.5;\n        color += _noise * noise;\n    }\n\n    gl_FragColor.rgb = color;\n}\n"),this.seed=0,this.uniforms.dimensions=new Float32Array(2),"number"==typeof d?(this.seed=d,d=void 0):this.seed=u,Object.assign(this,rM.defaults,d)}apply(d,u,c,f){var p,g;this.uniforms.dimensions[0]=null==(p=u.filterFrame)?void 0:p.width,this.uniforms.dimensions[1]=null==(g=u.filterFrame)?void 0:g.height,this.uniforms.seed=this.seed,d.applyFilter(this,u,c,f)}set sepia(d){this.uniforms.sepia=d}get sepia(){return this.uniforms.sepia}set noise(d){this.uniforms.noise=d}get noise(){return this.uniforms.noise}set noiseSize(d){this.uniforms.noiseSize=d}get noiseSize(){return this.uniforms.noiseSize}set scratch(d){this.uniforms.scratch=d}get scratch(){return this.uniforms.scratch}set scratchDensity(d){this.uniforms.scratchDensity=d}get scratchDensity(){return this.uniforms.scratchDensity}set scratchWidth(d){this.uniforms.scratchWidth=d}get scratchWidth(){return this.uniforms.scratchWidth}set vignetting(d){this.uniforms.vignetting=d}get vignetting(){return this.uniforms.vignetting}set vignettingAlpha(d){this.uniforms.vignettingAlpha=d}get vignettingAlpha(){return this.uniforms.vignettingAlpha}set vignettingBlur(d){this.uniforms.vignettingBlur=d}get vignettingBlur(){return this.uniforms.vignettingBlur}};rM.defaults={sepia:.3,noise:.3,noiseSize:1,scratch:.5,scratchDensity:.3,scratchWidth:1,vignetting:.3,vignettingAlpha:1,vignettingBlur:.3};const gp=class extends Ft{constructor(d=1,u=0,c=.1,f=1,p=!1){super("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterClamp;\n\nuniform float uAlpha;\nuniform vec2 uThickness;\nuniform vec4 uColor;\nuniform bool uKnockout;\n\nconst float DOUBLE_PI = 2. * 3.14159265358979323846264;\nconst float ANGLE_STEP = ${angleStep};\n\nfloat outlineMaxAlphaAtPos(vec2 pos) {\n    if (uThickness.x == 0. || uThickness.y == 0.) {\n        return 0.;\n    }\n\n    vec4 displacedColor;\n    vec2 displacedPos;\n    float maxAlpha = 0.;\n\n    for (float angle = 0.; angle <= DOUBLE_PI; angle += ANGLE_STEP) {\n        displacedPos.x = vTextureCoord.x + uThickness.x * cos(angle);\n        displacedPos.y = vTextureCoord.y + uThickness.y * sin(angle);\n        displacedColor = texture2D(uSampler, clamp(displacedPos, filterClamp.xy, filterClamp.zw));\n        maxAlpha = max(maxAlpha, displacedColor.a);\n    }\n\n    return maxAlpha;\n}\n\nvoid main(void) {\n    vec4 sourceColor = texture2D(uSampler, vTextureCoord);\n    vec4 contentColor = sourceColor * float(!uKnockout);\n    float outlineAlpha = uAlpha * outlineMaxAlphaAtPos(vTextureCoord.xy) * (1.-sourceColor.a);\n    vec4 outlineColor = vec4(vec3(uColor) * outlineAlpha, outlineAlpha);\n    gl_FragColor = contentColor + outlineColor;\n}\n".replace(/\$\{angleStep\}/,gp.getAngleStep(c))),this._thickness=1,this._alpha=1,this._knockout=!1,this.uniforms.uThickness=new Float32Array([0,0]),this.uniforms.uColor=new Float32Array([0,0,0,1]),this.uniforms.uAlpha=f,this.uniforms.uKnockout=p,Object.assign(this,{thickness:d,color:u,quality:c,alpha:f,knockout:p})}static getAngleStep(d){const u=Math.max(d*gp.MAX_SAMPLES,gp.MIN_SAMPLES);return(2*Math.PI/u).toFixed(7)}apply(d,u,c,f){this.uniforms.uThickness[0]=this._thickness/u._frame.width,this.uniforms.uThickness[1]=this._thickness/u._frame.height,this.uniforms.uAlpha=this._alpha,this.uniforms.uKnockout=this._knockout,d.applyFilter(this,u,c,f)}get alpha(){return this._alpha}set alpha(d){this._alpha=d}get color(){return vf(this.uniforms.uColor)}set color(d){yf(d,this.uniforms.uColor)}get knockout(){return this._knockout}set knockout(d){this._knockout=d}get thickness(){return this._thickness}set thickness(d){this._thickness=d,this.padding=d}};let nM=gp;nM.MIN_SAMPLES=1,nM.MAX_SAMPLES=100;const iM=class extends Ft{constructor(d){super("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\nuniform vec2 dimensions;\n\nuniform bool mirror;\nuniform float boundary;\nuniform vec2 amplitude;\nuniform vec2 waveLength;\nuniform vec2 alpha;\nuniform float time;\n\nfloat rand(vec2 co) {\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main(void)\n{\n    vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;\n    vec2 coord = pixelCoord / dimensions;\n\n    if (coord.y < boundary) {\n        gl_FragColor = texture2D(uSampler, vTextureCoord);\n        return;\n    }\n\n    float k = (coord.y - boundary) / (1. - boundary + 0.0001);\n    float areaY = boundary * dimensions.y / filterArea.y;\n    float v = areaY + areaY - vTextureCoord.y;\n    float y = mirror ? v : vTextureCoord.y;\n\n    float _amplitude = ((amplitude.y - amplitude.x) * k + amplitude.x ) / filterArea.x;\n    float _waveLength = ((waveLength.y - waveLength.x) * k + waveLength.x) / filterArea.y;\n    float _alpha = (alpha.y - alpha.x) * k + alpha.x;\n\n    float x = vTextureCoord.x + cos(v * 6.28 / _waveLength - time) * _amplitude;\n    x = clamp(x, filterClamp.x, filterClamp.z);\n\n    vec4 color = texture2D(uSampler, vec2(x, y));\n\n    gl_FragColor = color * _alpha;\n}\n"),this.time=0,this.uniforms.amplitude=new Float32Array(2),this.uniforms.waveLength=new Float32Array(2),this.uniforms.alpha=new Float32Array(2),this.uniforms.dimensions=new Float32Array(2),Object.assign(this,iM.defaults,d)}apply(d,u,c,f){var p,g;this.uniforms.dimensions[0]=null==(p=u.filterFrame)?void 0:p.width,this.uniforms.dimensions[1]=null==(g=u.filterFrame)?void 0:g.height,this.uniforms.time=this.time,d.applyFilter(this,u,c,f)}set mirror(d){this.uniforms.mirror=d}get mirror(){return this.uniforms.mirror}set boundary(d){this.uniforms.boundary=d}get boundary(){return this.uniforms.boundary}set amplitude(d){this.uniforms.amplitude[0]=d[0],this.uniforms.amplitude[1]=d[1]}get amplitude(){return this.uniforms.amplitude}set waveLength(d){this.uniforms.waveLength[0]=d[0],this.uniforms.waveLength[1]=d[1]}get waveLength(){return this.uniforms.waveLength}set alpha(d){this.uniforms.alpha[0]=d[0],this.uniforms.alpha[1]=d[1]}get alpha(){return this.uniforms.alpha}};iM.defaults={mirror:!0,boundary:.5,amplitude:[0,20],waveLength:[30,100],alpha:[1,1],time:0};const sM=class extends Ft{constructor(d=[0,0],u,c=0){super("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\n\nuniform vec2 center;\n\nuniform float amplitude;\nuniform float wavelength;\n// uniform float power;\nuniform float brightness;\nuniform float speed;\nuniform float radius;\n\nuniform float time;\n\nconst float PI = 3.14159;\n\nvoid main()\n{\n    float halfWavelength = wavelength * 0.5 / filterArea.x;\n    float maxRadius = radius / filterArea.x;\n    float currentRadius = time * speed / filterArea.x;\n\n    float fade = 1.0;\n\n    if (maxRadius > 0.0) {\n        if (currentRadius > maxRadius) {\n            gl_FragColor = texture2D(uSampler, vTextureCoord);\n            return;\n        }\n        fade = 1.0 - pow(currentRadius / maxRadius, 2.0);\n    }\n\n    vec2 dir = vec2(vTextureCoord - center / filterArea.xy);\n    dir.y *= filterArea.y / filterArea.x;\n    float dist = length(dir);\n\n    if (dist <= 0.0 || dist < currentRadius - halfWavelength || dist > currentRadius + halfWavelength) {\n        gl_FragColor = texture2D(uSampler, vTextureCoord);\n        return;\n    }\n\n    vec2 diffUV = normalize(dir);\n\n    float diff = (dist - currentRadius) / halfWavelength;\n\n    float p = 1.0 - pow(abs(diff), 2.0);\n\n    // float powDiff = diff * pow(p, 2.0) * ( amplitude * fade );\n    float powDiff = 1.25 * sin(diff * PI) * p * ( amplitude * fade );\n\n    vec2 offset = diffUV * powDiff / filterArea.xy;\n\n    // Do clamp :\n    vec2 coord = vTextureCoord + offset;\n    vec2 clampedCoord = clamp(coord, filterClamp.xy, filterClamp.zw);\n    vec4 color = texture2D(uSampler, clampedCoord);\n    if (coord != clampedCoord) {\n        color *= max(0.0, 1.0 - length(coord - clampedCoord));\n    }\n\n    // No clamp :\n    // gl_FragColor = texture2D(uSampler, vTextureCoord + offset);\n\n    color.rgb *= 1.0 + (brightness - 1.0) * p * fade;\n\n    gl_FragColor = color;\n}\n"),this.center=d,Object.assign(this,sM.defaults,u),this.time=c}apply(d,u,c,f){this.uniforms.time=this.time,d.applyFilter(this,u,c,f)}get center(){return this.uniforms.center}set center(d){this.uniforms.center=d}get amplitude(){return this.uniforms.amplitude}set amplitude(d){this.uniforms.amplitude=d}get wavelength(){return this.uniforms.wavelength}set wavelength(d){this.uniforms.wavelength=d}get brightness(){return this.uniforms.brightness}set brightness(d){this.uniforms.brightness=d}get speed(){return this.uniforms.speed}set speed(d){this.uniforms.speed=d}get radius(){return this.uniforms.radius}set radius(d){this.uniforms.radius=d}};sM.defaults={amplitude:30,wavelength:160,brightness:1,speed:500,radius:-1};class oM extends Ft{constructor(u){var c,f;super("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float blur;\nuniform float gradientBlur;\nuniform vec2 start;\nuniform vec2 end;\nuniform vec2 delta;\nuniform vec2 texSize;\n\nfloat random(vec3 scale, float seed)\n{\n    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n    vec2 normal = normalize(vec2(start.y - end.y, end.x - start.x));\n    float radius = smoothstep(0.0, 1.0, abs(dot(vTextureCoord * texSize - start, normal)) / gradientBlur) * blur;\n\n    for (float t = -30.0; t <= 30.0; t++)\n    {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 sample = texture2D(uSampler, vTextureCoord + delta / texSize * percent * radius);\n        sample.rgb *= sample.a;\n        color += sample * weight;\n        total += weight;\n    }\n\n    color /= total;\n    color.rgb /= color.a + 0.00001;\n\n    gl_FragColor = color;\n}\n"),this.uniforms.blur=u.blur,this.uniforms.gradientBlur=u.gradientBlur,this.uniforms.start=null!=(c=u.start)?c:new xt(0,window.innerHeight/2),this.uniforms.end=null!=(f=u.end)?f:new xt(600,window.innerHeight/2),this.uniforms.delta=new xt(30,30),this.uniforms.texSize=new xt(window.innerWidth,window.innerHeight),this.updateDelta()}updateDelta(){this.uniforms.delta.x=0,this.uniforms.delta.y=0}get blur(){return this.uniforms.blur}set blur(u){this.uniforms.blur=u}get gradientBlur(){return this.uniforms.gradientBlur}set gradientBlur(u){this.uniforms.gradientBlur=u}get start(){return this.uniforms.start}set start(u){this.uniforms.start=u,this.updateDelta()}get end(){return this.uniforms.end}set end(u){this.uniforms.end=u,this.updateDelta()}}class o7 extends oM{updateDelta(){const u=this.uniforms.end.x-this.uniforms.start.x,c=this.uniforms.end.y-this.uniforms.start.y,f=Math.sqrt(u*u+c*c);this.uniforms.delta.x=u/f,this.uniforms.delta.y=c/f}}class a7 extends oM{updateDelta(){const u=this.uniforms.end.x-this.uniforms.start.x,c=this.uniforms.end.y-this.uniforms.start.y,f=Math.sqrt(u*u+c*c);this.uniforms.delta.x=-c/f,this.uniforms.delta.y=u/f}}const aM=class extends Ft{constructor(d,u,c,f){super(),"number"==typeof d&&(lt("5.3.0","TiltShiftFilter constructor arguments is deprecated, use options."),d={blur:d,gradientBlur:u,start:c,end:f}),d=Object.assign({},aM.defaults,d),this.tiltShiftXFilter=new o7(d),this.tiltShiftYFilter=new a7(d)}apply(d,u,c,f){const p=d.getFilterTexture();this.tiltShiftXFilter.apply(d,u,p,1),this.tiltShiftYFilter.apply(d,p,c,f),d.returnFilterTexture(p)}get blur(){return this.tiltShiftXFilter.blur}set blur(d){this.tiltShiftXFilter.blur=this.tiltShiftYFilter.blur=d}get gradientBlur(){return this.tiltShiftXFilter.gradientBlur}set gradientBlur(d){this.tiltShiftXFilter.gradientBlur=this.tiltShiftYFilter.gradientBlur=d}get start(){return this.tiltShiftXFilter.start}set start(d){this.tiltShiftXFilter.start=this.tiltShiftYFilter.start=d}get end(){return this.tiltShiftXFilter.end}set end(d){this.tiltShiftXFilter.end=this.tiltShiftYFilter.end=d}};aM.defaults={blur:100,gradientBlur:600,start:void 0,end:void 0};const lM=class extends Ft{constructor(d){super("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float radius;\nuniform float angle;\nuniform vec2 offset;\nuniform vec4 filterArea;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvec2 twist(vec2 coord)\n{\n    coord -= offset;\n\n    float dist = length(coord);\n\n    if (dist < radius)\n    {\n        float ratioDist = (radius - dist) / radius;\n        float angleMod = ratioDist * ratioDist * angle;\n        float s = sin(angleMod);\n        float c = cos(angleMod);\n        coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);\n    }\n\n    coord += offset;\n\n    return coord;\n}\n\nvoid main(void)\n{\n\n    vec2 coord = mapCoord(vTextureCoord);\n\n    coord = twist(coord);\n\n    coord = unmapCoord(coord);\n\n    gl_FragColor = texture2D(uSampler, coord );\n\n}\n"),Object.assign(this,lM.defaults,d)}get offset(){return this.uniforms.offset}set offset(d){this.uniforms.offset=d}get radius(){return this.uniforms.radius}set radius(d){this.uniforms.radius=d}get angle(){return this.uniforms.angle}set angle(d){this.uniforms.angle=d}};lM.defaults={radius:200,angle:4,padding:20,offset:new xt};var uM=Object.getOwnPropertySymbols,p7=Object.prototype.hasOwnProperty,g7=Object.prototype.propertyIsEnumerable;const cM=class extends Ft{constructor(d){const u=Object.assign(cM.defaults,d),{maxKernelSize:c}=u,f=((d,u)=>{var c={};for(var f in d)p7.call(d,f)&&u.indexOf(f)<0&&(c[f]=d[f]);if(null!=d&&uM)for(var f of uM(d))u.indexOf(f)<0&&g7.call(d,f)&&(c[f]=d[f]);return c})(u,["maxKernelSize"]);super("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\nuniform vec2 uCenter;\nuniform float uStrength;\nuniform float uInnerRadius;\nuniform float uRadius;\n\nconst float MAX_KERNEL_SIZE = ${maxKernelSize};\n\n// author: http://byteblacksmith.com/improvements-to-the-canonical-one-liner-glsl-rand-for-opengl-es-2-0/\nhighp float rand(vec2 co, float seed) {\n    const highp float a = 12.9898, b = 78.233, c = 43758.5453;\n    highp float dt = dot(co + seed, vec2(a, b)), sn = mod(dt, 3.14159);\n    return fract(sin(sn) * c + seed);\n}\n\nvoid main() {\n\n    float minGradient = uInnerRadius * 0.3;\n    float innerRadius = (uInnerRadius + minGradient * 0.5) / filterArea.x;\n\n    float gradient = uRadius * 0.3;\n    float radius = (uRadius - gradient * 0.5) / filterArea.x;\n\n    float countLimit = MAX_KERNEL_SIZE;\n\n    vec2 dir = vec2(uCenter.xy / filterArea.xy - vTextureCoord);\n    float dist = length(vec2(dir.x, dir.y * filterArea.y / filterArea.x));\n\n    float strength = uStrength;\n\n    float delta = 0.0;\n    float gap;\n    if (dist < innerRadius) {\n        delta = innerRadius - dist;\n        gap = minGradient;\n    } else if (radius >= 0.0 && dist > radius) { // radius < 0 means it's infinity\n        delta = dist - radius;\n        gap = gradient;\n    }\n\n    if (delta > 0.0) {\n        float normalCount = gap / filterArea.x;\n        delta = (normalCount - delta) / normalCount;\n        countLimit *= delta;\n        strength *= delta;\n        if (countLimit < 1.0)\n        {\n            gl_FragColor = texture2D(uSampler, vTextureCoord);\n            return;\n        }\n    }\n\n    // randomize the lookup values to hide the fixed number of samples\n    float offset = rand(vTextureCoord, 0.0);\n\n    float total = 0.0;\n    vec4 color = vec4(0.0);\n\n    dir *= strength;\n\n    for (float t = 0.0; t < MAX_KERNEL_SIZE; t++) {\n        float percent = (t + offset) / MAX_KERNEL_SIZE;\n        float weight = 4.0 * (percent - percent * percent);\n        vec2 p = vTextureCoord + dir * percent;\n        vec4 sample = texture2D(uSampler, p);\n\n        // switch to pre-multiplied alpha to correctly blur transparent images\n        // sample.rgb *= sample.a;\n\n        color += sample * weight;\n        total += weight;\n\n        if (t > countLimit){\n            break;\n        }\n    }\n\n    color /= total;\n    // switch back from pre-multiplied alpha\n    // color.rgb /= color.a + 0.00001;\n\n    gl_FragColor = color;\n}\n".replace("${maxKernelSize}",c.toFixed(1))),Object.assign(this,f)}get center(){return this.uniforms.uCenter}set center(d){this.uniforms.uCenter=d}get strength(){return this.uniforms.uStrength}set strength(d){this.uniforms.uStrength=d}get innerRadius(){return this.uniforms.uInnerRadius}set innerRadius(d){this.uniforms.uInnerRadius=d}get radius(){return this.uniforms.uRadius}set radius(d){(d<0||d===1/0)&&(d=-1),this.uniforms.uRadius=d}};function Fs(d){if(void 0===d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d}function hM(d,u){d.prototype=Object.create(u.prototype),d.prototype.constructor=d,d.__proto__=u}cM.defaults={strength:.1,center:[0,0],innerRadius:0,radius:-1,maxKernelSize:32};var g0,Kr,dr,ar,si,b0,w0,_M,xM,ql,qc,Un={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Gl={duration:.5,overwrite:!1,delay:0},ii=1e8,Wt=1e-8,m0=2*Math.PI,y7=m0/4,v7=0,dM=Math.sqrt,x7=Math.cos,b7=Math.sin,Br=function(u){return"string"==typeof u},fr=function(u){return"function"==typeof u},Os=function(u){return"number"==typeof u},_0=function(u){return typeof u>"u"},es=function(u){return"object"==typeof u},xn=function(u){return!1!==u},y0=function(){return typeof window<"u"},mp=function(u){return fr(u)||Br(u)},fM="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},Zr=Array.isArray,v0=/(?:-?\.?\d|\.)+/gi,pM=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,zl=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,x0=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,gM=/[+-]=-?[.\d]+/,mM=/[^,'"\[\]\s]+/gi,w7=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Vn={},_p={},yM=function(u){return(_p=pa(u,Vn))&&En},C0=function(u,c){return console.warn("Invalid property",u,"set to",c,"Missing plugin? gsap.registerPlugin()")},yp=function(u,c){return!c&&console.warn(u)},vM=function(u,c){return u&&(Vn[u]=c)&&_p&&(_p[u]=c)||Vn},Hc=function(){return 0},C7={suppressEvents:!0,isStart:!0,kill:!1},vp={suppressEvents:!0,kill:!1},E7={suppressEvents:!0},E0={},_o=[],T0={},Hn={},S0={},bM=30,xp=[],D0="",A0=function(u){var f,p,c=u[0];if(es(c)||fr(c)||(u=[u]),!(f=(c._gsap||{}).harness)){for(p=xp.length;p--&&!xp[p].targetTest(c););f=xp[p]}for(p=u.length;p--;)u[p]&&(u[p]._gsap||(u[p]._gsap=new KM(u[p],f)))||u.splice(p,1);return u},fa=function(u){return u._gsap||A0(li(u))[0]._gsap},wM=function(u,c,f){return(f=u[c])&&fr(f)?u[c]():_0(f)&&u.getAttribute&&u.getAttribute(c)||f},bn=function(u,c){return(u=u.split(",")).forEach(c)||u},yr=function(u){return Math.round(1e5*u)/1e5||0},jr=function(u){return Math.round(1e7*u)/1e7||0},$l=function(u,c){var f=c.charAt(0),p=parseFloat(c.substr(2));return u=parseFloat(u),"+"===f?u+p:"-"===f?u-p:"*"===f?u*p:u/p},T7=function(u,c){for(var f=c.length,p=0;u.indexOf(c[p])<0&&++p<f;);return p<f},bp=function(){var f,p,u=_o.length,c=_o.slice(0);for(T0={},_o.length=0,f=0;f<u;f++)(p=c[f])&&p._lazy&&(p.render(p._lazy[0],p._lazy[1],!0)._lazy=0)},CM=function(u,c,f,p){_o.length&&!Kr&&bp(),u.render(c,f,p||Kr&&c<0&&(u._initted||u._startAt)),_o.length&&!Kr&&bp()},EM=function(u){var c=parseFloat(u);return(c||0===c)&&(u+"").match(mM).length<2?c:Br(u)?u.trim():u},TM=function(u){return u},oi=function(u,c){for(var f in c)f in u||(u[f]=c[f]);return u},pa=function(u,c){for(var f in c)u[f]=c[f];return u},SM=function d(u,c){for(var f in c)"__proto__"!==f&&"constructor"!==f&&"prototype"!==f&&(u[f]=es(c[f])?d(u[f]||(u[f]={}),c[f]):c[f]);return u},wp=function(u,c){var p,f={};for(p in u)p in c||(f[p]=u[p]);return f},jc=function(u){var c=u.parent||ar,f=u.keyframes?function(u){return function(c,f){for(var p in f)p in c||"duration"===p&&u||"ease"===p||(c[p]=f[p])}}(Zr(u.keyframes)):oi;if(xn(u.inherit))for(;c;)f(u,c.vars.defaults),c=c.parent||c._dp;return u},DM=function(u,c,f,p,g){void 0===f&&(f="_first"),void 0===p&&(p="_last");var y,_=u[p];if(g)for(y=c[g];_&&_[g]>y;)_=_._prev;return _?(c._next=_._next,_._next=c):(c._next=u[f],u[f]=c),c._next?c._next._prev=c:u[p]=c,c._prev=_,c.parent=c._dp=u,c},Cp=function(u,c,f,p){void 0===f&&(f="_first"),void 0===p&&(p="_last");var g=c._prev,_=c._next;g?g._next=_:u[f]===c&&(u[f]=_),_?_._prev=g:u[p]===c&&(u[p]=g),c._next=c._prev=c.parent=null},yo=function(u,c){u.parent&&(!c||u.parent.autoRemoveChildren)&&u.parent.remove&&u.parent.remove(u),u._act=0},ga=function(u,c){if(u&&(!c||c._end>u._dur||c._start<0))for(var f=u;f;)f._dirty=1,f=f.parent;return u},A7=function(u){for(var c=u.parent;c&&c.parent;)c._dirty=1,c.totalDuration(),c=c.parent;return u},I0=function(u,c,f,p){return u._startAt&&(Kr?u._startAt.revert(vp):u.vars.immediateRender&&!u.vars.autoRevert||u._startAt.render(c,!0,p))},I7=function d(u){return!u||u._ts&&d(u.parent)},AM=function(u){return u._repeat?Wl(u._tTime,u=u.duration()+u._rDelay)*u:0},Wl=function(u,c){var f=Math.floor(u/=c);return u&&f===u?f-1:f},Ep=function(u,c){return(u-c._start)*c._ts+(c._ts>=0?0:c._dirty?c.totalDuration():c._tDur)},Tp=function(u){return u._end=jr(u._start+(u._tDur/Math.abs(u._ts||u._rts||Wt)||0))},Sp=function(u,c){var f=u._dp;return f&&f.smoothChildTiming&&u._ts&&(u._start=jr(f._time-(u._ts>0?c/u._ts:((u._dirty?u.totalDuration():u._tDur)-c)/-u._ts)),Tp(u),f._dirty||ga(f,u)),u},IM=function(u,c){var f;if((c._time||!c._dur&&c._initted||c._start<u._time&&(c._dur||!c.add))&&(f=Ep(u.rawTime(),c),(!c._dur||zc(0,c.totalDuration(),f)-c._tTime>Wt)&&c.render(f,!0)),ga(u,c)._dp&&u._initted&&u._time>=u._dur&&u._ts){if(u._dur<u.duration())for(f=u;f._dp;)f.rawTime()>=0&&f.totalTime(f._tTime),f=f._dp;u._zTime=-Wt}},ts=function(u,c,f,p){return c.parent&&yo(c),c._start=jr((Os(f)?f:f||u!==ar?ai(u,f,c):u._time)+c._delay),c._end=jr(c._start+(c.totalDuration()/Math.abs(c.timeScale())||0)),DM(u,c,"_first","_last",u._sort?"_start":0),M0(c)||(u._recent=c),p||IM(u,c),u._ts<0&&Sp(u,u._tTime),u},MM=function(u,c){return(Vn.ScrollTrigger||C0("scrollTrigger",c))&&Vn.ScrollTrigger.create(c,u)},PM=function(u,c,f,p,g){return U0(u,c,g),u._initted?!f&&u._pt&&!Kr&&(u._dur&&!1!==u.vars.lazy||!u._dur&&u.vars.lazy)&&xM!==jn.frame?(_o.push(u),u._lazy=[g,p],1):void 0:1},M7=function d(u){var c=u.parent;return c&&c._ts&&c._initted&&!c._lock&&(c.rawTime()<0||d(c))},M0=function(u){var c=u.data;return"isFromStart"===c||"isStart"===c},Xl=function(u,c,f,p){var g=u._repeat,_=jr(c)||0,y=u._tTime/u._tDur;return y&&!p&&(u._time*=_/u._dur),u._dur=_,u._tDur=g?g<0?1e10:jr(_*(g+1)+u._rDelay*g):_,y>0&&!p&&Sp(u,u._tTime=u._tDur*y),u.parent&&Tp(u),f||ga(u.parent,u),u},RM=function(u){return u instanceof wn?ga(u):Xl(u,u._dur)},F7={_start:0,endTime:Hc,totalDuration:Hc},ai=function d(u,c,f){var y,v,x,p=u.labels,g=u._recent||F7,_=u.duration()>=ii?g.endTime(!1):u._dur;return Br(c)&&(isNaN(c)||c in p)?(v=c.charAt(0),x="%"===c.substr(-1),y=c.indexOf("="),"<"===v||">"===v?(y>=0&&(c=c.replace(/=/,"")),("<"===v?g._start:g.endTime(g._repeat>=0))+(parseFloat(c.substr(1))||0)*(x?(y<0?g:f).totalDuration()/100:1)):y<0?(c in p||(p[c]=_),p[c]):(v=parseFloat(c.charAt(y-1)+c.substr(y+1)),x&&f&&(v=v/100*(Zr(f)?f[0]:f).totalDuration()),y>1?d(u,c.substr(0,y-1),f)+v:_+v)):null==c?_:+c},Gc=function(u,c,f){var y,v,p=Os(c[1]),g=(p?2:1)+(u<2?0:1),_=c[g];if(p&&(_.duration=c[1]),_.parent=f,u){for(y=_,v=f;v&&!("immediateRender"in y);)y=v.vars.defaults||{},v=xn(v.vars.inherit)&&v.parent;_.immediateRender=xn(y.immediateRender),u<2?_.runBackwards=1:_.startAt=c[g-1]}return new Tr(c[0],_,c[g+1])},vo=function(u,c){return u||0===u?c(u):c},zc=function(u,c,f){return f<u?u:f>c?c:f},Qr=function(u,c){return Br(u)&&(c=w7.exec(u))?c[1]:""},P0=[].slice,FM=function(u,c){return u&&es(u)&&"length"in u&&(!c&&!u.length||u.length-1 in u&&es(u[0]))&&!u.nodeType&&u!==si},li=function(u,c,f){return dr&&!c&&dr.selector?dr.selector(u):!Br(u)||f||!b0&&Yl()?Zr(u)?function(u,c,f){return void 0===f&&(f=[]),u.forEach(function(p){var g;return Br(p)&&!c||FM(p,1)?(g=f).push.apply(g,li(p)):f.push(p)})||f}(u,f):FM(u)?P0.call(u,0):u?[u]:[]:P0.call((c||w0).querySelectorAll(u),0)},R0=function(u){return u=li(u)[0]||yp("Invalid scope")||{},function(c){var f=u.current||u.nativeElement||u;return li(c,f.querySelectorAll?f:f===u?yp("Invalid scope")||w0.createElement("div"):u)}},OM=function(u){return u.sort(function(){return.5-Math.random()})},NM=function(u){if(fr(u))return u;var c=es(u)?u:{each:u},f=ma(c.ease),p=c.from||0,g=parseFloat(c.base)||0,_={},y=p>0&&p<1,v=isNaN(p)||y,x=c.axis,w=p,C=p;return Br(p)?w=C={center:.5,edges:.5,end:1}[p]||0:!y&&v&&(w=p[0],C=p[1]),function(E,T,D){var I,P,M,R,L,j,H,G,z,S=(D||c).length,A=_[S];if(!A){if(!(z="auto"===c.grid?0:(c.grid||[1,ii])[1])){for(H=-ii;H<(H=D[z++].getBoundingClientRect().left)&&z<S;);z--}for(A=_[S]=[],I=v?Math.min(z,S)*w-.5:p%z,P=z===ii?0:v?S*C/z-.5:p/z|0,H=0,G=ii,j=0;j<S;j++)M=j%z-I,R=P-(j/z|0),A[j]=L=x?Math.abs("y"===x?R:M):dM(M*M+R*R),L>H&&(H=L),L<G&&(G=L);"random"===p&&OM(A),A.max=H-G,A.min=G,A.v=S=(parseFloat(c.amount)||parseFloat(c.each)*(z>S?S-1:x?"y"===x?S/z:z:Math.max(z,S/z))||0)*("edges"===p?-1:1),A.b=S<0?g-S:g,A.u=Qr(c.amount||c.each)||0,f=f&&S<0?XM(f):f}return S=(A[E]-A.min)/A.max||0,jr(A.b+(f?f(S):S)*A.v)+A.u}},F0=function(u){var c=Math.pow(10,((u+"").split(".")[1]||"").length);return function(f){var p=jr(Math.round(parseFloat(f)/u)*u*c);return(p-p%1)/c+(Os(f)?0:Qr(f))}},LM=function(u,c){var p,g,f=Zr(u);return!f&&es(u)&&(p=f=u.radius||ii,u.values?(u=li(u.values),(g=!Os(u[0]))&&(p*=p)):u=F0(u.increment)),vo(c,f?fr(u)?function(_){return g=u(_),Math.abs(g-_)<=p?g:_}:function(_){for(var E,T,y=parseFloat(g?_.x:_),v=parseFloat(g?_.y:0),x=ii,w=0,C=u.length;C--;)(E=g?(E=u[C].x-y)*E+(T=u[C].y-v)*T:Math.abs(u[C]-y))<x&&(x=E,w=C);return w=!p||x<=p?u[w]:_,g||w===_||Os(_)?w:w+Qr(_)}:F0(u))},kM=function(u,c,f,p){return vo(Zr(u)?!c:!0===f?!!(f=0):!p,function(){return Zr(u)?u[~~(Math.random()*u.length)]:(f=f||1e-5)&&(p=f<1?Math.pow(10,(f+"").length-2):1)&&Math.floor(Math.round((u-f/2+Math.random()*(c-u+.99*f))/f)*f*p)/p})},BM=function(u,c,f){return vo(f,function(p){return u[~~c(p)]})},$c=function(u){for(var p,g,_,y,c=0,f="";~(p=u.indexOf("random(",c));)_=u.indexOf(")",p),y="["===u.charAt(p+7),g=u.substr(p+7,_-p-7).match(y?mM:v0),f+=u.substr(c,p-c)+kM(y?g:+g[0],y?0:+g[1],+g[2]||1e-5),c=_+1;return f+u.substr(c,u.length-c)},UM=function(u,c,f,p,g){var _=c-u,y=p-f;return vo(g,function(v){return f+((v-u)/_*y||0)})},VM=function(u,c,f){var _,y,v,p=u.labels,g=ii;for(_ in p)(y=p[_]-c)<0==!!f&&y&&g>(y=Math.abs(y))&&(v=_,g=y);return v},ui=function(u,c,f){var v,x,w,p=u.vars,g=p[c],_=dr,y=u._ctx;if(g)return v=p[c+"Params"],x=p.callbackScope||u,f&&_o.length&&bp(),y&&(dr=y),w=v?g.apply(x,v):g.call(x),dr=_,w},Wc=function(u){return yo(u),u.scrollTrigger&&u.scrollTrigger.kill(!!Kr),u.progress()<1&&ui(u,"onInterrupt"),u},HM=[],jM=function(u){if(y0()&&u){var c=(u=!u.name&&u.default||u).name,f=fr(u),p=c&&!f&&u.init?function(){this._props=[]}:u,g={init:Hc,render:j0,add:k0,kill:nW,modifier:rW,rawVars:0},_={targetTest:0,get:0,getSetter:H0,aliases:{},register:0};if(Yl(),u!==p){if(Hn[c])return;oi(p,oi(wp(u,g),_)),pa(p.prototype,pa(g,wp(u,_))),Hn[p.prop=c]=p,u.targetTest&&(xp.push(p),E0[c]=1),c=("css"===c?"CSS":c.charAt(0).toUpperCase()+c.substr(1))+"Plugin"}vM(c,p),u.register&&u.register(En,p,Cn)}else u&&HM.push(u)},Xt=255,Xc={aqua:[0,Xt,Xt],lime:[0,Xt,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Xt],navy:[0,0,128],white:[Xt,Xt,Xt],olive:[128,128,0],yellow:[Xt,Xt,0],orange:[Xt,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Xt,0,0],pink:[Xt,192,203],cyan:[0,Xt,Xt],transparent:[Xt,Xt,Xt,0]},O0=function(u,c,f){return(6*(u+=u<0?1:u>1?-1:0)<1?c+(f-c)*u*6:u<.5?f:3*u<2?c+(f-c)*(2/3-u)*6:c)*Xt+.5|0},GM=function(u,c,f){var g,_,y,v,x,w,C,E,T,D,p=u?Os(u)?[u>>16,u>>8&Xt,u&Xt]:0:Xc.black;if(!p){if(","===u.substr(-1)&&(u=u.substr(0,u.length-1)),Xc[u])p=Xc[u];else if("#"===u.charAt(0)){if(u.length<6&&(g=u.charAt(1),_=u.charAt(2),y=u.charAt(3),u="#"+g+g+_+_+y+y+(5===u.length?u.charAt(4)+u.charAt(4):"")),9===u.length)return[(p=parseInt(u.substr(1,6),16))>>16,p>>8&Xt,p&Xt,parseInt(u.substr(7),16)/255];p=[(u=parseInt(u.substr(1),16))>>16,u>>8&Xt,u&Xt]}else if("hsl"===u.substr(0,3))if(p=D=u.match(v0),c){if(~u.indexOf("="))return p=u.match(pM),f&&p.length<4&&(p[3]=1),p}else v=+p[0]%360/360,x=+p[1]/100,g=2*(w=+p[2]/100)-(_=w<=.5?w*(x+1):w+x-w*x),p.length>3&&(p[3]*=1),p[0]=O0(v+1/3,g,_),p[1]=O0(v,g,_),p[2]=O0(v-1/3,g,_);else p=u.match(v0)||Xc.transparent;p=p.map(Number)}return c&&!D&&(g=p[0]/Xt,_=p[1]/Xt,y=p[2]/Xt,w=((C=Math.max(g,_,y))+(E=Math.min(g,_,y)))/2,C===E?v=x=0:(T=C-E,x=w>.5?T/(2-C-E):T/(C+E),v=C===g?(_-y)/T+(_<y?6:0):C===_?(y-g)/T+2:(g-_)/T+4,v*=60),p[0]=~~(v+.5),p[1]=~~(100*x+.5),p[2]=~~(100*w+.5)),f&&p.length<4&&(p[3]=1),p},zM=function(u){var c=[],f=[],p=-1;return u.split(xo).forEach(function(g){var _=g.match(zl)||[];c.push.apply(c,_),f.push(p+=_.length+1)}),c.c=f,c},$M=function(u,c,f){var v,x,w,C,p="",g=(u+p).match(xo),_=c?"hsla(":"rgba(",y=0;if(!g)return u;if(g=g.map(function(E){return(E=GM(E,c,1))&&_+(c?E[0]+","+E[1]+"%,"+E[2]+"%,"+E[3]:E.join(","))+")"}),f&&(w=zM(u),(v=f.c).join(p)!==w.c.join(p)))for(C=(x=u.replace(xo,"1").split(zl)).length-1;y<C;y++)p+=x[y]+(~v.indexOf(y)?g.shift()||_+"0,0,0,0)":(w.length?w:g.length?g:f).shift());if(!x)for(C=(x=u.split(xo)).length-1;y<C;y++)p+=x[y]+g[y];return p+x[C]},xo=function(){var u,d="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(u in Xc)d+="|"+u+"\\b";return new RegExp(d+")","gi")}(),j7=/hsl[a]?\(/,WM=function(u){var f,c=u.join(" ");if(xo.lastIndex=0,xo.test(c))return f=j7.test(c),u[1]=$M(u[1],f),u[0]=$M(u[0],f,zM(u[1])),!0},jn=function(){var v,x,w,C,E,T,d=Date.now,u=500,c=33,f=d(),p=f,g=1e3/240,_=g,y=[],D=function S(A){var M,R,L,j,I=d()-p,P=!0===A;if(I>u&&(f+=I-c),((M=(L=(p+=I)-f)-_)>0||P)&&(j=++C.frame,E=L-1e3*C.time,C.time=L/=1e3,_+=M+(M>=g?4:g-M),R=1),P||(v=x(S)),R)for(T=0;T<y.length;T++)y[T](L,E,j,A)};return C={time:0,frame:0,tick:function(){D(!0)},deltaRatio:function(A){return E/(1e3/(A||60))},wake:function(){_M&&(!b0&&y0()&&(si=b0=window,w0=si.document||{},Vn.gsap=En,(si.gsapVersions||(si.gsapVersions=[])).push(En.version),yM(_p||si.GreenSockGlobals||!si.gsap&&si||{}),w=si.requestAnimationFrame,HM.forEach(jM)),v&&C.sleep(),x=w||function(A){return setTimeout(A,_-1e3*C.time+1|0)},qc=1,D(2))},sleep:function(){(w?si.cancelAnimationFrame:clearTimeout)(v),qc=0,x=Hc},lagSmoothing:function(A,I){u=A||1/0,c=Math.min(I||33,u)},fps:function(A){_=1e3*C.time+(g=1e3/(A||240))},add:function(A,I,P){var M=I?function(R,L,j,H){A(R,L,j,H),C.remove(M)}:A;return C.remove(A),y[P?"unshift":"push"](M),Yl(),M},remove:function(A,I){~(I=y.indexOf(A))&&y.splice(I,1)&&T>=I&&T--},_listeners:y}}(),Yl=function(){return!qc&&jn.wake()},Ot={},G7=/^[\d.\-M][\d.\-,\s]/,z7=/["']/g,$7=function(u){for(var y,v,x,c={},f=u.substr(1,u.length-3).split(":"),p=f[0],g=1,_=f.length;g<_;g++)v=f[g],y=g!==_-1?v.lastIndexOf(","):v.length,x=v.substr(0,y),c[p]=isNaN(x)?x.replace(z7,"").trim():+x,p=v.substr(y+1).trim();return c},XM=function(u){return function(c){return 1-u(1-c)}},qM=function d(u,c){for(var p,f=u._first;f;)f instanceof wn?d(f,c):f.vars.yoyoEase&&(!f._yoyo||!f._repeat)&&f._yoyo!==c&&(f.timeline?d(f.timeline,c):(p=f._ease,f._ease=f._yEase,f._yEase=p,f._yoyo=c)),f=f._next},ma=function(u,c){return u&&(fr(u)?u:Ot[u]||function(u){var c=(u+"").split("("),f=Ot[c[0]];return f&&c.length>1&&f.config?f.config.apply(null,~u.indexOf("{")?[$7(c[1])]:function(u){var c=u.indexOf("(")+1,f=u.indexOf(")"),p=u.indexOf("(",c);return u.substring(c,~p&&p<f?u.indexOf(")",f+1):f)}(u).split(",").map(EM)):Ot._CE&&G7.test(u)?Ot._CE("",u):f}(u))||c},_a=function(u,c,f,p){void 0===f&&(f=function(v){return 1-c(1-v)}),void 0===p&&(p=function(v){return v<.5?c(2*v)/2:1-c(2*(1-v))/2});var _,g={easeIn:c,easeOut:f,easeInOut:p};return bn(u,function(y){for(var v in Ot[y]=Vn[y]=g,Ot[_=y.toLowerCase()]=f,g)Ot[_+("easeIn"===v?".in":"easeOut"===v?".out":".inOut")]=Ot[y+"."+v]=g[v]}),g},YM=function(u){return function(c){return c<.5?(1-u(1-2*c))/2:.5+u(2*(c-.5))/2}},N0=function d(u,c,f){var p=c>=1?c:1,g=(f||(u?.3:.45))/(c<1?c:1),_=g/m0*(Math.asin(1/p)||0),y=function(w){return 1===w?1:p*Math.pow(2,-10*w)*b7((w-_)*g)+1},v="out"===u?y:"in"===u?function(x){return 1-y(1-x)}:YM(y);return g=m0/g,v.config=function(x,w){return d(u,x,w)},v},L0=function d(u,c){void 0===c&&(c=1.70158);var f=function(_){return _?--_*_*((c+1)*_+c)+1:0},p="out"===u?f:"in"===u?function(g){return 1-f(1-g)}:YM(f);return p.config=function(g){return d(u,g)},p};bn("Linear,Quad,Cubic,Quart,Quint,Strong",function(d,u){var c=u<5?u+1:u;_a(d+",Power"+(c-1),u?function(f){return Math.pow(f,c)}:function(f){return f},function(f){return 1-Math.pow(1-f,c)},function(f){return f<.5?Math.pow(2*f,c)/2:1-Math.pow(2*(1-f),c)/2})}),Ot.Linear.easeNone=Ot.none=Ot.Linear.easeIn,_a("Elastic",N0("in"),N0("out"),N0()),function(d,u){var g=function(y){return y<.36363636363636365?d*y*y:y<.7272727272727273?d*Math.pow(y-1.5/u,2)+.75:y<.9090909090909092?d*(y-=2.25/u)*y+.9375:d*Math.pow(y-2.625/u,2)+.984375};_a("Bounce",function(_){return 1-g(1-_)},g)}(7.5625,2.75),_a("Expo",function(d){return d?Math.pow(2,10*(d-1)):0}),_a("Circ",function(d){return-(dM(1-d*d)-1)}),_a("Sine",function(d){return 1===d?1:1-x7(d*y7)}),_a("Back",L0("in"),L0("out"),L0()),Ot.SteppedEase=Ot.steps=Vn.SteppedEase={config:function(u,c){void 0===u&&(u=1);var f=1/u,p=u+(c?0:1),g=c?1:0;return function(y){return((p*zc(0,.99999999,y)|0)+g)*f}}},Gl.ease=Ot["quad.out"],bn("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(d){return D0+=d+","+d+"Params,"});var KM=function(u,c){this.id=v7++,u._gsap=this,this.target=u,this.harness=c,this.get=c?c.get:wM,this.set=c?c.getSetter:H0},Yc=function(){function d(c){this.vars=c,this._delay=+c.delay||0,(this._repeat=c.repeat===1/0?-2:c.repeat||0)&&(this._rDelay=c.repeatDelay||0,this._yoyo=!!c.yoyo||!!c.yoyoEase),this._ts=1,Xl(this,+c.duration,1,1),this.data=c.data,dr&&(this._ctx=dr,dr.data.push(this)),qc||jn.wake()}var u=d.prototype;return u.delay=function(f){return f||0===f?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+f-this._delay),this._delay=f,this):this._delay},u.duration=function(f){return arguments.length?this.totalDuration(this._repeat>0?f+(f+this._rDelay)*this._repeat:f):this.totalDuration()&&this._dur},u.totalDuration=function(f){return arguments.length?(this._dirty=0,Xl(this,this._repeat<0?f:(f-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},u.totalTime=function(f,p){if(Yl(),!arguments.length)return this._tTime;var g=this._dp;if(g&&g.smoothChildTiming&&this._ts){for(Sp(this,f),!g._dp||g.parent||IM(g,this);g&&g.parent;)g.parent._time!==g._start+(g._ts>=0?g._tTime/g._ts:(g.totalDuration()-g._tTime)/-g._ts)&&g.totalTime(g._tTime,!0),g=g.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&f<this._tDur||this._ts<0&&f>0||!this._tDur&&!f)&&ts(this._dp,this,this._start-this._delay)}return(this._tTime!==f||!this._dur&&!p||this._initted&&Math.abs(this._zTime)===Wt||!f&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=f),CM(this,f,p)),this},u.time=function(f,p){return arguments.length?this.totalTime(Math.min(this.totalDuration(),f+AM(this))%(this._dur+this._rDelay)||(f?this._dur:0),p):this._time},u.totalProgress=function(f,p){return arguments.length?this.totalTime(this.totalDuration()*f,p):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},u.progress=function(f,p){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?f:1-f)+AM(this),p):this.duration()?Math.min(1,this._time/this._dur):this.ratio},u.iteration=function(f,p){var g=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(f-1)*g,p):this._repeat?Wl(this._tTime,g)+1:1},u.timeScale=function(f){if(!arguments.length)return this._rts===-Wt?0:this._rts;if(this._rts===f)return this;var p=this.parent&&this._ts?Ep(this.parent._time,this):this._tTime;return this._rts=+f||0,this._ts=this._ps||f===-Wt?0:this._rts,this.totalTime(zc(-Math.abs(this._delay),this._tDur,p),!0),Tp(this),A7(this)},u.paused=function(f){return arguments.length?(this._ps!==f&&(this._ps=f,f?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Yl(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&Math.abs(this._zTime)!==Wt&&(this._tTime-=Wt)))),this):this._ps},u.startTime=function(f){if(arguments.length){this._start=f;var p=this.parent||this._dp;return p&&(p._sort||!this.parent)&&ts(p,this,f-this._delay),this}return this._start},u.endTime=function(f){return this._start+(xn(f)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},u.rawTime=function(f){var p=this.parent||this._dp;return p?f&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Ep(p.rawTime(f),this):this._tTime:this._tTime},u.revert=function(f){void 0===f&&(f=E7);var p=Kr;return Kr=f,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(f),this.totalTime(-.01,f.suppressEvents)),"nested"!==this.data&&!1!==f.kill&&this.kill(),Kr=p,this},u.globalTime=function(f){for(var p=this,g=arguments.length?f:p.rawTime();p;)g=p._start+g/(p._ts||1),p=p._dp;return!this.parent&&this._sat?this._sat.vars.immediateRender?-1/0:this._sat.globalTime(f):g},u.repeat=function(f){return arguments.length?(this._repeat=f===1/0?-2:f,RM(this)):-2===this._repeat?1/0:this._repeat},u.repeatDelay=function(f){if(arguments.length){var p=this._time;return this._rDelay=f,RM(this),p?this.time(p):this}return this._rDelay},u.yoyo=function(f){return arguments.length?(this._yoyo=f,this):this._yoyo},u.seek=function(f,p){return this.totalTime(ai(this,f),xn(p))},u.restart=function(f,p){return this.play().totalTime(f?-this._delay:0,xn(p))},u.play=function(f,p){return null!=f&&this.seek(f,p),this.reversed(!1).paused(!1)},u.reverse=function(f,p){return null!=f&&this.seek(f||this.totalDuration(),p),this.reversed(!0).paused(!1)},u.pause=function(f,p){return null!=f&&this.seek(f,p),this.paused(!0)},u.resume=function(){return this.paused(!1)},u.reversed=function(f){return arguments.length?(!!f!==this.reversed()&&this.timeScale(-this._rts||(f?-Wt:0)),this):this._rts<0},u.invalidate=function(){return this._initted=this._act=0,this._zTime=-Wt,this},u.isActive=function(){var g,f=this.parent||this._dp,p=this._start;return!(f&&!(this._ts&&this._initted&&f.isActive()&&(g=f.rawTime(!0))>=p&&g<this.endTime(!0)-Wt))},u.eventCallback=function(f,p,g){var _=this.vars;return arguments.length>1?(p?(_[f]=p,g&&(_[f+"Params"]=g),"onUpdate"===f&&(this._onUpdate=p)):delete _[f],this):_[f]},u.then=function(f){var p=this;return new Promise(function(g){var _=fr(f)?f:TM,y=function(){var x=p.then;p.then=null,fr(_)&&(_=_(p))&&(_.then||_===p)&&(p.then=x),g(_),p.then=x};p._initted&&1===p.totalProgress()&&p._ts>=0||!p._tTime&&p._ts<0?y():p._prom=y})},u.kill=function(){Wc(this)},d}();oi(Yc.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Wt,_prom:0,_ps:!1,_rts:1});var wn=function(d){function u(f,p){var g;return void 0===f&&(f={}),(g=d.call(this,f)||this).labels={},g.smoothChildTiming=!!f.smoothChildTiming,g.autoRemoveChildren=!!f.autoRemoveChildren,g._sort=xn(f.sortChildren),ar&&ts(f.parent||ar,Fs(g),p),f.reversed&&g.reverse(),f.paused&&g.paused(!0),f.scrollTrigger&&MM(Fs(g),f.scrollTrigger),g}hM(u,d);var c=u.prototype;return c.to=function(p,g,_){return Gc(0,arguments,this),this},c.from=function(p,g,_){return Gc(1,arguments,this),this},c.fromTo=function(p,g,_,y){return Gc(2,arguments,this),this},c.set=function(p,g,_){return g.duration=0,g.parent=this,jc(g).repeatDelay||(g.repeat=0),g.immediateRender=!!g.immediateRender,new Tr(p,g,ai(this,_),1),this},c.call=function(p,g,_){return ts(this,Tr.delayedCall(0,p,g),_)},c.staggerTo=function(p,g,_,y,v,x,w){return _.duration=g,_.stagger=_.stagger||y,_.onComplete=x,_.onCompleteParams=w,_.parent=this,new Tr(p,_,ai(this,v)),this},c.staggerFrom=function(p,g,_,y,v,x,w){return _.runBackwards=1,jc(_).immediateRender=xn(_.immediateRender),this.staggerTo(p,g,_,y,v,x,w)},c.staggerFromTo=function(p,g,_,y,v,x,w,C){return y.startAt=_,jc(y).immediateRender=xn(y.immediateRender),this.staggerTo(p,g,y,v,x,w,C)},c.render=function(p,g,_){var E,T,D,S,A,I,P,M,R,L,j,H,y=this._time,v=this._dirty?this.totalDuration():this._tDur,x=this._dur,w=p<=0?0:jr(p),C=this._zTime<0!=p<0&&(this._initted||!x);if(this!==ar&&w>v&&p>=0&&(w=v),w!==this._tTime||_||C){if(y!==this._time&&x&&(w+=this._time-y,p+=this._time-y),E=w,R=this._start,I=!(M=this._ts),C&&(x||(y=this._zTime),(p||!g)&&(this._zTime=p)),this._repeat){if(j=this._yoyo,A=x+this._rDelay,this._repeat<-1&&p<0)return this.totalTime(100*A+p,g,_);if(E=jr(w%A),w===v?(S=this._repeat,E=x):((S=~~(w/A))&&S===w/A&&(E=x,S--),E>x&&(E=x)),L=Wl(this._tTime,A),!y&&this._tTime&&L!==S&&this._tTime-L*A-this._dur<=0&&(L=S),j&&1&S&&(E=x-E,H=1),S!==L&&!this._lock){var G=j&&1&L,z=G===(j&&1&S);if(S<L&&(G=!G),y=G?0:w%x?x:w,this._lock=1,this.render(y||(H?0:jr(S*A)),g,!x)._lock=0,this._tTime=w,!g&&this.parent&&ui(this,"onRepeat"),this.vars.repeatRefresh&&!H&&(this.invalidate()._lock=1),y&&y!==this._time||I!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(x=this._dur,v=this._tDur,z&&(this._lock=2,this.render(y=G?x:-1e-4,!0),this.vars.repeatRefresh&&!H&&this.invalidate()),this._lock=0,!this._ts&&!I)return this;qM(this,H)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(P=function(u,c,f){var p;if(f>c)for(p=u._first;p&&p._start<=f;){if("isPause"===p.data&&p._start>c)return p;p=p._next}else for(p=u._last;p&&p._start>=f;){if("isPause"===p.data&&p._start<c)return p;p=p._prev}}(this,jr(y),jr(E)),P&&(w-=E-(E=P._start))),this._tTime=w,this._time=E,this._act=!M,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=p,y=0),!y&&E&&!g&&!S&&(ui(this,"onStart"),this._tTime!==w))return this;if(E>=y&&p>=0)for(T=this._first;T;){if(D=T._next,(T._act||E>=T._start)&&T._ts&&P!==T){if(T.parent!==this)return this.render(p,g,_);if(T.render(T._ts>0?(E-T._start)*T._ts:(T._dirty?T.totalDuration():T._tDur)+(E-T._start)*T._ts,g,_),E!==this._time||!this._ts&&!I){P=0,D&&(w+=this._zTime=-Wt);break}}T=D}else{T=this._last;for(var ce=p<0?p:E;T;){if(D=T._prev,(T._act||ce<=T._end)&&T._ts&&P!==T){if(T.parent!==this)return this.render(p,g,_);if(T.render(T._ts>0?(ce-T._start)*T._ts:(T._dirty?T.totalDuration():T._tDur)+(ce-T._start)*T._ts,g,_||Kr&&(T._initted||T._startAt)),E!==this._time||!this._ts&&!I){P=0,D&&(w+=this._zTime=ce?-Wt:Wt);break}}T=D}}if(P&&!g&&(this.pause(),P.render(E>=y?0:-Wt)._zTime=E>=y?1:-1,this._ts))return this._start=R,Tp(this),this.render(p,g,_);this._onUpdate&&!g&&ui(this,"onUpdate",!0),(w===v&&this._tTime>=this.totalDuration()||!w&&y)&&(R===this._start||Math.abs(M)!==Math.abs(this._ts))&&(this._lock||((p||!x)&&(w===v&&this._ts>0||!w&&this._ts<0)&&yo(this,1),!g&&(!(p<0)||y)&&(w||y||!v)&&(ui(this,w===v&&p>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(w<v&&this.timeScale()>0)&&this._prom())))}return this},c.add=function(p,g){var _=this;if(Os(g)||(g=ai(this,g,p)),!(p instanceof Yc)){if(Zr(p))return p.forEach(function(y){return _.add(y,g)}),this;if(Br(p))return this.addLabel(p,g);if(!fr(p))return this;p=Tr.delayedCall(0,p)}return this!==p?ts(this,p,g):this},c.getChildren=function(p,g,_,y){void 0===p&&(p=!0),void 0===g&&(g=!0),void 0===_&&(_=!0),void 0===y&&(y=-ii);for(var v=[],x=this._first;x;)x._start>=y&&(x instanceof Tr?g&&v.push(x):(_&&v.push(x),p&&v.push.apply(v,x.getChildren(!0,g,_)))),x=x._next;return v},c.getById=function(p){for(var g=this.getChildren(1,1,1),_=g.length;_--;)if(g[_].vars.id===p)return g[_]},c.remove=function(p){return Br(p)?this.removeLabel(p):fr(p)?this.killTweensOf(p):(Cp(this,p),p===this._recent&&(this._recent=this._last),ga(this))},c.totalTime=function(p,g){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=jr(jn.time-(this._ts>0?p/this._ts:(this.totalDuration()-p)/-this._ts))),d.prototype.totalTime.call(this,p,g),this._forcing=0,this):this._tTime},c.addLabel=function(p,g){return this.labels[p]=ai(this,g),this},c.removeLabel=function(p){return delete this.labels[p],this},c.addPause=function(p,g,_){var y=Tr.delayedCall(0,g||Hc,_);return y.data="isPause",this._hasPause=1,ts(this,y,ai(this,p))},c.removePause=function(p){var g=this._first;for(p=ai(this,p);g;)g._start===p&&"isPause"===g.data&&yo(g),g=g._next},c.killTweensOf=function(p,g,_){for(var y=this.getTweensOf(p,_),v=y.length;v--;)bo!==y[v]&&y[v].kill(p,g);return this},c.getTweensOf=function(p,g){for(var w,_=[],y=li(p),v=this._first,x=Os(g);v;)v instanceof Tr?T7(v._targets,y)&&(x?(!bo||v._initted&&v._ts)&&v.globalTime(0)<=g&&v.globalTime(v.totalDuration())>g:!g||v.isActive())&&_.push(v):(w=v.getTweensOf(y,g)).length&&_.push.apply(_,w),v=v._next;return _},c.tweenTo=function(p,g){g=g||{};var T,_=this,y=ai(_,p),x=g.startAt,w=g.onStart,C=g.onStartParams,E=g.immediateRender,D=Tr.to(_,oi({ease:g.ease||"none",lazy:!1,immediateRender:!1,time:y,overwrite:"auto",duration:g.duration||Math.abs((y-(x&&"time"in x?x.time:_._time))/_.timeScale())||Wt,onStart:function(){if(_.pause(),!T){var A=g.duration||Math.abs((y-(x&&"time"in x?x.time:_._time))/_.timeScale());D._dur!==A&&Xl(D,A,0,1).render(D._time,!0,!0),T=1}w&&w.apply(D,C||[])}},g));return E?D.render(0):D},c.tweenFromTo=function(p,g,_){return this.tweenTo(g,oi({startAt:{time:ai(this,p)}},_))},c.recent=function(){return this._recent},c.nextLabel=function(p){return void 0===p&&(p=this._time),VM(this,ai(this,p))},c.previousLabel=function(p){return void 0===p&&(p=this._time),VM(this,ai(this,p),1)},c.currentLabel=function(p){return arguments.length?this.seek(p,!0):this.previousLabel(this._time+Wt)},c.shiftChildren=function(p,g,_){void 0===_&&(_=0);for(var x,y=this._first,v=this.labels;y;)y._start>=_&&(y._start+=p,y._end+=p),y=y._next;if(g)for(x in v)v[x]>=_&&(v[x]+=p);return ga(this)},c.invalidate=function(p){var g=this._first;for(this._lock=0;g;)g.invalidate(p),g=g._next;return d.prototype.invalidate.call(this,p)},c.clear=function(p){void 0===p&&(p=!0);for(var _,g=this._first;g;)_=g._next,this.remove(g),g=_;return this._dp&&(this._time=this._tTime=this._pTime=0),p&&(this.labels={}),ga(this)},c.totalDuration=function(p){var x,w,C,g=0,_=this,y=_._last,v=ii;if(arguments.length)return _.timeScale((_._repeat<0?_.duration():_.totalDuration())/(_.reversed()?-p:p));if(_._dirty){for(C=_.parent;y;)x=y._prev,y._dirty&&y.totalDuration(),(w=y._start)>v&&_._sort&&y._ts&&!_._lock?(_._lock=1,ts(_,y,w-y._delay,1)._lock=0):v=w,w<0&&y._ts&&(g-=w,(!C&&!_._dp||C&&C.smoothChildTiming)&&(_._start+=w/_._ts,_._time-=w,_._tTime-=w),_.shiftChildren(-w,!1,-1/0),v=0),y._end>g&&y._ts&&(g=y._end),y=x;Xl(_,_===ar&&_._time>g?_._time:g,1,1),_._dirty=0}return _._tDur},u.updateRoot=function(p){if(ar._ts&&(CM(ar,Ep(p,ar)),xM=jn.frame),jn.frame>=bM){bM+=Un.autoSleep||120;var g=ar._first;if((!g||!g._ts)&&Un.autoSleep&&jn._listeners.length<2){for(;g&&!g._ts;)g=g._next;g||jn.sleep()}}},u}(Yc);oi(wn.prototype,{_lock:0,_hasPause:0,_forcing:0});var bo,B0,q7=function(u,c,f,p,g,_,y){var C,E,T,D,S,A,I,P,v=new Cn(this._pt,u,c,0,1,rP,null,g),x=0,w=0;for(v.b=f,v.e=p,f+="",(I=~(p+="").indexOf("random("))&&(p=$c(p)),_&&(_(P=[f,p],u,c),f=P[0],p=P[1]),E=f.match(x0)||[];C=x0.exec(p);)D=C[0],S=p.substring(x,C.index),T?T=(T+1)%5:"rgba("===S.substr(-5)&&(T=1),D!==E[w++]&&(A=parseFloat(E[w-1])||0,v._pt={_next:v._pt,p:S||1===w?S:",",s:A,c:"="===D.charAt(1)?$l(A,D)-A:parseFloat(D)-A,m:T&&T<4?Math.round:0},x=x0.lastIndex);return v.c=x<p.length?p.substring(x,p.length):"",v.fp=y,(gM.test(p)||I)&&(v.e=0),this._pt=v,v},k0=function(u,c,f,p,g,_,y,v,x,w){fr(p)&&(p=p(g||0,u,_));var D,C=u[c],E="get"!==f?f:fr(C)?x?u[c.indexOf("set")||!fr(u["get"+c.substr(3)])?c:"get"+c.substr(3)](x):u[c]():C,T=fr(C)?x?J7:eP:V0;if(Br(p)&&(~p.indexOf("random(")&&(p=$c(p)),"="===p.charAt(1)&&((D=$l(E,p)+(Qr(E)||0))||0===D)&&(p=D)),!w||E!==p||B0)return isNaN(E*p)||""===p?(!C&&!(c in u)&&C0(c,p),q7.call(this,u,c,E,p,T,v||Un.stringFilter,x)):(D=new Cn(this._pt,u,c,+E||0,p-(E||0),"boolean"==typeof C?tW:tP,0,T),x&&(D.fp=x),y&&D.modifier(y,this,u),this._pt=D)},ZM=function(u,c,f,p,g,_){var y,v,x,w;if(Hn[u]&&!1!==(y=new Hn[u]).init(g,y.rawVars?c[u]:function(u,c,f,p,g){if(fr(u)&&(u=Kc(u,g,c,f,p)),!es(u)||u.style&&u.nodeType||Zr(u)||fM(u))return Br(u)?Kc(u,g,c,f,p):u;var y,_={};for(y in u)_[y]=Kc(u[y],g,c,f,p);return _}(c[u],p,g,_,f),f,p,_)&&(f._pt=v=new Cn(f._pt,g,u,0,1,y.render,y,0,y.priority),f!==ql))for(x=f._ptLookup[f._targets.indexOf(g)],w=y._props.length;w--;)x[y._props[w]]=v;return y},U0=function d(u,c,f){var H,G,z,ce,ie,le,te,re,Ie,$e,Q,Le,tt,p=u.vars,g=p.ease,_=p.startAt,y=p.immediateRender,v=p.lazy,x=p.onUpdate,w=p.onUpdateParams,C=p.callbackScope,E=p.runBackwards,T=p.yoyoEase,D=p.keyframes,S=p.autoRevert,A=u._dur,I=u._startAt,P=u._targets,M=u.parent,R=M&&"nested"===M.data?M.vars.targets:P,L="auto"===u._overwrite&&!g0,j=u.timeline;if(j&&(!D||!g)&&(g="none"),u._ease=ma(g,Gl.ease),u._yEase=T?XM(ma(!0===T?g:T,Gl.ease)):0,T&&u._yoyo&&!u._repeat&&(T=u._yEase,u._yEase=u._ease,u._ease=T),u._from=!j&&!!p.runBackwards,!j||D&&!p.stagger){if(Le=(re=P[0]?fa(P[0]).harness:0)&&p[re.prop],H=wp(p,E0),I&&(I._zTime<0&&I.progress(1),c<0&&E&&y&&!S?I.render(-1,!0):I.revert(E&&A?vp:C7),I._lazy=0),_){if(yo(u._startAt=Tr.set(P,oi({data:"isStart",overwrite:!1,parent:M,immediateRender:!0,lazy:!I&&xn(v),startAt:null,delay:0,onUpdate:x,onUpdateParams:w,callbackScope:C,stagger:0},_))),u._startAt._dp=0,u._startAt._sat=u,c<0&&(Kr||!y&&!S)&&u._startAt.revert(vp),y&&A&&c<=0&&f<=0)return void(c&&(u._zTime=c))}else if(E&&A&&!I)if(c&&(y=!1),z=oi({overwrite:!1,data:"isFromStart",lazy:y&&!I&&xn(v),immediateRender:y,stagger:0,parent:M},H),Le&&(z[re.prop]=Le),yo(u._startAt=Tr.set(P,z)),u._startAt._dp=0,u._startAt._sat=u,c<0&&(Kr?u._startAt.revert(vp):u._startAt.render(-1,!0)),u._zTime=c,y){if(!c)return}else d(u._startAt,Wt,Wt);for(u._pt=u._ptCache=0,v=A&&xn(v)||v&&!A,G=0;G<P.length;G++){if(te=(ie=P[G])._gsap||A0(P)[G]._gsap,u._ptLookup[G]=$e={},T0[te.id]&&_o.length&&bp(),Q=R===P?G:R.indexOf(ie),re&&!1!==(Ie=new re).init(ie,Le||H,u,Q,R)&&(u._pt=ce=new Cn(u._pt,ie,Ie.name,0,1,Ie.render,Ie,0,Ie.priority),Ie._props.forEach(function(Je){$e[Je]=ce}),Ie.priority&&(le=1)),!re||Le)for(z in H)Hn[z]&&(Ie=ZM(z,H,u,Q,ie,R))?Ie.priority&&(le=1):$e[z]=ce=k0.call(u,ie,z,"get",H[z],Q,R,0,p.stringFilter);u._op&&u._op[G]&&u.kill(ie,u._op[G]),L&&u._pt&&(bo=u,ar.killTweensOf(ie,$e,u.globalTime(c)),tt=!u.parent,bo=0),u._pt&&v&&(T0[te.id]=1)}le&&nP(u),u._onInit&&u._onInit(u)}u._onUpdate=x,u._initted=(!u._op||u._pt)&&!tt,D&&c<=0&&j.render(ii,!0,!0)},Q7=function(u,c,f,p){var _,y,g=c.ease||p||"power1.inOut";if(Zr(c))y=f[u]||(f[u]=[]),c.forEach(function(v,x){return y.push({t:x/(c.length-1)*100,v,e:g})});else for(_ in c)y=f[_]||(f[_]=[]),"ease"===_||y.push({t:parseFloat(u),v:c[_],e:g})},Kc=function(u,c,f,p,g){return fr(u)?u.call(c,f,p,g):Br(u)&&~u.indexOf("random(")?$c(u):u},QM=D0+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",JM={};bn(QM+",id,stagger,delay,duration,paused,scrollTrigger",function(d){return JM[d]=1});var Tr=function(d){function u(f,p,g,_){var y;"number"==typeof p&&(g.duration=p,p=g,g=null);var R,L,j,H,G,z,ce,ie,v=(y=d.call(this,_?p:jc(p))||this).vars,x=v.duration,w=v.delay,C=v.immediateRender,E=v.stagger,T=v.overwrite,D=v.keyframes,S=v.defaults,A=v.scrollTrigger,I=v.yoyoEase,P=p.parent||ar,M=(Zr(f)||fM(f)?Os(f[0]):"length"in p)?[f]:li(f);if(y._targets=M.length?A0(M):yp("GSAP target "+f+" not found. https://greensock.com",!Un.nullTargetWarn)||[],y._ptLookup=[],y._overwrite=T,D||E||mp(x)||mp(w)){if(p=y.vars,(R=y.timeline=new wn({data:"nested",defaults:S||{},targets:P&&"nested"===P.data?P.vars.targets:M})).kill(),R.parent=R._dp=Fs(y),R._start=0,E||mp(x)||mp(w)){if(H=M.length,ce=E&&NM(E),es(E))for(G in E)~QM.indexOf(G)&&(ie||(ie={}),ie[G]=E[G]);for(L=0;L<H;L++)(j=wp(p,JM)).stagger=0,I&&(j.yoyoEase=I),ie&&pa(j,ie),z=M[L],j.duration=+Kc(x,Fs(y),L,z,M),j.delay=(+Kc(w,Fs(y),L,z,M)||0)-y._delay,!E&&1===H&&j.delay&&(y._delay=w=j.delay,y._start+=w,j.delay=0),R.to(z,j,ce?ce(L,z,M):0),R._ease=Ot.none;R.duration()?x=w=0:y.timeline=0}else if(D){jc(oi(R.vars.defaults,{ease:"none"})),R._ease=ma(D.ease||p.ease||"none");var te,re,Ie,le=0;if(Zr(D))D.forEach(function($e){return R.to(M,$e,">")}),R.duration();else{for(G in j={},D)"ease"===G||"easeEach"===G||Q7(G,D[G],j,D.easeEach);for(G in j)for(te=j[G].sort(function($e,Q){return $e.t-Q.t}),le=0,L=0;L<te.length;L++)(Ie={ease:(re=te[L]).e,duration:(re.t-(L?te[L-1].t:0))/100*x})[G]=re.v,R.to(M,Ie,le),le+=Ie.duration;R.duration()<x&&R.to({},{duration:x-R.duration()})}}x||y.duration(x=R.duration())}else y.timeline=0;return!0===T&&!g0&&(bo=Fs(y),ar.killTweensOf(M),bo=0),ts(P,Fs(y),g),p.reversed&&y.reverse(),p.paused&&y.paused(!0),(C||!x&&!D&&y._start===jr(P._time)&&xn(C)&&I7(Fs(y))&&"nested"!==P.data)&&(y._tTime=-Wt,y.render(Math.max(0,-w)||0)),A&&MM(Fs(y),A),y}hM(u,d);var c=u.prototype;return c.render=function(p,g,_){var E,T,D,S,A,I,P,M,R,y=this._time,v=this._tDur,x=this._dur,w=p<0,C=p>v-Wt&&!w?v:p<Wt?0:p;if(x){if(C!==this._tTime||!p||_||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==w){if(E=C,M=this.timeline,this._repeat){if(S=x+this._rDelay,this._repeat<-1&&w)return this.totalTime(100*S+p,g,_);if(E=jr(C%S),C===v?(D=this._repeat,E=x):((D=~~(C/S))&&D===C/S&&(E=x,D--),E>x&&(E=x)),(I=this._yoyo&&1&D)&&(R=this._yEase,E=x-E),A=Wl(this._tTime,S),E===y&&!_&&this._initted)return this._tTime=C,this;D!==A&&(M&&this._yEase&&qM(M,I),this.vars.repeatRefresh&&!I&&!this._lock&&(this._lock=_=1,this.render(jr(S*D),!0).invalidate()._lock=0))}if(!this._initted){if(PM(this,w?p:E,_,g,C))return this._tTime=0,this;if(y!==this._time)return this;if(x!==this._dur)return this.render(p,g,_)}if(this._tTime=C,this._time=E,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=P=(R||this._ease)(E/x),this._from&&(this.ratio=P=1-P),E&&!y&&!g&&!D&&(ui(this,"onStart"),this._tTime!==C))return this;for(T=this._pt;T;)T.r(P,T.d),T=T._next;M&&M.render(p<0?p:!E&&I?-Wt:M._dur*M._ease(E/this._dur),g,_)||this._startAt&&(this._zTime=p),this._onUpdate&&!g&&(w&&I0(this,p,0,_),ui(this,"onUpdate")),this._repeat&&D!==A&&this.vars.onRepeat&&!g&&this.parent&&ui(this,"onRepeat"),(C===this._tDur||!C)&&this._tTime===C&&(w&&!this._onUpdate&&I0(this,p,0,!0),(p||!x)&&(C===this._tDur&&this._ts>0||!C&&this._ts<0)&&yo(this,1),!g&&(!w||y)&&(C||y||I)&&(ui(this,C===v?"onComplete":"onReverseComplete",!0),this._prom&&!(C<v&&this.timeScale()>0)&&this._prom()))}}else!function(u,c,f,p){var x,w,C,g=u.ratio,_=c<0||!c&&(!u._start&&M7(u)&&(u._initted||!M0(u))||(u._ts<0||u._dp._ts<0)&&!M0(u))?0:1,y=u._rDelay,v=0;if(y&&u._repeat&&(v=zc(0,u._tDur,c),w=Wl(v,y),u._yoyo&&1&w&&(_=1-_),w!==Wl(u._tTime,y)&&(g=1-_,u.vars.repeatRefresh&&u._initted&&u.invalidate())),_!==g||Kr||p||u._zTime===Wt||!c&&u._zTime){if(!u._initted&&PM(u,c,p,f,v))return;for(C=u._zTime,u._zTime=c||(f?Wt:0),f||(f=c&&!C),u.ratio=_,u._from&&(_=1-_),u._time=0,u._tTime=v,x=u._pt;x;)x.r(_,x.d),x=x._next;c<0&&I0(u,c,0,!0),u._onUpdate&&!f&&ui(u,"onUpdate"),v&&u._repeat&&!f&&u.parent&&ui(u,"onRepeat"),(c>=u._tDur||c<0)&&u.ratio===_&&(_&&yo(u,1),!f&&!Kr&&(ui(u,_?"onComplete":"onReverseComplete",!0),u._prom&&u._prom()))}else u._zTime||(u._zTime=c)}(this,p,g,_);return this},c.targets=function(){return this._targets},c.invalidate=function(p){return(!p||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(p),d.prototype.invalidate.call(this,p)},c.resetTo=function(p,g,_,y){qc||jn.wake(),this._ts||this.play();var v=Math.min(this._dur,(this._dp._time-this._start)*this._ts);return this._initted||U0(this,v),function(u,c,f,p,g,_,y){var x,w,C,E,v=(u._pt&&u._ptCache||(u._ptCache={}))[c];if(!v)for(v=u._ptCache[c]=[],C=u._ptLookup,E=u._targets.length;E--;){if((x=C[E][c])&&x.d&&x.d._pt)for(x=x.d._pt;x&&x.p!==c&&x.fp!==c;)x=x._next;if(!x)return B0=1,u.vars[c]="+=0",U0(u,y),B0=0,1;v.push(x)}for(E=v.length;E--;)(x=(w=v[E])._pt||w).s=!p&&0!==p||g?x.s+(p||0)+_*x.c:p,x.c=f-x.s,w.e&&(w.e=yr(f)+Qr(w.e)),w.b&&(w.b=x.s+Qr(w.b))}(this,p,g,_,y,this._ease(v/this._dur),v)?this.resetTo(p,g,_,y):(Sp(this,0),this.parent||DM(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},c.kill=function(p,g){if(void 0===g&&(g="all"),!(p||g&&"all"!==g))return this._lazy=this._pt=0,this.parent?Wc(this):this;if(this.timeline){var _=this.timeline.totalDuration();return this.timeline.killTweensOf(p,g,bo&&!0!==bo.vars.overwrite)._first||Wc(this),this.parent&&_!==this.timeline.totalDuration()&&Xl(this,this._dur*this.timeline._tDur/_,0,1),this}var C,E,T,D,S,A,I,y=this._targets,v=p?li(p):y,x=this._ptLookup,w=this._pt;if((!g||"all"===g)&&function(u,c){for(var f=u.length,p=f===c.length;p&&f--&&u[f]===c[f];);return f<0}(y,v))return"all"===g&&(this._pt=0),Wc(this);for(C=this._op=this._op||[],"all"!==g&&(Br(g)&&(S={},bn(g,function(P){return S[P]=1}),g=S),g=function(u,c){var g,_,y,v,f=u[0]?fa(u[0]).harness:0,p=f&&f.aliases;if(!p)return c;for(_ in g=pa({},c),p)if(_ in g)for(y=(v=p[_].split(",")).length;y--;)g[v[y]]=g[_];return g}(y,g)),I=y.length;I--;)if(~v.indexOf(y[I]))for(S in E=x[I],"all"===g?(C[I]=g,D=E,T={}):(T=C[I]=C[I]||{},D=g),D)(A=E&&E[S])&&((!("kill"in A.d)||!0===A.d.kill(S))&&Cp(this,A,"_pt"),delete E[S]),"all"!==T&&(T[S]=1);return this._initted&&!this._pt&&w&&Wc(this),this},u.to=function(p,g){return new u(p,g,arguments[2])},u.from=function(p,g){return Gc(1,arguments)},u.delayedCall=function(p,g,_,y){return new u(g,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:p,onComplete:g,onReverseComplete:g,onCompleteParams:_,onReverseCompleteParams:_,callbackScope:y})},u.fromTo=function(p,g,_){return Gc(2,arguments)},u.set=function(p,g){return g.duration=0,g.repeatDelay||(g.repeat=0),new u(p,g)},u.killTweensOf=function(p,g,_){return ar.killTweensOf(p,g,_)},u}(Yc);oi(Tr.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),bn("staggerTo,staggerFrom,staggerFromTo",function(d){Tr[d]=function(){var u=new wn,c=P0.call(arguments,0);return c.splice("staggerFromTo"===d?5:4,0,0),u[d].apply(u,c)}});var V0=function(u,c,f){return u[c]=f},eP=function(u,c,f){return u[c](f)},J7=function(u,c,f,p){return u[c](p.fp,f)},eW=function(u,c,f){return u.setAttribute(c,f)},H0=function(u,c){return fr(u[c])?eP:_0(u[c])&&u.setAttribute?eW:V0},tP=function(u,c){return c.set(c.t,c.p,Math.round(1e6*(c.s+c.c*u))/1e6,c)},tW=function(u,c){return c.set(c.t,c.p,!!(c.s+c.c*u),c)},rP=function(u,c){var f=c._pt,p="";if(!u&&c.b)p=c.b;else if(1===u&&c.e)p=c.e;else{for(;f;)p=f.p+(f.m?f.m(f.s+f.c*u):Math.round(1e4*(f.s+f.c*u))/1e4)+p,f=f._next;p+=c.c}c.set(c.t,c.p,p,c)},j0=function(u,c){for(var f=c._pt;f;)f.r(u,f.d),f=f._next},rW=function(u,c,f,p){for(var _,g=this._pt;g;)_=g._next,g.p===p&&g.modifier(u,c,f),g=_},nW=function(u){for(var f,p,c=this._pt;c;)p=c._next,c.p===u&&!c.op||c.op===u?Cp(this,c,"_pt"):c.dep||(f=1),c=p;return!f},iW=function(u,c,f,p){p.mSet(u,c,p.m.call(p.tween,f,p.mt),p)},nP=function(u){for(var f,p,g,_,c=u._pt;c;){for(f=c._next,p=g;p&&p.pr>c.pr;)p=p._next;(c._prev=p?p._prev:_)?c._prev._next=c:g=c,(c._next=p)?p._prev=c:_=c,c=f}u._pt=g},Cn=function(){function d(c,f,p,g,_,y,v,x,w){this.t=f,this.s=g,this.c=_,this.p=p,this.r=y||tP,this.d=v||this,this.set=x||V0,this.pr=w||0,this._next=c,c&&(c._prev=this)}return d.prototype.modifier=function(f,p,g){this.mSet=this.mSet||this.set,this.set=iW,this.m=f,this.mt=g,this.tween=p},d}();bn(D0+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(d){return E0[d]=1}),Vn.TweenMax=Vn.TweenLite=Tr,Vn.TimelineLite=Vn.TimelineMax=wn,ar=new wn({sortChildren:!1,defaults:Gl,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),Un.stringFilter=WM;var ya=[],Dp={},sW=[],iP=0,oW=0,G0=function(u){return(Dp[u]||sW).map(function(c){return c()})},z0=function(){var u=Date.now(),c=[];u-iP>2&&(G0("matchMediaInit"),ya.forEach(function(f){var _,y,v,x,p=f.queries,g=f.conditions;for(y in p)(_=si.matchMedia(p[y]).matches)&&(v=1),_!==g[y]&&(g[y]=_,x=1);x&&(f.revert(),v&&c.push(f))}),G0("matchMediaRevert"),c.forEach(function(f){return f.onMatch(f)}),iP=u,G0("matchMedia"))},sP=function(){function d(c,f){this.selector=f&&R0(f),this.data=[],this._r=[],this.isReverted=!1,this.id=oW++,c&&this.add(c)}var u=d.prototype;return u.add=function(f,p,g){fr(f)&&(g=p,p=f,f=fr);var _=this,y=function(){var C,x=dr,w=_.selector;return x&&x!==_&&x.data.push(_),g&&(_.selector=R0(g)),dr=_,C=p.apply(_,arguments),fr(C)&&_._r.push(C),dr=x,_.selector=w,_.isReverted=!1,C};return _.last=y,f===fr?y(_):f?_[f]=y:y},u.ignore=function(f){var p=dr;dr=null,f(this),dr=p},u.getTweens=function(){var f=[];return this.data.forEach(function(p){return p instanceof d?f.push.apply(f,p.getTweens()):p instanceof Tr&&!(p.parent&&"nested"===p.parent.data)&&f.push(p)}),f},u.clear=function(){this._r.length=this.data.length=0},u.kill=function(f,p){var g=this;if(f){var _=this.getTweens();this.data.forEach(function(v){"isFlip"===v.data&&(v.revert(),v.getChildren(!0,!0,!1).forEach(function(x){return _.splice(_.indexOf(x),1)}))}),_.map(function(v){return{g:v.globalTime(0),t:v}}).sort(function(v,x){return x.g-v.g||-1/0}).forEach(function(v){return v.t.revert(f)}),this.data.forEach(function(v){return!(v instanceof Tr)&&v.revert&&v.revert(f)}),this._r.forEach(function(v){return v(f,g)}),this.isReverted=!0}else this.data.forEach(function(v){return v.kill&&v.kill()});if(this.clear(),p)for(var y=ya.length;y--;)ya[y].id===this.id&&ya.splice(y,1)},u.revert=function(f){this.kill(f||{})},d}(),aW=function(){function d(c){this.contexts=[],this.scope=c}var u=d.prototype;return u.add=function(f,p,g){es(f)||(f={matches:f});var v,x,w,_=new sP(0,g||this.scope),y=_.conditions={};for(x in dr&&!_.selector&&(_.selector=dr.selector),this.contexts.push(_),p=_.add("onMatch",p),_.queries=f,f)"all"===x?w=1:(v=si.matchMedia(f[x]))&&(ya.indexOf(_)<0&&ya.push(_),(y[x]=v.matches)&&(w=1),v.addListener?v.addListener(z0):v.addEventListener("change",z0));return w&&p(_),this},u.revert=function(f){this.kill(f||{})},u.kill=function(f){this.contexts.forEach(function(p){return p.kill(f,!0)})},d}(),Ap={registerPlugin:function(){for(var u=arguments.length,c=new Array(u),f=0;f<u;f++)c[f]=arguments[f];c.forEach(function(p){return jM(p)})},timeline:function(u){return new wn(u)},getTweensOf:function(u,c){return ar.getTweensOf(u,c)},getProperty:function(u,c,f,p){Br(u)&&(u=li(u)[0]);var g=fa(u||{}).get,_=f?TM:EM;return"native"===f&&(f=""),u&&(c?_((Hn[c]&&Hn[c].get||g)(u,c,f,p)):function(y,v,x){return _((Hn[y]&&Hn[y].get||g)(u,y,v,x))})},quickSetter:function(u,c,f){if((u=li(u)).length>1){var p=u.map(function(w){return En.quickSetter(w,c,f)}),g=p.length;return function(w){for(var C=g;C--;)p[C](w)}}var _=Hn[c],y=fa(u=u[0]||{}),v=y.harness&&(y.harness.aliases||{})[c]||c,x=_?function(w){var C=new _;ql._pt=0,C.init(u,f?w+f:w,ql,0,[u]),C.render(1,C),ql._pt&&j0(1,ql)}:y.set(u,v);return _?x:function(w){return x(u,v,f?w+f:w,y,1)}},quickTo:function(u,c,f){var p,g=En.to(u,pa(((p={})[c]="+=0.1",p.paused=!0,p),f||{})),_=function(v,x,w){return g.resetTo(c,v,x,w)};return _.tween=g,_},isTweening:function(u){return ar.getTweensOf(u,!0).length>0},defaults:function(u){return u&&u.ease&&(u.ease=ma(u.ease,Gl.ease)),SM(Gl,u||{})},config:function(u){return SM(Un,u||{})},registerEffect:function(u){var c=u.name,f=u.effect,g=u.defaults,_=u.extendTimeline;(u.plugins||"").split(",").forEach(function(y){return y&&!Hn[y]&&!Vn[y]&&yp(c+" effect requires "+y+" plugin.")}),S0[c]=function(y,v,x){return f(li(y),oi(v||{},g),x)},_&&(wn.prototype[c]=function(y,v,x){return this.add(S0[c](y,es(v)?v:(x=v)&&{},this),x)})},registerEase:function(u,c){Ot[u]=ma(c)},parseEase:function(u,c){return arguments.length?ma(u,c):Ot},getById:function(u){return ar.getById(u)},exportRoot:function(u,c){void 0===u&&(u={});var p,g,f=new wn(u);for(f.smoothChildTiming=xn(u.smoothChildTiming),ar.remove(f),f._dp=0,f._time=f._tTime=ar._time,p=ar._first;p;)g=p._next,(c||!(!p._dur&&p instanceof Tr&&p.vars.onComplete===p._targets[0]))&&ts(f,p,p._start-p._delay),p=g;return ts(ar,f,0),f},context:function(u,c){return u?new sP(u,c):dr},matchMedia:function(u){return new aW(u)},matchMediaRefresh:function(){return ya.forEach(function(u){var f,p,c=u.conditions;for(p in c)c[p]&&(c[p]=!1,f=1);f&&u.revert()})||z0()},addEventListener:function(u,c){var f=Dp[u]||(Dp[u]=[]);~f.indexOf(c)||f.push(c)},removeEventListener:function(u,c){var f=Dp[u],p=f&&f.indexOf(c);p>=0&&f.splice(p,1)},utils:{wrap:function d(u,c,f){var p=c-u;return Zr(u)?BM(u,d(0,u.length),c):vo(f,function(g){return(p+(g-u)%p)%p+u})},wrapYoyo:function d(u,c,f){var p=c-u,g=2*p;return Zr(u)?BM(u,d(0,u.length-1),c):vo(f,function(_){return u+((_=(g+(_-u)%g)%g||0)>p?g-_:_)})},distribute:NM,random:kM,snap:LM,normalize:function(u,c,f){return UM(u,c,0,1,f)},getUnit:Qr,clamp:function(u,c,f){return vo(f,function(p){return zc(u,c,p)})},splitColor:GM,toArray:li,selector:R0,mapRange:UM,pipe:function(){for(var u=arguments.length,c=new Array(u),f=0;f<u;f++)c[f]=arguments[f];return function(p){return c.reduce(function(g,_){return _(g)},p)}},unitize:function(u,c){return function(f){return u(parseFloat(f))+(c||Qr(f))}},interpolate:function d(u,c,f,p){var g=isNaN(u+c)?0:function(T){return(1-T)*u+T*c};if(!g){var v,x,w,C,E,_=Br(u),y={};if(!0===f&&(p=1)&&(f=null),_)u={p:u},c={p:c};else if(Zr(u)&&!Zr(c)){for(w=[],E=(C=u.length)-2,x=1;x<C;x++)w.push(d(u[x-1],u[x]));C--,g=function(D){D*=C;var S=Math.min(E,~~D);return w[S](D-S)},f=c}else p||(u=pa(Zr(u)?[]:{},u));if(!w){for(v in c)k0.call(y,u,v,"get",c[v]);g=function(D){return j0(D,y)||(_?u.p:u)}}}return vo(f,g)},shuffle:OM},install:yM,effects:S0,ticker:jn,updateRoot:wn.updateRoot,plugins:Hn,globalTimeline:ar,core:{PropTween:Cn,globals:vM,Tween:Tr,Timeline:wn,Animation:Yc,getCache:fa,_removeLinkedListItem:Cp,reverting:function(){return Kr},context:function(u){return u&&dr&&(dr.data.push(u),u._ctx=dr),dr},suppressOverwrites:function(u){return g0=u}}};bn("to,from,fromTo,delayedCall,set,killTweensOf",function(d){return Ap[d]=Tr[d]}),jn.add(wn.updateRoot),ql=Ap.to({},{duration:0});var lW=function(u,c){for(var f=u._pt;f&&f.p!==c&&f.op!==c&&f.fp!==c;)f=f._next;return f},$0=function(u,c){return{name:u,rawVars:1,init:function(p,g,_){_._onInit=function(y){var v,x;if(Br(g)&&(v={},bn(g,function(w){return v[w]=1}),g=v),c){for(x in v={},g)v[x]=c(g[x]);g=v}!function(u,c){var p,g,_,f=u._targets;for(p in c)for(g=f.length;g--;)(_=u._ptLookup[g][p])&&(_=_.d)&&(_._pt&&(_=lW(_,p)),_&&_.modifier&&_.modifier(c[p],u,f[g],p))}(y,g)}}}},En=Ap.registerPlugin({name:"attr",init:function(u,c,f,p,g){var _,y,v;for(_ in this.tween=f,c)v=u.getAttribute(_)||"",(y=this.add(u,"setAttribute",(v||0)+"",c[_],p,g,0,0,_)).op=_,y.b=v,this._props.push(_)},render:function(u,c){for(var f=c._pt;f;)Kr?f.set(f.t,f.p,f.b,f):f.r(u,f.d),f=f._next}},{name:"endArray",init:function(u,c){for(var f=c.length;f--;)this.add(u,f,u[f]||0,c[f],0,0,0,0,0,1)}},$0("roundProps",F0),$0("modifiers"),$0("snap",LM))||Ap;Tr.version=wn.version=En.version="3.12.2",_M=1,y0()&&Yl();var oP,wo,Kl,W0,va,aP,X0,fP,Ns={},xa=180/Math.PI,Zl=Math.PI/180,Ql=Math.atan2,lP=1e8,q0=/([A-Z])/g,dW=/(left|right|width|margin|padding|x)/i,fW=/[\s,\(]\S/,rs={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Y0=function(u,c){return c.set(c.t,c.p,Math.round(1e4*(c.s+c.c*u))/1e4+c.u,c)},pW=function(u,c){return c.set(c.t,c.p,1===u?c.e:Math.round(1e4*(c.s+c.c*u))/1e4+c.u,c)},gW=function(u,c){return c.set(c.t,c.p,u?Math.round(1e4*(c.s+c.c*u))/1e4+c.u:c.b,c)},mW=function(u,c){var f=c.s+c.c*u;c.set(c.t,c.p,~~(f+(f<0?-.5:.5))+c.u,c)},uP=function(u,c){return c.set(c.t,c.p,u?c.e:c.b,c)},cP=function(u,c){return c.set(c.t,c.p,1!==u?c.b:c.e,c)},_W=function(u,c,f){return u.style[c]=f},yW=function(u,c,f){return u.style.setProperty(c,f)},vW=function(u,c,f){return u._gsap[c]=f},xW=function(u,c,f){return u._gsap.scaleX=u._gsap.scaleY=f},bW=function(u,c,f,p,g){var _=u._gsap;_.scaleX=_.scaleY=f,_.renderTransform(g,_)},wW=function(u,c,f,p,g){var _=u._gsap;_[c]=f,_.renderTransform(g,_)},lr="transform",Ri=lr+"Origin",CW=function d(u,c){var f=this,p=this.target,g=p.style;if(u in Ns&&g){if(this.tfm=this.tfm||{},"transform"===u)return rs.transform.split(",").forEach(function(_){return d.call(f,_,c)});if(~(u=rs[u]||u).indexOf(",")?u.split(",").forEach(function(_){return f.tfm[_]=Ls(p,_)}):this.tfm[u]=p._gsap.x?p._gsap[u]:Ls(p,u),this.props.indexOf(lr)>=0)return;p._gsap.svg&&(this.svgo=p.getAttribute("data-svg-origin"),this.props.push(Ri,c,"")),u=lr}(g||c)&&this.props.push(u,c,g[u])},hP=function(u){u.translate&&(u.removeProperty("translate"),u.removeProperty("scale"),u.removeProperty("rotate"))},EW=function(){var g,_,u=this.props,c=this.target,f=c.style,p=c._gsap;for(g=0;g<u.length;g+=3)u[g+1]?c[u[g]]=u[g+2]:u[g+2]?f[u[g]]=u[g+2]:f.removeProperty("--"===u[g].substr(0,2)?u[g]:u[g].replace(q0,"-$1").toLowerCase());if(this.tfm){for(_ in this.tfm)p[_]=this.tfm[_];p.svg&&(p.renderTransform(),c.setAttribute("data-svg-origin",this.svgo||"")),(!(g=X0())||!g.isStart)&&!f[lr]&&(hP(f),p.uncache=1)}},dP=function(u,c){var f={target:u,props:[],revert:EW,save:CW};return u._gsap||En.core.getCache(u),c&&c.split(",").forEach(function(p){return f.save(p)}),f},K0=function(u,c){var f=wo.createElementNS?wo.createElementNS((c||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),u):wo.createElement(u);return f.style?f:wo.createElement(u)},ns=function d(u,c,f){var p=getComputedStyle(u);return p[c]||p.getPropertyValue(c.replace(q0,"-$1").toLowerCase())||p.getPropertyValue(c)||!f&&d(u,Jl(c)||c,1)||""},pP="O,Moz,ms,Ms,Webkit".split(","),Jl=function(u,c,f){var g=(c||va).style,_=5;if(u in g&&!f)return u;for(u=u.charAt(0).toUpperCase()+u.substr(1);_--&&!(pP[_]+u in g););return _<0?null:(3===_?"ms":_>=0?pP[_]:"")+u},Z0=function(){typeof window<"u"&&window.document&&(oP=window,Kl=(wo=oP.document).documentElement,va=K0("div")||{style:{}},K0("div"),lr=Jl(lr),Ri=lr+"Origin",va.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",fP=!!Jl("perspective"),X0=En.core.reverting,W0=1)},Q0=function d(u){var _,c=K0("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),f=this.parentNode,p=this.nextSibling,g=this.style.cssText;if(Kl.appendChild(c),c.appendChild(this),this.style.display="block",u)try{_=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=d}catch{}else this._gsapBBox&&(_=this._gsapBBox());return f&&(p?f.insertBefore(this,p):f.appendChild(this)),Kl.removeChild(c),this.style.cssText=g,_},gP=function(u,c){for(var f=c.length;f--;)if(u.hasAttribute(c[f]))return u.getAttribute(c[f])},mP=function(u){var c;try{c=u.getBBox()}catch{c=Q0.call(u,!0)}return c&&(c.width||c.height)||u.getBBox===Q0||(c=Q0.call(u,!0)),!c||c.width||c.x||c.y?c:{x:+gP(u,["x","cx","x1"])||0,y:+gP(u,["y","cy","y1"])||0,width:0,height:0}},_P=function(u){return!(!u.getCTM||u.parentNode&&!u.ownerSVGElement||!mP(u))},Zc=function(u,c){if(c){var f=u.style;c in Ns&&c!==Ri&&(c=lr),f.removeProperty?(("ms"===c.substr(0,2)||"webkit"===c.substr(0,6))&&(c="-"+c),f.removeProperty(c.replace(q0,"-$1").toLowerCase())):f.removeAttribute(c)}},Co=function(u,c,f,p,g,_){var y=new Cn(u._pt,c,f,0,1,_?cP:uP);return u._pt=y,y.b=p,y.e=g,u._props.push(f),y},yP={deg:1,rad:1,turn:1},TW={grid:1,flex:1},Eo=function d(u,c,f,p){var D,S,A,I,g=parseFloat(f)||0,_=(f+"").trim().substr((g+"").length)||"px",y=va.style,v=dW.test(c),x="svg"===u.tagName.toLowerCase(),w=(x?"client":"offset")+(v?"Width":"Height"),C=100,E="px"===p,T="%"===p;return p===_||!g||yP[p]||yP[_]?g:("px"!==_&&!E&&(g=d(u,c,f,"px")),I=u.getCTM&&_P(u),!T&&"%"!==_||!Ns[c]&&!~c.indexOf("adius")?(y[v?"width":"height"]=C+(E?_:p),S=~c.indexOf("adius")||"em"===p&&u.appendChild&&!x?u:u.parentNode,I&&(S=(u.ownerSVGElement||{}).parentNode),(!S||S===wo||!S.appendChild)&&(S=wo.body),(A=S._gsap)&&T&&A.width&&v&&A.time===jn.time&&!A.uncache?yr(g/A.width*C):((T||"%"===_)&&!TW[ns(S,"display")]&&(y.position=ns(u,"position")),S===u&&(y.position="static"),S.appendChild(va),D=va[w],S.removeChild(va),y.position="absolute",v&&T&&((A=fa(S)).time=jn.time,A.width=S[w]),yr(E?D*g/C:D&&g?C/D*g:0))):(D=I?u.getBBox()[v?"width":"height"]:u[w],yr(T?g/D*C:g/100*D)))},Ls=function(u,c,f,p){var g;return W0||Z0(),c in rs&&"transform"!==c&&~(c=rs[c]).indexOf(",")&&(c=c.split(",")[0]),Ns[c]&&"transform"!==c?(g=Jc(u,p),g="transformOrigin"!==c?g[c]:g.svg?g.origin:Mp(ns(u,Ri))+" "+g.zOrigin+"px"):(!(g=u.style[c])||"auto"===g||p||~(g+"").indexOf("calc("))&&(g=Ip[c]&&Ip[c](u,c,f)||ns(u,c)||wM(u,c)||("opacity"===c?1:0)),f&&!~(g+"").trim().indexOf(" ")?Eo(u,c,g,f)+f:g},SW=function(u,c,f,p){if(!f||"none"===f){var g=Jl(c,u,1),_=g&&ns(u,g,1);_&&_!==f?(c=g,f=_):"borderColor"===c&&(f=ns(u,"borderTopColor"))}var w,C,E,T,D,S,A,I,P,M,R,y=new Cn(this._pt,u.style,c,0,1,rP),v=0,x=0;if(y.b=f,y.e=p,f+="","auto"==(p+="")&&(u.style[c]=p,p=ns(u,c)||p,u.style[c]=f),WM(w=[f,p]),p=w[1],E=(f=w[0]).match(zl)||[],(p.match(zl)||[]).length){for(;C=zl.exec(p);)A=C[0],P=p.substring(v,C.index),D?D=(D+1)%5:("rgba("===P.substr(-5)||"hsla("===P.substr(-5))&&(D=1),A!==(S=E[x++]||"")&&(T=parseFloat(S)||0,R=S.substr((T+"").length),"="===A.charAt(1)&&(A=$l(T,A)+R),I=parseFloat(A),M=A.substr((I+"").length),v=zl.lastIndex-M.length,M||(M=M||Un.units[c]||R,v===p.length&&(p+=M,y.e+=M)),R!==M&&(T=Eo(u,c,S,M)||0),y._pt={_next:y._pt,p:P||1===x?P:",",s:T,c:I-T,m:D&&D<4||"zIndex"===c?Math.round:0});y.c=v<p.length?p.substring(v,p.length):""}else y.r="display"===c&&"none"===p?cP:uP;return gM.test(p)&&(y.e=0),this._pt=y,y},vP={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},DW=function(u){var c=u.split(" "),f=c[0],p=c[1]||"50%";return("top"===f||"bottom"===f||"left"===p||"right"===p)&&(u=f,f=p,p=u),c[0]=vP[f]||f,c[1]=vP[p]||p,c.join(" ")},AW=function(u,c){if(c.tween&&c.tween._time===c.tween._dur){var y,v,x,f=c.t,p=f.style,g=c.u,_=f._gsap;if("all"===g||!0===g)p.cssText="",v=1;else for(x=(g=g.split(",")).length;--x>-1;)Ns[y=g[x]]&&(v=1,y="transformOrigin"===y?Ri:lr),Zc(f,y);v&&(Zc(f,lr),_&&(_.svg&&f.removeAttribute("transform"),Jc(f,1),_.uncache=1,hP(p)))}},Ip={clearProps:function(u,c,f,p,g){if("isFromStart"!==g.data){var _=u._pt=new Cn(u._pt,c,f,0,0,AW);return _.u=p,_.pr=-10,_.tween=g,u._props.push(f),1}}},Qc=[1,0,0,1,0,0],xP={},bP=function(u){return"matrix(1, 0, 0, 1, 0, 0)"===u||"none"===u||!u},wP=function(u){var c=ns(u,lr);return bP(c)?Qc:c.substr(7).match(pM).map(yr)},J0=function(u,c){var _,y,v,x,f=u._gsap||fa(u),p=u.style,g=wP(u);return f.svg&&u.getAttribute("transform")?"1,0,0,1,0,0"===(g=[(v=u.transform.baseVal.consolidate().matrix).a,v.b,v.c,v.d,v.e,v.f]).join(",")?Qc:g:(g===Qc&&!u.offsetParent&&u!==Kl&&!f.svg&&(v=p.display,p.display="block",(!(_=u.parentNode)||!u.offsetParent)&&(x=1,y=u.nextElementSibling,Kl.appendChild(u)),g=wP(u),v?p.display=v:Zc(u,"display"),x&&(y?_.insertBefore(u,y):_?_.appendChild(u):Kl.removeChild(u))),c&&g.length>6?[g[0],g[1],g[4],g[5],g[12],g[13]]:g)},ex=function(u,c,f,p,g,_){var j,H,z,y=u._gsap,v=g||J0(u,!0),x=y.xOrigin||0,w=y.yOrigin||0,C=y.xOffset||0,E=y.yOffset||0,T=v[0],D=v[1],S=v[2],A=v[3],I=v[4],P=v[5],M=c.split(" "),R=parseFloat(M[0])||0,L=parseFloat(M[1])||0;f?v!==Qc&&(H=T*A-D*S)&&(z=R*(-D/H)+L*(T/H)-(T*P-D*I)/H,R=R*(A/H)+L*(-S/H)+(S*P-A*I)/H,L=z):(R=(j=mP(u)).x+(~M[0].indexOf("%")?R/100*j.width:R),L=j.y+(~(M[1]||M[0]).indexOf("%")?L/100*j.height:L)),p||!1!==p&&y.smooth?(y.xOffset=C+((I=R-x)*T+(P=L-w)*S)-I,y.yOffset=E+(I*D+P*A)-P):y.xOffset=y.yOffset=0,y.xOrigin=R,y.yOrigin=L,y.smooth=!!p,y.origin=c,y.originIsAbsolute=!!f,u.style[Ri]="0px 0px",_&&(Co(_,y,"xOrigin",x,R),Co(_,y,"yOrigin",w,L),Co(_,y,"xOffset",C,y.xOffset),Co(_,y,"yOffset",E,y.yOffset)),u.setAttribute("data-svg-origin",R+" "+L)},Jc=function(u,c){var f=u._gsap||new KM(u);if("x"in f&&!c&&!f.uncache)return f;var w,C,E,T,D,S,A,I,P,M,R,L,j,H,G,z,ce,ie,le,te,re,Ie,$e,Q,Le,tt,Je,tr,Gn,Gr,Sr,un,p=u.style,g=f.scaleX<0,_="px",y="deg",v=getComputedStyle(u),x=ns(u,Ri)||"0";return w=C=E=S=A=I=P=M=R=0,T=D=1,f.svg=!(!u.getCTM||!_P(u)),v.translate&&(("none"!==v.translate||"none"!==v.scale||"none"!==v.rotate)&&(p[lr]=("none"!==v.translate?"translate3d("+(v.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+("none"!==v.rotate?"rotate("+v.rotate+") ":"")+("none"!==v.scale?"scale("+v.scale.split(" ").join(",")+") ":"")+("none"!==v[lr]?v[lr]:"")),p.scale=p.rotate=p.translate="none"),H=J0(u,f.svg),f.svg&&(f.uncache?(Le=u.getBBox(),x=f.xOrigin-Le.x+"px "+(f.yOrigin-Le.y)+"px",Q=""):Q=!c&&u.getAttribute("data-svg-origin"),ex(u,Q||x,!!Q||f.originIsAbsolute,!1!==f.smooth,H)),L=f.xOrigin||0,j=f.yOrigin||0,H!==Qc&&(ie=H[0],le=H[1],te=H[2],re=H[3],w=Ie=H[4],C=$e=H[5],6===H.length?(T=Math.sqrt(ie*ie+le*le),D=Math.sqrt(re*re+te*te),S=ie||le?Ql(le,ie)*xa:0,(P=te||re?Ql(te,re)*xa+S:0)&&(D*=Math.abs(Math.cos(P*Zl))),f.svg&&(w-=L-(L*ie+j*te),C-=j-(L*le+j*re))):(Gr=H[7],Je=H[8],tr=H[9],Sr=H[11],w=H[12],C=H[13],E=H[14],A=(G=Ql(un=H[6],Gn=H[10]))*xa,G&&(Q=Ie*(z=Math.cos(-G))+Je*(ce=Math.sin(-G)),Le=$e*z+tr*ce,tt=un*z+Gn*ce,Je=Ie*-ce+Je*z,tr=$e*-ce+tr*z,Gn=un*-ce+Gn*z,Sr=Gr*-ce+Sr*z,Ie=Q,$e=Le,un=tt),I=(G=Ql(-te,Gn))*xa,G&&(z=Math.cos(-G),Sr=re*(ce=Math.sin(-G))+Sr*z,ie=Q=ie*z-Je*ce,le=Le=le*z-tr*ce,te=tt=te*z-Gn*ce),S=(G=Ql(le,ie))*xa,G&&(Q=ie*(z=Math.cos(G))+le*(ce=Math.sin(G)),Le=Ie*z+$e*ce,le=le*z-ie*ce,$e=$e*z-Ie*ce,ie=Q,Ie=Le),A&&Math.abs(A)+Math.abs(S)>359.9&&(A=S=0,I=180-I),T=yr(Math.sqrt(ie*ie+le*le+te*te)),D=yr(Math.sqrt($e*$e+un*un)),G=Ql(Ie,$e),P=Math.abs(G)>2e-4?G*xa:0,R=Sr?1/(Sr<0?-Sr:Sr):0),f.svg&&(Q=u.getAttribute("transform"),f.forceCSS=u.setAttribute("transform","")||!bP(ns(u,lr)),Q&&u.setAttribute("transform",Q))),Math.abs(P)>90&&Math.abs(P)<270&&(g?(T*=-1,P+=S<=0?180:-180,S+=S<=0?180:-180):(D*=-1,P+=P<=0?180:-180)),c=c||f.uncache,f.x=w-((f.xPercent=w&&(!c&&f.xPercent||(Math.round(u.offsetWidth/2)===Math.round(-w)?-50:0)))?u.offsetWidth*f.xPercent/100:0)+_,f.y=C-((f.yPercent=C&&(!c&&f.yPercent||(Math.round(u.offsetHeight/2)===Math.round(-C)?-50:0)))?u.offsetHeight*f.yPercent/100:0)+_,f.z=E+_,f.scaleX=yr(T),f.scaleY=yr(D),f.rotation=yr(S)+y,f.rotationX=yr(A)+y,f.rotationY=yr(I)+y,f.skewX=P+y,f.skewY=M+y,f.transformPerspective=R+_,(f.zOrigin=parseFloat(x.split(" ")[2])||0)&&(p[Ri]=Mp(x)),f.xOffset=f.yOffset=0,f.force3D=Un.force3D,f.renderTransform=f.svg?MW:fP?CP:IW,f.uncache=0,f},Mp=function(u){return(u=u.split(" "))[0]+" "+u[1]},tx=function(u,c,f){var p=Qr(c);return yr(parseFloat(c)+parseFloat(Eo(u,"x",f+"px",p)))+p},IW=function(u,c){c.z="0px",c.rotationY=c.rotationX="0deg",c.force3D=0,CP(u,c)},ba="0deg",eh="0px",wa=") ",CP=function(u,c){var f=c||this,p=f.xPercent,g=f.yPercent,_=f.x,y=f.y,v=f.z,x=f.rotation,w=f.rotationY,C=f.rotationX,E=f.skewX,T=f.skewY,D=f.scaleX,S=f.scaleY,A=f.transformPerspective,I=f.force3D,P=f.target,M=f.zOrigin,R="",L="auto"===I&&u&&1!==u||!0===I;if(M&&(C!==ba||w!==ba)){var z,j=parseFloat(w)*Zl,H=Math.sin(j),G=Math.cos(j);j=parseFloat(C)*Zl,z=Math.cos(j),_=tx(P,_,H*z*-M),y=tx(P,y,-Math.sin(j)*-M),v=tx(P,v,G*z*-M+M)}A!==eh&&(R+="perspective("+A+wa),(p||g)&&(R+="translate("+p+"%, "+g+"%) "),(L||_!==eh||y!==eh||v!==eh)&&(R+=v!==eh||L?"translate3d("+_+", "+y+", "+v+") ":"translate("+_+", "+y+wa),x!==ba&&(R+="rotate("+x+wa),w!==ba&&(R+="rotateY("+w+wa),C!==ba&&(R+="rotateX("+C+wa),(E!==ba||T!==ba)&&(R+="skew("+E+", "+T+wa),(1!==D||1!==S)&&(R+="scale("+D+", "+S+wa),P.style[lr]=R||"translate(0, 0)"},MW=function(u,c){var L,j,H,G,z,f=c||this,p=f.xPercent,g=f.yPercent,_=f.x,y=f.y,v=f.rotation,x=f.skewX,w=f.skewY,C=f.scaleX,E=f.scaleY,T=f.target,D=f.xOrigin,S=f.yOrigin,A=f.xOffset,I=f.yOffset,P=f.forceCSS,M=parseFloat(_),R=parseFloat(y);v=parseFloat(v),x=parseFloat(x),(w=parseFloat(w))&&(x+=w=parseFloat(w),v+=w),v||x?(v*=Zl,x*=Zl,L=Math.cos(v)*C,j=Math.sin(v)*C,H=Math.sin(v-x)*-E,G=Math.cos(v-x)*E,x&&(w*=Zl,z=Math.tan(x-w),H*=z=Math.sqrt(1+z*z),G*=z,w&&(z=Math.tan(w),L*=z=Math.sqrt(1+z*z),j*=z)),L=yr(L),j=yr(j),H=yr(H),G=yr(G)):(L=C,G=E,j=H=0),(M&&!~(_+"").indexOf("px")||R&&!~(y+"").indexOf("px"))&&(M=Eo(T,"x",_,"px"),R=Eo(T,"y",y,"px")),(D||S||A||I)&&(M=yr(M+D-(D*L+S*H)+A),R=yr(R+S-(D*j+S*G)+I)),(p||g)&&(z=T.getBBox(),M=yr(M+p/100*z.width),R=yr(R+g/100*z.height)),T.setAttribute("transform",z="matrix("+L+","+j+","+H+","+G+","+M+","+R+")"),P&&(T.style[lr]=z)},PW=function(u,c,f,p,g){var C,E,_=360,y=Br(g),x=parseFloat(g)*(y&&~g.indexOf("rad")?xa:1)-p,w=p+x+"deg";return y&&("short"===(C=g.split("_")[1])&&(x%=_)!=x%180&&(x+=x<0?_:-_),"cw"===C&&x<0?x=(x+_*lP)%_-~~(x/_)*_:"ccw"===C&&x>0&&(x=(x-_*lP)%_-~~(x/_)*_)),u._pt=E=new Cn(u._pt,c,f,p,x,pW),E.e=w,E.u="deg",u._props.push(f),E},EP=function(u,c){for(var f in c)u[f]=c[f];return u},RW=function(u,c,f){var y,v,x,w,C,E,D,p=EP({},f._gsap),_=f.style;for(v in p.svg?(x=f.getAttribute("transform"),f.setAttribute("transform",""),_[lr]=c,y=Jc(f,1),Zc(f,lr),f.setAttribute("transform",x)):(x=getComputedStyle(f)[lr],_[lr]=c,y=Jc(f,1),_[lr]=x),Ns)(x=p[v])!==(w=y[v])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(v)<0&&(C=Qr(x)!==(D=Qr(w))?Eo(f,v,x,D):parseFloat(x),E=parseFloat(w),u._pt=new Cn(u._pt,y,v,C,E-C,Y0),u._pt.u=D||0,u._props.push(v));EP(y,p)};bn("padding,margin,Width,Radius",function(d,u){var c="Top",f="Right",p="Bottom",g="Left",_=(u<3?[c,f,p,g]:[c+g,c+f,p+f,p+g]).map(function(y){return u<2?d+y:"border"+y+d});Ip[u>1?"border"+d:d]=function(y,v,x,w,C){var E,T;if(arguments.length<4)return E=_.map(function(D){return Ls(y,D,x)}),5===(T=E.join(" ")).split(E[0]).length?E[0]:T;E=(w+"").split(" "),T={},_.forEach(function(D,S){return T[D]=E[S]=E[S]||E[(S-1)/2|0]}),y.init(v,T,C)}});var TP={name:"css",register:Z0,targetTest:function(u){return u.style&&u.nodeType},init:function(u,c,f,p,g){var x,w,C,E,T,D,S,A,I,P,M,R,L,j,H,G,_=this._props,y=u.style,v=f.vars.startAt;for(S in W0||Z0(),this.styles=this.styles||dP(u),G=this.styles.props,this.tween=f,c)if("autoRound"!==S&&(w=c[S],!Hn[S]||!ZM(S,c,f,p,u,g)))if(D=Ip[S],"function"==(T=typeof w)&&(T=typeof(w=w.call(f,p,u,g))),"string"===T&&~w.indexOf("random(")&&(w=$c(w)),D)D(this,u,S,w,f)&&(H=1);else if("--"===S.substr(0,2))x=(getComputedStyle(u).getPropertyValue(S)+"").trim(),w+="",xo.lastIndex=0,xo.test(x)||(A=Qr(x),I=Qr(w)),I?A!==I&&(x=Eo(u,S,x,I)+I):A&&(w+=A),this.add(y,"setProperty",x,w,p,g,0,0,S),_.push(S),G.push(S,0,y[S]);else if("undefined"!==T){if(v&&S in v?(x="function"==typeof v[S]?v[S].call(f,p,u,g):v[S],Br(x)&&~x.indexOf("random(")&&(x=$c(x)),Qr(x+"")||(x+=Un.units[S]||Qr(Ls(u,S))||""),"="===(x+"").charAt(1)&&(x=Ls(u,S))):x=Ls(u,S),E=parseFloat(x),(P="string"===T&&"="===w.charAt(1)&&w.substr(0,2))&&(w=w.substr(2)),C=parseFloat(w),S in rs&&("autoAlpha"===S&&(1===E&&"hidden"===Ls(u,"visibility")&&C&&(E=0),G.push("visibility",0,y.visibility),Co(this,y,"visibility",E?"inherit":"hidden",C?"inherit":"hidden",!C)),"scale"!==S&&"transform"!==S&&~(S=rs[S]).indexOf(",")&&(S=S.split(",")[0])),M=S in Ns)if(this.styles.save(S),R||((L=u._gsap).renderTransform&&!c.parseTransform||Jc(u,c.parseTransform),j=!1!==c.smoothOrigin&&L.smooth,(R=this._pt=new Cn(this._pt,y,lr,0,1,L.renderTransform,L,0,-1)).dep=1),"scale"===S)this._pt=new Cn(this._pt,L,"scaleY",L.scaleY,(P?$l(L.scaleY,P+C):C)-L.scaleY||0,Y0),this._pt.u=0,_.push("scaleY",S),S+="X";else{if("transformOrigin"===S){G.push(Ri,0,y[Ri]),w=DW(w),L.svg?ex(u,w,0,j,0,this):((I=parseFloat(w.split(" ")[2])||0)!==L.zOrigin&&Co(this,L,"zOrigin",L.zOrigin,I),Co(this,y,S,Mp(x),Mp(w)));continue}if("svgOrigin"===S){ex(u,w,1,j,0,this);continue}if(S in xP){PW(this,L,S,E,P?$l(E,P+w):w);continue}if("smoothOrigin"===S){Co(this,L,"smooth",L.smooth,w);continue}if("force3D"===S){L[S]=w;continue}if("transform"===S){RW(this,w,u);continue}}else S in y||(S=Jl(S)||S);if(M||(C||0===C)&&(E||0===E)&&!fW.test(w)&&S in y)C||(C=0),(A=(x+"").substr((E+"").length))!==(I=Qr(w)||(S in Un.units?Un.units[S]:A))&&(E=Eo(u,S,x,I)),this._pt=new Cn(this._pt,M?L:y,S,E,(P?$l(E,P+C):C)-E,M||"px"!==I&&"zIndex"!==S||!1===c.autoRound?Y0:mW),this._pt.u=I||0,A!==I&&"%"!==I&&(this._pt.b=x,this._pt.r=gW);else if(S in y)SW.call(this,u,S,x,P?P+w:w);else if(S in u)this.add(u,S,x||u[S],P?P+w:w,p,g);else if("parseTransform"!==S){C0(S,w);continue}M||(S in y?G.push(S,0,y[S]):G.push(S,1,x||u[S])),_.push(S)}H&&nP(this)},render:function(u,c){if(c.tween._time||!X0())for(var f=c._pt;f;)f.r(u,f.d),f=f._next;else c.styles.revert()},get:Ls,aliases:rs,getSetter:function(u,c,f){var p=rs[c];return p&&p.indexOf(",")<0&&(c=p),c in Ns&&c!==Ri&&(u._gsap.x||Ls(u,"x"))?f&&aP===f?"scale"===c?xW:vW:(aP=f||{})&&("scale"===c?bW:wW):u.style&&!_0(u.style[c])?_W:~c.indexOf("-")?yW:H0(u,c)},core:{_removeProperty:Zc,_getMatrix:J0}};En.utils.checkPrefix=Jl,En.core.getStyleSaver=dP,function(d,u,c,f){var p=bn(d+","+u+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",function(g){Ns[g]=1});bn(u,function(g){Un.units[g]="deg",xP[g]=1}),rs[p[13]]=d+","+u,bn("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",function(g){var _=g.split(":");rs[_[1]]=p[_[0]]})}("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY"),bn("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(d){Un.units[d]="px"}),En.registerPlugin(TP);var Pp=En.registerPlugin(TP)||En,FW=/[achlmqstvz]|(-?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,NW=/[\+\-]?\d*\.?\d+e[\+\-]?\d+/gi,kW=Math.PI/180,Rp=(Math,Math.sin),Fp=Math.cos,Tn=Math.abs,ks=Math.sqrt,DP=(Math,function(u){return"number"==typeof u}),Vt=function(u){return Math.round(1e5*u)/1e5||0};function QW(d,u,c,f,p,g,_,y,v){if(d!==y||u!==v){c=Tn(c),f=Tn(f);var x=p%360*kW,w=Fp(x),C=Rp(x),E=Math.PI,T=2*E,D=(d-y)/2,S=(u-v)/2,A=w*D+C*S,I=-C*D+w*S,P=A*A,M=I*I,R=P/(c*c)+M/(f*f);R>1&&(c=ks(R)*c,f=ks(R)*f);var L=c*c,j=f*f,H=(L*j-L*M-j*P)/(L*M+j*P);H<0&&(H=0);var G=(g===_?-1:1)*ks(H),z=G*(c*I/f),ce=G*(-f*A/c),te=(d+y)/2+(w*z-C*ce),re=(u+v)/2+(C*z+w*ce),Ie=(A-z)/c,$e=(I-ce)/f,Q=(-A-z)/c,Le=(-I-ce)/f,tt=Ie*Ie+$e*$e,Je=($e<0?-1:1)*Math.acos(Ie/ks(tt)),tr=(Ie*Le-$e*Q<0?-1:1)*Math.acos((Ie*Q+$e*Le)/ks(tt*(Q*Q+Le*Le)));isNaN(tr)&&(tr=E),!_&&tr>0?tr-=T:_&&tr<0&&(tr+=T),Je%=T,tr%=T;var vr,Gn=Math.ceil(Tn(tr)/(T/4)),Gr=[],Sr=tr/Gn,un=4/3*Rp(Sr/2)/(1+Fp(Sr/2)),Up=w*c,tu=C*c,ru=C*-f,Vp=w*f;for(vr=0;vr<Gn;vr++)A=Fp(p=Je+vr*Sr),I=Rp(p),Ie=Fp(p+=Sr),$e=Rp(p),Gr.push(A-un*I,I+un*A,Ie+un*$e,$e-un*Ie,Ie,$e);for(vr=0;vr<Gr.length;vr+=2)Gr[vr]=(A=Gr[vr])*Up+(I=Gr[vr+1])*ru+te,Gr[vr+1]=A*tu+I*Vp+re;return Gr[vr-2]=y,Gr[vr-1]=v,Gr}}var Sn,NP,LP=function(){return Sn||typeof window<"u"&&(Sn=window.gsap)&&Sn.registerPlugin&&Sn},kP=function(){(Sn=LP())?(Sn.registerEase("_CE",th.create),NP=1):console.warn("Please gsap.registerPlugin(CustomEase)")},Bp=function(u){return~~(1e3*u+(u<0?-.5:.5))/1e3},r9=/[-+=\.]*\d+[\.e\-\+]*\d*[e\-\+]*\d*/gi,n9=/[cLlsSaAhHvVtTqQ]/g,o9=function d(u,c,f,p,g,_,y,v,x,w,C){var le,E=(u+f)/2,T=(c+p)/2,D=(f+g)/2,S=(p+_)/2,A=(g+y)/2,I=(_+v)/2,P=(E+D)/2,M=(T+S)/2,R=(D+A)/2,L=(S+I)/2,j=(P+R)/2,H=(M+L)/2,G=y-u,z=v-c,ce=Math.abs((f-y)*z-(p-v)*G),ie=Math.abs((g-y)*z-(_-v)*G);return w||(w=[{x:u,y:c},{x:y,y:v}],C=1),w.splice(C||w.length-1,0,{x:j,y:H}),(ce+ie)*(ce+ie)>x*(G*G+z*z)&&(le=w.length,d(u,c,E,T,P,M,j,H,x,w,C),d(j,H,R,L,A,I,y,v,x,w,C+1+(w.length-le))),w},th=function(){function d(c,f,p){NP||kP(),this.id=c,this.setData(f,p)}var u=d.prototype;return u.setData=function(f,p){p=p||{};var C,E,T,D,S,A,I,P,M,g=(f=f||"0,0,1,1").match(r9),_=1,y=[],v=[],x=p.precision||1,w=x<=1;if(this.data=f,(n9.test(f)||~f.indexOf("M")&&f.indexOf("C")<0)&&(g=function Lp(d){var x,w,C,E,T,D,S,A,I,P,M,R,L,j,H,u=(d+"").replace(NW,function(z){var ce=+z;return ce<1e-4&&ce>-1e-4?0:ce}).match(FW)||[],c=[],f=0,p=0,g=2/3,_=u.length,y=0,v="ERROR: malformed path: "+d,G=function(ce,ie,le,te){S.push(ce+(P=(le-ce)/3),ie+(M=(te-ie)/3),le-P,te-M,le,te)};if(!d||!isNaN(u[0])||isNaN(u[1]))return console.log(v),c;for(x=0;x<_;x++)if(L=T,isNaN(u[x])?D=(T=u[x].toUpperCase())!==u[x]:x--,C=+u[x+1],E=+u[x+2],D&&(C+=f,E+=p),x||(A=C,I=E),"M"===T)S&&(S.length<8?c.length-=1:y+=S.length),f=A=C,p=I=E,c.push(S=[C,E]),x+=2,T="L";else if("C"===T)S||(S=[0,0]),D||(f=p=0),S.push(C,E,f+1*u[x+3],p+1*u[x+4],f+=1*u[x+5],p+=1*u[x+6]),x+=6;else if("S"===T)P=f,M=p,("C"===L||"S"===L)&&(P+=f-S[S.length-4],M+=p-S[S.length-3]),D||(f=p=0),S.push(P,M,C,E,f+=1*u[x+3],p+=1*u[x+4]),x+=4;else if("Q"===T)P=f+(C-f)*g,M=p+(E-p)*g,D||(f=p=0),S.push(P,M,(f+=1*u[x+3])+(C-f)*g,(p+=1*u[x+4])+(E-p)*g,f,p),x+=4;else if("T"===T)S.push(f+(P=f-S[S.length-4]),p+(M=p-S[S.length-3]),C+(f+1.5*P-C)*g,E+(p+1.5*M-E)*g,f=C,p=E),x+=2;else if("H"===T)G(f,p,f=C,p),x+=1;else if("V"===T)G(f,p,f,p=C+(D?p-f:0)),x+=1;else if("L"===T||"Z"===T)"Z"===T&&(C=A,E=I,S.closed=!0),("L"===T||Tn(f-C)>.5||Tn(p-E)>.5)&&(G(f,p,C,E),"L"===T&&(x+=2)),f=C,p=E;else if("A"===T){if(H=u[x+5],P=u[x+6],M=u[x+7],w=7,(j=u[x+4]).length>1&&(j.length<3?(M=P,P=H,w--):(M=H,P=j.substr(2),w-=2),H=j.charAt(1),j=j.charAt(0)),R=QW(f,p,+u[x+1],+u[x+2],+u[x+3],+j,+H,(D?f:0)+1*P,(D?p:0)+1*M),x+=w,R)for(w=0;w<R.length;w++)S.push(R[w]);f=S[S.length-2],p=S[S.length-1]}else console.log(v);return(x=S.length)<6?(c.pop(),x=0):S[0]===S[x-2]&&S[1]===S[x-1]&&(S.closed=!0),c.totalPoints=y+x,c}(f)[0]),4===(C=g.length))g.unshift(0,0),g.push(1,1),C=8;else if((C-2)%6)throw"Invalid CustomEase";for((0!=+g[0]||1!=+g[C-2])&&function(u,c,f){!f&&0!==f&&(f=Math.max(+u[u.length-1],+u[1]));var x,p=-1*+u[0],g=-f,_=u.length,y=1/(+u[_-2]+p),v=-c||(Math.abs(+u[_-1]-+u[1])<.01*(+u[_-2]-+u[0])?function(u){var p,c=u.length,f=1e20;for(p=1;p<c;p+=6)+u[p]<f&&(f=+u[p]);return f}(u)+g:+u[_-1]+g);for(v=v?1/v:-y,x=0;x<_;x+=2)u[x]=(+u[x]+p)*y,u[x+1]=(+u[x+1]+g)*v}(g,p.height,p.originY),this.segment=g,D=2;D<C;D+=6)y.push(E={x:+g[D-2],y:+g[D-1]},T={x:+g[D+4],y:+g[D+5]}),o9(E.x,E.y,+g[D],+g[D+1],+g[D+2],+g[D+3],T.x,T.y,1/(2e5*x),y,y.length-1);for(C=y.length,D=0;D<C;D++)((I=y[D]).x>(P=y[D-1]||I).x||P.y!==I.y&&P.x===I.x||I===P)&&I.x<=1?(P.cx=I.x-P.x,P.cy=I.y-P.y,P.n=I,P.nx=I.x,w&&D>1&&Math.abs(P.cy/P.cx-y[D-2].cy/y[D-2].cx)>2&&(w=0),P.cx<_&&(P.cx?_=P.cx:(P.cx=.001,D===C-1&&(P.x-=.001,_=Math.min(_,.001),w=0)))):(y.splice(D--,1),C--);if(S=1/(C=1/_+1|0),A=0,I=y[0],w){for(D=0;D<C;D++)I.nx<(M=D*S)&&(I=y[++A]),v[D]={x:M,cx:S,y:E=I.y+(M-I.x)/I.cx*I.cy,cy:0,nx:9},D&&(v[D-1].cy=E-v[D-1].y);v[C-1].cy=y[y.length-1].y-E}else{for(D=0;D<C;D++)I.nx<D*S&&(I=y[++A]),v[D]=I;A<y.length-1&&(v[D-1]=y[y.length-2])}return this.ease=function(R){var L=v[R*C|0]||v[C-1];return L.nx<R&&(L=L.n),L.y+(R-L.x)/L.cx*L.cy},this.ease.custom=this,this.id&&Sn&&Sn.registerEase(this.id,this.ease),this},u.getSVGData=function(f){return d.getSVGData(this,f)},d.create=function(f,p,g){return new d(f,p,g).ease},d.register=function(f){Sn=f,kP()},d.get=function(f){return Sn.parseEase(f)},d.getSVGData=function(f,p){var w,C,E,T,D,S,A,I,P,M,g=(p=p||{}).width||100,_=p.height||100,y=p.x||0,v=(p.y||0)+_,x=Sn.utils.toArray(p.path)[0];if(p.invert&&(_=-_,v=0),"string"==typeof f&&(f=Sn.parseEase(f)),f.custom&&(f=f.custom),f instanceof d)w=function OP(d){DP(d[0])&&(d=[d]);var f,p,g,_,u="",c=d.length;for(p=0;p<c;p++){for(u+="M"+Vt((_=d[p])[0])+","+Vt(_[1])+" C",f=_.length,g=2;g<f;g++)u+=Vt(_[g++])+","+Vt(_[g++])+" "+Vt(_[g++])+","+Vt(_[g++])+" "+Vt(_[g++])+","+Vt(_[g])+" ";_.closed&&(u+="z")}return u}(function ZW(d,u,c,f,p,g,_){for(var v,x,w,C,E,y=d.length;--y>-1;)for(x=(v=d[y]).length,w=0;w<x;w+=2)v[w]=(C=v[w])*u+(E=v[w+1])*f+g,v[w+1]=C*c+E*p+_;return d._dirty=1,d}([f.segment],g,0,0,-_,y,v));else{for(w=[y,v],T=1/(A=Math.max(5,200*(p.precision||1))),I=5/(A+=2),P=Bp(y+T*g),C=((M=Bp(v+f(T)*-_))-v)/(P-y),E=2;E<A;E++)D=Bp(y+E*T*g),S=Bp(v+f(E*T)*-_),(Math.abs((S-M)/(D-P)-C)>I||E===A-1)&&(w.push(P,M),C=(S-M)/(D-P)),P=D,M=S;w="M"+w.join(",")}return x&&x.setAttribute("d",w),w},d}();LP()&&Sn.registerPlugin(th),th.version="3.12.2";const a9=["wheelElement"];let l9=(()=>{class d{constructor(){this.prizes=[],this.canvasDiameter=500,this.diameter=this.canvasDiameter-50,this.radius=this.diameter/2,this.totalAngle=2*Math.PI,this.wheelContainer=new vn,this.rotationalContainer=new vn,this.wheelButton=new np,this.lastSpin=0,this.lastMiddleAngle=0,this.isPlaying=!1,this.scaleFactor=1,this.wheel=new JA({backgroundAlpha:0,autoDensity:!0,resolution:window.devicePixelRatio}),this.loadAssets=Ge(function*(){return Ps.addBundle("wheel",{border:"./wheel-game/assets/images/games/wheel/border.png",arrow:"./wheel-game/assets/images/games/wheel/wheel-arrow.png",button:"./wheel-game/assets/images/games/wheel/button.png",buttonDisabled:"./wheel-game/assets/images/games/wheel/button-disabled.png"}),yield Ps.loadBundle("wheel",c=>{console.info(100*c)})}),this.handleResize=()=>{const c=this.wheelElement?.nativeElement.clientWidth;this.scaleFactor=c/this.canvasDiameter,this.wheel.renderer.resize(c,c),this.wheel.stage.scale.set(this.scaleFactor)},this.play=c=>{const f=this.prizes.findIndex(y=>y.id===c);if(this.isPlaying)return;if(f<0)return void alert(`Couldn't find prize id: ${c}`);this.isPlaying=!0;const p=this.wheelContainer.getChildAt(f),g=Pp.timeline({onComplete:()=>{this.onComplete(this.prizes[f],f),Pp.timeline({yoyo:!0,repeat:1}).fromTo(p,{duration:.7,alpha:1,delay:.3},{alpha:.4}),this.isPlaying=!1}});this.rotationalContainer.rotation=this.lastMiddleAngle;const _=this.rotationPrizeAngle(f);g.to(this.rotationalContainer,{duration:8,rotation:_,ease:"wheelEase"})},this.rotationPrizeAngle=c=>{const f=20*Math.PI,_=(c/this.prizes.length*this.totalAngle+(c+1)/this.prizes.length*this.totalAngle)/2;return this.lastMiddleAngle=2*Math.PI-_,f-_},Pp.registerPlugin(th)}ngAfterViewInit(){this.initWheel(),this.handleResize(),window.addEventListener("resize",()=>this.handleResize())}ngOnDestroy(){window.removeEventListener("resize",()=>this.handleResize())}initWheel(){th.create("wheelEase","M0,0 C0.17,0 0.286,0.085 0.32,0.115 0.394,0.18 0.48,0.405 0.5,0.5 0.521,0.603 0.608,0.816 0.645,0.852 0.67,0.877 0.794,1 1,1"),this.loadAssets().then(()=>{this.generetaPrizes(),this.generateButton(),this.generateBorder(),this.generateArrow(),this.wheelElement?.nativeElement.appendChild(this.wheel?.view)})}generetaPrizes(){const c=new vn;this.rotationalContainer.position.set(this.canvasDiameter/2,this.canvasDiameter/2),c.position.set(-this.radius,-this.radius),this.prizes.forEach((f,p)=>{const g=new np,_=this.prizes.length,y=p/_*this.totalAngle,v=(p+1)/_*this.totalAngle;g.moveTo(0,0),g.beginFill(f.background),g.arc(0,0,this.radius,y,v,!1),this.wheelContainer.addChild(g),c.addChild(this.generateText(y,v,f?.text,f.color,f?.icon)),this.rotationalContainer.addChild(this.wheelContainer,c)}),this.wheel?.stage.addChild(this.rotationalContainer)}generateText(c,f,p,g,_){const y=new ap(p||_,{fill:g,fontSize:16,fontWeight:"bold",fontFamily:"system-ui"}),v=(c+f)/2,x=.8*this.radius*Math.cos(v),w=.8*this.radius*Math.sin(v);return y.anchor.set(.8),y.rotation=v,y.position.set(this.radius+x,this.radius+w),y}generateButton(){const c=new ap("SPIN",{fill:"0x7c4d1b",fontSize:30,fontWeight:"bold",fontFamily:"system-ui"});c.position.set(this.canvasDiameter/2),c.anchor.set(.5,.5);const f=new QI({distance:0,blur:0,color:new Ut("#000").toNumber()}),p=Ps.get("button"),g=new Ms(p);g.anchor.set(.5,.5),g.position.set(this.canvasDiameter/2),g.filters=[f],this.wheelButton.cursor="pointer",this.wheelButton.addChild(g),this.wheel?.stage.addChild(this.wheelButton,c),this.wheelButton.eventMode="dynamic"}generateArrow(){const c=Ps.get("arrow"),f=new Ms(c);f.anchor.set(0,.5),f.x=this.canvasDiameter-50,f.y=this.canvasDiameter/2,f.width=51,f.height=60,this.wheel?.stage.addChild(f)}generateBorder(){const c=Ps.get("border"),f=new Ms(c);f.anchor.set(.5),f.x=this.canvasDiameter/2,f.y=this.canvasDiameter/2,f.width=this.canvasDiameter,f.height=this.canvasDiameter,this.wheel?.stage.addChild(f)}onComplete(c,f){}}return d.\u0275fac=function(c){return new(c||d)},d.\u0275cmp=mu({type:d,selectors:[["app-wheel"]],viewQuery:function(c,f){if(1&c&&uE(a9,7),2&c){let p;_d(p=function yd(){return function wB(d,u){return d[19].queries[u].queryList}(ae(),Bx())}())&&(f.wheelElement=p.first)}},decls:0,vars:0,template:function(c,f){},encapsulation:2}),d})();const u9=function(d){return{background:d}},c9=function(d){return{active:d}},h9=function(d){return{color:d}};function d9(d,u){if(1&d&&(Kn(0,"div",10),qu(1,"div",11),Kn(2,"span",12),yl(3),_s()()),2&d){const c=u.$implicit,f=u.index,p=t_();Bo(1),gl("ngStyle",gd(4,u9,c.background))("ngClass",gd(6,c9,p.activePrizes[f]&&p.activePrizes[f].active)),Bo(1),gl("ngStyle",gd(8,h9,c.color)),Bo(1),ud(c.text||c.icon)}}function f9(d,u){if(1&d){const c=function xw(){return ae()}();Kn(0,"button",9),ml("click",function(){const g=function Rx(d){return gt.lFrame.contextLView=d,d[8]}(c).$implicit;return function Fx(d){return gt.lFrame.contextLView=null,d}(t_().play(g.id))}),yl(1),_s()}if(2&d){const c=u.$implicit;Bo(1),ud(c.text||c.icon)}}let p9=(()=>{class d extends l9{constructor(){super(...arguments),this.activePrizes=[],this.prizes=[{text:"",id:"freespin_1",color:"#b09f16",background:"#ffec51",icon:"\u{1f47d}\u{1f47d}\u{1f47d}"},{text:"2 Freespins",id:"freespin_2",color:"#ba8814",background:"#ffc133",icon:""},{text:"",id:"freespin_3",color:"#a15d15",background:"#ff982a",icon:"\u{1f917}\u{1f917}\u{1f917}"},{text:"4 Freespins",id:"freespin_4",color:"#922a12",background:"#ff5730",icon:""},{text:"",id:"freespin_5",color:"#046a60",background:"#009688",icon:"\u{1f607}\u{1f607}\u{1f607}"},{text:"6 Freespins",id:"freespin_6",color:"#157f2e",background:"#39af55",icon:""},{text:"",id:"freespin_7",color:"#4a801e",background:"#86c454",icon:"\u{1f916}\u{1f916}\u{1f916}"},{text:"8 Freespins",id:"freespin_8",color:"#96a422",background:"#cddc4c",icon:""}]}ngOnInit(){this.wheelButton.on("click",()=>{const c=Math.floor(Math.random()*this.prizes.length);this.play(this.prizes[c].id)})}onComplete(c,f){f>=0&&(this.activePrizes[f]={active:!0})}}return d.\u0275fac=function(){let u;return function(f){return(u||(u=function nb(d){return Gs(()=>{const u=d.prototype.constructor,c=u[us]||Ig(u),f=Object.prototype;let p=Object.getPrototypeOf(d.prototype).constructor;for(;p&&p!==f;){const g=p[us]||Ig(p);if(g&&g!==c)return g;p=Object.getPrototypeOf(p)}return g=>new g})}(d)))(f||d)}}(),d.\u0275cmp=mu({type:d,selectors:[["app-root"]],features:[Xm],decls:15,vars:2,consts:[[1,"app"],[1,"app__wheel"],[1,"app__wheel-container"],["wheelElement",""],[1,"app__wheel-prizes"],["class","app__wheel-prize",4,"ngFor","ngForOf"],[1,"app__actions"],[1,"app__group"],["class","app__button",3,"click",4,"ngFor","ngForOf"],[1,"app__button",3,"click"],[1,"app__wheel-prize"],[1,"app__wheel-prize-bg",3,"ngStyle","ngClass"],[1,"app__wheel-prize-text",3,"ngStyle"]],template:function(c,f){1&c&&(Kn(0,"div",0)(1,"h1"),yl(2,"Wheel Game"),_s(),Kn(3,"div",1),qu(4,"div",2,3),Kn(6,"div",4),Zm(7,d9,4,10,"div",5),_s()(),Kn(8,"div",6)(9,"h4"),yl(10,"Predifined buttons (for testing)"),_s(),Kn(11,"div",7),Zm(12,f9,2,1,"button",8),Kn(13,"button",9),ml("click",function(){return f.play("TestID")}),yl(14,"Wrong"),_s()()()()),2&c&&(Bo(7),gl("ngForOf",f.prizes),Bo(5),gl("ngForOf",f.prizes))},dependencies:[wT,TT,IT],styles:[".app[_ngcontent-%COMP%]{padding:50px 10px;width:100%;display:flex;flex-direction:column;align-items:center;gap:50px;font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif}.app__wheel[_ngcontent-%COMP%]{width:100%;margin:0 auto;max-width:720px;display:flex;align-items:center;gap:20px}@media (max-width: 780px){.app__wheel[_ngcontent-%COMP%]{flex-direction:column-reverse}}.app__wheel-container[_ngcontent-%COMP%]{width:100%;max-width:500px;margin:0 auto}.app__wheel-prizes[_ngcontent-%COMP%]{width:200px}@media (max-width: 780px){.app__wheel-prizes[_ngcontent-%COMP%]{display:grid;width:100%;gap:10px;grid-template-columns:repeat(2,1fr)}}.app__wheel-prize[_ngcontent-%COMP%]{width:100%;height:60px;border-radius:10px;border:1px solid #f4a657;background:#141a22;margin-bottom:10px;display:flex;justify-content:center;align-items:center;position:relative;font-size:14px;font-weight:500;text-transform:uppercase}.app__wheel-prize-bg[_ngcontent-%COMP%]{position:absolute;top:0;opacity:0;left:0;width:100%;height:100%;z-index:0;border-radius:8px}.app__wheel-prize-bg.active[_ngcontent-%COMP%]{animation:prizeAnimation 1s;opacity:1}.app__wheel-prize[_ngcontent-%COMP%]:last-child{margin-bottom:0}.app__wheel-prize-text[_ngcontent-%COMP%]{position:relative;z-index:2}.app__group[_ngcontent-%COMP%]{width:100%;display:grid;gap:10px;grid-template-columns:repeat(4,1fr);margin-top:20px}@media (max-width: 780px){.app__group[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}.app__button[_ngcontent-%COMP%]{display:block;cursor:pointer;width:100%;padding:12px;background:#141a22;outline:none;border-radius:6px;border:1px solid #8b8a8a;color:#8b8a8a;transition:.3s all}.app__button[_ngcontent-%COMP%]:hover{border:1px solid #18a70c;color:#fff}.app__actions[_ngcontent-%COMP%]{width:100%;max-width:720px}.app[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .app[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;color:#fff;text-align:center}@keyframes prizeAnimation{0%{opacity:0;box-shadow:0 0 #ffec51}20%{opacity:1}40%{opacity:0}50%{box-shadow:0 0 30px #ffec51}60%{opacity:1}80%{opacity:0}to{box-shadow:0 0 #ffec51;opacity:1}}"]}),d})(),g9=(()=>{class d{}return d.\u0275fac=function(c){return new(c||d)},d.\u0275mod=Ao({type:d,bootstrap:[p9]}),d.\u0275inj=js({imports:[K4,VH]}),d})();(function u3(){ZE=!1})(),Y4().bootstrapModule(g9).catch(d=>console.error(d))},834:(Ye,yt,_e)=>{"use strict";var q=_e(203),Ce=_e(685),Me=Ce(q("String.prototype.indexOf"));Ye.exports=function(Se,De){var Ee=q(Se,!!De);return"function"==typeof Ee&&Me(Se,".prototype.")>-1?Ce(Ee):Ee}},685:(Ye,yt,_e)=>{"use strict";var q=_e(444),Ce=_e(203),Me=_e(511),Oe=Ce("%TypeError%"),Se=Ce("%Function.prototype.apply%"),De=Ce("%Function.prototype.call%"),Ee=Ce("%Reflect.apply%",!0)||q.call(De,Se),ue=Ce("%Object.defineProperty%",!0),de=Ce("%Math.max%");if(ue)try{ue({},"a",{value:1})}catch{ue=null}Ye.exports=function(ze){if("function"!=typeof ze)throw new Oe("a function is required");var Ve=Ee(q,De,arguments);return Me(Ve,1+de(0,ze.length-(arguments.length-1)),!0)};var Ue=function(){return Ee(q,Se,arguments)};ue?ue(Ye.exports,"apply",{value:Ue}):Ye.exports.apply=Ue},484:(Ye,yt,_e)=>{"use strict";var q=_e(27)(),Ce=_e(203),Me=q&&Ce("%Object.defineProperty%",!0);if(Me)try{Me({},"a",{value:1})}catch{Me=!1}var Oe=Ce("%SyntaxError%"),Se=Ce("%TypeError%"),De=_e(378);Ye.exports=function(ue,de,Ue){if(!ue||"object"!=typeof ue&&"function"!=typeof ue)throw new Se("`obj` must be an object or a function`");if("string"!=typeof de&&"symbol"!=typeof de)throw new Se("`property` must be a string or a symbol`");if(arguments.length>3&&"boolean"!=typeof arguments[3]&&null!==arguments[3])throw new Se("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&"boolean"!=typeof arguments[4]&&null!==arguments[4])throw new Se("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&"boolean"!=typeof arguments[5]&&null!==arguments[5])throw new Se("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&"boolean"!=typeof arguments[6])throw new Se("`loose`, if provided, must be a boolean");var ve=arguments.length>3?arguments[3]:null,ze=arguments.length>4?arguments[4]:null,Ve=arguments.length>5?arguments[5]:null,se=arguments.length>6&&arguments[6],ke=!!De&&De(ue,de);if(Me)Me(ue,de,{configurable:null===Ve&&ke?ke.configurable:!Ve,enumerable:null===ve&&ke?ke.enumerable:!ve,value:Ue,writable:null===ze&&ke?ke.writable:!ze});else{if(!se&&(ve||ze||Ve))throw new Oe("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");ue[de]=Ue}}},469:Ye=>{"use strict";function yt(N,k,O){O=O||2;var ne,fe,me,oe,ge,He,we,Z=k&&k.length,Y=Z?k[0]*O:N.length,V=_e(N,0,Y,O,!0),W=[];if(!V||V.next===V.prev)return W;if(Z&&(V=function Ee(N,k,O,Z){var V,W,me,Y=[];for(V=0,W=k.length;V<W;V++)(me=_e(N,k[V]*Z,V<W-1?k[V+1]*Z:N.length,Z,!1))===me.next&&(me.steiner=!0),Y.push(ke(me));for(Y.sort(ue),V=0;V<Y.length;V++)O=de(Y[V],O);return O}(N,k,V,O)),N.length>80*O){ne=me=N[0],fe=oe=N[1];for(var Ke=O;Ke<Y;Ke+=O)(ge=N[Ke])<ne&&(ne=ge),(He=N[Ke+1])<fe&&(fe=He),ge>me&&(me=ge),He>oe&&(oe=He);we=0!==(we=Math.max(me-ne,oe-fe))?32767/we:0}return Ce(V,W,O,ne,fe,we,0),W}function _e(N,k,O,Z,Y){var V,W;if(Y===he(N,k,O,Z)>0)for(V=k;V<O;V+=Z)W=rt(V,N[V],N[V+1],W);else for(V=O-Z;V>=k;V-=Z)W=rt(V,N[V],N[V+1],W);return W&&ee(W,W.next)&&(It(W),W=W.next),W}function q(N,k){if(!N)return N;k||(k=N);var Z,O=N;do{if(Z=!1,O.steiner||!ee(O,O.next)&&0!==J(O.prev,O,O.next))O=O.next;else{if(It(O),(O=k=O.prev)===O.next)break;Z=!0}}while(Z||O!==k);return k}function Ce(N,k,O,Z,Y,V,W){if(N){!W&&V&&function ze(N,k,O,Z){var Y=N;do{0===Y.z&&(Y.z=se(Y.x,Y.y,k,O,Z)),Y.prevZ=Y.prev,Y.nextZ=Y.next,Y=Y.next}while(Y!==N);Y.prevZ.nextZ=null,Y.prevZ=null,function Ve(N){var k,O,Z,Y,V,W,ne,fe,me=1;do{for(O=N,N=null,V=null,W=0;O;){for(W++,Z=O,ne=0,k=0;k<me&&(ne++,Z=Z.nextZ);k++);for(fe=me;ne>0||fe>0&&Z;)0!==ne&&(0===fe||!Z||O.z<=Z.z)?(Y=O,O=O.nextZ,ne--):(Y=Z,Z=Z.nextZ,fe--),V?V.nextZ=Y:N=Y,Y.prevZ=V,V=Y;O=Z}V.nextZ=null,me*=2}while(W>1)}(Y)}(N,Z,Y,V);for(var fe,me,ne=N;N.prev!==N.next;)if(fe=N.prev,me=N.next,V?Oe(N,Z,Y,V):Me(N))k.push(fe.i/O|0),k.push(N.i/O|0),k.push(me.i/O|0),It(N),N=me.next,ne=me.next;else if((N=me)===ne){W?1===W?Ce(N=Se(q(N),k,O),k,O,Z,Y,V,2):2===W&&De(N,k,O,Z,Y,V):Ce(q(N),k,O,Z,Y,V,1);break}}}function Me(N){var k=N.prev,O=N,Z=N.next;if(J(k,O,Z)>=0)return!1;for(var Y=k.x,V=O.x,W=Z.x,ne=k.y,fe=O.y,me=Z.y,oe=Y<V?Y<W?Y:W:V<W?V:W,ge=ne<fe?ne<me?ne:me:fe<me?fe:me,He=Y>V?Y>W?Y:W:V>W?V:W,we=ne>fe?ne>me?ne:me:fe>me?fe:me,Ke=Z.next;Ke!==k;){if(Ke.x>=oe&&Ke.x<=He&&Ke.y>=ge&&Ke.y<=we&&Te(Y,ne,V,fe,W,me,Ke.x,Ke.y)&&J(Ke.prev,Ke,Ke.next)>=0)return!1;Ke=Ke.next}return!0}function Oe(N,k,O,Z){var Y=N.prev,V=N,W=N.next;if(J(Y,V,W)>=0)return!1;for(var ne=Y.x,fe=V.x,me=W.x,oe=Y.y,ge=V.y,He=W.y,we=ne<fe?ne<me?ne:me:fe<me?fe:me,Ke=oe<ge?oe<He?oe:He:ge<He?ge:He,Zt=ne>fe?ne>me?ne:me:fe>me?fe:me,Tt=oe>ge?oe>He?oe:He:ge>He?ge:He,Rt=se(we,Ke,k,O,Z),Qt=se(Zt,Tt,k,O,Z),dt=N.prevZ,st=N.nextZ;dt&&dt.z>=Rt&&st&&st.z<=Qt;){if(dt.x>=we&&dt.x<=Zt&&dt.y>=Ke&&dt.y<=Tt&&dt!==Y&&dt!==W&&Te(ne,oe,fe,ge,me,He,dt.x,dt.y)&&J(dt.prev,dt,dt.next)>=0||(dt=dt.prevZ,st.x>=we&&st.x<=Zt&&st.y>=Ke&&st.y<=Tt&&st!==Y&&st!==W&&Te(ne,oe,fe,ge,me,He,st.x,st.y)&&J(st.prev,st,st.next)>=0))return!1;st=st.nextZ}for(;dt&&dt.z>=Rt;){if(dt.x>=we&&dt.x<=Zt&&dt.y>=Ke&&dt.y<=Tt&&dt!==Y&&dt!==W&&Te(ne,oe,fe,ge,me,He,dt.x,dt.y)&&J(dt.prev,dt,dt.next)>=0)return!1;dt=dt.prevZ}for(;st&&st.z<=Qt;){if(st.x>=we&&st.x<=Zt&&st.y>=Ke&&st.y<=Tt&&st!==Y&&st!==W&&Te(ne,oe,fe,ge,me,He,st.x,st.y)&&J(st.prev,st,st.next)>=0)return!1;st=st.nextZ}return!0}function Se(N,k,O){var Z=N;do{var Y=Z.prev,V=Z.next.next;!ee(Y,V)&&pe(Y,Z,Z.next,V)&&Ae(Y,V)&&Ae(V,Y)&&(k.push(Y.i/O|0),k.push(Z.i/O|0),k.push(V.i/O|0),It(Z),It(Z.next),Z=N=V),Z=Z.next}while(Z!==N);return q(Z)}function De(N,k,O,Z,Y,V){var W=N;do{for(var ne=W.next.next;ne!==W.prev;){if(W.i!==ne.i&&B(W,ne)){var fe=pt(W,ne);return W=q(W,W.next),fe=q(fe,fe.next),Ce(W,k,O,Z,Y,V,0),void Ce(fe,k,O,Z,Y,V,0)}ne=ne.next}W=W.next}while(W!==N)}function ue(N,k){return N.x-k.x}function de(N,k){var O=function Ue(N,k){var W,O=k,Z=N.x,Y=N.y,V=-1/0;do{if(Y<=O.y&&Y>=O.next.y&&O.next.y!==O.y){var ne=O.x+(Y-O.y)*(O.next.x-O.x)/(O.next.y-O.y);if(ne<=Z&&ne>V&&(V=ne,W=O.x<O.next.x?O:O.next,ne===Z))return W}O=O.next}while(O!==k);if(!W)return null;var He,fe=W,me=W.x,oe=W.y,ge=1/0;O=W;do{Z>=O.x&&O.x>=me&&Z!==O.x&&Te(Y<oe?Z:V,Y,me,oe,Y<oe?V:Z,Y,O.x,O.y)&&(He=Math.abs(Y-O.y)/(Z-O.x),Ae(O,N)&&(He<ge||He===ge&&(O.x>W.x||O.x===W.x&&ve(W,O)))&&(W=O,ge=He)),O=O.next}while(O!==fe);return W}(N,k);if(!O)return k;var Z=pt(O,N);return q(Z,Z.next),q(O,O.next)}function ve(N,k){return J(N.prev,N,k.prev)<0&&J(k.next,N,N.next)<0}function se(N,k,O,Z,Y){return(N=1431655765&((N=858993459&((N=252645135&((N=16711935&((N=(N-O)*Y|0)|N<<8))|N<<4))|N<<2))|N<<1))|(k=1431655765&((k=858993459&((k=252645135&((k=16711935&((k=(k-Z)*Y|0)|k<<8))|k<<4))|k<<2))|k<<1))<<1}function ke(N){var k=N,O=N;do{(k.x<O.x||k.x===O.x&&k.y<O.y)&&(O=k),k=k.next}while(k!==N);return O}function Te(N,k,O,Z,Y,V,W,ne){return(Y-W)*(k-ne)>=(N-W)*(V-ne)&&(N-W)*(Z-ne)>=(O-W)*(k-ne)&&(O-W)*(V-ne)>=(Y-W)*(Z-ne)}function B(N,k){return N.next.i!==k.i&&N.prev.i!==k.i&&!function $(N,k){var O=N;do{if(O.i!==N.i&&O.next.i!==N.i&&O.i!==k.i&&O.next.i!==k.i&&pe(O,O.next,N,k))return!0;O=O.next}while(O!==N);return!1}(N,k)&&(Ae(N,k)&&Ae(k,N)&&function U(N,k){var O=N,Z=!1,Y=(N.x+k.x)/2,V=(N.y+k.y)/2;do{O.y>V!=O.next.y>V&&O.next.y!==O.y&&Y<(O.next.x-O.x)*(V-O.y)/(O.next.y-O.y)+O.x&&(Z=!Z),O=O.next}while(O!==N);return Z}(N,k)&&(J(N.prev,N,k.prev)||J(N,k.prev,k))||ee(N,k)&&J(N.prev,N,N.next)>0&&J(k.prev,k,k.next)>0)}function J(N,k,O){return(k.y-N.y)*(O.x-k.x)-(k.x-N.x)*(O.y-k.y)}function ee(N,k){return N.x===k.x&&N.y===k.y}function pe(N,k,O,Z){var Y=ye(J(N,k,O)),V=ye(J(N,k,Z)),W=ye(J(O,Z,N)),ne=ye(J(O,Z,k));return!!(Y!==V&&W!==ne||0===Y&&xe(N,O,k)||0===V&&xe(N,Z,k)||0===W&&xe(O,N,Z)||0===ne&&xe(O,k,Z))}function xe(N,k,O){return k.x<=Math.max(N.x,O.x)&&k.x>=Math.min(N.x,O.x)&&k.y<=Math.max(N.y,O.y)&&k.y>=Math.min(N.y,O.y)}function ye(N){return N>0?1:N<0?-1:0}function Ae(N,k){return J(N.prev,N,N.next)<0?J(N,k,N.next)>=0&&J(N,N.prev,k)>=0:J(N,k,N.prev)<0||J(N,N.next,k)<0}function pt(N,k){var O=new ut(N.i,N.x,N.y),Z=new ut(k.i,k.x,k.y),Y=N.next,V=k.prev;return N.next=k,k.prev=N,O.next=Y,Y.prev=O,Z.next=O,O.prev=Z,V.next=Z,Z.prev=V,Z}function rt(N,k,O,Z){var Y=new ut(N,k,O);return Z?(Y.next=Z.next,Y.prev=Z,Z.next.prev=Y,Z.next=Y):(Y.prev=Y,Y.next=Y),Y}function It(N){N.next.prev=N.prev,N.prev.next=N.next,N.prevZ&&(N.prevZ.nextZ=N.nextZ),N.nextZ&&(N.nextZ.prevZ=N.prevZ)}function ut(N,k,O){this.i=N,this.x=k,this.y=O,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function he(N,k,O,Z){for(var Y=0,V=k,W=O-Z;V<O;V+=Z)Y+=(N[W]-N[V])*(N[V+1]+N[W+1]),W=V;return Y}Ye.exports=yt,Ye.exports.default=yt,yt.deviation=function(N,k,O,Z){var Y=k&&k.length,W=Math.abs(he(N,0,Y?k[0]*O:N.length,O));if(Y)for(var ne=0,fe=k.length;ne<fe;ne++)W-=Math.abs(he(N,k[ne]*O,ne<fe-1?k[ne+1]*O:N.length,O));var ge=0;for(ne=0;ne<Z.length;ne+=3){var He=Z[ne]*O,we=Z[ne+1]*O,Ke=Z[ne+2]*O;ge+=Math.abs((N[He]-N[Ke])*(N[we+1]-N[He+1])-(N[He]-N[we])*(N[Ke+1]-N[He+1]))}return 0===W&&0===ge?0:Math.abs((ge-W)/W)},yt.flatten=function(N){for(var k=N[0][0].length,O={vertices:[],holes:[],dimensions:k},Z=0,Y=0;Y<N.length;Y++){for(var V=0;V<N[Y].length;V++)for(var W=0;W<k;W++)O.vertices.push(N[Y][V][W]);Y>0&&O.holes.push(Z+=N[Y-1].length)}return O}},5:Ye=>{"use strict";var yt=Object.prototype.hasOwnProperty,_e="~";function q(){}function Ce(De,Ee,ue){this.fn=De,this.context=Ee,this.once=ue||!1}function Me(De,Ee,ue,de,Ue){if("function"!=typeof ue)throw new TypeError("The listener must be a function");var ve=new Ce(ue,de||De,Ue),ze=_e?_e+Ee:Ee;return De._events[ze]?De._events[ze].fn?De._events[ze]=[De._events[ze],ve]:De._events[ze].push(ve):(De._events[ze]=ve,De._eventsCount++),De}function Oe(De,Ee){0==--De._eventsCount?De._events=new q:delete De._events[Ee]}function Se(){this._events=new q,this._eventsCount=0}Object.create&&(q.prototype=Object.create(null),(new q).__proto__||(_e=!1)),Se.prototype.eventNames=function(){var ue,de,Ee=[];if(0===this._eventsCount)return Ee;for(de in ue=this._events)yt.call(ue,de)&&Ee.push(_e?de.slice(1):de);return Object.getOwnPropertySymbols?Ee.concat(Object.getOwnPropertySymbols(ue)):Ee},Se.prototype.listeners=function(Ee){var de=this._events[_e?_e+Ee:Ee];if(!de)return[];if(de.fn)return[de.fn];for(var Ue=0,ve=de.length,ze=new Array(ve);Ue<ve;Ue++)ze[Ue]=de[Ue].fn;return ze},Se.prototype.listenerCount=function(Ee){var de=this._events[_e?_e+Ee:Ee];return de?de.fn?1:de.length:0},Se.prototype.emit=function(Ee,ue,de,Ue,ve,ze){var Ve=_e?_e+Ee:Ee;if(!this._events[Ve])return!1;var Te,B,se=this._events[Ve],ke=arguments.length;if(se.fn){switch(se.once&&this.removeListener(Ee,se.fn,void 0,!0),ke){case 1:return se.fn.call(se.context),!0;case 2:return se.fn.call(se.context,ue),!0;case 3:return se.fn.call(se.context,ue,de),!0;case 4:return se.fn.call(se.context,ue,de,Ue),!0;case 5:return se.fn.call(se.context,ue,de,Ue,ve),!0;case 6:return se.fn.call(se.context,ue,de,Ue,ve,ze),!0}for(B=1,Te=new Array(ke-1);B<ke;B++)Te[B-1]=arguments[B];se.fn.apply(se.context,Te)}else{var ee,J=se.length;for(B=0;B<J;B++)switch(se[B].once&&this.removeListener(Ee,se[B].fn,void 0,!0),ke){case 1:se[B].fn.call(se[B].context);break;case 2:se[B].fn.call(se[B].context,ue);break;case 3:se[B].fn.call(se[B].context,ue,de);break;case 4:se[B].fn.call(se[B].context,ue,de,Ue);break;default:if(!Te)for(ee=1,Te=new Array(ke-1);ee<ke;ee++)Te[ee-1]=arguments[ee];se[B].fn.apply(se[B].context,Te)}}return!0},Se.prototype.on=function(Ee,ue,de){return Me(this,Ee,ue,de,!1)},Se.prototype.once=function(Ee,ue,de){return Me(this,Ee,ue,de,!0)},Se.prototype.removeListener=function(Ee,ue,de,Ue){var ve=_e?_e+Ee:Ee;if(!this._events[ve])return this;if(!ue)return Oe(this,ve),this;var ze=this._events[ve];if(ze.fn)ze.fn===ue&&(!Ue||ze.once)&&(!de||ze.context===de)&&Oe(this,ve);else{for(var Ve=0,se=[],ke=ze.length;Ve<ke;Ve++)(ze[Ve].fn!==ue||Ue&&!ze[Ve].once||de&&ze[Ve].context!==de)&&se.push(ze[Ve]);se.length?this._events[ve]=1===se.length?se[0]:se:Oe(this,ve)}return this},Se.prototype.removeAllListeners=function(Ee){var ue;return Ee?this._events[ue=_e?_e+Ee:Ee]&&Oe(this,ue):(this._events=new q,this._eventsCount=0),this},Se.prototype.off=Se.prototype.removeListener,Se.prototype.addListener=Se.prototype.on,Se.prefixed=_e,Se.EventEmitter=Se,Ye.exports=Se},457:Ye=>{"use strict";var yt="Function.prototype.bind called on incompatible ",_e=Object.prototype.toString,q=Math.max,Ce="[object Function]",Me=function(Ee,ue){for(var de=[],Ue=0;Ue<Ee.length;Ue+=1)de[Ue]=Ee[Ue];for(var ve=0;ve<ue.length;ve+=1)de[ve+Ee.length]=ue[ve];return de},Oe=function(Ee,ue){for(var de=[],Ue=ue||0,ve=0;Ue<Ee.length;Ue+=1,ve+=1)de[ve]=Ee[Ue];return de},Se=function(De,Ee){for(var ue="",de=0;de<De.length;de+=1)ue+=De[de],de+1<De.length&&(ue+=Ee);return ue};Ye.exports=function(Ee){var ue=this;if("function"!=typeof ue||_e.apply(ue)!==Ce)throw new TypeError(yt+ue);for(var Ue,de=Oe(arguments,1),ve=function(){if(this instanceof Ue){var Te=ue.apply(this,Me(de,arguments));return Object(Te)===Te?Te:this}return ue.apply(Ee,Me(de,arguments))},ze=q(0,ue.length-de.length),Ve=[],se=0;se<ze;se++)Ve[se]="$"+se;if(Ue=Function("binder","return function ("+Se(Ve,",")+"){ return binder.apply(this,arguments); }")(ve),ue.prototype){var ke=function(){};ke.prototype=ue.prototype,Ue.prototype=new ke,ke.prototype=null}return Ue}},444:(Ye,yt,_e)=>{"use strict";var q=_e(457);Ye.exports=Function.prototype.bind||q},203:(Ye,yt,_e)=>{"use strict";var q,Ce=SyntaxError,Me=Function,Oe=TypeError,Se=function(ut){try{return Me('"use strict"; return ('+ut+").constructor;")()}catch{}},De=Object.getOwnPropertyDescriptor;if(De)try{De({},"")}catch{De=null}var Ee=function(){throw new Oe},ue=De?function(){try{return Ee}catch{try{return De(arguments,"callee").get}catch{return Ee}}}():Ee,de=_e(969)(),Ue=_e(757)(),ve=Object.getPrototypeOf||(Ue?function(ut){return ut.__proto__}:null),ze={},Ve=typeof Uint8Array>"u"||!ve?q:ve(Uint8Array),se={"%AggregateError%":typeof AggregateError>"u"?q:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?q:ArrayBuffer,"%ArrayIteratorPrototype%":de&&ve?ve([][Symbol.iterator]()):q,"%AsyncFromSyncIteratorPrototype%":q,"%AsyncFunction%":ze,"%AsyncGenerator%":ze,"%AsyncGeneratorFunction%":ze,"%AsyncIteratorPrototype%":ze,"%Atomics%":typeof Atomics>"u"?q:Atomics,"%BigInt%":typeof BigInt>"u"?q:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?q:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?q:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?q:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?q:Float32Array,"%Float64Array%":typeof Float64Array>"u"?q:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?q:FinalizationRegistry,"%Function%":Me,"%GeneratorFunction%":ze,"%Int8Array%":typeof Int8Array>"u"?q:Int8Array,"%Int16Array%":typeof Int16Array>"u"?q:Int16Array,"%Int32Array%":typeof Int32Array>"u"?q:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":de&&ve?ve(ve([][Symbol.iterator]())):q,"%JSON%":"object"==typeof JSON?JSON:q,"%Map%":typeof Map>"u"?q:Map,"%MapIteratorPrototype%":typeof Map>"u"||!de||!ve?q:ve((new Map)[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?q:Promise,"%Proxy%":typeof Proxy>"u"?q:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?q:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?q:Set,"%SetIteratorPrototype%":typeof Set>"u"||!de||!ve?q:ve((new Set)[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?q:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":de&&ve?ve(""[Symbol.iterator]()):q,"%Symbol%":de?Symbol:q,"%SyntaxError%":Ce,"%ThrowTypeError%":ue,"%TypedArray%":Ve,"%TypeError%":Oe,"%Uint8Array%":typeof Uint8Array>"u"?q:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?q:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?q:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?q:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?q:WeakMap,"%WeakRef%":typeof WeakRef>"u"?q:WeakRef,"%WeakSet%":typeof WeakSet>"u"?q:WeakSet};if(ve)try{null.error}catch(ut){var ke=ve(ve(ut));se["%Error.prototype%"]=ke}var Te=function ut(he){var N;if("%AsyncFunction%"===he)N=Se("async function () {}");else if("%GeneratorFunction%"===he)N=Se("function* () {}");else if("%AsyncGeneratorFunction%"===he)N=Se("async function* () {}");else if("%AsyncGenerator%"===he){var k=ut("%AsyncGeneratorFunction%");k&&(N=k.prototype)}else if("%AsyncIteratorPrototype%"===he){var O=ut("%AsyncGenerator%");O&&ve&&(N=ve(O.prototype))}return se[he]=N,N},B={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},J=_e(444),ee=_e(699),pe=J.call(Function.call,Array.prototype.concat),xe=J.call(Function.apply,Array.prototype.splice),ye=J.call(Function.call,String.prototype.replace),$=J.call(Function.call,String.prototype.slice),Ae=J.call(Function.call,RegExp.prototype.exec),U=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,pt=/\\(\\)?/g,rt=function(he){var N=$(he,0,1),k=$(he,-1);if("%"===N&&"%"!==k)throw new Ce("invalid intrinsic syntax, expected closing `%`");if("%"===k&&"%"!==N)throw new Ce("invalid intrinsic syntax, expected opening `%`");var O=[];return ye(he,U,function(Z,Y,V,W){O[O.length]=V?ye(W,pt,"$1"):Y||Z}),O},It=function(he,N){var O,k=he;if(ee(B,k)&&(k="%"+(O=B[k])[0]+"%"),ee(se,k)){var Z=se[k];if(Z===ze&&(Z=Te(k)),typeof Z>"u"&&!N)throw new Oe("intrinsic "+he+" exists, but is not available. Please file an issue!");return{alias:O,name:k,value:Z}}throw new Ce("intrinsic "+he+" does not exist!")};Ye.exports=function(he,N){if("string"!=typeof he||0===he.length)throw new Oe("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof N)throw new Oe('"allowMissing" argument must be a boolean');if(null===Ae(/^%?[^%]*%?$/,he))throw new Ce("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var k=rt(he),O=k.length>0?k[0]:"",Z=It("%"+O+"%",N),Y=Z.name,V=Z.value,W=!1,ne=Z.alias;ne&&(O=ne[0],xe(k,pe([0,1],ne)));for(var fe=1,me=!0;fe<k.length;fe+=1){var oe=k[fe],ge=$(oe,0,1),He=$(oe,-1);if(('"'===ge||"'"===ge||"`"===ge||'"'===He||"'"===He||"`"===He)&&ge!==He)throw new Ce("property names with quotes must have matching quotes");if(("constructor"===oe||!me)&&(W=!0),ee(se,Y="%"+(O+="."+oe)+"%"))V=se[Y];else if(null!=V){if(!(oe in V)){if(!N)throw new Oe("base intrinsic for "+he+" exists, but the property is not available.");return}if(De&&fe+1>=k.length){var we=De(V,oe);V=(me=!!we)&&"get"in we&&!("originalValue"in we.get)?we.get:V[oe]}else me=ee(V,oe),V=V[oe];me&&!W&&(se[Y]=V)}}return V}},378:(Ye,yt,_e)=>{"use strict";var Ce=_e(203)("%Object.getOwnPropertyDescriptor%",!0);if(Ce)try{Ce([],"length")}catch{Ce=null}Ye.exports=Ce},27:(Ye,yt,_e)=>{"use strict";var Ce=_e(203)("%Object.defineProperty%",!0),Me=function(){if(Ce)try{return Ce({},"a",{value:1}),!0}catch{return!1}return!1};Me.hasArrayLengthDefineBug=function(){if(!Me())return null;try{return 1!==Ce([],"length",{value:1}).length}catch{return!0}},Ye.exports=Me},757:Ye=>{"use strict";var yt={foo:{}},_e=Object;Ye.exports=function(){return{__proto__:yt}.foo===yt.foo&&!({__proto__:null}instanceof _e)}},969:(Ye,yt,_e)=>{"use strict";var q=typeof Symbol<"u"&&Symbol,Ce=_e(983);Ye.exports=function(){return"function"==typeof q&&"function"==typeof Symbol&&"symbol"==typeof q("foo")&&"symbol"==typeof Symbol("bar")&&Ce()}},983:Ye=>{"use strict";Ye.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var _e={},q=Symbol("test"),Ce=Object(q);if("string"==typeof q||"[object Symbol]"!==Object.prototype.toString.call(q)||"[object Symbol]"!==Object.prototype.toString.call(Ce))return!1;for(q in _e[q]=42,_e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(_e).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(_e).length)return!1;var Oe=Object.getOwnPropertySymbols(_e);if(1!==Oe.length||Oe[0]!==q||!Object.prototype.propertyIsEnumerable.call(_e,q))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var Se=Object.getOwnPropertyDescriptor(_e,q);if(42!==Se.value||!0!==Se.enumerable)return!1}return!0}},699:(Ye,yt,_e)=>{"use strict";var q=Function.prototype.call,Ce=Object.prototype.hasOwnProperty,Me=_e(444);Ye.exports=Me.call(q,Ce)},24:(Ye,yt,_e)=>{var q="function"==typeof Map&&Map.prototype,Ce=Object.getOwnPropertyDescriptor&&q?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Me=q&&Ce&&"function"==typeof Ce.get?Ce.get:null,Oe=q&&Map.prototype.forEach,Se="function"==typeof Set&&Set.prototype,De=Object.getOwnPropertyDescriptor&&Se?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Ee=Se&&De&&"function"==typeof De.get?De.get:null,ue=Se&&Set.prototype.forEach,Ue="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,ze="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,se="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,ke=Boolean.prototype.valueOf,Te=Object.prototype.toString,B=Function.prototype.toString,J=String.prototype.match,ee=String.prototype.slice,pe=String.prototype.replace,xe=String.prototype.toUpperCase,ye=String.prototype.toLowerCase,$=RegExp.prototype.test,Ae=Array.prototype.concat,U=Array.prototype.join,pt=Array.prototype.slice,rt=Math.floor,It="function"==typeof BigInt?BigInt.prototype.valueOf:null,ut=Object.getOwnPropertySymbols,he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,N="function"==typeof Symbol&&"object"==typeof Symbol.iterator,k="function"==typeof Symbol&&Symbol.toStringTag&&(Symbol,1)?Symbol.toStringTag:null,O=Object.prototype.propertyIsEnumerable,Z=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(X){return X.__proto__}:null);function Y(X,K){if(X===1/0||X===-1/0||X!=X||X&&X>-1e3&&X<1e3||$.call(/e/,K))return K;var Lt=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof X){var jt=X<0?-rt(-X):rt(X);if(jt!==X){var rr=String(jt),St=ee.call(K,rr.length+1);return pe.call(rr,Lt,"$&_")+"."+pe.call(pe.call(St,/([0-9]{3})/g,"$&_"),/_$/,"")}}return pe.call(K,Lt,"$&_")}var V=_e(654),W=V.custom,ne=Rt(W)?W:null;function fe(X,K,Lt){var jt="double"===(Lt.quoteStyle||K)?'"':"'";return jt+X+jt}function me(X){return pe.call(String(X),/"/g,"&quot;")}function oe(X){return!("[object Array]"!==Dr(X)||k&&"object"==typeof X&&k in X)}function He(X){return!("[object RegExp]"!==Dr(X)||k&&"object"==typeof X&&k in X)}function Rt(X){if(N)return X&&"object"==typeof X&&X instanceof Symbol;if("symbol"==typeof X)return!0;if(!X||"object"!=typeof X||!he)return!1;try{return he.call(X),!0}catch{}return!1}Ye.exports=function X(K,Lt,jt,rr){var St=Lt||{};if(st(St,"quoteStyle")&&"single"!==St.quoteStyle&&"double"!==St.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(st(St,"maxStringLength")&&("number"==typeof St.maxStringLength?St.maxStringLength<0&&St.maxStringLength!==1/0:null!==St.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var Oi=!st(St,"customInspect")||St.customInspect;if("boolean"!=typeof Oi&&"symbol"!==Oi)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(st(St,"indent")&&null!==St.indent&&"\t"!==St.indent&&!(parseInt(St.indent,10)===St.indent&&St.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(st(St,"numericSeparator")&&"boolean"!=typeof St.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var ss=St.numericSeparator;if(typeof K>"u")return"undefined";if(null===K)return"null";if("boolean"==typeof K)return K?"true":"false";if("string"==typeof K)return uu(K,St);if("number"==typeof K){if(0===K)return 1/0/K>0?"0":"-0";var Jr=String(K);return ss?Y(K,Jr):Jr}if("bigint"==typeof K){var os=String(K)+"n";return ss?Y(K,os):os}var Pa=typeof St.depth>"u"?5:St.depth;if(typeof jt>"u"&&(jt=0),jt>=Pa&&Pa>0&&"object"==typeof K)return oe(K)?"[Array]":"[Object]";var as=function Kp(X,K){var Lt;if("\t"===X.indent)Lt="\t";else{if(!("number"==typeof X.indent&&X.indent>0))return null;Lt=U.call(Array(X.indent+1)," ")}return{base:Lt,prev:U.call(Array(K+1),Lt)}}(St,jt);if(typeof rr>"u")rr=[];else if(To(rr,K)>=0)return"[Circular]";function cn(Vs,ur,Hs){if(ur&&(rr=pt.call(rr)).push(ur),Hs){var $n={depth:St.depth};return st(St,"quoteStyle")&&($n.quoteStyle=St.quoteStyle),X(Vs,$n,jt+1,rr)}return X(Vs,St,jt+1,rr)}if("function"==typeof K&&!He(K)){var hu=function Da(X){if(X.name)return X.name;var K=J.call(B.call(X),/^function\s*([\w$]+)/);return K?K[1]:null}(K),du=Ma(K,cn);return"[Function"+(hu?": "+hu:" (anonymous)")+"]"+(du.length>0?" { "+U.call(du,", ")+" }":"")}if(Rt(K)){var lh=N?pe.call(String(K),/^(Symbol\(.*\))_[^)]*$/,"$1"):he.call(K);return"object"!=typeof K||N?lh:So(lh)}if(function lu(X){return!(!X||"object"!=typeof X)&&(typeof HTMLElement<"u"&&X instanceof HTMLElement||"string"==typeof X.nodeName&&"function"==typeof X.getAttribute)}(K)){for(var Us="<"+ye.call(String(K.nodeName)),Ra=K.attributes||[],Do=0;Do<Ra.length;Do++)Us+=" "+Ra[Do].name+"="+fe(me(Ra[Do].value),"double",St);return Us+=">",K.childNodes&&K.childNodes.length&&(Us+="..."),Us+"</"+ye.call(String(K.nodeName))+">"}if(oe(K)){if(0===K.length)return"[]";var Fa=Ma(K,cn);return as&&!function ah(X){for(var K=0;K<X.length;K++)if(To(X[K],"\n")>=0)return!1;return!0}(Fa)?"["+Ia(Fa,as)+"]":"[ "+U.call(Fa,", ")+" ]"}if(function we(X){return!("[object Error]"!==Dr(X)||k&&"object"==typeof X&&k in X)}(K)){var hn=Ma(K,cn);return"cause"in Error.prototype||!("cause"in K)||O.call(K,"cause")?0===hn.length?"["+String(K)+"]":"{ ["+String(K)+"] "+U.call(hn,", ")+" }":"{ ["+String(K)+"] "+U.call(Ae.call("[cause]: "+cn(K.cause),hn),", ")+" }"}if("object"==typeof K&&Oi){if(ne&&"function"==typeof K[ne]&&V)return V(K,{depth:Pa-jt});if("symbol"!==Oi&&"function"==typeof K.inspect)return K.inspect()}if(function Bs(X){if(!Me||!X||"object"!=typeof X)return!1;try{Me.call(X);try{Ee.call(X)}catch{return!0}return X instanceof Map}catch{}return!1}(K)){var uh=[];return Oe&&Oe.call(K,function(Vs,ur){uh.push(cn(ur,K,!0)+" => "+cn(Vs,K))}),ci("Map",Me.call(K),uh,as)}if(function au(X){if(!Ee||!X||"object"!=typeof X)return!1;try{Ee.call(X);try{Me.call(X)}catch{return!0}return X instanceof Set}catch{}return!1}(K)){var ch=[];return ue&&ue.call(K,function(Vs){ch.push(cn(Vs,K))}),ci("Set",Ee.call(K),ch,as)}if(function Aa(X){if(!Ue||!X||"object"!=typeof X)return!1;try{Ue.call(X,Ue);try{ze.call(X,ze)}catch{return!0}return X instanceof WeakMap}catch{}return!1}(K))return cu("WeakMap");if(function qp(X){if(!ze||!X||"object"!=typeof X)return!1;try{ze.call(X,ze);try{Ue.call(X,Ue)}catch{return!0}return X instanceof WeakSet}catch{}return!1}(K))return cu("WeakSet");if(function Xp(X){if(!se||!X||"object"!=typeof X)return!1;try{return se.call(X),!0}catch{}return!1}(K))return cu("WeakRef");if(function Zt(X){return!("[object Number]"!==Dr(X)||k&&"object"==typeof X&&k in X)}(K))return So(cn(Number(K)));if(function Qt(X){if(!X||"object"!=typeof X||!It)return!1;try{return It.call(X),!0}catch{}return!1}(K))return So(cn(It.call(K)));if(function Tt(X){return!("[object Boolean]"!==Dr(X)||k&&"object"==typeof X&&k in X)}(K))return So(ke.call(K));if(function Ke(X){return!("[object String]"!==Dr(X)||k&&"object"==typeof X&&k in X)}(K))return So(cn(String(K)));if(typeof window<"u"&&K===window)return"{ [object Window] }";if(K===global)return"{ [object globalThis] }";if(!function ge(X){return!("[object Date]"!==Dr(X)||k&&"object"==typeof X&&k in X)}(K)&&!He(K)){var fu=Ma(K,cn),hh=Z?Z(K)===Object.prototype:K instanceof Object||K.constructor===Object,Oa=K instanceof Object?"":"null prototype",dh=!hh&&k&&Object(K)===K&&k in K?ee.call(Dr(K),8,-1):Oa?"Object":"",Dn=(hh||"function"!=typeof K.constructor?"":K.constructor.name?K.constructor.name+" ":"")+(dh||Oa?"["+U.call(Ae.call([],dh||[],Oa||[]),": ")+"] ":"");return 0===fu.length?Dn+"{}":as?Dn+"{"+Ia(fu,as)+"}":Dn+"{ "+U.call(fu,", ")+" }"}return String(K)};var dt=Object.prototype.hasOwnProperty||function(X){return X in this};function st(X,K){return dt.call(X,K)}function Dr(X){return Te.call(X)}function To(X,K){if(X.indexOf)return X.indexOf(K);for(var Lt=0,jt=X.length;Lt<jt;Lt++)if(X[Lt]===K)return Lt;return-1}function uu(X,K){if(X.length>K.maxStringLength){var Lt=X.length-K.maxStringLength,jt="... "+Lt+" more character"+(Lt>1?"s":"");return uu(ee.call(X,0,K.maxStringLength),K)+jt}return fe(pe.call(pe.call(X,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,Yp),"single",K)}function Yp(X){var K=X.charCodeAt(0),Lt={8:"b",9:"t",10:"n",12:"f",13:"r"}[K];return Lt?"\\"+Lt:"\\x"+(K<16?"0":"")+xe.call(K.toString(16))}function So(X){return"Object("+X+")"}function cu(X){return X+" { ? }"}function ci(X,K,Lt,jt){return X+" ("+K+") {"+(jt?Ia(Lt,jt):U.call(Lt,", "))+"}"}function Ia(X,K){if(0===X.length)return"";var Lt="\n"+K.prev+K.base;return Lt+U.call(X,","+Lt)+"\n"+K.prev}function Ma(X,K){var Lt=oe(X),jt=[];if(Lt){jt.length=X.length;for(var rr=0;rr<X.length;rr++)jt[rr]=st(X,rr)?K(X[rr],X):""}var Oi,St="function"==typeof ut?ut(X):[];if(N){Oi={};for(var ss=0;ss<St.length;ss++)Oi["$"+St[ss]]=St[ss]}for(var Jr in X)!st(X,Jr)||Lt&&String(Number(Jr))===Jr&&Jr<X.length||N&&Oi["$"+Jr]instanceof Symbol||($.call(/[^\w$]/,Jr)?jt.push(K(Jr,X)+": "+K(X[Jr],X)):jt.push(Jr+": "+K(X[Jr],X)));if("function"==typeof ut)for(var os=0;os<St.length;os++)O.call(X,St[os])&&jt.push("["+K(St[os])+"]: "+K(X[St[os]],X));return jt}},511:(Ye,yt,_e)=>{"use strict";var q=_e(203),Ce=_e(484),Me=_e(27)(),Oe=_e(378),Se=q("%TypeError%"),De=q("%Math.floor%");Ye.exports=function(ue,de){if("function"!=typeof ue)throw new Se("`fn` is not a function");if("number"!=typeof de||de<0||de>4294967295||De(de)!==de)throw new Se("`length` must be a positive 32-bit integer");var Ue=arguments.length>2&&!!arguments[2],ve=!0,ze=!0;if("length"in ue&&Oe){var Ve=Oe(ue,"length");Ve&&!Ve.configurable&&(ve=!1),Ve&&!Ve.writable&&(ze=!1)}return(ve||ze||!Ue)&&(Me?Ce(ue,"length",de,!0,!0):Ce(ue,"length",de)),ue}},475:(Ye,yt,_e)=>{"use strict";var q=_e(203),Ce=_e(834),Me=_e(24),Oe=q("%TypeError%"),Se=q("%WeakMap%",!0),De=q("%Map%",!0),Ee=Ce("WeakMap.prototype.get",!0),ue=Ce("WeakMap.prototype.set",!0),de=Ce("WeakMap.prototype.has",!0),Ue=Ce("Map.prototype.get",!0),ve=Ce("Map.prototype.set",!0),ze=Ce("Map.prototype.has",!0),Ve=function(B,J){for(var pe,ee=B;null!==(pe=ee.next);ee=pe)if(pe.key===J)return ee.next=pe.next,pe.next=B.next,B.next=pe,pe};Ye.exports=function(){var J,ee,pe,xe={assert:function(ye){if(!xe.has(ye))throw new Oe("Side channel does not contain "+Me(ye))},get:function(ye){if(Se&&ye&&("object"==typeof ye||"function"==typeof ye)){if(J)return Ee(J,ye)}else if(De){if(ee)return Ue(ee,ye)}else if(pe)return function(B,J){var ee=Ve(B,J);return ee&&ee.value}(pe,ye)},has:function(ye){if(Se&&ye&&("object"==typeof ye||"function"==typeof ye)){if(J)return de(J,ye)}else if(De){if(ee)return ze(ee,ye)}else if(pe)return function(B,J){return!!Ve(B,J)}(pe,ye);return!1},set:function(ye,$){Se&&ye&&("object"==typeof ye||"function"==typeof ye)?(J||(J=new Se),ue(J,ye,$)):De?(ee||(ee=new De),ve(ee,ye,$)):(pe||(pe={key:{},next:null}),function(B,J,ee){var pe=Ve(B,J);pe?pe.value=ee:B.next={key:J,next:B.next,value:ee}}(pe,ye,$))}};return xe}},308:function(Ye,yt,_e){var q;Ye=_e.nmd(Ye),function(Ce){"object"==typeof global&&global;var De,Ee=2147483647,Te=/^xn--/,B=/[^\x20-\x7E]/,J=/[\x2E\u3002\uFF0E\uFF61]/g,ee={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},xe=Math.floor,ye=String.fromCharCode;function Ae(V){throw new RangeError(ee[V])}function U(V,W){for(var ne=V.length,fe=[];ne--;)fe[ne]=W(V[ne]);return fe}function pt(V,W){var ne=V.split("@"),fe="";return ne.length>1&&(fe=ne[0]+"@",V=ne[1]),fe+U((V=V.replace(J,".")).split("."),W).join(".")}function rt(V){for(var me,oe,W=[],ne=0,fe=V.length;ne<fe;)(me=V.charCodeAt(ne++))>=55296&&me<=56319&&ne<fe?56320==(64512&(oe=V.charCodeAt(ne++)))?W.push(((1023&me)<<10)+(1023&oe)+65536):(W.push(me),ne--):W.push(me);return W}function It(V){return U(V,function(W){var ne="";return W>65535&&(ne+=ye((W-=65536)>>>10&1023|55296),W=56320|1023&W),ne+ye(W)}).join("")}function ut(V){return V-48<10?V-22:V-65<26?V-65:V-97<26?V-97:36}function he(V,W){return V+22+75*(V<26)-((0!=W)<<5)}function N(V,W,ne){var fe=0;for(V=ne?xe(V/700):V>>1,V+=xe(V/W);V>455;fe+=36)V=xe(V/35);return xe(fe+36*V/(V+38))}function k(V){var fe,He,we,Ke,Zt,Tt,Rt,Qt,dt,st,W=[],ne=V.length,me=0,oe=128,ge=72;for((He=V.lastIndexOf("-"))<0&&(He=0),we=0;we<He;++we)V.charCodeAt(we)>=128&&Ae("not-basic"),W.push(V.charCodeAt(we));for(Ke=He>0?He+1:0;Ke<ne;){for(Zt=me,Tt=1,Rt=36;Ke>=ne&&Ae("invalid-input"),((Qt=ut(V.charCodeAt(Ke++)))>=36||Qt>xe((Ee-me)/Tt))&&Ae("overflow"),me+=Qt*Tt,!(Qt<(dt=Rt<=ge?1:Rt>=ge+26?26:Rt-ge));Rt+=36)Tt>xe(Ee/(st=36-dt))&&Ae("overflow"),Tt*=st;ge=N(me-Zt,fe=W.length+1,0==Zt),xe(me/fe)>Ee-oe&&Ae("overflow"),oe+=xe(me/fe),me%=fe,W.splice(me++,0,oe)}return It(W)}function O(V){var W,ne,fe,me,oe,ge,He,we,Ke,Zt,Tt,Qt,dt,st,Dr,Rt=[];for(Qt=(V=rt(V)).length,W=128,ne=0,oe=72,ge=0;ge<Qt;++ge)(Tt=V[ge])<128&&Rt.push(ye(Tt));for(fe=me=Rt.length,me&&Rt.push("-");fe<Qt;){for(He=Ee,ge=0;ge<Qt;++ge)(Tt=V[ge])>=W&&Tt<He&&(He=Tt);for(He-W>xe((Ee-ne)/(dt=fe+1))&&Ae("overflow"),ne+=(He-W)*dt,W=He,ge=0;ge<Qt;++ge)if((Tt=V[ge])<W&&++ne>Ee&&Ae("overflow"),Tt==W){for(we=ne,Ke=36;!(we<(Zt=Ke<=oe?1:Ke>=oe+26?26:Ke-oe));Ke+=36)Rt.push(ye(he(Zt+(Dr=we-Zt)%(st=36-Zt),0))),we=xe(Dr/st);Rt.push(ye(he(we,0))),oe=N(ne,dt,fe==me),ne=0,++fe}++ne,++W}return Rt.join("")}De={version:"1.4.1",ucs2:{decode:rt,encode:It},decode:k,encode:O,toASCII:function Y(V){return pt(V,function(W){return B.test(W)?"xn--"+O(W):W})},toUnicode:function Z(V){return pt(V,function(W){return Te.test(W)?k(W.slice(4).toLowerCase()):W})}},void 0!==(q=function(){return De}.call(yt,_e,yt,Ye))&&(Ye.exports=q)}()},277:Ye=>{"use strict";var yt=String.prototype.replace,_e=/%20/g;Ye.exports={default:"RFC3986",formatters:{RFC1738:function(Ce){return yt.call(Ce,_e,"+")},RFC3986:function(Ce){return String(Ce)}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},11:(Ye,yt,_e)=>{"use strict";var q=_e(902),Ce=_e(830),Me=_e(277);Ye.exports={formats:Me,parse:Ce,stringify:q}},830:(Ye,yt,_e)=>{"use strict";var q=_e(295),Ce=Object.prototype.hasOwnProperty,Me=Array.isArray,Oe={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:q.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},De=function(Ve,se){return Ve&&"string"==typeof Ve&&se.comma&&Ve.indexOf(",")>-1?Ve.split(","):Ve},ve=function(se,ke,Te,B){if(se){var J=Te.allowDots?se.replace(/\.([^.[]+)/g,"[$1]"):se,pe=/(\[[^[\]]*])/g,xe=Te.depth>0&&/(\[[^[\]]*])/.exec(J),ye=xe?J.slice(0,xe.index):J,$=[];if(ye){if(!Te.plainObjects&&Ce.call(Object.prototype,ye)&&!Te.allowPrototypes)return;$.push(ye)}for(var Ae=0;Te.depth>0&&null!==(xe=pe.exec(J))&&Ae<Te.depth;){if(Ae+=1,!Te.plainObjects&&Ce.call(Object.prototype,xe[1].slice(1,-1))&&!Te.allowPrototypes)return;$.push(xe[1])}return xe&&$.push("["+J.slice(xe.index)+"]"),function(Ve,se,ke,Te){for(var B=Te?se:De(se,ke),J=Ve.length-1;J>=0;--J){var ee,pe=Ve[J];if("[]"===pe&&ke.parseArrays)ee=[].concat(B);else{ee=ke.plainObjects?Object.create(null):{};var xe="["===pe.charAt(0)&&"]"===pe.charAt(pe.length-1)?pe.slice(1,-1):pe,ye=parseInt(xe,10);ke.parseArrays||""!==xe?!isNaN(ye)&&pe!==xe&&String(ye)===xe&&ye>=0&&ke.parseArrays&&ye<=ke.arrayLimit?(ee=[])[ye]=B:"__proto__"!==xe&&(ee[xe]=B):ee={0:B}}B=ee}return B}($,ke,Te,B)}};Ye.exports=function(Ve,se){var ke=function(se){if(!se)return Oe;if(null!=se.decoder&&"function"!=typeof se.decoder)throw new TypeError("Decoder has to be a function.");if(typeof se.charset<"u"&&"utf-8"!==se.charset&&"iso-8859-1"!==se.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");return{allowDots:typeof se.allowDots>"u"?Oe.allowDots:!!se.allowDots,allowPrototypes:"boolean"==typeof se.allowPrototypes?se.allowPrototypes:Oe.allowPrototypes,allowSparse:"boolean"==typeof se.allowSparse?se.allowSparse:Oe.allowSparse,arrayLimit:"number"==typeof se.arrayLimit?se.arrayLimit:Oe.arrayLimit,charset:typeof se.charset>"u"?Oe.charset:se.charset,charsetSentinel:"boolean"==typeof se.charsetSentinel?se.charsetSentinel:Oe.charsetSentinel,comma:"boolean"==typeof se.comma?se.comma:Oe.comma,decoder:"function"==typeof se.decoder?se.decoder:Oe.decoder,delimiter:"string"==typeof se.delimiter||q.isRegExp(se.delimiter)?se.delimiter:Oe.delimiter,depth:"number"==typeof se.depth||!1===se.depth?+se.depth:Oe.depth,ignoreQueryPrefix:!0===se.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof se.interpretNumericEntities?se.interpretNumericEntities:Oe.interpretNumericEntities,parameterLimit:"number"==typeof se.parameterLimit?se.parameterLimit:Oe.parameterLimit,parseArrays:!1!==se.parseArrays,plainObjects:"boolean"==typeof se.plainObjects?se.plainObjects:Oe.plainObjects,strictNullHandling:"boolean"==typeof se.strictNullHandling?se.strictNullHandling:Oe.strictNullHandling}}(se);if(""===Ve||null===Ve||typeof Ve>"u")return ke.plainObjects?Object.create(null):{};for(var Te="string"==typeof Ve?function(se,ke){var xe,Te={__proto__:null},ee=(ke.ignoreQueryPrefix?se.replace(/^\?/,""):se).split(ke.delimiter,ke.parameterLimit===1/0?void 0:ke.parameterLimit),pe=-1,ye=ke.charset;if(ke.charsetSentinel)for(xe=0;xe<ee.length;++xe)0===ee[xe].indexOf("utf8=")&&("utf8=%E2%9C%93"===ee[xe]?ye="utf-8":"utf8=%26%2310003%3B"===ee[xe]&&(ye="iso-8859-1"),pe=xe,xe=ee.length);for(xe=0;xe<ee.length;++xe)if(xe!==pe){var pt,rt,$=ee[xe],Ae=$.indexOf("]="),U=-1===Ae?$.indexOf("="):Ae+1;-1===U?(pt=ke.decoder($,Oe.decoder,ye,"key"),rt=ke.strictNullHandling?null:""):(pt=ke.decoder($.slice(0,U),Oe.decoder,ye,"key"),rt=q.maybeMap(De($.slice(U+1),ke),function(It){return ke.decoder(It,Oe.decoder,ye,"value")})),rt&&ke.interpretNumericEntities&&"iso-8859-1"===ye&&(rt=rt.replace(/&#(\d+);/g,function(se,ke){return String.fromCharCode(parseInt(ke,10))})),$.indexOf("[]=")>-1&&(rt=Me(rt)?[rt]:rt),Te[pt]=Ce.call(Te,pt)?q.combine(Te[pt],rt):rt}return Te}(Ve,ke):Ve,B=ke.plainObjects?Object.create(null):{},J=Object.keys(Te),ee=0;ee<J.length;++ee){var pe=J[ee],xe=ve(pe,Te[pe],ke,"string"==typeof Ve);B=q.merge(B,xe,ke)}return!0===ke.allowSparse?B:q.compact(B)}},902:(Ye,yt,_e)=>{"use strict";var q=_e(475),Ce=_e(295),Me=_e(277),Oe=Object.prototype.hasOwnProperty,Se={brackets:function(B){return B+"[]"},comma:"comma",indices:function(B,J){return B+"["+J+"]"},repeat:function(B){return B}},De=Array.isArray,Ee=Array.prototype.push,ue=function(Te,B){Ee.apply(Te,De(B)?B:[B])},de=Date.prototype.toISOString,Ue=Me.default,ve={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:Ce.encode,encodeValuesOnly:!1,format:Ue,formatter:Me.formatters[Ue],indices:!1,serializeDate:function(B){return de.call(B)},skipNulls:!1,strictNullHandling:!1},Ve={},se=function Te(B,J,ee,pe,xe,ye,$,Ae,U,pt,rt,It,ut,he,N,k){for(var O=B,Z=k,Y=0,V=!1;void 0!==(Z=Z.get(Ve))&&!V;){var W=Z.get(B);if(Y+=1,typeof W<"u"){if(W===Y)throw new RangeError("Cyclic object value");V=!0}typeof Z.get(Ve)>"u"&&(Y=0)}if("function"==typeof Ae?O=Ae(J,O):O instanceof Date?O=rt(O):"comma"===ee&&De(O)&&(O=Ce.maybeMap(O,function(Rt){return Rt instanceof Date?rt(Rt):Rt})),null===O){if(xe)return $&&!he?$(J,ve.encoder,N,"key",It):J;O=""}if(function(B){return"string"==typeof B||"number"==typeof B||"boolean"==typeof B||"symbol"==typeof B||"bigint"==typeof B}(O)||Ce.isBuffer(O))return $?[ut(he?J:$(J,ve.encoder,N,"key",It))+"="+ut($(O,ve.encoder,N,"value",It))]:[ut(J)+"="+ut(String(O))];var me,fe=[];if(typeof O>"u")return fe;if("comma"===ee&&De(O))he&&$&&(O=Ce.maybeMap(O,$)),me=[{value:O.length>0?O.join(",")||null:void 0}];else if(De(Ae))me=Ae;else{var oe=Object.keys(O);me=U?oe.sort(U):oe}for(var ge=pe&&De(O)&&1===O.length?J+"[]":J,He=0;He<me.length;++He){var we=me[He],Ke="object"==typeof we&&typeof we.value<"u"?we.value:O[we];if(!ye||null!==Ke){var Zt=De(O)?"function"==typeof ee?ee(ge,we):ge:ge+(pt?"."+we:"["+we+"]");k.set(B,Y);var Tt=q();Tt.set(Ve,k),ue(fe,Te(Ke,Zt,ee,pe,xe,ye,"comma"===ee&&he&&De(O)?null:$,Ae,U,pt,rt,It,ut,he,N,Tt))}}return fe};Ye.exports=function(Te,B){var pe,J=Te,ee=function(B){if(!B)return ve;if(null!==B.encoder&&typeof B.encoder<"u"&&"function"!=typeof B.encoder)throw new TypeError("Encoder has to be a function.");var J=B.charset||ve.charset;if(typeof B.charset<"u"&&"utf-8"!==B.charset&&"iso-8859-1"!==B.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var ee=Me.default;if(typeof B.format<"u"){if(!Oe.call(Me.formatters,B.format))throw new TypeError("Unknown format option provided.");ee=B.format}var pe=Me.formatters[ee],xe=ve.filter;return("function"==typeof B.filter||De(B.filter))&&(xe=B.filter),{addQueryPrefix:"boolean"==typeof B.addQueryPrefix?B.addQueryPrefix:ve.addQueryPrefix,allowDots:typeof B.allowDots>"u"?ve.allowDots:!!B.allowDots,charset:J,charsetSentinel:"boolean"==typeof B.charsetSentinel?B.charsetSentinel:ve.charsetSentinel,delimiter:typeof B.delimiter>"u"?ve.delimiter:B.delimiter,encode:"boolean"==typeof B.encode?B.encode:ve.encode,encoder:"function"==typeof B.encoder?B.encoder:ve.encoder,encodeValuesOnly:"boolean"==typeof B.encodeValuesOnly?B.encodeValuesOnly:ve.encodeValuesOnly,filter:xe,format:ee,formatter:pe,serializeDate:"function"==typeof B.serializeDate?B.serializeDate:ve.serializeDate,skipNulls:"boolean"==typeof B.skipNulls?B.skipNulls:ve.skipNulls,sort:"function"==typeof B.sort?B.sort:null,strictNullHandling:"boolean"==typeof B.strictNullHandling?B.strictNullHandling:ve.strictNullHandling}}(B);"function"==typeof ee.filter?J=(0,ee.filter)("",J):De(ee.filter)&&(pe=ee.filter);var ye=[];if("object"!=typeof J||null===J)return"";var Ae=Se[B&&B.arrayFormat in Se?B.arrayFormat:B&&"indices"in B?B.indices?"indices":"repeat":"indices"];if(B&&"commaRoundTrip"in B&&"boolean"!=typeof B.commaRoundTrip)throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var U="comma"===Ae&&B&&B.commaRoundTrip;pe||(pe=Object.keys(J)),ee.sort&&pe.sort(ee.sort);for(var pt=q(),rt=0;rt<pe.length;++rt){var It=pe[rt];ee.skipNulls&&null===J[It]||ue(ye,se(J[It],It,Ae,U,ee.strictNullHandling,ee.skipNulls,ee.encode?ee.encoder:null,ee.filter,ee.sort,ee.allowDots,ee.serializeDate,ee.format,ee.formatter,ee.encodeValuesOnly,ee.charset,pt))}var ut=ye.join(ee.delimiter),he=!0===ee.addQueryPrefix?"?":"";return ee.charsetSentinel&&(he+="iso-8859-1"===ee.charset?"utf8=%26%2310003%3B&":"utf8=%E2%9C%93&"),ut.length>0?he+ut:""}},295:(Ye,yt,_e)=>{"use strict";var q=_e(277),Ce=Object.prototype.hasOwnProperty,Me=Array.isArray,Oe=function(){for(var Te=[],B=0;B<256;++B)Te.push("%"+((B<16?"0":"")+B.toString(16)).toUpperCase());return Te}(),De=function(B,J){for(var ee=J&&J.plainObjects?Object.create(null):{},pe=0;pe<B.length;++pe)typeof B[pe]<"u"&&(ee[pe]=B[pe]);return ee};Ye.exports={arrayToObject:De,assign:function(B,J){return Object.keys(J).reduce(function(ee,pe){return ee[pe]=J[pe],ee},B)},combine:function(B,J){return[].concat(B,J)},compact:function(B){for(var J=[{obj:{o:B},prop:"o"}],ee=[],pe=0;pe<J.length;++pe)for(var xe=J[pe],ye=xe.obj[xe.prop],$=Object.keys(ye),Ae=0;Ae<$.length;++Ae){var U=$[Ae],pt=ye[U];"object"==typeof pt&&null!==pt&&-1===ee.indexOf(pt)&&(J.push({obj:ye,prop:U}),ee.push(pt))}return function(B){for(;B.length>1;){var J=B.pop(),ee=J.obj[J.prop];if(Me(ee)){for(var pe=[],xe=0;xe<ee.length;++xe)typeof ee[xe]<"u"&&pe.push(ee[xe]);J.obj[J.prop]=pe}}}(J),B},decode:function(Te,B,J){var ee=Te.replace(/\+/g," ");if("iso-8859-1"===J)return ee.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(ee)}catch{return ee}},encode:function(B,J,ee,pe,xe){if(0===B.length)return B;var ye=B;if("symbol"==typeof B?ye=Symbol.prototype.toString.call(B):"string"!=typeof B&&(ye=String(B)),"iso-8859-1"===ee)return escape(ye).replace(/%u[0-9a-f]{4}/gi,function(pt){return"%26%23"+parseInt(pt.slice(2),16)+"%3B"});for(var $="",Ae=0;Ae<ye.length;++Ae){var U=ye.charCodeAt(Ae);45===U||46===U||95===U||126===U||U>=48&&U<=57||U>=65&&U<=90||U>=97&&U<=122||xe===q.RFC1738&&(40===U||41===U)?$+=ye.charAt(Ae):U<128?$+=Oe[U]:U<2048?$+=Oe[192|U>>6]+Oe[128|63&U]:U<55296||U>=57344?$+=Oe[224|U>>12]+Oe[128|U>>6&63]+Oe[128|63&U]:(U=65536+((1023&U)<<10|1023&ye.charCodeAt(Ae+=1)),$+=Oe[240|U>>18]+Oe[128|U>>12&63]+Oe[128|U>>6&63]+Oe[128|63&U])}return $},isBuffer:function(B){return!(!B||"object"!=typeof B||!(B.constructor&&B.constructor.isBuffer&&B.constructor.isBuffer(B)))},isRegExp:function(B){return"[object RegExp]"===Object.prototype.toString.call(B)},maybeMap:function(B,J){if(Me(B)){for(var ee=[],pe=0;pe<B.length;pe+=1)ee.push(J(B[pe]));return ee}return J(B)},merge:function Te(B,J,ee){if(!J)return B;if("object"!=typeof J){if(Me(B))B.push(J);else{if(!B||"object"!=typeof B)return[B,J];(ee&&(ee.plainObjects||ee.allowPrototypes)||!Ce.call(Object.prototype,J))&&(B[J]=!0)}return B}if(!B||"object"!=typeof B)return[B].concat(J);var pe=B;return Me(B)&&!Me(J)&&(pe=De(B,ee)),Me(B)&&Me(J)?(J.forEach(function(xe,ye){if(Ce.call(B,ye)){var $=B[ye];$&&"object"==typeof $&&xe&&"object"==typeof xe?B[ye]=Te($,xe,ee):B.push(xe)}else B[ye]=xe}),B):Object.keys(J).reduce(function(xe,ye){var $=J[ye];return xe[ye]=Ce.call(xe,ye)?Te(xe[ye],$,ee):$,xe},pe)}}},762:(Ye,yt,_e)=>{"use strict";var Ce=_e(308);function Me(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var Oe=/^([a-z0-9.+-]+:)/i,Se=/:[0-9]*$/,De=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,ue=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),de=["'"].concat(ue),Ue=["%","/","?",";","#"].concat(de),ve=["/","?","#"],Ve=/^[+a-z0-9A-Z_-]{0,63}$/,se=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,ke={javascript:!0,"javascript:":!0},Te={javascript:!0,"javascript:":!0},B={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},J=_e(11);function ee($,Ae,U){if($&&"object"==typeof $&&$ instanceof Me)return $;var pt=new Me;return pt.parse($,Ae,U),pt}Me.prototype.parse=function($,Ae,U){if("string"!=typeof $)throw new TypeError("Parameter 'url' must be a string, not "+typeof $);var pt=$.indexOf("?"),rt=-1!==pt&&pt<$.indexOf("#")?"?":"#",It=$.split(rt);It[0]=It[0].replace(/\\/g,"/");var he=$=It.join(rt);if(he=he.trim(),!U&&1===$.split("#").length){var N=De.exec(he);if(N)return this.path=he,this.href=he,this.pathname=N[1],N[2]?(this.search=N[2],this.query=Ae?J.parse(this.search.substr(1)):this.search.substr(1)):Ae&&(this.search="",this.query={}),this}var k=Oe.exec(he);if(k){var O=(k=k[0]).toLowerCase();this.protocol=O,he=he.substr(k.length)}if(U||k||he.match(/^\/\/[^@/]+@[^@/]+/)){var Z="//"===he.substr(0,2);Z&&(!k||!Te[k])&&(he=he.substr(2),this.slashes=!0)}if(!Te[k]&&(Z||k&&!B[k])){for(var Y=-1,V=0;V<ve.length;V++)-1!==(W=he.indexOf(ve[V]))&&(-1===Y||W<Y)&&(Y=W);var ne,fe;for(-1!==(fe=-1===Y?he.lastIndexOf("@"):he.lastIndexOf("@",Y))&&(ne=he.slice(0,fe),he=he.slice(fe+1),this.auth=decodeURIComponent(ne)),Y=-1,V=0;V<Ue.length;V++){var W;-1!==(W=he.indexOf(Ue[V]))&&(-1===Y||W<Y)&&(Y=W)}-1===Y&&(Y=he.length),this.host=he.slice(0,Y),he=he.slice(Y),this.parseHost(),this.hostname=this.hostname||"";var me="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!me)for(var oe=this.hostname.split(/\./),ge=(V=0,oe.length);V<ge;V++){var He=oe[V];if(He&&!He.match(Ve)){for(var we="",Ke=0,Zt=He.length;Ke<Zt;Ke++)He.charCodeAt(Ke)>127?we+="x":we+=He[Ke];if(!we.match(Ve)){var Tt=oe.slice(0,V),Rt=oe.slice(V+1),Qt=He.match(se);Qt&&(Tt.push(Qt[1]),Rt.unshift(Qt[2])),Rt.length&&(he="/"+Rt.join(".")+he),this.hostname=Tt.join(".");break}}}this.hostname=this.hostname.length>255?"":this.hostname.toLowerCase(),me||(this.hostname=Ce.toASCII(this.hostname)),this.host=(this.hostname||"")+(this.port?":"+this.port:""),this.href+=this.host,me&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==he[0]&&(he="/"+he))}if(!ke[O])for(V=0,ge=de.length;V<ge;V++){var Dr=de[V];if(-1!==he.indexOf(Dr)){var Da=encodeURIComponent(Dr);Da===Dr&&(Da=escape(Dr)),he=he.split(Dr).join(Da)}}var To=he.indexOf("#");-1!==To&&(this.hash=he.substr(To),he=he.slice(0,To));var Bs=he.indexOf("?");return-1!==Bs?(this.search=he.substr(Bs),this.query=he.substr(Bs+1),Ae&&(this.query=J.parse(this.query)),he=he.slice(0,Bs)):Ae&&(this.search="",this.query={}),he&&(this.pathname=he),B[O]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(this.path=(this.pathname||"")+(this.search||"")),this.href=this.format(),this},Me.prototype.format=function(){var $=this.auth||"";$&&($=($=encodeURIComponent($)).replace(/%3A/i,":"),$+="@");var Ae=this.protocol||"",U=this.pathname||"",pt=this.hash||"",rt=!1,It="";this.host?rt=$+this.host:this.hostname&&(rt=$+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(rt+=":"+this.port)),this.query&&"object"==typeof this.query&&Object.keys(this.query).length&&(It=J.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var ut=this.search||It&&"?"+It||"";return Ae&&":"!==Ae.substr(-1)&&(Ae+=":"),this.slashes||(!Ae||B[Ae])&&!1!==rt?(rt="//"+(rt||""),U&&"/"!==U.charAt(0)&&(U="/"+U)):rt||(rt=""),pt&&"#"!==pt.charAt(0)&&(pt="#"+pt),ut&&"?"!==ut.charAt(0)&&(ut="?"+ut),Ae+rt+(U=U.replace(/[?#]/g,function(he){return encodeURIComponent(he)}))+(ut=ut.replace("#","%23"))+pt},Me.prototype.resolve=function($){return this.resolveObject(ee($,!1,!0)).format()},Me.prototype.resolveObject=function($){if("string"==typeof $){var Ae=new Me;Ae.parse($,!1,!0),$=Ae}for(var U=new Me,pt=Object.keys(this),rt=0;rt<pt.length;rt++){var It=pt[rt];U[It]=this[It]}if(U.hash=$.hash,""===$.href)return U.href=U.format(),U;if($.slashes&&!$.protocol){for(var ut=Object.keys($),he=0;he<ut.length;he++){var N=ut[he];"protocol"!==N&&(U[N]=$[N])}return B[U.protocol]&&U.hostname&&!U.pathname&&(U.pathname="/",U.path=U.pathname),U.href=U.format(),U}if($.protocol&&$.protocol!==U.protocol){if(!B[$.protocol]){for(var k=Object.keys($),O=0;O<k.length;O++){var Z=k[O];U[Z]=$[Z]}return U.href=U.format(),U}if(U.protocol=$.protocol,$.host||Te[$.protocol])U.pathname=$.pathname;else{for(var ge=($.pathname||"").split("/");ge.length&&!($.host=ge.shift()););$.host||($.host=""),$.hostname||($.hostname=""),""!==ge[0]&&ge.unshift(""),ge.length<2&&ge.unshift(""),U.pathname=ge.join("/")}return U.search=$.search,U.query=$.query,U.host=$.host||"",U.auth=$.auth,U.hostname=$.hostname||$.host,U.port=$.port,(U.pathname||U.search)&&(U.path=(U.pathname||"")+(U.search||"")),U.slashes=U.slashes||$.slashes,U.href=U.format(),U}var W=U.pathname&&"/"===U.pathname.charAt(0),ne=$.host||$.pathname&&"/"===$.pathname.charAt(0),fe=ne||W||U.host&&$.pathname,me=fe,oe=U.pathname&&U.pathname.split("/")||[],He=(ge=$.pathname&&$.pathname.split("/")||[],U.protocol&&!B[U.protocol]);if(He&&(U.hostname="",U.port=null,U.host&&(""===oe[0]?oe[0]=U.host:oe.unshift(U.host)),U.host="",$.protocol&&($.hostname=null,$.port=null,$.host&&(""===ge[0]?ge[0]=$.host:ge.unshift($.host)),$.host=null),fe=fe&&(""===ge[0]||""===oe[0])),ne)U.host=$.host||""===$.host?$.host:U.host,U.hostname=$.hostname||""===$.hostname?$.hostname:U.hostname,U.search=$.search,U.query=$.query,oe=ge;else if(ge.length)oe||(oe=[]),oe.pop(),oe=oe.concat(ge),U.search=$.search,U.query=$.query;else if(null!=$.search)return He&&(U.host=oe.shift(),U.hostname=U.host,(we=!!(U.host&&U.host.indexOf("@")>0)&&U.host.split("@"))&&(U.auth=we.shift(),U.hostname=we.shift(),U.host=U.hostname)),U.search=$.search,U.query=$.query,(null!==U.pathname||null!==U.search)&&(U.path=(U.pathname?U.pathname:"")+(U.search?U.search:"")),U.href=U.format(),U;if(!oe.length)return U.pathname=null,U.path=U.search?"/"+U.search:null,U.href=U.format(),U;for(var Ke=oe.slice(-1)[0],Zt=(U.host||$.host||oe.length>1)&&("."===Ke||".."===Ke)||""===Ke,Tt=0,Rt=oe.length;Rt>=0;Rt--)"."===(Ke=oe[Rt])?oe.splice(Rt,1):".."===Ke?(oe.splice(Rt,1),Tt++):Tt&&(oe.splice(Rt,1),Tt--);if(!fe&&!me)for(;Tt--;Tt)oe.unshift("..");fe&&""!==oe[0]&&(!oe[0]||"/"!==oe[0].charAt(0))&&oe.unshift(""),Zt&&"/"!==oe.join("/").substr(-1)&&oe.push("");var we,Qt=""===oe[0]||oe[0]&&"/"===oe[0].charAt(0);return He&&(U.hostname=Qt?"":oe.length?oe.shift():"",U.host=U.hostname,(we=!!(U.host&&U.host.indexOf("@")>0)&&U.host.split("@"))&&(U.auth=we.shift(),U.hostname=we.shift(),U.host=U.hostname)),(fe=fe||U.host&&oe.length)&&!Qt&&oe.unshift(""),oe.length>0?U.pathname=oe.join("/"):(U.pathname=null,U.path=null),(null!==U.pathname||null!==U.search)&&(U.path=(U.pathname?U.pathname:"")+(U.search?U.search:"")),U.auth=$.auth||U.auth,U.slashes=U.slashes||$.slashes,U.href=U.format(),U},Me.prototype.parseHost=function(){var $=this.host,Ae=Se.exec($);Ae&&(":"!==(Ae=Ae[0])&&(this.port=Ae.substr(1)),$=$.substr(0,$.length-Ae.length)),$&&(this.hostname=$)},yt.Qc=ee,yt.DB=function xe($,Ae){return ee($,!1,!0).resolve(Ae)},yt.WU=function pe($){return"string"==typeof $&&($=ee($)),$ instanceof Me?$.format():Me.prototype.format.call($)}},654:()=>{}},Ye=>{Ye(Ye.s=804)}]);